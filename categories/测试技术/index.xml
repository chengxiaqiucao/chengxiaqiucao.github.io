<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>测试技术 on 秋 草 观 “测” 台</title><link>https://chengxiaqiucao.github.io/categories/%E6%B5%8B%E8%AF%95%E6%8A%80%E6%9C%AF/</link><description>Recent content in 测试技术 on 秋 草 观 “测” 台</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><copyright>|by 城下秋草（公众号： 秋草说测试）</copyright><lastBuildDate>Thu, 19 Jun 2025 00:00:00 +0000</lastBuildDate><atom:link href="https://chengxiaqiucao.github.io/categories/%E6%B5%8B%E8%AF%95%E6%8A%80%E6%9C%AF/index.xml" rel="self" type="application/rss+xml"/><item><title>开源一个测试练习项目，邀请大家共建</title><link>https://chengxiaqiucao.github.io/post/101-testmybookshelf/</link><pubDate>Thu, 19 Jun 2025 00:00:00 +0000</pubDate><guid>https://chengxiaqiucao.github.io/post/101-testmybookshelf/</guid><description>&lt;img src="https://chengxiaqiucao.github.io/post/101-testmybookshelf/snap_20250611.png" alt="Featured image of post 开源一个测试练习项目，邀请大家共建" />&lt;p>之前曾经收集过一些用于测试练习的项目，清单详见（），但这些项目更多还是基于自动化测试练习目的，却很少有真正用于练习软件测试和故障发现能力的项目，所以便萌生了自己做一个这种项目的目的。&lt;/p>
&lt;h3 id="设计思路">设计思路
&lt;/h3>&lt;p>以一个真实需求的的项目开发为例，参照模拟敏捷研发的流程，按Sprint来进行迭代。每个迭代根据指定的需求来进行实现，但同时包含一些注入的已知Bug。&lt;/p>
&lt;p>练习者可以将每个迭代对应的分支（如sprint0，sprint1）看作提测版本进行测试和练习。同时也可以&lt;/p>
&lt;h3 id="诚邀共建">诚邀共建
&lt;/h3>&lt;p>个人力量有限，现邀请各位测试小伙伴一起共同完善该Demo项目，包括完善测试用例，补充存在的Bug清单和其他关联文档等，争取可以为测试初学者提供一个贴合实际软件研发、有实际学习价值的Demo。&lt;/p>
&lt;p>回复 &lt;code>进群&lt;/code> 进入测试交流群，和群友交流测试技术，共同完善和进步~&lt;/p>
&lt;h2 id="项目地址和介绍">项目地址和介绍
&lt;/h2>&lt;p>&lt;a class="link" href="https://github.com/chengxiaqiucao/TestMyBookshelf" target="_blank" rel="noopener"
>https://github.com/chengxiaqiucao/TestMyBookshelf&lt;/a>&lt;/p>
&lt;p>sprint 首页
&lt;img src="https://chengxiaqiucao.github.io/post/101-testmybookshelf/snap_20250611-1.png"
width="1309"
height="392"
srcset="https://chengxiaqiucao.github.io/post/101-testmybookshelf/snap_20250611-1_hu_7443ff5a6cddf002.png 480w, https://chengxiaqiucao.github.io/post/101-testmybookshelf/snap_20250611-1_hu_ff5bd7d93bfa99ee.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="333"
data-flex-basis="801px"
>&lt;/p>
&lt;p>sprint1 首页
&lt;img src="https://chengxiaqiucao.github.io/post/101-testmybookshelf/snap_20250611.png"
width="1323"
height="859"
srcset="https://chengxiaqiucao.github.io/post/101-testmybookshelf/snap_20250611_hu_e37fde2dc07b2672.png 480w, https://chengxiaqiucao.github.io/post/101-testmybookshelf/snap_20250611_hu_77f871333557b07d.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="154"
data-flex-basis="369px"
>&lt;/p>
&lt;p>欢迎多提Issue~~&lt;/p>
&lt;p>ReadMe文档如下：&lt;/p>
&lt;hr>
&lt;h1 id="个人图书管理--我的书架">个人图书管理 &amp;ndash; 我的书架
&lt;/h1>&lt;p>测试练习项目 | 包含注入缺陷的图书管理系统 | FastAPI + SQLite 实现 | 适合 QA 培训使用&lt;/p>
&lt;p>这是一个用于测试练习作用的个人图书管理系统。该项目故意注入了一些典型的 Bug，用于测试人员练习 Bug 发现和验证。&lt;/p>
&lt;h2 id="项目特点">项目特点
&lt;/h2>&lt;ul>
&lt;li>
&lt;p>基础功能完整：实现了图书的增删改查等基本功能&lt;/p>
&lt;/li>
&lt;li>
&lt;p>典型 Bug 注入：包含多个常见的问题场景&lt;/p>
&lt;/li>
&lt;li>
&lt;p>技术栈简单：使用主流但轻量级的技术组合&lt;/p>
&lt;/li>
&lt;li>
&lt;p>适合测试练习：Bug 类型多样，重现步骤清晰&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="使用">使用
&lt;/h2>&lt;p>切换到不同sprint分支，针对分支需求进行测试&lt;/p>
&lt;h2 id="注意事项">注意事项
&lt;/h2>&lt;ul>
&lt;li>
&lt;p>本项目主要用于测试练习，不建议用于生产环境&lt;/p>
&lt;/li>
&lt;li>
&lt;p>所有 Bug 都是故意注入的，用于测试练习&lt;/p>
&lt;/li>
&lt;li>
&lt;p>项目代码中不会标注 Bug 的位置，需要测试人员自行发现&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="测试目标">测试目标
&lt;/h2>&lt;ol>
&lt;li>
&lt;p>验证所有注入的 Bug 是否可重现&lt;/p>
&lt;/li>
&lt;li>
&lt;p>练习 Bug 报告编写&lt;/p>
&lt;/li>
&lt;li>
&lt;p>熟悉常见 Web 应用问题&lt;/p>
&lt;/li>
&lt;li>
&lt;p>提高测试用例设计能力&lt;/p>
&lt;/li>
&lt;/ol></description></item><item><title> 自动化测试中应用Docker的正反两面</title><link>https://chengxiaqiucao.github.io/post/096-docker%E5%9C%A8%E8%87%AA%E5%8A%A8%E5%8C%96/</link><pubDate>Sat, 24 May 2025 00:00:00 +0000</pubDate><guid>https://chengxiaqiucao.github.io/post/096-docker%E5%9C%A8%E8%87%AA%E5%8A%A8%E5%8C%96/</guid><description>&lt;img src="https://chengxiaqiucao.github.io/post/096-docker%E5%9C%A8%E8%87%AA%E5%8A%A8%E5%8C%96/Docker%E8%87%AA%E5%8A%A8%E5%8C%96.png" alt="Featured image of post 自动化测试中应用Docker的正反两面" />&lt;h2 id="前言">前言
&lt;/h2>&lt;p>自动化测试是现如今软件研发中不可或缺的重要环节。而为了确保测试环境的一致性、简化配置并加速测试的反馈，Docker 技术被广泛应用于测试自动化框架，进行容器化封装。&lt;/p>
&lt;p>通常的共识是：一旦测试套件被 Docker 化，即可实现 &lt;strong>“一次构建，处处运行”&lt;/strong> 的理想状态，彻底消除环境差异带来的测试不确定性。&lt;/p>
&lt;p>然而，在实际工程实践中，Docker 化是否真的能完美保障测试执行的一致性？本篇我们将深入探讨 Docker 在自动化测试应用中的承诺与现实，揭示那些可能导致“一致性幻象”的关键因素，并提供相应的规避策略。&lt;/p>
&lt;h2 id="docker-的承诺环境封装与一致性">Docker 的承诺：环境封装与一致性
&lt;/h2>&lt;p>Docker 的核心价值在于通过镜像（Image）封装应用的完整运行环境（操作系统层、运行时、库、工具、代码及配置）。其工作流程通常为：&lt;/p>
&lt;ol>
&lt;li>&lt;strong>构建镜像&lt;/strong>：在开发环境（如开发者本地PC）中，通过 Dockerfile 定义依赖安装和配置步骤，构建包含测试套件及其运行环境的镜像。&lt;/li>
&lt;li>&lt;strong>分发镜像&lt;/strong>：将构建好的镜像推送到镜像仓库（如 Docker Hub, Artifactory）。&lt;/li>
&lt;li>&lt;strong>运行容器&lt;/strong>：在目标环境（CI/CD 流水线、其他开发者机器、生产前环境等）中拉取该镜像并实例化为容器执行测试。&lt;/li>
&lt;/ol>
&lt;p>理论上，此流程应确保无论底层宿主机的具体配置如何，容器内部的测试执行环境始终保持一致，从而消除开发者 &lt;strong>“在我机器上能跑”&lt;/strong> 的经典问题，实现测试结果的可靠复现。&lt;/p>
&lt;h2 id="现实一致性的幻想">现实：一致性的幻想
&lt;/h2>&lt;p>理想丰满，现实骨感。尽管 Docker 提供了强大的环境隔离能力，但以下因素仍可能破坏测试的绝对一致性，形成“幻象”：&lt;/p>
&lt;h3 id="跨平台的宿主架构差异">跨平台的宿主架构差异
&lt;/h3>&lt;p>在 x86 架构宿主机上构建的镜像，在基于 ARM 架构的 CI 节点（如 Apple Silicon M1/M2）上运行时，可能导致依赖特定 CPU 指令集的二进制文件、包含 C 扩展的 Python 包等运行异常或崩溃，致使本地通过的测试在 CI 失败。&lt;/p>
&lt;blockquote>
&lt;p>原因：Docker 容器共享宿主机的内核。不同 CPU 架构（x86_64 vs arm64）的指令集不兼容。&lt;/p>&lt;/blockquote>
&lt;h4 id="如何解决">如何解决？
&lt;/h4>&lt;ul>
&lt;li>&lt;strong>多架构镜像构建&lt;/strong>：使用 &lt;code>docker buildx&lt;/code> 工具构建支持多平台（如 linux/amd64, linux/arm64）的镜像。&lt;/li>
&lt;li>&lt;strong>显式指定平台&lt;/strong>：在运行或构建时通过 &lt;code>--platform&lt;/code> 参数强制指定目标平台（如 &lt;code>docker run --platform linux/amd64 my-test-image&lt;/code>）。&lt;/li>
&lt;/ul>
&lt;h3 id="外部依赖">外部依赖
&lt;/h3>&lt;p>测试容器内运行良好，但若测试用例需要访问容器外的真实服务（数据库、API、S3、需 VPN 访问的内部系统），则测试结果可能受外部服务的状态、网络延迟、DNS 解析差异、防火墙规则或 VPN 连接状态影响而波动。&lt;/p>
&lt;blockquote>
&lt;p>原因：Docker 容器化的是测试套件本身，而非其依赖的所有外部系统。网络请求突破了容器的隔离边界。&lt;/p>&lt;/blockquote>
&lt;h4 id="如何解决-1">如何解决？
&lt;/h4>&lt;ul>
&lt;li>&lt;strong>依赖容器化&lt;/strong>：使用 Docker Compose 在测试运行时动态拉起所需的外部服务（如数据库、Mock 服务器）作为独立的容器，并与测试容器建立内部网络连接。&lt;/li>
&lt;li>&lt;strong>Mock/Stub 技术&lt;/strong>：在单元测试和集成测试中广泛应用 Mock 和 Stub 技术替代真实的外部依赖调用。&lt;/li>
&lt;li>&lt;strong>网络环境控制&lt;/strong>：严格管理测试环境的网络配置（DNS、代理、防火墙），确保其可预测性。&lt;/li>
&lt;/ul>
&lt;h3 id="宿主操作系统差异">宿主操作系统差异
&lt;/h3>&lt;p>在 Linux 宿主机上运行正常的挂载卷（Volume Mounts）操作或网络访问（&lt;code>localhost&lt;/code>），在 macOS 或 Windows（通过 Docker Desktop）上可能出现文件权限错误、符号链接失效、换行符（CRLF vs LF）问题、&lt;code>inotify&lt;/code> 事件监听失效，或 &lt;code>localhost&lt;/code> 指向歧义。&lt;/p>
&lt;blockquote>
&lt;p>原因：虽然容器内 OS 一致，但 Docker 与宿主 OS 交互的机制存在差异：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>文件卷挂载&lt;/strong>：涉及主机文件系统到容器文件系统的映射，不同 OS 对文件权限、元数据、事件通知的支持不同。&lt;/li>
&lt;li>&lt;strong>网络模型&lt;/strong>：在 Linux 上，容器网络通常更直接集成；在 macOS/Windows 上，Docker Desktop 使用虚拟机桥接，访问宿主机服务需使用特殊主机名 &lt;code>host.docker.internal&lt;/code> 而非 &lt;code>localhost&lt;/code>。&lt;/li>
&lt;/ul>&lt;/blockquote>
&lt;h4 id="如何解决-2">如何解决？
&lt;/h4>&lt;ul>
&lt;li>&lt;strong>理解平台差异&lt;/strong>：明确意识到 Docker 并非完全 OS 无关，其行为受宿主机影响。&lt;/li>
&lt;li>&lt;strong>谨慎使用挂载卷&lt;/strong>：避免测试核心逻辑过度依赖主机卷挂载，尤其对于写操作（如生成报告、缓存）。优先使用容器内路径或复制（&lt;code>COPY&lt;/code>）机制。如需挂载，注意文件权限和换行符问题。&lt;/li>
&lt;li>&lt;strong>使用正确的网络访问方式&lt;/strong>：在容器内访问宿主机服务时，统一使用 &lt;code>host.docker.internal&lt;/code>（Mac/Windows）或了解 Docker 网络模式（bridge/host）下的服务访问规则（Compose 服务名）。避免硬编码 &lt;code>localhost&lt;/code>。&lt;/li>
&lt;/ul>
&lt;h3 id="资源约束">资源约束
&lt;/h3>&lt;p>在资源充沛的本地开发机（如 16 核 32GB RAM）上测试通过，但在资源受限的 CI 节点（可能 CPU 被限流、内存不足、或与其他任务共享资源）上运行时，测试因超时、资源竞争（CPU、IO）而失败或变得不稳定（Flaky）。&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>原因&lt;/strong>：Docker 容器共享宿主机的物理资源（CPU、内存、磁盘 IO、网络带宽）。CI 环境的资源配额通常低于开发机且存在竞争。&lt;/p>&lt;/blockquote>
&lt;h4 id="如何解决-3">如何解决？
&lt;/h4>&lt;ul>
&lt;li>&lt;strong>资源限制与监控&lt;/strong>：在 Docker 运行命令或 Compose 文件中为测试容器明确设置资源限制（&lt;code>--cpus&lt;/code>, &lt;code>--memory&lt;/code>），使其更接近 CI 环境。监控 CI 节点的资源使用情况。&lt;/li>
&lt;li>&lt;strong>性能优化&lt;/strong>：优化测试用例和框架本身，减少资源消耗（如并行化控制、避免内存泄漏、优化 I/O 操作）。&lt;/li>
&lt;li>&lt;strong>选择匹配的 CI 环境&lt;/strong>：确保 CI 环境的基础资源配置能满足测试运行的最低要求。&lt;/li>
&lt;/ul>
&lt;h3 id="可变依赖与版本漂移latest标签的隐患">可变依赖与版本漂移：“latest”标签的隐患
&lt;/h3>&lt;p>镜像构建时使用基础镜像标签 &lt;code>FROM python:latest&lt;/code> 或未严格锁定依赖版本 &lt;code>pip install -r requirements.txt&lt;/code>（未使用 &lt;code>pip freeze&lt;/code> 或版本锁文件），导致后续构建的镜像因底层依赖（Python 解释器、库）的意外升级而引入不兼容或 Bug，破坏测试稳定性。&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>原因&lt;/strong>：依赖项的“latest”标签或未锁定的版本号会随时间推移指向新版本，带来不确定性。&lt;/p>&lt;/blockquote>
&lt;h4 id="如何解决-4">如何解决？
&lt;/h4>&lt;ul>
&lt;li>&lt;strong>严格版本锁定&lt;/strong>：在 Dockerfile 中使用确定版本的基础镜像标签（如 &lt;code>FROM python:3.11-slim&lt;/code>）。使用版本锁文件（如 &lt;code>requirements.txt&lt;/code> 明确每个依赖的版本号，或使用 &lt;code>poetry.lock&lt;/code>/&lt;code>Pipfile.lock&lt;/code>）管理依赖项。&lt;/li>
&lt;li>&lt;strong>可重现的构建&lt;/strong>：确保基于相同的锁文件，每次构建都能生成完全一致的镜像。定期有计划地更新依赖版本并重新测试验证。&lt;/li>
&lt;/ul>
&lt;h2 id="理性看待docker-的价值与工程实践">理性看待Docker 的价值与工程实践
&lt;/h2>&lt;p>尽管存在上述诸多问题，我们还是&lt;strong>不应否定 Docker 在测试自动化中的巨大价值&lt;/strong>。它在环境标准化、简化依赖管理、让CI/CD流水线更易管理等方面，依然有着不可替代的优势。&lt;/p>
&lt;p>所以应用Docker，关键在于理解：&lt;strong>Docker 是实现一致性的强大工具，但非一劳永逸的“银弹”&lt;/strong>。技术的应用还是需要通过良好的工程实践和有效约束发挥作用！&lt;/p>
&lt;h2 id="总结">&lt;strong>总结&lt;/strong>
&lt;/h2>&lt;p>Docker 为测试自动化环境的一致性筑起了一道坚固的“围栏”，极大地提升了测试的可信度和效率。然而，“围栏”并非密不透风。&lt;/p>
&lt;p>宿主架构差异、外部依赖渗透、OS 交互特性、资源竞争以及依赖版本漂移等因素，都可能悄然侵蚀预期的绝对一致性。&lt;/p>
&lt;p>实现真正可靠的 Docker 化测试自动化，不仅需要熟练运用 Docker 技术本身，更要求我们秉持严谨的工程实践——明确环境边界、严格依赖管理、优化资源利用、持续监控改进。唯有如此，我们才能有效破除“一致性幻象”，让 Docker 真正成为保障软件质量的坚实基石。&lt;/p>
&lt;p>所以，下次当我们听到 “&lt;strong>没问题，它已经 通过Docker容器化了&lt;/strong>”，不妨多问一句：&lt;/p>
&lt;ul>
&lt;li>它运行在什么架构上？&lt;/li>
&lt;li>依赖是否锁定？&lt;/li>
&lt;li>网络和文件访问是如何处理的？&lt;/li>
&lt;li>资源足够吗？&lt;/li>
&lt;/ul>
&lt;p>知己知彼，方能运筹帷幄。&lt;/p>
&lt;hr></description></item><item><title>谈谈Bug的生命周期和Bug状态变更原则</title><link>https://chengxiaqiucao.github.io/post/091-bug%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/</link><pubDate>Wed, 07 May 2025 00:00:00 +0000</pubDate><guid>https://chengxiaqiucao.github.io/post/091-bug%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/</guid><description>&lt;img src="https://chengxiaqiucao.github.io/post/091-bug%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/snap_20250513-1.png" alt="Featured image of post 谈谈Bug的生命周期和Bug状态变更原则" />&lt;h2 id="前言">前言
&lt;/h2>&lt;p>在软件产品研发中，Bug既是测试工作最为重要的产出，也是开发人员修复问题的直接输入，更是产品质量改进的主要抓手。&lt;/p>
&lt;p>在前文【】中，我们从测试人员的角度，分析了在提交Bug时应如何帮助团队更高效地去进行质量改进。&lt;/p>
&lt;p>但除了Bug提交环节，在我们工作中，Bug从发现到被修复，会经历一个完整的生命周期，对应到我们提交的问题单，会呈现不同的状态。而Bug在这些不同状态间的迁移，其实反映了团队围绕Bug的协作沟通过程。实际工作中，因为Bug认定或状态设定上产生的分歧屡见不鲜，特别是在很多将Bug作为重要KPI数据的团队，测试和开发之间因为Bug产生激烈争论，时有发生。比如：&lt;/p>
&lt;ul>
&lt;li>开发和测试对Bug认定有分歧，测试觉得是Bug，开发觉得不是问题，怎么处理？&lt;/li>
&lt;li>Bug归属产生分歧，是前端问题还是后端问题？&lt;/li>
&lt;li>Bug无法复现，应不应该关闭？&lt;/li>
&lt;li>&amp;hellip;..等等&lt;/li>
&lt;/ul>
&lt;p>本文，我们就来详细梳理一下，Bug的完整生命周期，以及它在不同阶段的状态处理原则。&lt;/p>
&lt;h2 id="bug的生命周期及不同状态">Bug的生命周期及不同状态
&lt;/h2>&lt;p>Bug并不是凭空产生，是在测试过程中暴露出来的质量问题，从被发现到完成修复并确认无误，会经历一个过程，这个过程就是Bug的生命周期。在软件研发过程中，针对这个生命周期的管理，通常会由Bug管理系统（常用的比如Jira、禅道、Bugfree、HP QC等）来跟踪和同步每个Bug的状态，并在开发和测试人员之间起到协作桥梁的作用。&lt;/p>
&lt;p>Bug生命周期的主要过程大致如下：&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/091-bug%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/snap_20250513.png"
width="4188"
height="292"
srcset="https://chengxiaqiucao.github.io/post/091-bug%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/snap_20250513_hu_38512c472d0f2fb4.png 480w, https://chengxiaqiucao.github.io/post/091-bug%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/snap_20250513_hu_d326b60d707e1ab3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="1434"
data-flex-basis="3442px"
>&lt;/p>
&lt;h3 id="已提交open">已提交（Open）
&lt;/h3>&lt;p>&lt;strong>Open&lt;/strong> 状态，是Bug被发现以后的初始状态。通常由发现Bug的测试人员录入Bug管理系统，形成问题单，此时Bug的状态处于 &lt;strong>Open&lt;/strong> 状态，也表示该Bug待处理。&lt;/p>
&lt;p>另外，如果有已关闭的历史Bug，后来发现其实并未解决，也可以重新将Bug激活，此时Bug也会处于 &lt;strong>Open&lt;/strong> 状态。&lt;/p>
&lt;p>在该状态下，提交Bug的测试人员应该指定处理Bug的开发人员进行下一步处理，通常会根据Bug的现象，直接指定到能修复Bug的开发这里。不过一般Bug管理系统，也会设置默认处理人，对于&lt;strong>Open&lt;/strong> 状态的Bug，默认处理人通常会设置为开发负责人，会做进一步更准确的判断以便重新指派。&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">状态&lt;/th>
&lt;th style="text-align: center">说明&lt;/th>
&lt;th style="text-align: center">当前负责人&lt;/th>
&lt;th style="text-align: center">移交处理人&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">Open&lt;/td>
&lt;td style="text-align: center">初始状态，待处理&lt;/td>
&lt;td style="text-align: center">测试人员&lt;/td>
&lt;td style="text-align: center">开发负责人或Bug归属人&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="处理中in-progress">处理中（In Progress）
&lt;/h3>&lt;p>开发人员被指派Bug后，会进入Bug的分析阶段，此时Bug不能确定是否能被修复，所以会进入&lt;strong>处理中&lt;/strong>状态，经过分析后，可以对Bug进行修复操作，或发现并不是自己可以完成修复的问题，再将bug重新指派给实际应该修复bug的开发人员。&lt;/p>
&lt;p>这里如果存在Bug在开发人员间的移交，Bug状态会保持在 &lt;strong>In Progress&lt;/strong>, 仅仅当前处理人会发生变化。&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">状态&lt;/th>
&lt;th style="text-align: center">说明&lt;/th>
&lt;th style="text-align: center">当前负责人&lt;/th>
&lt;th style="text-align: center">移交处理人&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">In Progress&lt;/td>
&lt;td style="text-align: center">Bug进入分析，通常针对较复杂Bug&lt;/td>
&lt;td style="text-align: center">被指派开发人员&lt;/td>
&lt;td style="text-align: center">实际Bug修复人&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="已解决resolved">已解决（Resolved）
&lt;/h3>&lt;p>Bug在经过开发人员的修复后，会标记为&lt;strong>已解决&lt;/strong>。该状态其实代表测试人员可以对Bug进行验证。&lt;/p>
&lt;p>这里需要注意，很多开发人员会有的一个误区，就是我把代码进行修改或者做过自测，就是&lt;strong>Resolved&lt;/strong>。其实并不是，&lt;strong>Resolved&lt;/strong> 状态的重点是被移交的处理人，也就是&lt;strong>测试人员是可以进行验证&lt;/strong>的。&lt;/p>
&lt;p>因为实际工作中，测试人员对产品进行测试，会有测试轮次的概念，并不是随时都可以测试。
所以只有当&lt;strong>修复的代码已经进入下一轮的提交测试&lt;/strong>，才应该将状态置为 &lt;strong>Resolved&lt;/strong>。否则当前测试环境中，被修复的代码尚未部署，当然实际并无法完成验证。&lt;/p>
&lt;p>（&lt;em>当然更完善的Bug管理系统，会再增加一个&lt;strong>待验证&lt;/strong>的状态，这时已解决就只代表开发完成了代码的修复，而待验证才是重新提测。本文重在说明常用必要状态，不再过多扩展&lt;/em>）&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">状态&lt;/th>
&lt;th style="text-align: center">说明&lt;/th>
&lt;th style="text-align: center">当前负责人&lt;/th>
&lt;th style="text-align: center">移交处理人&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">Resolved&lt;/td>
&lt;td style="text-align: center">Bug已经完成修复，标记为已解决，即待验证&lt;/td>
&lt;td style="text-align: center">Bug修复人&lt;/td>
&lt;td style="text-align: center">测试人员&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="已关闭closed">已关闭（Closed）
&lt;/h3>&lt;p>经过验证，确认Bug已被修复后，Bug可以置为 &lt;strong>已关闭&lt;/strong> 状态。该状态代表Bug所反映的质量问题在当前产品版本中已不复存在。&lt;/p>
&lt;p>关闭Bug应该是一个很严肃的事情，通常应该由Bug的提交人进行确认后才可关闭。当然特殊情况下，产品的决策团队（CCB）也可决定Bug是否可以进行关闭。&lt;/p>
&lt;p>另外，关闭的Bug需要重新激活的情况也时有发生，比如验证时场景考虑不够完整，环境问题导致误关或者是提测版本切换后，已修复的Bug又被重新改错，或是错误代码又被重新合入等等，这时就会牵涉Bug重开（ReOpen）操作&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">状态&lt;/th>
&lt;th style="text-align: center">说明&lt;/th>
&lt;th style="text-align: center">当前负责人&lt;/th>
&lt;th style="text-align: center">移交处理人&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">Closed&lt;/td>
&lt;td style="text-align: center">Bug已确认修复，版本中已不存在Bug对应的质量问题&lt;/td>
&lt;td style="text-align: center">Bug提交人&lt;/td>
&lt;td style="text-align: center">无&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;hr>
&lt;p>除了上面几个最主要的Bug生命周期状态外，实际工作中，还会存在一些特殊情况，也会对应到不同的Bug状态&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/091-bug%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/snap_20250513-1.png"
width="4188"
height="1420"
srcset="https://chengxiaqiucao.github.io/post/091-bug%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/snap_20250513-1_hu_d98df15e1989db10.png 480w, https://chengxiaqiucao.github.io/post/091-bug%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/snap_20250513-1_hu_ce46dd07ac9eed71.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="294"
data-flex-basis="707px"
>&lt;/p>
&lt;h3 id="已拒绝rejected">已拒绝（Rejected）
&lt;/h3>&lt;p>测试过程中，测试人员出现误判，或者环境配置有误时，还是比较容易出现测试提交的Bug实际并不是质量问题的情况，开发人员在经过分析后，认为不是bug，此时就可以将Bug置为 &lt;strong>已拒绝&lt;/strong> 状态。这时Bug会回到测试人员手中，进行确认，若认可误报，可由提交人进行关闭操作。&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">状态&lt;/th>
&lt;th style="text-align: center">说明&lt;/th>
&lt;th style="text-align: center">当前负责人&lt;/th>
&lt;th style="text-align: center">移交处理人&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">Rejected&lt;/td>
&lt;td style="text-align: center">经分析Bug属于误报，不反映质量问题&lt;/td>
&lt;td style="text-align: center">Bug分析人&lt;/td>
&lt;td style="text-align: center">Bug提交者&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>但实际中，针对被拒绝Bug，很多时候是测试和开发人员对需求或是否质量问题的分歧导致，在分歧无法自行弥合的情况下，正常的操作应该是：
测试人员重新提交Bug，但Bug不在指派到开发人员，而是指派到产品决策团队CCB（其实主要是BA或PO），由CCB进行仲裁，根据仲裁结果来判断是否需要进行修复或关闭。&lt;/p>
&lt;h3 id="已验证verified">已验证（Verified）
&lt;/h3>&lt;p>测试人员验证Bug无误后，通常可以进行关闭操作将状态置为&lt;strong>Closed&lt;/strong>，但更完整的生命周期，其实还又一个&lt;strong>已验证&lt;/strong>的状态。这个状态的使用，通常出现在验证Bug的测试人员和提交Bug的提交人并不一致，验证人对Bug实施验证后，不能代表提交人，确认Bug可关闭。&lt;/p>
&lt;p>另外一种情况，就是更严谨的大型软件研发流程，测试环节可能也包括多个。子系统级别的测试团队测试完成后，还会有大系统级别的系统测试或全面验收，在子系统级别的测试进入后续测试后才会将状态置为&lt;strong>Closed&lt;/strong>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">状态&lt;/th>
&lt;th style="text-align: center">说明&lt;/th>
&lt;th style="text-align: center">当前负责人&lt;/th>
&lt;th style="text-align: center">移交处理人&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">Verified&lt;/td>
&lt;td style="text-align: center">Bug经过验证已被修复&lt;/td>
&lt;td style="text-align: center">Bug验证人&lt;/td>
&lt;td style="text-align: center">Bug提交者&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="待补充信息need-more-info">待补充信息（Need More Info）
&lt;/h3>&lt;p>这个状态是针对测试人员提交的Bug信息不完整或不足以对Bug完成分析，开发人员难以理解具体的Bug现象等情况。这时处理人将问题单置为 &lt;strong>Need More Info&lt;/strong> 状态，返回给Bug提交人补充相关信息。&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">状态&lt;/th>
&lt;th style="text-align: center">说明&lt;/th>
&lt;th style="text-align: center">当前负责人&lt;/th>
&lt;th style="text-align: center">移交处理人&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">Need More Info&lt;/td>
&lt;td style="text-align: center">Bug单信息不充分，需要补充更详细的信息&lt;/td>
&lt;td style="text-align: center">Bug分析人&lt;/td>
&lt;td style="text-align: center">Bug提交者&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="已延期deferred">已延期（Deferred）
&lt;/h3>&lt;p>延期一般针对下面几种情况：&lt;/p>
&lt;ol>
&lt;li>Bug难以复现，较难分析出产生原因&lt;/li>
&lt;li>Bug修改难度大，需要对产品进行较大改动，且存在规避方案&lt;/li>
&lt;li>Bug优先级较低，不影响主要功能，在版本发布前还有其他更重要问题需要解决&lt;/li>
&lt;/ol>
&lt;p>针对以上情况，经过产品CCB团队决策，可以将Bug延期处理。同时Bug的负责分析人，还是需要继续针对Bug做分析或后续进行修复。&lt;/p>
&lt;p>但这里需要注意，&lt;strong>Deferred&lt;/strong> 状态不代表Bug不是问题，在测试团队的质量分析时，还是应该将该状态的Bug视作有效Bug看待。也就是这类Bug还是会影响到版本最终的质量评估结论。&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">状态&lt;/th>
&lt;th style="text-align: center">说明&lt;/th>
&lt;th style="text-align: center">当前负责人&lt;/th>
&lt;th style="text-align: center">移交处理人&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">Deferred&lt;/td>
&lt;td style="text-align: center">Bug因特定原因无法在当前版本解决，经项目CCB团队决策认可后，可将Bug保留在版本中，留待后续解决&lt;/td>
&lt;td style="text-align: center">CCB决策团队&lt;/td>
&lt;td style="text-align: center">Bug分析人&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;hr>
&lt;p>以上就是我们针对Bug生命周期中会出现的主要的一些状态定义及相关处理原则的介绍。除了上面列出的这些Bug状态外，更完整的Bug生命周期还包括有：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>待验证：&lt;/strong> 已修复，等待版本提测&lt;/li>
&lt;li>&lt;strong>调研中：&lt;/strong> 针对比较复杂的Bug，牵涉技术选型、方案对照等较多研究工作时，可在处理Bug前定义该状态&lt;/li>
&lt;li>&lt;strong>已调研：&lt;/strong> 针对上面进行了方案研究的Bug，但尚未确定修复方案时，Bug处于该状态&lt;/li>
&lt;li>&lt;strong>验证中：&lt;/strong> 对于测试场景比较复杂的Bug，需要进行较长时间的验证，比如性能类的问题，在完成验证前，可将Bug置于该状态&lt;/li>
&lt;/ul>
&lt;p>当然，流程是死的，良好、高效的团队协作最重要的还是团队中不同角色的互信互助。&lt;/p>
&lt;p>不过我们理解正确流程中的不同环节和正确处理的原则，也有助于我们在出现问题或分歧时，减少互相争论、扯皮的内耗。&lt;/p>
&lt;h2 id="bug状态迁移">Bug状态迁移
&lt;/h2>&lt;p>基于上述不同状态的分析，一个比较完整Bug状态迁移图如下，供参考。&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/091-bug%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/snap_20250513-2.png"
width="4484"
height="2292"
srcset="https://chengxiaqiucao.github.io/post/091-bug%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/snap_20250513-2_hu_466b814562f95d6a.png 480w, https://chengxiaqiucao.github.io/post/091-bug%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/snap_20250513-2_hu_38648a12e36d7200.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="195"
data-flex-basis="469px"
>&lt;/p>
&lt;p>如需以上完整大图，可回复 &lt;code>Bug状态&lt;/code> 获取。&lt;/p>
&lt;p>另回复&lt;code>大纲&lt;/code> 可查看秋草测试技能全栈提升课详细目录。回复 &lt;code>进群&lt;/code>可进入测试交流群和小伙伴们分享测试技术、交换资讯。&lt;/p></description></item><item><title>W3C ARIA Roles标准及其在AI驱动自动化测试中的作用</title><link>https://chengxiaqiucao.github.io/post/084-aria%E4%BB%8B%E7%BB%8D/</link><pubDate>Sun, 27 Apr 2025 00:00:00 +0000</pubDate><guid>https://chengxiaqiucao.github.io/post/084-aria%E4%BB%8B%E7%BB%8D/</guid><description>&lt;img src="https://chengxiaqiucao.github.io/post/084-aria%E4%BB%8B%E7%BB%8D/-20250417.png" alt="Featured image of post W3C ARIA Roles标准及其在AI驱动自动化测试中的作用" />&lt;h2 id="前言">前言
&lt;/h2>&lt;p>自动化测试领域目前最火热的自动化框架非&lt;code>Playwright&lt;/code> 莫属，而在 Playwright 中，对于自动化测试中极为关键的页面元素定位，相比传统的&lt;code>Selenium&lt;/code>等工具, 它引入了一个新的元素定位方法 &lt;code>getByRole&lt;/code>，也就是它充分利用了W3C 定义的 ARIA Roles对象, 来进行元素的识别。在提升元素识别灵活性及识别效率的同时，其实也同步对页面的无障碍合规进行了验证。 比如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 定位名为&amp;#34;搜索&amp;#34;的按钮
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">await&lt;/span> &lt;span class="nx">page&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getByRole&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;button&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;搜索&amp;#39;&lt;/span> &lt;span class="p">}).&lt;/span>&lt;span class="nx">click&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 定位复选框并勾选
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">await&lt;/span> &lt;span class="nx">page&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getByRole&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;checkbox&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;同意条款&amp;#39;&lt;/span> &lt;span class="p">}).&lt;/span>&lt;span class="nx">check&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 定位文本输入框并填写内容
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">await&lt;/span> &lt;span class="nx">page&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getByRole&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;textbox&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;用户名&amp;#39;&lt;/span> &lt;span class="p">}).&lt;/span>&lt;span class="nx">fill&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;testuser&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 定位下拉选择框并选择选项
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">await&lt;/span> &lt;span class="nx">page&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getByRole&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;combobox&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;国家&amp;#39;&lt;/span> &lt;span class="p">}).&lt;/span>&lt;span class="nx">selectOption&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;中国&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>而目前，AI 越来越多地参与到我们实际工作中，正如前文 【】中展示的，AI 通过 &lt;code>mcp server&lt;/code>驱动页面完成自动化测试已经具备相当的落地可能。在这个文章后，很多小伙伴对于 AI 如何对页面元素进行识别和定位，并通过工具来驱动执行，实际应用后效果能否达到预期抱有较大的怀疑。&lt;/p>
&lt;p>其实这里，&lt;code>W3C&lt;/code>web规范中的&lt;code>ARIA&lt;/code>标准，对于将页面对象结构化展示给AI，便于AI对页面完成分析，有着重要意义。 本文，我们就来探讨一下&lt;code>ARIA&lt;/code>标准，及其在AI驱动自动化测试中的重要作用。&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/084-aria%E4%BB%8B%E7%BB%8D/-20250417.png"
width="899"
height="328"
srcset="https://chengxiaqiucao.github.io/post/084-aria%E4%BB%8B%E7%BB%8D/-20250417_hu_9d3e9eb2060ef8a4.png 480w, https://chengxiaqiucao.github.io/post/084-aria%E4%BB%8B%E7%BB%8D/-20250417_hu_29fab63ac4f3149d.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="274"
data-flex-basis="657px"
>&lt;/p>
&lt;h2 id="什么是aria">什么是ARIA？
&lt;/h2>&lt;h3 id="定义">定义
&lt;/h3>&lt;p>&lt;strong>WAI-ARIA&lt;/strong> (Web Accessibility Initiative – Accessible Rich Internet Applications)，即 &lt;strong>web无障碍倡议-无障碍富互联网应用标准&lt;/strong>， 是一个让Web应用可以更好支持残障人士使用的规范。&lt;/p>
&lt;p>而&lt;strong>ARIA Roles&lt;/strong>是W3C &lt;strong>WAI-ARIA&lt;/strong> 规范中定义的一组属性，用于描述Web元素的功能和目的，帮助辅助技术（如屏幕阅读器）更准确地理解和传达页面内容。**ARIA Roles **通过&lt;code>role&lt;/code>属性添加到HTML元素中，例如&lt;code>&amp;lt;div role=&amp;quot;button&amp;quot;&amp;gt;&lt;/code>表示该div元素应被视为按钮。&lt;/p>
&lt;h3 id="标准的演进及aria的优势">标准的演进及ARIA的优势
&lt;/h3>&lt;p>该标准经历了三个重要发展阶段：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>2008年&lt;/strong>：W3C首次发布ARIA 1.0&lt;/li>
&lt;li>&lt;strong>2014年&lt;/strong>：ARIA 1.1引入新角色如&lt;code>searchbox&lt;/code>、&lt;code>switch&lt;/code>&lt;/li>
&lt;li>&lt;strong>2021年&lt;/strong>：ARIA 1.2增加了&lt;code>comment&lt;/code>、&lt;code>mark&lt;/code>等数字内容相关Role&lt;/li>
&lt;/ul>
&lt;p>和传统 UI 自动化测试的比较：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>维度&lt;/th>
&lt;th>传统UI测试&lt;/th>
&lt;th>基于ARIA的测试&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>元素识别依据&lt;/td>
&lt;td>DOM结构/视觉特征&lt;/td>
&lt;td>语义角色/功能属性&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>维护成本&lt;/td>
&lt;td>高(随UI变化频繁更新)&lt;/td>
&lt;td>低(角色定义更稳定)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>跨平台一致性&lt;/td>
&lt;td>依赖渲染引擎&lt;/td>
&lt;td>标准化行为&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>无障碍支持&lt;/td>
&lt;td>需额外验证&lt;/td>
&lt;td>内置支持&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="aria-roles类别">ARIA Roles类别
&lt;/h3>&lt;p>根据W3C规范，ARIA Roles可分为以下几大类：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>Widget Roles&lt;/strong>：描述交互式UI组件&lt;/p>
&lt;ul>
&lt;li>&lt;code>button&lt;/code>：可点击的按钮&lt;/li>
&lt;li>&lt;code>checkbox&lt;/code>：复选框&lt;/li>
&lt;li>&lt;code>radio&lt;/code>：单选按钮&lt;/li>
&lt;li>&lt;code>textbox&lt;/code>：文本输入框&lt;/li>
&lt;li>&lt;code>combobox&lt;/code>：下拉组合框&lt;/li>
&lt;li>&lt;code>slider&lt;/code>：滑块控件&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Document Structure Roles&lt;/strong>：描述页面内容结构&lt;/p>
&lt;ul>
&lt;li>&lt;code>heading&lt;/code>：标题 (h1-h6的替代)&lt;/li>
&lt;li>&lt;code>list&lt;/code>/&lt;code>listitem&lt;/code>：列表和列表项&lt;/li>
&lt;li>&lt;code>table&lt;/code>/&lt;code>row&lt;/code>/&lt;code>cell&lt;/code>：表格结构&lt;/li>
&lt;li>&lt;code>img&lt;/code>：图像&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Landmark Roles&lt;/strong>：标识页面主要区域&lt;/p>
&lt;ul>
&lt;li>&lt;code>banner&lt;/code>：页眉&lt;/li>
&lt;li>&lt;code>navigation&lt;/code>：导航区域&lt;/li>
&lt;li>&lt;code>main&lt;/code>：主要内容&lt;/li>
&lt;li>&lt;code>search&lt;/code>：搜索区域&lt;/li>
&lt;li>&lt;code>contentinfo&lt;/code>：页脚信息&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Live Region Roles&lt;/strong>：动态内容更新区域&lt;/p>
&lt;ul>
&lt;li>&lt;code>alert&lt;/code>：重要且需立即通知的信息&lt;/li>
&lt;li>&lt;code>status&lt;/code>：操作状态反馈&lt;/li>
&lt;li>&lt;code>timer&lt;/code>：计时器或计数器&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;p>除基础Role外， 现代Web应用常用的高级角色还包括：&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;strong>复合组件角色&lt;/strong>：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">role&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;tree&amp;#34;&lt;/span> &lt;span class="na">aria-label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;文件浏览器&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">role&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;treeitem&amp;#34;&lt;/span> &lt;span class="na">aria-expanded&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;true&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>文档
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">role&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;group&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">role&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;treeitem&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>工作文档.docx&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;strong>实时通信角色&lt;/strong>：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">role&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;feed&amp;#34;&lt;/span> &lt;span class="na">aria-busy&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;false&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">article&lt;/span> &lt;span class="na">role&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;article&amp;#34;&lt;/span> &lt;span class="na">aria-posinset&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;1&amp;#34;&lt;/span> &lt;span class="na">aria-setsize&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;10&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>...&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">article&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;strong>拖放操作角色&lt;/strong>：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">role&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;draggable&amp;#34;&lt;/span> &lt;span class="na">aria-grabbed&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;false&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>可拖动项&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">role&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;droppable&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="aria在-ai-驱动测试中的核心作用">ARIA在 AI 驱动测试中的核心作用
&lt;/h2>&lt;h3 id="语义理解增强">语义理解增强
&lt;/h3>&lt;p>AI 测试系统通过ARIA角色建立的语义网络，能更准确地理解UI功能：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">graph TD
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> A[原始DOM] --&amp;gt; B(视觉特征分析)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> A --&amp;gt; C(ARIA角色解析)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> C --&amp;gt; D[语义理解层]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> B --&amp;gt; D
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> D --&amp;gt; E[组件功能分类]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> D --&amp;gt; F[操作意图推断]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>典型应用场景&lt;/strong>：&lt;/p>
&lt;ul>
&lt;li>自动识别未标注的表单必填字段（通过&lt;code>aria-required&lt;/code>）&lt;/li>
&lt;li>发现动态内容更新的优先级（通过&lt;code>aria-live&lt;/code>的&lt;code>polite&lt;/code>/&lt;code>assertive&lt;/code>）&lt;/li>
&lt;li>识别复合组件的交互边界（如&lt;code>role=&amp;quot;dialog&amp;quot;&lt;/code>的模态范围）&lt;/li>
&lt;/ul>
&lt;h3 id="测试用例智能生成">测试用例智能生成
&lt;/h3>&lt;p>基于ARIA的AI测试生成流程：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>角色图谱构建&lt;/strong>：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">build_role_graph&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">page&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">graph&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">element&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">query_selector_all&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;[role]&amp;#39;&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">role&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">element&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get_attribute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;role&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">related&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">get_related_aria_attributes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">element&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">graph&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">element&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s1">&amp;#39;role&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">role&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;attributes&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">related&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">graph&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;strong>测试策略匹配&lt;/strong>：&lt;/p>
&lt;ul>
&lt;li>按钮类角色(&lt;code>button&lt;/code>, &lt;code>switch&lt;/code>) → 点击操作序列&lt;/li>
&lt;li>输入类角色(&lt;code>textbox&lt;/code>, &lt;code>spinbutton&lt;/code>) → 输入验证测试&lt;/li>
&lt;li>状态类角色(&lt;code>progressbar&lt;/code>, &lt;code>timer&lt;/code>) → 动态监控测试&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>边缘用例推导&lt;/strong>：&lt;/p>
&lt;ul>
&lt;li>当检测到&lt;code>role=&amp;quot;combobox&amp;quot;&lt;/code>但缺少&lt;code>aria-controls&lt;/code>时&lt;/li>
&lt;li>发现&lt;code>role=&amp;quot;tablist&amp;quot;&lt;/code>中子项未正确设置&lt;code>aria-selected&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h3 id="23-自愈测试维护">2.3 自愈测试维护
&lt;/h3>&lt;p>AI 系统利用ARIA实现的测试自愈机制：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sequenceDiagram
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Test Case-&amp;gt;&amp;gt;+AI Engine: 定位失败(旧选择器)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> AI Engine-&amp;gt;&amp;gt;+DOM: 查询同角色元素
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> DOM--&amp;gt;&amp;gt;-AI Engine: 返回候选元素
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> AI Engine-&amp;gt;&amp;gt;+ARIA Analyzer: 验证名称/状态
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ARIA Analyzer--&amp;gt;&amp;gt;-AI Engine: 最佳匹配结果
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> AI Engine-&amp;gt;&amp;gt;Test Case: 更新定位器
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>效果预期&lt;/strong>：&lt;/p>
&lt;ul>
&lt;li>选择器维护工作量减少&lt;/li>
&lt;li>相比传统方法，降低误报率&lt;/li>
&lt;li>跨平台测试一致性提升&lt;/li>
&lt;/ul>
&lt;h2 id="aria与计算机视觉测试的协同">ARIA与计算机视觉测试的协同
&lt;/h2>&lt;h3 id="31-多模态测试融合">3.1 多模态测试融合
&lt;/h3>&lt;p>现代AI测试平台结合ARIA与CV的优势：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>检测维度&lt;/th>
&lt;th>ARIA提供信息&lt;/th>
&lt;th>CV补充信息&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>元素功能&lt;/td>
&lt;td>明确角色定义&lt;/td>
&lt;td>视觉样式验证&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>交互状态&lt;/td>
&lt;td>aria-pressed等属性&lt;/td>
&lt;td>实际渲染状态&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>层级关系&lt;/td>
&lt;td>aria-owns等属性&lt;/td>
&lt;td>空间位置关系&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>动态变化&lt;/td>
&lt;td>aria-live区域&lt;/td>
&lt;td>像素级变化检测&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>协同工作流示例&lt;/strong>：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">validate_accessible_button&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">element&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># ARIA验证&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">assert&lt;/span> &lt;span class="n">element&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get_attribute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;role&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;button&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">assert&lt;/span> &lt;span class="n">element&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get_attribute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;aria-label&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="ow">is&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="kc">None&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># CV验证&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">screenshot&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">element&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">screenshot&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cv_result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">analyze_button_visuals&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">screenshot&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">assert&lt;/span> &lt;span class="n">cv_result&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;contrast_ratio&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;gt;=&lt;/span> &lt;span class="mf">4.5&lt;/span> &lt;span class="c1"># WCAG AA标准&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="无障碍智能审计">无障碍智能审计
&lt;/h3>&lt;p>AI驱动的ARIA审计系统架构：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[页面爬取模块]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ↓
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ARIA属性提取器]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ↓
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[规则引擎]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── WCAG 2.1规则集
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── 自定义业务规则
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└── 机器学习异常检测
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ↓
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[修复建议生成]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── 自动修复方案
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── 设计模式推荐
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└── 代码补全提示
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ai自动化测试应用场景">AI自动化测试应用场景
&lt;/h2>&lt;h3 id="大语言模型llm集成">大语言模型(LLM)集成
&lt;/h3>&lt;p>ARIA可为LLM提供的结构化上下文：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-markdown" data-lang="markdown">&lt;span class="line">&lt;span class="cl">给定以下ARIA上下文：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">-&lt;/span> 当前焦点元素: role=&amp;#34;combobox&amp;#34;, aria-expanded=&amp;#34;false&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">-&lt;/span> 相关元素:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">*&lt;/span> role=&amp;#34;listbox&amp;#34; (hidden)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">*&lt;/span> role=&amp;#34;option&amp;#34; x3 (hidden)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">LLM生成的测试操作序列：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">1.&lt;/span> 触发combobox的展开操作
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">2.&lt;/span> 验证listbox可见性变为true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">3.&lt;/span> 获取选项列表并选择第二项
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">4.&lt;/span> 验证combobox的aria-activedescendant更新
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="无脚本测试自动化">无脚本测试自动化
&lt;/h3>&lt;p>基于ARIA和MCP结合，实现零代码测试：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>录制阶段&lt;/strong>：&lt;/p>
&lt;ul>
&lt;li>监听所有交互事件的ARIA角色变化&lt;/li>
&lt;li>构建操作-状态转换图&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>回放阶段&lt;/strong>：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">replay_by_aria&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">flow&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">step&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">flow&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">target&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">find_element_by_role_state&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">step&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;role&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">step&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;attributes&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">execute_action&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">target&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">step&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;action&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">validate_aria_states&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">step&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;expected_states&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h3 id="跨设备测试适配">跨设备测试适配
&lt;/h3>&lt;p>ARIA角色在不同设备上的映射策略：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>桌面端角色&lt;/th>
&lt;th>移动端等效模式&lt;/th>
&lt;th>AI处理策略&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>tablist&lt;/td>
&lt;td>底部导航栏&lt;/td>
&lt;td>基于aria-orientation自动适配&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>tooltip&lt;/td>
&lt;td>长按提示&lt;/td>
&lt;td>交互超时自动调整&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>slider&lt;/td>
&lt;td>触摸滑块&lt;/td>
&lt;td>根据屏幕尺寸优化步长&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="发展方向">发展方向
&lt;/h2>&lt;h3 id="aria与testing-ai的深度结合">ARIA与Testing AI的深度结合：
&lt;/h3>&lt;ul>
&lt;li>角色驱动的自主探索式测试&lt;/li>
&lt;li>基于角色相似性的迁移学习&lt;/li>
&lt;/ul>
&lt;h3 id="和其他新测试技术整合">和其他新测试技术整合：
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">graph LR
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> A[ARIA语义] --&amp;gt; B[VR/AR测试]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> A --&amp;gt; C[语音交互测试]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> A --&amp;gt; D[物联网界面测试]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="标准化演进">标准化演进：
&lt;/h3>&lt;p>正在制定的ARIA 2.0将增加：&lt;/p>
&lt;ul>
&lt;li>更细粒度的状态描述&lt;/li>
&lt;li>增强的AI辅助属性&lt;/li>
&lt;li>三维界面支持&lt;/li>
&lt;/ul>
&lt;h2 id="结语">结语
&lt;/h2>&lt;p>ARIA标准正在成为智能测试自动化的关键基础设施，其提供的丰富语义层使得AI系统能像人类一样理解Web应用的交互逻辑。随着W3C对标准的持续完善和测试工具链的进化，基于ARIA的AI驱动测试必将成为Web自动化测试领域的核心支柱。&lt;/p>
&lt;hr>
&lt;h1 id="w3c-aria-roles及其在playwright自动化测试中的应用">W3C ARIA Roles及其在Playwright自动化测试中的应用
&lt;/h1>&lt;p>作为自动化测试工程师，理解并正确应用W3C标准中的ARIA（Accessible Rich Internet Applications）Roles对于构建可访问的Web应用和编写可靠的自动化测试脚本至关重要。本文将详细介绍ARIA Roles的核心概念、分类、最佳实践，并重点阐述如何在Playwright测试框架中有效利用这些角色进行元素定位和验证。&lt;/p>
&lt;h2 id="一aria-roles概述">一、ARIA Roles概述
&lt;/h2>&lt;h3 id="11-什么是aria-roles">1.1 什么是ARIA Roles
&lt;/h3>&lt;p>ARIA Roles是W3C WAI-ARIA规范中定义的一组属性，用于描述Web元素的功能和目的，帮助辅助技术（如屏幕阅读器）更准确地理解和传达页面内容。ARIA Roles通过&lt;code>role&lt;/code>属性添加到HTML元素中，例如&lt;code>&amp;lt;div role=&amp;quot;button&amp;quot;&amp;gt;&lt;/code>表示该div元素应被视为按钮。&lt;/p>
&lt;h3 id="12-aria-roles的重要性">1.2 ARIA Roles的重要性
&lt;/h3>&lt;p>在Web自动化测试中，ARIA Roles提供了以下优势：&lt;/p>
&lt;ol>
&lt;li>&lt;strong>增强元素语义&lt;/strong>：为自定义控件或非标准HTML元素提供明确的语义&lt;/li>
&lt;li>&lt;strong>提高测试可靠性&lt;/strong>：相比脆弱的CSS选择器或XPath，基于角色的定位更稳定&lt;/li>
&lt;li>&lt;strong>支持无障碍测试&lt;/strong>：验证应用是否符合无障碍标准(WCAG)&lt;/li>
&lt;li>&lt;strong>跨浏览器一致性&lt;/strong>：ARIA Roles在不同浏览器中表现一致，减少测试差异&lt;/li>
&lt;/ol>
&lt;h2 id="二aria-roles分类及常见角色">二、ARIA Roles分类及常见角色
&lt;/h2>&lt;h3 id="21-aria-roles主要类别">2.1 ARIA Roles主要类别
&lt;/h3>&lt;p>根据W3C规范，ARIA Roles可分为以下几大类：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>Widget Roles&lt;/strong>：描述交互式UI组件&lt;/p>
&lt;ul>
&lt;li>&lt;code>button&lt;/code>：可点击的按钮&lt;/li>
&lt;li>&lt;code>checkbox&lt;/code>：复选框&lt;/li>
&lt;li>&lt;code>radio&lt;/code>：单选按钮&lt;/li>
&lt;li>&lt;code>textbox&lt;/code>：文本输入框&lt;/li>
&lt;li>&lt;code>combobox&lt;/code>：下拉组合框&lt;/li>
&lt;li>&lt;code>slider&lt;/code>：滑块控件&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Document Structure Roles&lt;/strong>：描述页面内容结构&lt;/p>
&lt;ul>
&lt;li>&lt;code>heading&lt;/code>：标题(h1-h6的替代)&lt;/li>
&lt;li>&lt;code>list&lt;/code>/&lt;code>listitem&lt;/code>：列表和列表项&lt;/li>
&lt;li>&lt;code>table&lt;/code>/&lt;code>row&lt;/code>/&lt;code>cell&lt;/code>：表格结构&lt;/li>
&lt;li>&lt;code>img&lt;/code>：图像&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Landmark Roles&lt;/strong>：标识页面主要区域&lt;/p>
&lt;ul>
&lt;li>&lt;code>banner&lt;/code>：页眉&lt;/li>
&lt;li>&lt;code>navigation&lt;/code>：导航区域&lt;/li>
&lt;li>&lt;code>main&lt;/code>：主要内容&lt;/li>
&lt;li>&lt;code>search&lt;/code>：搜索区域&lt;/li>
&lt;li>&lt;code>contentinfo&lt;/code>：页脚信息&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Live Region Roles&lt;/strong>：动态内容更新区域&lt;/p>
&lt;ul>
&lt;li>&lt;code>alert&lt;/code>：重要且需立即通知的信息&lt;/li>
&lt;li>&lt;code>status&lt;/code>：操作状态反馈&lt;/li>
&lt;li>&lt;code>timer&lt;/code>：计时器或计数器&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h3 id="22-常用aria-roles示例">2.2 常用ARIA Roles示例
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="c">&amp;lt;!-- 按钮角色 --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">role&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;button&amp;#34;&lt;/span> &lt;span class="na">tabindex&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;0&amp;#34;&lt;/span> &lt;span class="na">aria-pressed&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;false&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>自定义按钮&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&amp;lt;!-- 导航区域 --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">nav&lt;/span> &lt;span class="na">role&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;navigation&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>首页&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">nav&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&amp;lt;!-- 警告信息 --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">role&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;alert&amp;#34;&lt;/span> &lt;span class="na">aria-live&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;assertive&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 您的操作已成功保存
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&amp;lt;!-- 进度条 --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">role&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;progressbar&amp;#34;&lt;/span> &lt;span class="na">aria-valuenow&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;75&amp;#34;&lt;/span> &lt;span class="na">aria-valuemin&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;0&amp;#34;&lt;/span> &lt;span class="na">aria-valuemax&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;100&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="三playwright中的aria应用">三、Playwright中的ARIA应用
&lt;/h2>&lt;h3 id="31-基于aria-roles的元素定位">3.1 基于ARIA Roles的元素定位
&lt;/h3>&lt;p>Playwright提供了专门的&lt;code>getByRole()&lt;/code>定位器方法，这是使用ARIA Roles进行元素定位的最佳方式。相比传统的CSS或XPath选择器，基于角色的定位更加稳定且语义化明确。&lt;/p>
&lt;p>&lt;strong>基本语法&lt;/strong>：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">await&lt;/span> &lt;span class="nx">page&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getByRole&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;button&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;提交&amp;#39;&lt;/span> &lt;span class="p">}).&lt;/span>&lt;span class="nx">click&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>常见角色定位示例&lt;/strong>：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 定位名为&amp;#34;搜索&amp;#34;的按钮
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">await&lt;/span> &lt;span class="nx">page&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getByRole&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;button&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;搜索&amp;#39;&lt;/span> &lt;span class="p">}).&lt;/span>&lt;span class="nx">click&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 定位复选框并勾选
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">await&lt;/span> &lt;span class="nx">page&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getByRole&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;checkbox&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;同意条款&amp;#39;&lt;/span> &lt;span class="p">}).&lt;/span>&lt;span class="nx">check&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 定位文本输入框并填写内容
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">await&lt;/span> &lt;span class="nx">page&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getByRole&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;textbox&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;用户名&amp;#39;&lt;/span> &lt;span class="p">}).&lt;/span>&lt;span class="nx">fill&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;testuser&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 定位下拉选择框并选择选项
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">await&lt;/span> &lt;span class="nx">page&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getByRole&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;combobox&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;国家&amp;#39;&lt;/span> &lt;span class="p">}).&lt;/span>&lt;span class="nx">selectOption&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;中国&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="32-角色定位器的选项参数">3.2 角色定位器的选项参数
&lt;/h3>&lt;p>&lt;code>getByRole()&lt;/code>方法支持多种选项参数，可以更精确地定位元素：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">await&lt;/span> &lt;span class="nx">page&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getByRole&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;button&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;提交&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 可访问名称
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">pressed&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 按钮状态(是否按下)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">expanded&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 是否展开(用于菜单等)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">disabled&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 是否禁用
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">checked&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 是否选中(复选框/单选按钮)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">selected&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 是否被选择(标签页等)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">includeHidden&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 是否包含隐藏元素
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">exact&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kc">true&lt;/span> &lt;span class="c1">// 名称是否精确匹配
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="33-验证aria属性和状态">3.3 验证ARIA属性和状态
&lt;/h3>&lt;p>Playwright不仅可以定位元素，还可以验证ARIA属性和状态：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 验证按钮是否禁用
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">await&lt;/span> &lt;span class="nx">expect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">page&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getByRole&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;button&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;提交&amp;#39;&lt;/span> &lt;span class="p">})).&lt;/span>&lt;span class="nx">toBeDisabled&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 验证复选框是否选中
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">await&lt;/span> &lt;span class="nx">expect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">page&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getByRole&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;checkbox&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;记住我&amp;#39;&lt;/span> &lt;span class="p">})).&lt;/span>&lt;span class="nx">toBeChecked&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 验证元素是否可见
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">await&lt;/span> &lt;span class="nx">expect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">page&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getByRole&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;alert&amp;#39;&lt;/span>&lt;span class="p">)).&lt;/span>&lt;span class="nx">toBeVisible&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 验证元素的ARIA属性值
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="nx">button&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">page&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getByRole&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;button&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;展开&amp;#39;&lt;/span> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">await&lt;/span> &lt;span class="nx">expect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">button&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">toHaveAttribute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;aria-expanded&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;false&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="四playwright的aria快照测试">四、Playwright的ARIA快照测试
&lt;/h2>&lt;p>Playwright提供了强大的ARIA快照功能，可以捕获和验证页面的无障碍树结构。&lt;/p>
&lt;h3 id="41-aria快照基础">4.1 ARIA快照基础
&lt;/h3>&lt;p>ARIA快照是页面无障碍树的YAML表示，包含元素的角色、名称、状态和层级关系：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">- &lt;span class="nt">banner&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">heading &amp;#34;欢迎页面&amp;#34; [level=1]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">main&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">button &amp;#34;提交&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">textbox &amp;#34;用户名&amp;#34; [placeholder=&amp;#34;请输入用户名&amp;#34;]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="42-快照匹配断言">4.2 快照匹配断言
&lt;/h3>&lt;p>使用&lt;code>toMatchAriaSnapshot()&lt;/code>进行快照验证：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">await&lt;/span> &lt;span class="nx">expect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">page&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">locator&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;body&amp;#39;&lt;/span>&lt;span class="p">)).&lt;/span>&lt;span class="nx">toMatchAriaSnapshot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sb"> - heading &amp;#34;欢迎页面&amp;#34; [level=1]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sb"> - button &amp;#34;提交&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sb">`&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="43-部分匹配和正则表达式">4.3 部分匹配和正则表达式
&lt;/h3>&lt;p>快照支持灵活的部分匹配：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 只匹配角色不匹配名称
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">await&lt;/span> &lt;span class="nx">expect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">page&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">locator&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;dialog&amp;#39;&lt;/span>&lt;span class="p">)).&lt;/span>&lt;span class="nx">toMatchAriaSnapshot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sb"> - dialog
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sb">`&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 使用正则表达式匹配动态文本
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">await&lt;/span> &lt;span class="nx">expect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">page&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">locator&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;body&amp;#39;&lt;/span>&lt;span class="p">)).&lt;/span>&lt;span class="nx">toMatchAriaSnapshot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sb"> - heading /订单 \d+/
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sb">`&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="44-生成和更新快照">4.4 生成和更新快照
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 使用--update-snapshots标志更新快照&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">npx playwright &lt;span class="nb">test&lt;/span> --update-snapshots
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>或以编程方式生成：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">snapshot&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">page&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">locator&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;#main&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">ariaSnapshot&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">snapshot&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="五aria测试最佳实践">五、ARIA测试最佳实践
&lt;/h2>&lt;h3 id="51-角色使用原则">5.1 角色使用原则
&lt;/h3>&lt;ol>
&lt;li>&lt;strong>优先使用原生HTML元素&lt;/strong>：如&lt;code>&amp;lt;button&amp;gt;&lt;/code>而非&lt;code>&amp;lt;div role=&amp;quot;button&amp;quot;&amp;gt;&lt;/code>&lt;/li>
&lt;li>&lt;strong>避免冗余角色&lt;/strong>：如&lt;code>&amp;lt;nav role=&amp;quot;navigation&amp;quot;&amp;gt;&lt;/code>是多余的，因为&lt;code>&amp;lt;nav&amp;gt;&lt;/code>已隐含该角色&lt;/li>
&lt;li>&lt;strong>正确组合角色和属性&lt;/strong>：如&lt;code>role=&amp;quot;checkbox&amp;quot;&lt;/code>应配合&lt;code>aria-checked&lt;/code>使用&lt;/li>
&lt;/ol>
&lt;h3 id="52-playwright测试建议">5.2 Playwright测试建议
&lt;/h3>&lt;ol>
&lt;li>&lt;strong>优先使用ARIA定位器&lt;/strong>：比CSS/XPath更稳定可靠&lt;/li>
&lt;li>&lt;strong>结合可访问名称&lt;/strong>：使用&lt;code>name&lt;/code>选项提高定位准确性&lt;/li>
&lt;li>&lt;strong>验证动态ARIA状态&lt;/strong>：如&lt;code>aria-expanded&lt;/code>、&lt;code>aria-selected&lt;/code>等&lt;/li>
&lt;li>&lt;strong>定期检查ARIA快照&lt;/strong>：确保页面结构符合无障碍标准&lt;/li>
&lt;li>&lt;strong>测试键盘导航&lt;/strong>：配合&lt;code>page.keyboard&lt;/code>测试可访问性&lt;/li>
&lt;/ol>
&lt;h3 id="53-常见问题解决">5.3 常见问题解决
&lt;/h3>&lt;ol>
&lt;li>&lt;strong>元素不可见&lt;/strong>：添加&lt;code>includeHidden: true&lt;/code>或检查&lt;code>aria-hidden&lt;/code>属性&lt;/li>
&lt;li>&lt;strong>名称不匹配&lt;/strong>：使用&lt;code>exact: false&lt;/code>或正则表达式&lt;/li>
&lt;li>&lt;strong>动态内容&lt;/strong>：使用&lt;code>await expect().toHaveAttribute()&lt;/code>等待状态变化&lt;/li>
&lt;li>&lt;strong>自定义控件&lt;/strong>：确保添加适当的ARIA角色和属性&lt;/li>
&lt;/ol>
&lt;h2 id="六aria在复杂组件中的应用">六、ARIA在复杂组件中的应用
&lt;/h2>&lt;h3 id="61-导航菜单测试">6.1 导航菜单测试
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 展开菜单
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">await&lt;/span> &lt;span class="nx">page&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getByRole&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;button&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;菜单&amp;#39;&lt;/span> &lt;span class="p">}).&lt;/span>&lt;span class="nx">click&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 验证菜单项
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">await&lt;/span> &lt;span class="nx">expect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">page&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getByRole&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;menu&amp;#39;&lt;/span>&lt;span class="p">)).&lt;/span>&lt;span class="nx">toMatchAriaSnapshot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sb"> - menu:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sb"> - menuitem &amp;#34;首页&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sb"> - menuitem &amp;#34;产品&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sb"> - menuitem &amp;#34;关于我们&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sb">`&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 选择菜单项
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">await&lt;/span> &lt;span class="nx">page&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getByRole&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;menuitem&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;产品&amp;#39;&lt;/span> &lt;span class="p">}).&lt;/span>&lt;span class="nx">click&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="62-标签页tabs测试">6.2 标签页(Tabs)测试
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 验证标签页结构
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">await&lt;/span> &lt;span class="nx">expect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">page&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">locator&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;.tabs-container&amp;#39;&lt;/span>&lt;span class="p">)).&lt;/span>&lt;span class="nx">toMatchAriaSnapshot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sb"> - tablist:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sb"> - tab &amp;#34;基本信息&amp;#34; [selected=true]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sb"> - tab &amp;#34;高级设置&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sb"> - tabpanel:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sb"> - textbox &amp;#34;用户名&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sb">`&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 切换标签页
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">await&lt;/span> &lt;span class="nx">page&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getByRole&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;tab&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;高级设置&amp;#39;&lt;/span> &lt;span class="p">}).&lt;/span>&lt;span class="nx">click&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">await&lt;/span> &lt;span class="nx">expect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">page&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getByRole&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;tab&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;高级设置&amp;#39;&lt;/span> &lt;span class="p">})).&lt;/span>&lt;span class="nx">toHaveAttribute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;aria-selected&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;true&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="63-模态对话框测试">6.3 模态对话框测试
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 打开对话框
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">await&lt;/span> &lt;span class="nx">page&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getByRole&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;button&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;删除&amp;#39;&lt;/span> &lt;span class="p">}).&lt;/span>&lt;span class="nx">click&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 验证对话框
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">await&lt;/span> &lt;span class="nx">expect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">page&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getByRole&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;dialog&amp;#39;&lt;/span>&lt;span class="p">)).&lt;/span>&lt;span class="nx">toMatchAriaSnapshot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sb"> - dialog &amp;#34;确认删除&amp;#34;:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sb"> - heading &amp;#34;确认删除&amp;#34; [level=2]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sb"> - button &amp;#34;取消&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sb"> - button &amp;#34;确认&amp;#34; [disabled=false]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sb">`&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 操作对话框
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">await&lt;/span> &lt;span class="nx">page&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getByRole&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;button&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;确认&amp;#39;&lt;/span> &lt;span class="p">}).&lt;/span>&lt;span class="nx">click&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="七总结">七、总结
&lt;/h2>&lt;p>作为自动化测试工程师，掌握W3C ARIA Roles并在Playwright测试中有效应用可以带来多重好处：&lt;/p>
&lt;ol>
&lt;li>&lt;strong>提高测试稳定性&lt;/strong>：基于语义角色的定位比基于实现细节的定位更可靠&lt;/li>
&lt;li>&lt;strong>增强可访问性&lt;/strong>：确保应用符合WCAG标准，服务更广泛的用户群体&lt;/li>
&lt;li>&lt;strong>简化测试维护&lt;/strong>：当UI样式变化时，基于角色的测试通常不需要更新&lt;/li>
&lt;li>&lt;strong>支持跨平台测试&lt;/strong>：ARIA Roles在不同浏览器和设备上表现一致&lt;/li>
&lt;/ol>
&lt;p>通过结合Playwright的ARIA定位器、状态验证和快照测试功能，您可以构建健壮、可维护且关注可访问性的自动化测试套件。随着Web应用越来越复杂，ARIA Roles在自动化测试中的重要性将持续增长，成为现代Web测试工程师必备的核心技能之一。&lt;/p>
&lt;hr>
&lt;h2 id="五实施建议与挑战">五、实施建议与挑战
&lt;/h2>&lt;h3 id="51-采用路线图">5.1 采用路线图
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>&lt;strong>基础阶段&lt;/strong>：&lt;/p>
&lt;ul>
&lt;li>在现有测试中逐步引入&lt;code>getByRole&lt;/code>定位器&lt;/li>
&lt;li>添加ARIA快照比对&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>进阶阶段&lt;/strong>：&lt;/p>
&lt;ul>
&lt;li>建立角色驱动的测试用例库&lt;/li>
&lt;li>开发ARIA合规性监控&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>AI集成阶段&lt;/strong>：&lt;/p>
&lt;ul>
&lt;li>训练专用的角色分类模型&lt;/li>
&lt;li>实现测试脚本自动生成&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h3 id="52-常见挑战解决方案">5.2 常见挑战解决方案
&lt;/h3>&lt;p>&lt;strong>挑战1：动态角色分配&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>解决方案：结合MutationObserver监听role变化
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="k">new&lt;/span> &lt;span class="nx">MutationObserver&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">mutations&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mutations&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">forEach&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">m&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">m&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">attributeName&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="s1">&amp;#39;role&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">updateAIElementRegistry&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">m&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">target&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}).&lt;/span>&lt;span class="nx">observe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">document&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="nx">attributes&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>挑战2：角色滥用检测&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>解决方案：模式识别算法
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">detect_role_misuse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">element&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">valid_roles&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">get_valid_roles_for_tag&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">element&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tag_name&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">current_role&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">element&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get_attribute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;role&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">current_role&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">valid_roles&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">suggest_native_element&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">element&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tag_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">current_role&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>挑战3：跨框架一致性&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>解决方案：中间抽象层
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[React/Vue/Angular组件]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> → [ARIA适配层]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> → [标准化角色树]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> → [AI测试引擎]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>AI测试，测试团队的必由之路</title><link>https://chengxiaqiucao.github.io/post/083-ai%E6%B5%8B%E8%AF%95%E8%B7%AF%E7%BA%BF%E5%9B%BE/</link><pubDate>Sat, 26 Apr 2025 00:00:00 +0000</pubDate><guid>https://chengxiaqiucao.github.io/post/083-ai%E6%B5%8B%E8%AF%95%E8%B7%AF%E7%BA%BF%E5%9B%BE/</guid><description>&lt;blockquote>
&lt;p>本文根据知名测试博客 &lt;a class="link" href="https://testguild.com/" target="_blank" rel="noopener"
>https://testguild.com/&lt;/a> 的最新博文翻译整理，谈到了在测试团队中系统实施、推进 AI 测试的路线图，很有参考价值，现分享给大家&lt;/p>&lt;/blockquote>
&lt;h2 id="ai-测试自动化不再是可选项">AI 测试自动化不再是可选项
&lt;/h2>&lt;p>在当今的软件测试领域，人工智能（AI）已不再仅仅是一种选择，而是一种重要的战略优势 。AI 驱动的测试工具能够将从测试用例生成到测试执行的各个环节实现自动化，从而使您的团队能够专注于交付更高质量的软件版本 。&lt;/p>
&lt;p>Blinq.io 首席执行官 Tal Barmeir 曾指出：“生成式 AI 的作用在于帮助我们真正解决大量测试需求积压且覆盖范围非常有限的问题——这是我们在所有行业中都普遍看到的现象。”&lt;/p>
&lt;p>AI 驱动的测试工具能自动化从测试用例创建到执行和维护的整个流程，将助力测试团队：&lt;/p>
&lt;ul>
&lt;li>将测试创建时间缩短高达 80%&lt;/li>
&lt;li>将测试维护成本降低 40-60%&lt;/li>
&lt;li>通过更快的发布周期加速产品上市时间&lt;/li>
&lt;li>提高跨浏览器、设备和环境的测试覆盖率&lt;/li>
&lt;li>释放宝贵的工程资源用于创新&lt;/li>
&lt;/ul>
&lt;p>本指南提供了一种结构化的方法来实施 AI 测试，旨在带来即时效益和长期的转型。&lt;/p>
&lt;h2 id="阶段一第-1-15-天制定您的-ai-测试策略">阶段一（第 1-15 天）：制定您的 AI 测试策略
&lt;/h2>&lt;p>在深入研究具体的工具之前，首先需要明确您希望如何应用 AI ：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>辅助式 AI&lt;/strong>：增强以人工为主导的测试流程。&lt;/li>
&lt;li>&lt;strong>自主式 AI&lt;/strong>：由 AI 完全驱动的测试自动化，并有人工监督。&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>“大多数组织从辅助式 AI 开始。但很快他们就会意识到其价值有限，并尝试转向完全由 AI 主导。这种转变需要不同的工具、结构和思维模式。”&lt;/p>&lt;/blockquote>
&lt;p>对于 测试团队决策Leader 而言，关键的战略决策包括：&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;strong>自动化范围&lt;/strong>：您的团队是自动化现有测试用例，还是允许 AI 全权负责测试脚本的创建、执行和维护？&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>集成要求&lt;/strong>：AI 测试将如何与您现有的 CI/CD 管道和开发工作流程集成？&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>成功指标&lt;/strong>：将使用哪些 KPI 来衡量成功？（如测试覆盖率、执行时间、缺陷检测等）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>风险评估&lt;/strong>：哪些应用程序或功能最适合作为 AI 测试的初始实施对象？&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>行动建议&lt;/strong>：在进行工具评估之前，请务必明确 AI 测试愿景、范围和成功标准 。&lt;/p>
&lt;h2 id="阶段二第-16-30-天重新定义-qa-角色和测试输入">阶段二（第 16-30 天）：重新定义 QA 角色和测试输入
&lt;/h2>&lt;p>AI 测试自动化并不会消除现有角色，而是会对其进行转型 。&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;strong>传统角色&lt;/strong>&lt;/th>
&lt;th>&lt;strong>AI 增强角色&lt;/strong>&lt;/th>
&lt;th>&lt;strong>主要职责&lt;/strong>&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>手工测试人员&lt;/td>
&lt;td>提示词工程师&lt;/td>
&lt;td>创建有效的测试提示，审查 AI 生成的测试&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>自动化工程师&lt;/td>
&lt;td>AI 测试主管&lt;/td>
&lt;td>监督 AI 测试的生成、执行和维护&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>QA 经理&lt;/td>
&lt;td>AI 测试战略家&lt;/td>
&lt;td>定义 AI 测试策略，衡量投资回报率，优化流程&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;blockquote>
&lt;p>“人们常常认为 AI 意味着失业。这并非事实。它真正做的是重新利用测试人员——手动测试人员成为提示工程师，自动化工程师成为 AI 工作的监督者。”&lt;/p>&lt;/blockquote>
&lt;h3 id="扩展测试输入源">&lt;strong>扩展测试输入源&lt;/strong>
&lt;/h3>&lt;p>AI 测试平台能够从多种输入生成全面的测试用例 ，包括：&lt;/p>
&lt;ul>
&lt;li>Jira 工单和用户故事&lt;/li>
&lt;li>应用程序使用屏幕录像&lt;/li>
&lt;li>自然语言需求&lt;/li>
&lt;li>API 规范和文档&lt;/li>
&lt;li>现有手动测试用例&lt;/li>
&lt;/ul>
&lt;p>这种灵活性使得 AI 测试无需严格遵循 BDD 框架或特定的测试用例格式，从而使各种成熟度级别的团队都能够使用 AI 测试 。&lt;/p>
&lt;h2 id="阶段三第-31-45-天评估-ai-测试工具">阶段三（第 31-45 天）：评估 AI 测试工具
&lt;/h2>&lt;p>选择正确的 AI 测试工具，必须使其与您的基础设施、团队技能和长期愿景保持一致 。&lt;/p>
&lt;h3 id="企业级-ai-测试平台的基本功能">&lt;strong>企业级 AI 测试平台的基本功能&lt;/strong>
&lt;/h3>&lt;ul>
&lt;li>&lt;strong>开源测试代码生成&lt;/strong>：以标准框架（如 Playwright、Selenium 等）生成可维护的代码。&lt;/li>
&lt;li>&lt;strong>自愈能力&lt;/strong>：无需人工干预即可自动适应用户界面（UI）变化。&lt;/li>
&lt;li>&lt;strong>全面测试支持&lt;/strong>：涵盖功能、视觉、性能和安全测试。&lt;/li>
&lt;li>&lt;strong>企业集成&lt;/strong>：与您的 CI/CD 管道、测试管理和缺陷跟踪系统协同工作。&lt;/li>
&lt;li>&lt;strong>跨平台测试&lt;/strong>：支持 Web、移动、API 和企业应用程序（如 Salesforce、SAP 等）。&lt;/li>
&lt;li>&lt;strong>视觉测试&lt;/strong>：AI 驱动的视觉比较和异常检测。&lt;/li>
&lt;li>&lt;strong>不稳定测试管理&lt;/strong>：自动识别和解决不一致的测试。&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>“即使您停止使用某个供应商，您仍然拥有一个可以维护的代码项目。没有黑盒，没有供应商锁定。”&lt;/p>&lt;/blockquote>
&lt;p>&lt;strong>决策框架&lt;/strong>：根据您的具体需求、现有基础设施和团队能力评估工具 。优先选择那些能够生成标准、可维护测试代码而非专有格式的平台 。&lt;/p>
&lt;h2 id="阶段四第-46-60-天为新的-ai-增强测试角色进行培训">阶段四（第 46-60 天）：为新的 AI 增强测试角色进行培训
&lt;/h2>&lt;p>测试自动化中引入 AI，将带来新的 AI 功能和职责，从而提升 QA 团队的角色 。&lt;/p>
&lt;h3 id="ai-测试时代的关键技能">&lt;strong>AI 测试时代的关键技能&lt;/strong>
&lt;/h3>&lt;ul>
&lt;li>&lt;strong>提示工程&lt;/strong>：创建有效的测试提示，以生成全面的测试覆盖。&lt;/li>
&lt;li>&lt;strong>AI 测试审查&lt;/strong>：评估和完善 AI 生成的测试脚本。&lt;/li>
&lt;li>&lt;strong>测试维护管理&lt;/strong>：监督自愈能力和测试稳定性。&lt;/li>
&lt;li>&lt;strong>测试优先级排序&lt;/strong>：确定每次发布中哪些测试能带来最高价值。&lt;/li>
&lt;li>&lt;strong>探索性测试&lt;/strong>：将人类创造力集中于边缘情况和复杂场景。&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>“旧技能是脚本编写和调试。新技能呢？编写提示、审查 AI 建议以及大规模管理代码。”&lt;/p>&lt;/blockquote>
&lt;h3 id="qa-团队的培训资源">&lt;strong>QA 团队的培训资源&lt;/strong>：
&lt;/h3>&lt;ul>
&lt;li>关于 AI 测试概念和提示工程的内部研讨会。&lt;/li>
&lt;li>供应商提供的特定 AI 测试平台培训。&lt;/li>
&lt;li>在实际应用程序测试场景中的动手实践。&lt;/li>
&lt;li>手动和自动化测试人员之间的交叉培训。&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>领导力重点&lt;/strong>：鼓励实验并创造一个学习环境，让团队可以通过实际应用发展 AI 测试专业知识 。&lt;/p>
&lt;h2 id="阶段五第-61-75-天试点并扩展-ai-测试覆盖范围">阶段五（第 61-75 天）：试点并扩展 AI 测试覆盖范围
&lt;/h2>&lt;p>启动一个重点明确的试点项目，使用 10-20 个测试场景，以实现快速、可衡量的影响，并建立对 AI 测试能力的信心 。&lt;/p>
&lt;h3 id="理想的试点项目特征">&lt;strong>理想的试点项目特征&lt;/strong>：
&lt;/h3>&lt;ul>
&lt;li>具有稳定 UI 的中等复杂性应用程序。&lt;/li>
&lt;li>用于比较的现有手动测试用例。&lt;/li>
&lt;li>定期发布周期以展示 CI/CD 集成。&lt;/li>
&lt;li>混合了回归、功能和视觉测试需求。&lt;/li>
&lt;li>利益相关者乐于创新和流程变革。&lt;/li>
&lt;/ul>
&lt;h3 id="实施清单">&lt;strong>实施清单&lt;/strong>：
&lt;/h3>&lt;ul>
&lt;li>选择试点应用程序并定义测试范围。&lt;/li>
&lt;li>配置 AI 测试工具并与 CI/CD 集成。&lt;/li>
&lt;li>创建初始测试提示并生成基线测试。&lt;/li>
&lt;li>在多个环境中执行测试。&lt;/li>
&lt;li>根据传统测试方法衡量结果。&lt;/li>
&lt;li>记录经验教训和优化机会。&lt;/li>
&lt;/ul>
&lt;p>此阶段非常适合扩展跨浏览器、设备和语言的测试覆盖范围——利用 AI 模型的多语言能力高效测试国际应用程序 。&lt;/p>
&lt;h2 id="阶段六第-76-90-天衡量-kpi-并优化">阶段六（第 76-90 天）：衡量 KPI 并优化
&lt;/h2>&lt;p>跟踪关键绩效指标（KPIs），量化 AI 测试实施的影响并发现优化机会 。&lt;/p>
&lt;h3 id="关键-ai-测试指标-">&lt;strong>关键 AI 测试指标&lt;/strong> ：
&lt;/h3>&lt;ul>
&lt;li>&lt;strong>发布时间&lt;/strong>：整体测试周期时间的缩短。&lt;/li>
&lt;li>&lt;strong>测试覆盖率&lt;/strong>：功能和平台覆盖率的提高。&lt;/li>
&lt;li>&lt;strong>维护工作量&lt;/strong>：测试脚本维护时间的减少。&lt;/li>
&lt;li>&lt;strong>缺陷检测&lt;/strong>：缺陷识别率的提高。&lt;/li>
&lt;li>&lt;strong>资源利用率&lt;/strong>：QA 团队将重心转移到更高价值的活动。&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>“大多数领导者认为 AI 测试是为了削减成本。但最大的投资回报率实际上是更快的上市时间。”&lt;/p>&lt;/blockquote>
&lt;h3 id="持续改进框架">&lt;strong>持续改进框架&lt;/strong>：
&lt;/h3>&lt;ul>
&lt;li>每周审查 AI 测试性能和准确性。&lt;/li>
&lt;li>根据测试结果和遗漏场景完善提示。&lt;/li>
&lt;li>将 AI 测试扩展到其他应用程序和测试类型。&lt;/li>
&lt;li>记录最佳实践并在团队之间分享。&lt;/li>
&lt;li>建立 AI 测试卓越中心。&lt;/li>
&lt;/ul>
&lt;p>这些见解将支持您的团队就测试覆盖率、发布准备情况和质量改进做出数据驱动的决策 。&lt;/p>
&lt;h2 id="总结您的-90-天-ai-测试实施路线图">总结：您的 90 天 AI 测试实施路线图
&lt;/h2>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;strong>阶段&lt;/strong>&lt;/th>
&lt;th>&lt;strong>时间线&lt;/strong>&lt;/th>
&lt;th>&lt;strong>重点&lt;/strong>&lt;/th>
&lt;th>&lt;strong>关键交付物&lt;/strong>&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>1&lt;/td>
&lt;td>第 1-15 天&lt;/td>
&lt;td>策略定义&lt;/td>
&lt;td>AI 测试愿景、实施方法、成功指标&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>2&lt;/td>
&lt;td>第 16-30 天&lt;/td>
&lt;td>角色转型&lt;/td>
&lt;td>更新的团队结构、技能要求、输入源&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>3&lt;/td>
&lt;td>第 31-45 天&lt;/td>
&lt;td>工具选择&lt;/td>
&lt;td>AI 测试平台评估、选择标准、概念验证&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>4&lt;/td>
&lt;td>第 46-60 天&lt;/td>
&lt;td>团队培训&lt;/td>
&lt;td>技能发展计划、培训资源、知识共享&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>5&lt;/td>
&lt;td>第 61-75 天&lt;/td>
&lt;td>试点实施&lt;/td>
&lt;td>初始 AI 测试套件、与 CI/CD 集成、基线指标&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>6&lt;/td>
&lt;td>第 76-90 天&lt;/td>
&lt;td>衡量与优化&lt;/td>
&lt;td>绩效分析、优化计划、扩展策略&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="qa-的未来ai-驱动的测试领导力">QA 的未来：AI 驱动的测试领导力
&lt;/h2>&lt;p>借助正确的 AI 测试策略，您的 QA 组织不仅能跟上行业步伐，更将引领向更快、更可靠的软件交付转型 。您不仅仅是在自动化测试，更是在赋能团队，以增强和简化整个测试生命周期，以前所未有的速度交付更高质量的软件，同时降低风险和技术债务 。现在就拥抱 AI 测试，您将使您的组织处于质量工程的前沿，通过卓越的软件质量和加速创新创造可持续的竞争优势 。&lt;/p></description></item><item><title>高效使用AI大模型：测试工程师提示词编写框架</title><link>https://chengxiaqiucao.github.io/post/079-%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95%E6%8F%90%E7%A4%BA%E8%AF%8D/</link><pubDate>Wed, 16 Apr 2025 00:00:00 +0000</pubDate><guid>https://chengxiaqiucao.github.io/post/079-%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95%E6%8F%90%E7%A4%BA%E8%AF%8D/</guid><description>&lt;h2 id="前言">前言
&lt;/h2>&lt;p>随着AI大模型在软件测试领域的广泛应用，提示词工程（Prompt Engineering）已成为测试工程师提升效率的关键技能。通过精准的提示词设计，我们可快速生成测试用例、优化测试场景、生成自动化脚本、以至实现智能化的测试覆盖。&lt;/p>
&lt;p>那么如何更有效地在利用大模型时，让大模型更高效地协助我们得到期望的结果，好的提示词能让我们事半功倍。下文就总结下，对测试工程师而言，怎么编写出好的提示词框架&lt;/p>
&lt;h2 id="拆分复杂需求准确描述问题">拆分复杂需求，准确描述问题
&lt;/h2>&lt;p>AI大模型的效果高度依赖输入提示词的清晰度，也就是尽可能减少二义性。所以在输入提示词时，应尽可能将复杂任务拆解为具体需求，例如：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>场景化的描述&lt;/strong>：明确测试目标（如“生成登录功能的边界值测试用例”），而非模糊指令（如“帮我写测试用例”）。&lt;/li>
&lt;li>&lt;strong>约束条件&lt;/strong>：添加格式要求（如“以表格形式输出”）、优先级（如“仅包含高风险场景”）或技术限制（如“不涉及第三方接口”）。&lt;/li>
&lt;li>&lt;strong>示例引导&lt;/strong>：可以提供示例数据或模板，帮助模型理解期望的输出结构。&lt;/li>
&lt;/ul>
&lt;h2 id="利用结构化框架提升输出稳定性">利用结构化框架，提升输出稳定性
&lt;/h2>&lt;p>通过定义结构化的提示词框架，可以约束模型行为，并减少随机性干扰：&lt;/p>
&lt;ol>
&lt;li>&lt;strong>角色设定&lt;/strong>：指定模型扮演专业角色（如“你是一位资深测试专家，擅长设计高覆盖率的测试场景”）。&lt;/li>
&lt;li>&lt;strong>分步指令&lt;/strong>：将复杂任务分解为多步骤（如“第一步：分析需求文档；第二步：识别关键路径；第三步：生成用例”）。&lt;/li>
&lt;li>&lt;strong>思维链（Chain-of-Thought）&lt;/strong>：虽然目前很多模型都提供了深度思考能力，但通过提示词引导模型的分析，可以简化模型的思考推理方向。例如“请先分析用户操作流程，再重点针对异常场景生成测试用例”。&lt;/li>
&lt;/ol>
&lt;h2 id="渐进式的迭代优化持续改进提示词">渐进式的迭代优化，持续改进提示词
&lt;/h2>&lt;p>大模型通常会保留对话上下文，针对每次反馈的结果，应不断校正，逐渐向最佳输出靠拢&lt;/p>
&lt;ul>
&lt;li>&lt;strong>反馈修正&lt;/strong>：对模型输出中的错误及时指正（如“第2条用例未覆盖超时场景，请补充”），并要求重新生成。&lt;/li>
&lt;li>&lt;strong>参数调整&lt;/strong>：控制输出长度（如“请用50字以内描述”）、温度系数（Temperature）以平衡模型的创造性与准确性。&lt;/li>
&lt;li>&lt;strong>交叉比对&lt;/strong>：目前开放大模型有很多，能力不一，对于分析的结果差别也比较大。可以综合判断，提取最优结果。&lt;/li>
&lt;/ul>
&lt;p>常见的一些校正场景：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;strong>问题&lt;/strong>&lt;/th>
&lt;th>&lt;strong>原因&lt;/strong>&lt;/th>
&lt;th>&lt;strong>改进方法&lt;/strong>&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>输出过于宽泛&lt;/td>
&lt;td>需求描述模糊&lt;/td>
&lt;td>添加具体场景、格式、优先级约束&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>结果重复或冗余&lt;/td>
&lt;td>未明确限制输出范围&lt;/td>
&lt;td>排除不需要的场景(如指定“仅输出未覆盖的边界值场景”)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>技术术语错误&lt;/td>
&lt;td>模型缺乏领域知识&lt;/td>
&lt;td>提供术语表或指定角色（如“金融系统测试专家”）&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="案例分析">案例分析
&lt;/h2>&lt;p>基于以上原则，以我们要测试 &lt;a class="link" href="https://www.saucedemo.com" target="_blank" rel="noopener"
>https://www.saucedemo.com&lt;/a> 这个网站的购物流程为例，要用大模型帮助我们生成一系列测试用例，提示词框架可以按下面的方式设定：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">假设你是一名经验丰富的软件测试工程师，负责对电商网站 https://www.saucedemo.com/ 的核心购物流程进行端到端的功能测试。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">任务： 为以下用户场景生成详细的、高优先级的正向和反向测试用例。重点关注从商品选择到成功下单的完整流程。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">被测网站: https://www.saucedemo.com/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">测试用户凭据:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">•标准用户 (Standard User): standard_user / secret_sauce
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">•有问题的用户 (Problem User): problem_user / secret_sauce (用于观察特定错误行为)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">核心购物流程步骤:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1. 用户登录
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2. 浏览商品列表 (Inventory Page)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">3. 选择至少两件不同商品并添加到购物车
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">4. 查看购物车 (Cart Page)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5. 在购物车页面验证商品信息（名称、数量、价格）和总价
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">6. 进入结账信息页面 (Checkout: Your Information)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">7. 填写有效的结账信息（姓、名、邮政编码）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">8. 进入结账概览页面 (Checkout: Overview)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">9. 在概览页面验证商品信息、总价（含税）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">10.完成购买 (Checkout: Complete!)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">11.验证订单成功信息
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">测试用例要求:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">•正向测试用例: 覆盖使用标准用户成功完成购物流程的每个步骤，确保功能按预期工作。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">•反向测试用例:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> •尝试在结账信息页面输入无效数据（例如，姓、名、邮编为空或格式错误）。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> •尝试在购物车为空时进行结账。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> •(可选)使用 problem_user 登录，观察并记录在购物流程中可能出现的异常行为，特别是商品图片、添加购物车或结账环节。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">输出要求:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">•每个测试用例应包含：用例 ID (TC_SAUCE_SHOP_XXX)、测试描述、前置条件（如已登录并添加商品）、测试步骤（清晰、可执行）、预期结果、实际结果（预留填写）、状态（预留填写）、优先级（高/中/低）。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">•优先生成高优先级的测试用例。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">输出格式: 请将测试用例以 Markdown 表格形式输出，包含以下列：用例 ID, 测试描述, 前置条件, 测试步骤, 预期结果, 优先级。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">约束说明:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">•假设税率为 8%。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">•关注 UI 元素的交互和页面跳转的正确性。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">•如果对某些特定元素的 ID 或 Class 不确定，可以使用通用的描述，例如“点击添加到购物车按钮”或“输入姓名字段”。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>以上提示词比较好地对应了相关的提示词框架原则：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>明确的角色&lt;/strong>：&amp;ldquo;假设你是一名经验丰富的软件测试工程师&amp;hellip;&amp;rdquo;&lt;/li>
&lt;li>&lt;strong>清晰的任务&lt;/strong>：&amp;ldquo;为以下用户场景生成详细的、高优先级的正向和反向测试用例。重点关注从商品选择到成功下单的完整流程&amp;rdquo;&lt;/li>
&lt;li>&lt;strong>充分的上下文信息&lt;/strong>: 被测URL、用户信息、用例侧重点、税率假设&lt;/li>
&lt;li>&lt;strong>指定输出格式&lt;/strong>：&amp;ldquo;请将测试用例以Markdown表格形式输出，包含以下列：&lt;code>用例ID&lt;/code>, &lt;code>测试描述&lt;/code>, &lt;code>前置条件&lt;/code>, &lt;code>测试步骤&lt;/code>, &lt;code>预期结果&lt;/code>, &lt;code>优先级&lt;/code>。&amp;rdquo;&lt;/li>
&lt;li>&lt;strong>明确的具体要求和约束&lt;/strong>：用例和输出的具体要求，&lt;/li>
&lt;li>&lt;strong>引导思考方向&lt;/strong>：使用problem_user生成异常用例&lt;/li>
&lt;/ul>
&lt;p>最终通过这样的提示词，通过Deepseek，我们会得到如下一份生成的用例：&lt;/p>
&lt;h3 id="高优先级核心购物流程测试用例">高优先级核心购物流程测试用例
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>用例ID&lt;/th>
&lt;th>测试描述&lt;/th>
&lt;th>前置条件&lt;/th>
&lt;th>测试步骤&lt;/th>
&lt;th>预期结果&lt;/th>
&lt;th>优先级&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>正向测试用例&lt;/strong>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>TC_SAUCE_SHOP_001&lt;/td>
&lt;td>标准用户成功登录并进入商品列表页&lt;/td>
&lt;td>无&lt;/td>
&lt;td>1. 访问 &lt;code>https://www.saucedemo.com/&lt;/code> &lt;br>2. 输入用户名 &lt;code>standard_user&lt;/code> 和密码 &lt;code>secret_sauce&lt;/code> &lt;br>3. 点击登录按钮&lt;/td>
&lt;td>登录成功，跳转至商品列表页（Inventory Page）&lt;/td>
&lt;td>高&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>TC_SAUCE_SHOP_002&lt;/td>
&lt;td>添加两件不同商品到购物车并验证数量&lt;/td>
&lt;td>用户已登录&lt;/td>
&lt;td>1. 在商品列表页选择两件不同商品，分别点击“添加到购物车”按钮 &lt;br>2. 检查购物车图标显示数量为2&lt;/td>
&lt;td>购物车图标数量更新为2，且两件商品均显示在购物车页面&lt;/td>
&lt;td>高&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>TC_SAUCE_SHOP_003&lt;/td>
&lt;td>购物车页面验证商品信息和总价（不含税）&lt;/td>
&lt;td>用户已添加两件商品到购物车&lt;/td>
&lt;td>1. 点击购物车图标进入购物车页面 &lt;br>2. 核对商品名称、数量、单价 &lt;br>3. 计算总价（商品1价格 + 商品2价格）&lt;/td>
&lt;td>商品信息正确，总价显示为两件商品价格之和&lt;/td>
&lt;td>高&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>TC_SAUCE_SHOP_004&lt;/td>
&lt;td>完成有效结账信息并验证含税总价&lt;/td>
&lt;td>用户已进入结账信息页面&lt;/td>
&lt;td>1. 在结账信息页面输入有效姓、名、邮编（如：John/Doe/12345） &lt;br>2. 点击“继续”按钮 &lt;br>3. 在概览页面验证总价（总价 = 商品总价 * 1.08）&lt;/td>
&lt;td>跳转至结账概览页面，总价含8%税且计算正确&lt;/td>
&lt;td>高&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>TC_SAUCE_SHOP_005&lt;/td>
&lt;td>完成购买并验证订单成功信息&lt;/td>
&lt;td>用户已进入结账概览页面&lt;/td>
&lt;td>1. 点击“完成”按钮&lt;/td>
&lt;td>显示“THANK YOU FOR YOUR ORDER”成功信息，返回商品列表页&lt;/td>
&lt;td>高&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>反向测试用例&lt;/strong>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>TC_SAUCE_SHOP_006&lt;/td>
&lt;td>结账信息页面姓名为空时提交表单&lt;/td>
&lt;td>用户已进入结账信息页面&lt;/td>
&lt;td>1. 留空姓名字段，输入有效邮编（如：12345） &lt;br>2. 点击“继续”按钮&lt;/td>
&lt;td>提示“First Name is required”，阻止跳转&lt;/td>
&lt;td>高&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>TC_SAUCE_SHOP_007&lt;/td>
&lt;td>结账信息页面邮编格式错误（如非数字）&lt;/td>
&lt;td>用户已进入结账信息页面&lt;/td>
&lt;td>1. 输入有效姓、名，邮编为“ABC12” &lt;br>2. 点击“继续”按钮&lt;/td>
&lt;td>提示“Postal Code is invalid”，阻止跳转&lt;/td>
&lt;td>高&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>TC_SAUCE_SHOP_008&lt;/td>
&lt;td>购物车为空时尝试结账&lt;/td>
&lt;td>用户已登录且购物车为空&lt;/td>
&lt;td>1. 点击购物车图标进入购物车页面 &lt;br>2. 点击“结账”按钮&lt;/td>
&lt;td>提示“Cart is empty”或阻止跳转至结账页面&lt;/td>
&lt;td>高&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Problem User 测试用例&lt;/strong>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>TC_SAUCE_SHOP_009&lt;/td>
&lt;td>Problem User 添加商品时图片显示异常&lt;/td>
&lt;td>Problem User 已登录&lt;/td>
&lt;td>1. 浏览商品列表页 &lt;br>2. 检查商品图片是否加载正确（如：图片错位、无法显示）&lt;/td>
&lt;td>商品图片显示异常（如空白图、错误图片）&lt;/td>
&lt;td>中&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>TC_SAUCE_SHOP_010&lt;/td>
&lt;td>Problem User 结账时总价计算错误&lt;/td>
&lt;td>Problem User 已添加商品到购物车&lt;/td>
&lt;td>1. 完成结账流程至概览页面 &lt;br>2. 验证总价是否等于商品总价 * 1.08&lt;/td>
&lt;td>总价计算错误（如未含税或计算值偏差）&lt;/td>
&lt;td>中&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="补充说明">&lt;strong>补充说明&lt;/strong>
&lt;/h4>&lt;ol>
&lt;li>&lt;strong>优先级分配&lt;/strong>：核心流程（登录、添加商品、结账）和关键异常场景（空字段、无效数据）设为高优先级。&lt;/li>
&lt;li>&lt;strong>Problem User&lt;/strong>：用于验证特定异常行为（如UI渲染错误或逻辑漏洞）。&lt;/li>
&lt;li>&lt;strong>实际结果/状态&lt;/strong>：执行时需根据实际观察填写（如“通过”、“失败”或“阻塞”）。&lt;/li>
&lt;li>&lt;strong>税率计算&lt;/strong>：假设商品总价为 &lt;code>$X&lt;/code>，含税总价应为 &lt;code>X * 1.08&lt;/code>，保留两位小数（如 &lt;code>$21.99 * 1.08 = $23.75&lt;/code>）。&lt;/li>
&lt;/ol></description></item><item><title>Mcp大流行背后的隐忧</title><link>https://chengxiaqiucao.github.io/post/076-mcp%E5%A4%A7%E6%B5%81%E8%A1%8C%E8%83%8C%E5%90%8E%E7%9A%84%E9%9A%90%E5%BF%A7/</link><pubDate>Mon, 14 Apr 2025 15:28:24 +0800</pubDate><guid>https://chengxiaqiucao.github.io/post/076-mcp%E5%A4%A7%E6%B5%81%E8%A1%8C%E8%83%8C%E5%90%8E%E7%9A%84%E9%9A%90%E5%BF%A7/</guid><description>&lt;p>过去数周间，模型上下文协议（Model Context Protocol，MCP）快速崛起为第三方数据与工具接入LLM对话系统的实际标准。互联网短时间已充斥着各类炫酷应用案例，想象空间极为广阔。但这个协议背后却也暗藏一些微妙的安全隐患与功能的局限性。&lt;/p>
&lt;h1 id="背景">背景
&lt;/h1>&lt;p>MCP的本质是构建&amp;quot;智能助手插件生态&amp;quot;的桥梁，让用户能为各种支持了MCP协议的大模型和AI客户端提供本地扩展能力，让这些基于LLM的智能界面可以通过MCP的&amp;quot;工具调用&amp;quot;执行非文本操作，MCP协议实际上是标准化了LLM和本地数据、工具的对接方式。&lt;/p>
&lt;p>比如在前文【】中，我们只是在&lt;code> Cursor&lt;/code> 中告诉大模型: &lt;em>&amp;ldquo;访问www.saucedemo.com网站，使用problem_user登录，验证该网站完整流程并记录发现的问题&amp;rdquo;&lt;/em> , Cursor 就会通过&lt;code>playwright-mcp&lt;/code> 这个 mcp server来调用&lt;code>playwright&lt;/code>框架完成浏览器的调用、访问、浏览、测试、记录问题等一系列活动，完成跟手工测试工程师类似的测试活动&lt;/p>
&lt;p>所以通过MCP，它的核心价值就是突破了原来AI大模型文字型咨询助手的角色，转变为实际的执行者角色，更能够直接操作本地的工具和数据，为大模型提供了万能插口。&lt;/p>
&lt;h1 id="潜在的隐忧">潜在的隐忧
&lt;/h1>&lt;p>但我们在看到MCP巨大潜力的同时，也要看到，MCP作为刚起步不久的一个基础协议，尚不能称为尽善尽美，要看到还有如下一些隐忧：&lt;/p>
&lt;h2 id="隐患一协议本身的安全性">&lt;strong>隐患一：协议本身的安全性&lt;/strong>
&lt;/h2>&lt;h3 id="认证机制">&lt;strong>认证机制&lt;/strong>
&lt;/h3>&lt;p>MCP的初始版本未定义认证规范，导致各MCP服务器可自行其是，从繁琐的验证到敏感数据裸奔，可谓乱象丛生。虽后续推出认证方案，但实现复杂度引发新的争议。&lt;/p>
&lt;h3 id="恶意代码本地执行风险">&lt;strong>恶意代码本地执行风险&lt;/strong>
&lt;/h3>&lt;p>协议支持通过标准输入输出运行MCP服务器，这样虽然降低使用门槛，却也为恶意代码传播提供了温床。如果技术小白执行第三方恶意MCP代码引发本地设备安全故障，已成新型攻击手段。&lt;/p>
&lt;h3 id="mcp对用户输入的信任">&lt;strong>MCP对用户输入的信任&lt;/strong>
&lt;/h3>&lt;p>很多Mcp Server会直接执行用户的输入指令。当用户意图经LLM转译并对系统产生作用时，传统安全模型面临严峻挑战：用户输入指令与攻击系统的边界不再清晰。&lt;/p>
&lt;h2 id="隐患二交互设计上的限制">&lt;strong>隐患二：交互设计上的限制&lt;/strong>
&lt;/h2>&lt;p>MCP协议更多是面向LLM交互，但针对用户来说，交互方式谈不上易用、友好。&lt;/p>
&lt;h3 id="缺少针对不同等级的操作风险分级">&lt;strong>缺少针对不同等级的操作风险分级&lt;/strong>
&lt;/h3>&lt;p>很多助手工具会提供全局的操作确认机制，但针对很多无害工具养成的“自动确认”习惯，往往会导致一些严重误操作的发生，比如本地重要文件的删除、邮件误发等情况。&lt;/p>
&lt;h3 id="成本控制能力">&lt;strong>成本控制能力&lt;/strong>
&lt;/h3>&lt;p>与传统协议不同，LLM场景下依据不同token的返回量会产生数额不等的费用，而用户服务成本高度依赖MCP工具的词元效率，而目前协议中并没有对返回长度的限制以强化成本控制。&lt;/p>
&lt;h3 id="牺牲结构化数据的优势">&lt;strong>牺牲结构化数据的优势&lt;/strong>
&lt;/h3>&lt;p>为适配LLM偏好，MCP偏向采用类似人类可读的方式，如纯文本/图片/音频片段传输，而牺牲结构化数据优势。比如类似像地图、滴滴叫车等服务，需确保位置准确性、行程细节反馈、实时状态更新等需求的话，现有协议难堪重任。目前解决这类问题还需要在工具层做一些变通的额外设计&lt;/p>
&lt;hr>
&lt;h2 id="隐患三llm的安全性">&lt;strong>隐患三：LLM的安全性&lt;/strong>
&lt;/h2>&lt;p>大模型本身安全性的探讨，目前还悬而未决，而引入MCP连接更多的数据、工具让这个问题更为凸显。&lt;/p>
&lt;h3 id="mcp让提示词注入能力更强悍">&lt;strong>MCP让提示词注入能力更强悍&lt;/strong>
&lt;/h3>&lt;p>LLM 通常有两层指令：&lt;strong>系统级提示词&lt;/strong>（控制助手的行为和策略）和&lt;strong>用户级提示词&lt;/strong>（由用户提供）。通常，以前提到&lt;strong>提示词注入&lt;/strong>通常指恶意的用户输入。而MCP 模型一个相当大的漏洞是允许第三方提供的工具被信任为助手系统级提示的一部分，从而赋予它们更大权限来覆盖代理行为。&lt;/p>
&lt;h3 id="敏感数据泄露">&lt;strong>敏感数据泄露&lt;/strong>
&lt;/h3>&lt;p>除了恶意地通过恶意工具劫持外，MCP也可能让用户在无意中泄露敏感数据。即便用户严格确认每个操作，数据仍可能通过&amp;quot;合理&amp;quot;的方式外泄出去。比如你的指令：“帮我解释一下个人病历记录”，助手可能会启动一个医疗检索类的多租户MCP工具，并把个人隐私信息泄露到服务提供商。&lt;/p>
&lt;p>包括MCP Server也很容易通过伪装提示词和实际的工具实现，劫持、更改用户的意图。&lt;/p>
&lt;h2 id="隐患四打破企业中的传统数据权限控制">隐患四：&lt;strong>打破企业中的传统数据权限控制&lt;/strong>
&lt;/h2>&lt;p>与直接泄露敏感数据不同，企业在将大量内部数据通过MCP连接到LLM以后，可能会让普通员工访问或推断出无权访问到的数据。&lt;/p>
&lt;p>举例来说，如果一个企业的所有内部文档都接入LLM，员工通过助手：&lt;/p>
&lt;p>&lt;em>“根据所有我有权限访问的文档和公司的任免通知，推断尚未宣布的重大事件如裁员行动”&lt;/em>&lt;/p>
&lt;p>或者一个经理级别的人：&lt;/p>
&lt;p>&lt;em>“我看到内部wiki上有一条匿名的针对XXX的负面评价，内容是XXXX，请分析XX团队中成员的发言记录并推断最可能是谁写的这条评价”&lt;/em>&lt;/p>
&lt;h2 id="隐患五llm自身的能力局限">&lt;strong>隐患五：LLM自身的能力局限&lt;/strong>
&lt;/h2>&lt;p>对于大规模的MCP集成，LLM本身的负载能力很可能无法承受。Google推出的&lt;strong>A2A协议(Agent to Agent)&lt;/strong> 可能是解决手段，另当别论。&lt;/p>
&lt;h3 id="mcp的能力发挥依赖于被助手集成的llm">&lt;strong>MCP的能力发挥依赖于被助手集成的LLM&lt;/strong>
&lt;/h3>&lt;p>一个事实是&lt;strong>并非工具越多，数据越多，结果越准确&lt;/strong>，恰恰相反，同类的数据和工具越多，会导致最终输出的精确性越差。随着MCP Server的数量越来越多，集成的工具越来越多，AI助手的性能也将显著下降，并且请求和分析的成本也会增加。&lt;/p>
&lt;h3 id="工具实现和用户预期的落差">&lt;strong>工具实现和用户预期的落差&lt;/strong>
&lt;/h3>&lt;p>很多MCP Server在实现上其实是编写调用本地已有工具的函数方法，MCP Server的能力其实主要受这些函数方法的制约。如果用户对具体的函数实现没什么了解，只是按通常的人为沟通思路和LLM交互，很可能难以获得满意的结果。&lt;/p>
&lt;p>&lt;em>“请为我查找最近所有博客中包含AI测试相关的文章”&lt;/em>，这个指令其实需要本地MCP Server具备全文检索本地文本内容的能力，但如果集成的MCP Server仅仅包含了文件查找的功能，自然得不到相应的结果。&lt;/p>
&lt;h1 id="结论和展望">结论和展望
&lt;/h1>&lt;p>MCP的诞生顺应了AI时代的数据整合需求，其日常应用价值毋庸置疑。但我们也需要清醒认知：MCP协议还在成长期，我们在拥抱应用的同时，也需要认识到其中的风险， 将LLM与数据的结合，会放大既有风险，也催生了新型的威胁。&lt;/p>
&lt;hr>
&lt;p>本文大部分观点参考了Shrivu的博客内容 (阅读原文)&lt;/p></description></item><item><title>转译：2025自动化测试八大趋势</title><link>https://chengxiaqiucao.github.io/post/074-%E6%9C%80%E6%96%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E8%B6%8B%E5%8A%BF2025/</link><pubDate>Wed, 09 Apr 2025 23:00:28 +0800</pubDate><guid>https://chengxiaqiucao.github.io/post/074-%E6%9C%80%E6%96%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E8%B6%8B%E5%8A%BF2025/</guid><description>&lt;p>本文来自 &lt;strong>TestGuild&lt;/strong> 1 月份对今年测试发展趋势的分析，目前看判断还是客观准确的，现将译文分享给大家。&lt;/p>
&lt;hr>
&lt;p>随着我们进入2025年，我认为以下&lt;strong>自动化测试趋势&lt;/strong>将深刻影响软件测试的未来。&lt;/p>
&lt;h3 id="目录">目录
&lt;/h3>&lt;ul>
&lt;li>&lt;a class="link" href="#trend1" >1. AI Agent：测试新浪潮&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="#trend2" >2. AI右移：理解用户&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="#trend3" >3. 全民皆QA：人机协同&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="#trend4" >4. 测试者角色进化：适应未来&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="#trend5" >5. DevOps与SRE整合：持续质量&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="#trend6" >6. 端到端（E2E）自治质量平台&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="#trend7" >7. Playwright：首选自动化工具&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="#trend8" >8. 2025年测试者必备编程语言&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="#summary" >总结：2025年自动化测试成功之道&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="ai-agent测试新浪潮">AI Agent：测试新浪潮 &lt;a id="trend1">&lt;/a>
&lt;/h2>&lt;p>我认为2025年将见证AI辅助测试的持续扩展。&lt;/p>
&lt;p>原因何在？&lt;/p>
&lt;p>AI在测试中的应用呈指数级增长：调查显示，截至2024年，72.3%的团队正在积极探索或采用AI驱动的测试工作流，而几年前这一技术尚处于早期采用阶段。这一趋势标志着我们TestGuild自动化测试调查历史上最快的技术采用曲线。&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/074-%E6%9C%80%E6%96%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E8%B6%8B%E5%8A%BF2025/Pasted-20250409.png"
width="1403"
height="533"
srcset="https://chengxiaqiucao.github.io/post/074-%E6%9C%80%E6%96%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E8%B6%8B%E5%8A%BF2025/Pasted-20250409_hu_ea73bf39cd238a9b.png 480w, https://chengxiaqiucao.github.io/post/074-%E6%9C%80%E6%96%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E8%B6%8B%E5%8A%BF2025/Pasted-20250409_hu_9e5eb824ebd21647.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="263"
data-flex-basis="631px"
>&lt;/p>
&lt;p>在2024年多模态AI（通过专用算法处理多种数据类型）基础上，新兴趋势是代理型AI。&lt;/p>
&lt;p>首先，您可能会问：什么是代理型AI？&lt;/p>
&lt;p>这类系统能自主运作，处理以往需要人工干预的任务。它们能进行通信、维持长期状态，并根据交互独立决策，实质上是充当高能效测试助手团队。&lt;/p>
&lt;p>仍不清楚？让我们通过示例说明。&lt;/p>
&lt;h3 id="代理型ai自动化测试工作流示例">代理型AI自动化测试工作流示例
&lt;/h3>&lt;p>设想一个真实场景：代理型AI为大型电商平台自主管理全量回归测试套件。&lt;/p>
&lt;p>不同于依赖预设脚本和固定排期，该代理型AI系统将执行以下操作：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>优先级判定&lt;/strong>：分析近期代码变更和功能发布，根据修改风险等级排序回归测试&lt;/li>
&lt;li>&lt;strong>测试选择与适配&lt;/strong>：动态选取合适测试用例，基于风险评估从完整套件中筛选子集&lt;/li>
&lt;li>&lt;strong>测试执行与环境管理&lt;/strong>：跨多环境（浏览器/操作系统/设备）调度执行测试。若测试失败，自动触发诊断测试收集详细信息，甚至尝试自动修复简单问题&lt;/li>
&lt;li>&lt;strong>结果分析与报告&lt;/strong>：分类故障严重程度，识别模式，根据常见错误模式提出修复建议&lt;/li>
&lt;li>&lt;strong>反馈循环与持续改进&lt;/strong>：通过经验积累不断自我优化&lt;/li>
&lt;/ul>
&lt;p>此设想并非天方夜谭。调查数据显示，团队不仅追求任务自动化，更依赖AI自主决策——这正是代理型AI的核心：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>决策能力&lt;/strong>：AI工具日益被信任用于优化测试覆盖率和维护&lt;/li>
&lt;li>&lt;strong>自主性&lt;/strong>：对AI驱动流水线和框架的兴趣表明团队需要最小化人工干预的解决方案&lt;/li>
&lt;li>&lt;strong>性能表现&lt;/strong>：聚焦采用AI的工具框架，显示向动态学习适应系统的转变&lt;/li>
&lt;/ul>
&lt;p>转型速度超乎预期：网络研讨会投票显示56%团队处于AI采用&amp;quot;调研阶段&amp;quot;，38%企业将AI视为缓解测试人才短缺的解决方案。&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/074-%E6%9C%80%E6%96%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E8%B6%8B%E5%8A%BF2025/Pasted-20250409-1.png"
width="864"
height="804"
srcset="https://chengxiaqiucao.github.io/post/074-%E6%9C%80%E6%96%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E8%B6%8B%E5%8A%BF2025/Pasted-20250409-1_hu_face25b8bc1d201d.png 480w, https://chengxiaqiucao.github.io/post/074-%E6%9C%80%E6%96%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E8%B6%8B%E5%8A%BF2025/Pasted-20250409-1_hu_84c2239caf2705b5.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="107"
data-flex-basis="257px"
>&lt;/p>
&lt;p>行业巨头观点与此一致（笔者将其延伸至自动化测试领域）：&lt;/p>
&lt;p>微软CEO萨提亚·纳德拉近期提及&lt;a class="link" href="https://www.cxtoday.com/data-analytics/microsoft-ceo-ai-agents-will-transform-saas-as-we-know-it/" target="_blank" rel="noopener"
>AI&amp;quot;代理&amp;quot;将革新SaaS&lt;/a>，通过处理复杂任务、持续学习和跨系统无缝连接实现突破。斯坦福研究者关于&lt;a class="link" href="https://www.livescience.com/technology/artificial-intelligence/just-2-hours-is-all-it-takes-for-ai-agents-to-replicate-your-personality-with-85-percent-accuracy" target="_blank" rel="noopener"
>AI代理模拟人类行为&lt;/a>的实验，同样印证代理型AI改变测试方式的潜力。&lt;/p>
&lt;hr>
&lt;h2 id="ai右移理解用户">AI右移：理解用户 &lt;a id="trend2">&lt;/a>
&lt;/h2>&lt;p>理解真实用户行为已成为2025年质量策略的核心要素。通过分析生产环境用户交互，团队能发现模式、预测问题，确保软件满足用户期望。AI整合使团队探索出质量提升新路径。&lt;/p>
&lt;p>调查数据显示，对&lt;strong>预测模型和用户行为分析&lt;/strong>的关注度显著提升，团队聚焦利用AI发现长尾用例，优化用户旅程理解。&lt;a class="link" href="https://testguild.com/podcast/automation/a509-gojko/" target="_blank" rel="noopener"
>Gojko Adzic&lt;/a>设想工具直接集成至平台，提供体验分析和预测模型，主动预判问题。这在管理海量用户数据（含长尾用例）时价值凸显，AI在数据模式识别中发挥关键作用。&lt;/p>
&lt;p>这种右移方法通过强调部署后质量保障，与传统左移方法论形成互补。潜在收益包括：&lt;/p>
&lt;ul>
&lt;li>通过&lt;strong>主动监控&lt;/strong>减少用户报障&lt;/li>
&lt;li>通过&lt;strong>优化高价值用户流&lt;/strong>提升功能采用率&lt;/li>
&lt;li>基于真实使用模式的&lt;strong>数据驱动决策&lt;/strong>改善测试覆盖&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="全民皆qa人机协同">全民皆QA：人机协同 &lt;a id="trend3">&lt;/a>
&lt;/h2>&lt;p>随着代理型AI和端到端自治质量平台（后文详述）的采用，2025年软件测试将发生剧变。低代码/无代码工具结合AI，使测试突破传统壁垒，让业务分析师、开发者甚至非技术背景的利益相关方都能参与质量保障。网络研讨会投票显示**74%**参与者自认AI新手，凸显降低使用门槛的工具需求。&lt;/p>
&lt;p>直观的低代码解决方案通过自动化测试创建和缺陷检测等复杂任务，降低学习曲线，加速工具采用。调查显示**32.3%**团队积极尝试无代码测试方案。&lt;/p>
&lt;p>同时，人类监督仍不可或缺。正如&lt;a class="link" href="https://testguild.com/podcast/automation/a522-tobias/" target="_blank" rel="noopener"
>Tobias Müller&lt;/a>所言：&amp;ldquo;重点已非是否信任AI，而是设定边界并信任所设规范。&amp;ldquo;结合人类经验与AI的团队展现出更优缺陷检测和更快测试周期，证明人机协同的重要性。&lt;/p>
&lt;hr>
&lt;h2 id="测试者角色进化适应未来">测试者角色进化：适应未来 &lt;a id="trend4">&lt;/a>
&lt;/h2>&lt;p>测试者正转型为融合传统技能与AI、DevOps、自动化知识的复合型角色。调查数据印证这一转变：&lt;/p>
&lt;ul>
&lt;li>45%团队强调AI技能需求&lt;/li>
&lt;li>51.8%优先考虑DevOps知识&lt;/li>
&lt;li>72.3%聚焦自动化专长&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="devops与sre整合持续质量">DevOps与SRE整合：持续质量 &lt;a id="trend5">&lt;/a>
&lt;/h2>&lt;p>测试与DevOps及站点可靠性工程（SRE）实践的整合，是2025年最显著的自动化测试趋势。随着企业日益重视持续交付和运营韧性，测试正进化为主动的、贯穿软件生命周期的质量保障活动。&lt;/p>
&lt;p>调查数据显示显著转变：截至2024年，**51.8%**团队采用DevOps实践（2022年仅16.9%）。这种增长印证测试与DevOps/SRE工作流的深度整合，以保障高速交付下的软件质量。&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/074-%E6%9C%80%E6%96%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E8%B6%8B%E5%8A%BF2025/Pasted-20250409-2.png"
width="1489"
height="568"
srcset="https://chengxiaqiucao.github.io/post/074-%E6%9C%80%E6%96%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E8%B6%8B%E5%8A%BF2025/Pasted-20250409-2_hu_a7209be5e9f85952.png 480w, https://chengxiaqiucao.github.io/post/074-%E6%9C%80%E6%96%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E8%B6%8B%E5%8A%BF2025/Pasted-20250409-2_hu_89683b652da6dffb.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="262"
data-flex-basis="629px"
>&lt;/p>
&lt;p>这种整合超越传统QA，转变为提升全生命周期的持续活动，帮助企业：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>加速反馈循环&lt;/strong>：CI/CD管道嵌入测试，即时发现问题&lt;/li>
&lt;li>&lt;strong>实施主动质量保障&lt;/strong>：工作流整合性能测试与监控，提前识别风险&lt;/li>
&lt;li>&lt;strong>促进团队协作&lt;/strong>：质量共担机制改善QA、开发与运维团队协作&lt;/li>
&lt;/ul>
&lt;p>调查数据清晰支持此趋势。从流水线自动化到性能监控，团队正采用与卓越运营目标一致的持续质量实践。若您的组织尚未整合测试与DevOps/SRE，2025年正是转型良机。&lt;/p>
&lt;hr>
&lt;h2 id="端到端e2e自治质量平台">端到端（E2E）自治质量平台 &lt;a id="trend6">&lt;/a>
&lt;/h2>&lt;p>E2E平台正成为测试战略核心。这些平台整合测试、可用性、性能、无障碍访问和安全性于统一框架，应对更广泛的质量问题。通过AI自动化测试生命周期，团队反馈缺陷检测和测试覆盖显著提升。&lt;/p>
&lt;p>调查数据显示显著增长：&lt;/p>
&lt;ul>
&lt;li>安全测试从2021年8.2%增至2024年39.5%&lt;/li>
&lt;li>性能测试采用率达41%&lt;/li>
&lt;li>API测试从2021年13.1%增长至2024年46.2%&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/074-%E6%9C%80%E6%96%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E8%B6%8B%E5%8A%BF2025/Pasted-20250409230826.png"
width="1365"
height="663"
srcset="https://chengxiaqiucao.github.io/post/074-%E6%9C%80%E6%96%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E8%B6%8B%E5%8A%BF2025/Pasted-20250409230826_hu_4d6ba26bdca4808c.png 480w, https://chengxiaqiucao.github.io/post/074-%E6%9C%80%E6%96%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E8%B6%8B%E5%8A%BF2025/Pasted-20250409230826_hu_7e889e6d25a4b9c0.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="205"
data-flex-basis="494px"
>这些指标反映企业对综合质量平台管理全测试需求的依赖度提升。&lt;/p>
&lt;hr>
&lt;h2 id="playwright首选自动化工具">Playwright：首选自动化工具 &lt;a id="trend7">&lt;/a>
&lt;/h2>&lt;p>正如笔者去年预测，Playwright已成为众多测试者首选工具。根据&lt;a class="link" href="https://testguild.com/playwright-cypress-ai/" target="_blank" rel="noopener"
>Playwright超越Cypress（未来展望）&lt;/a>文中分析，这一预测已被验证。&lt;/p>
&lt;p>当前进展？凭借卓越的多功能性、可靠性和性能，Playwright在2025年持续巩固其领先地位。TestGuild 2024年调查及社区反馈显示其显著增长。&lt;/p>
&lt;p>测试工具偏好呈现重大转变（2018-2024数据分析）：&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/074-%E6%9C%80%E6%96%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E8%B6%8B%E5%8A%BF2025/Pasted-20250409-3.png"
width="1467"
height="516"
srcset="https://chengxiaqiucao.github.io/post/074-%E6%9C%80%E6%96%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E8%B6%8B%E5%8A%BF2025/Pasted-20250409-3_hu_c408c68fb9c92883.png 480w, https://chengxiaqiucao.github.io/post/074-%E6%9C%80%E6%96%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E8%B6%8B%E5%8A%BF2025/Pasted-20250409-3_hu_c3c6e4021fe20496.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="284"
data-flex-basis="682px"
>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Playwright&lt;/strong>：45.1%采用率使其成为增长最快工具，优势包括跨浏览器支持、API测试能力和高效工作流&lt;/li>
&lt;li>&lt;strong>Selenium&lt;/strong>：曾为市场领导者，现采用率下降至22.1%，因团队追求更高效稳定方案&lt;/li>
&lt;li>&lt;strong>Cypress&lt;/strong>：坚守前端测试领域，保持14.4%稳定用户群&lt;/li>
&lt;/ul>
&lt;p>Playwright用户普遍反馈：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>更快测试执行&lt;/strong>：加速反馈循环，改进开发生命周期&lt;/li>
&lt;li>&lt;strong>更低测试波动性&lt;/strong>：产出更稳定可靠的测试结果&lt;/li>
&lt;/ul>
&lt;p>除初始的UI浏览器自动化功能外，Playwright已进化支持&lt;strong>API测试&lt;/strong>等高级能力，成为现代测试需求的综合解决方案。&lt;/p>
&lt;hr>
&lt;h2 id="2025年测试者必备编程语言">2025年测试者必备编程语言 &lt;a id="trend8">&lt;/a>
&lt;/h2>&lt;p>根据&lt;a class="link" href="https://www.tiobe.com/tiobe-index/" target="_blank" rel="noopener"
>TIOBE编程社区指数&lt;/a>，Python连续两年蝉联榜首。这与我预期一致——Python凭借简洁性、强大库支持及在AI/机器学习领域的主导地位，仍是2025年测试者首选语言。无论您是初学自动化还是资深测试专家，Python都是衔接当下挑战与未来自动化测试可能性的桥梁。&lt;/p>
&lt;hr>
&lt;h2 id="总结2025年自动化测试成功之道">总结：2025年自动化测试成功之道 &lt;a id="summary">&lt;/a>
&lt;/h2>&lt;p>2025年将成为软件测试关键转折年，为拥抱变革者提供空前机遇。AI成熟度、团队协作与工具演进的融合，标志着质量保障新纪元的开启。&lt;/p>
&lt;p>成功不仅需要关注趋势，更需行动：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>拥抱代理型AI&lt;/strong>：探索自主AI代理如何优化工作流，降低人工干预&lt;/li>
&lt;li>&lt;strong>采用右移测试实践&lt;/strong>：平衡传统左移方法与部署后监控，确保软件符合真实用户期望&lt;/li>
&lt;li>&lt;strong>投资技能发展&lt;/strong>：为团队配备AI、自动化与DevOps知识以保持竞争力&lt;/li>
&lt;li>&lt;strong>测试与DevOps/SRE整合&lt;/strong>：打破孤岛，将质量保障融入交付各阶段&lt;/li>
&lt;li>&lt;strong>善用综合工具&lt;/strong>：从Playwright到Python，选择满足当前需求并面向未来的工具&lt;/li>
&lt;/ul>
&lt;p>这些趋势预示着质量保障方式的根本转变。随着测试、开发与运维界限的模糊，现代测试者角色正进化为战略要职。欲深度掌握变革趋势，欢迎参加年度&lt;strong>Automation Guild大会&lt;/strong>，与行业领袖共同塑造测试未来。&lt;/p>
&lt;p>2025创新之路已铺就，您是否已准备好引领变革？&lt;/p>
&lt;hr></description></item><item><title>微软已发布Playwright Mcp</title><link>https://chengxiaqiucao.github.io/post/072-%E5%BE%AE%E8%BD%AF%E5%B7%B2%E5%8F%91%E5%B8%83playwright-mcp/</link><pubDate>Wed, 02 Apr 2025 16:38:33 +0800</pubDate><guid>https://chengxiaqiucao.github.io/post/072-%E5%BE%AE%E8%BD%AF%E5%B7%B2%E5%8F%91%E5%B8%83playwright-mcp/</guid><description>&lt;img src="https://chengxiaqiucao.github.io/post/072-%E5%BE%AE%E8%BD%AF%E5%B7%B2%E5%8F%91%E5%B8%83playwright-mcp/Pasted-20250402.png" alt="Featured image of post 微软已发布Playwright Mcp" />&lt;h1 id="前言">前言
&lt;/h1>&lt;p>&lt;code>MCP协议&lt;/code>是由AI公司 Anthropic（claude的母公司）于2024年11月推出的一个针对AI能力的开放协议，旨在标准化大语言模型（LLM）与外部数据源、工具之间的交互接口。其核心设计目标：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>解耦与标准化&lt;/strong>：将LLM与外部系统的集成从定制化开发转变为基于统一协议的通用连接，类似硬件领域的USB-C接口。&lt;/li>
&lt;li>&lt;strong>去中心化&lt;/strong>：通过允许开发者自主构建MCP Server，分散AI能力，避免单一厂商垄断知识和服务。&lt;/li>
&lt;li>&lt;strong>安全可控&lt;/strong>：通过权限验证和本地化部署，确保数据隐私与操作安全。&lt;/li>
&lt;/ul>
&lt;p>而 &lt;code>MCP Server&lt;/code> 则是MCP的关键组件，提供如下三种功能：&lt;/p>
&lt;ul>
&lt;li>资源（Resources）：类似文件的数据，可以被客户端读取，如 API 响应或文件内容。&lt;/li>
&lt;li>工具（Tools）：可以被 LLM 调用的函数（需要用户批准）。&lt;/li>
&lt;li>提示（Prompts）：预先编写的模板，帮助用户完成特定任务。&lt;/li>
&lt;/ul>
&lt;p>通过这些能力，MCP Server可以为AI应用提供更加丰富的上下文操作私有数据或特定应用的能力，从而增强 LLM 的实用性。&lt;/p>
&lt;p>在上一篇文章 【】中，我们已经对 MCP Server有了基本认识，并且提供了一个基本的查询本地桌面的案例，并利用AI编辑器&lt;code>Cursor&lt;/code>实现了这个MCP server的调用。&lt;/p>
&lt;h1 id="微软官方推出playwright-mcp">微软官方推出Playwright-mcp
&lt;/h1>&lt;p>MCP Server目前的很多应用中，调度浏览器操作是一个极为高频的场景，基于Playwright这个新锐浏览器工具，也已经有第三方先行推出了MCP Server&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/072-%E5%BE%AE%E8%BD%AF%E5%B7%B2%E5%8F%91%E5%B8%83playwright-mcp/Pasted-20250402.png"
width="1812"
height="972"
srcset="https://chengxiaqiucao.github.io/post/072-%E5%BE%AE%E8%BD%AF%E5%B7%B2%E5%8F%91%E5%B8%83playwright-mcp/Pasted-20250402_hu_dcfee7661167b616.png 480w, https://chengxiaqiucao.github.io/post/072-%E5%BE%AE%E8%BD%AF%E5%B7%B2%E5%8F%91%E5%B8%83playwright-mcp/Pasted-20250402_hu_eb9eb089cb2c9e93.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="186"
data-flex-basis="447px"
>&lt;/p>
&lt;p>而现在，微软官方也终于推出了Playwright-mcp，可以和Vscode copilot无缝结合使用&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/072-%E5%BE%AE%E8%BD%AF%E5%B7%B2%E5%8F%91%E5%B8%83playwright-mcp/Pasted-20250402-1.png"
width="1727"
height="969"
srcset="https://chengxiaqiucao.github.io/post/072-%E5%BE%AE%E8%BD%AF%E5%B7%B2%E5%8F%91%E5%B8%83playwright-mcp/Pasted-20250402-1_hu_f83931781b693850.png 480w, https://chengxiaqiucao.github.io/post/072-%E5%BE%AE%E8%BD%AF%E5%B7%B2%E5%8F%91%E5%B8%83playwright-mcp/Pasted-20250402-1_hu_f4937900ada6a48f.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="178"
data-flex-basis="427px"
>&lt;/p>
&lt;h1 id="playwright-mcp-部署">Playwright-mcp 部署
&lt;/h1>&lt;p>因为Playwright-mcp刚刚推出，目前 vscode中对它的集成主要还是在vscode的先览版vscode insider中。所以我们可以从vscode官网先下载一个vscode insider
&lt;img src="https://chengxiaqiucao.github.io/post/072-%E5%BE%AE%E8%BD%AF%E5%B7%B2%E5%8F%91%E5%B8%83playwright-mcp/Pasted-20250402-2.png"
width="1051"
height="542"
srcset="https://chengxiaqiucao.github.io/post/072-%E5%BE%AE%E8%BD%AF%E5%B7%B2%E5%8F%91%E5%B8%83playwright-mcp/Pasted-20250402-2_hu_5de3b2f34b5084a9.png 480w, https://chengxiaqiucao.github.io/post/072-%E5%BE%AE%E8%BD%AF%E5%B7%B2%E5%8F%91%E5%B8%83playwright-mcp/Pasted-20250402-2_hu_dfa42d4ead8ed82c.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="193"
data-flex-basis="465px"
>&lt;/p>
&lt;p>安装好vscode insider后，在github项目主页上，直接点击对应按钮即可进行安装&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/072-%E5%BE%AE%E8%BD%AF%E5%B7%B2%E5%8F%91%E5%B8%83playwright-mcp/Pasted-20250402-3.png"
width="1315"
height="891"
srcset="https://chengxiaqiucao.github.io/post/072-%E5%BE%AE%E8%BD%AF%E5%B7%B2%E5%8F%91%E5%B8%83playwright-mcp/Pasted-20250402-3_hu_5c4449d9135f39e8.png 480w, https://chengxiaqiucao.github.io/post/072-%E5%BE%AE%E8%BD%AF%E5%B7%B2%E5%8F%91%E5%B8%83playwright-mcp/Pasted-20250402-3_hu_f010a4faa2d88b64.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="147"
data-flex-basis="354px"
>&lt;/p>
&lt;p>打开vscode 后，选择 install server，这时会自动配置好mcp server的配置文件，点击start，将mcp server运行起来，这样其实就完成了部署&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/072-%E5%BE%AE%E8%BD%AF%E5%B7%B2%E5%8F%91%E5%B8%83playwright-mcp/Pasted-20250402-4.png"
width="2167"
height="1282"
srcset="https://chengxiaqiucao.github.io/post/072-%E5%BE%AE%E8%BD%AF%E5%B7%B2%E5%8F%91%E5%B8%83playwright-mcp/Pasted-20250402-4_hu_10322492c1fa97d1.png 480w, https://chengxiaqiucao.github.io/post/072-%E5%BE%AE%E8%BD%AF%E5%B7%B2%E5%8F%91%E5%B8%83playwright-mcp/Pasted-20250402-4_hu_bc963d7464a1b201.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="169"
data-flex-basis="405px"
>&lt;/p>
&lt;p>点击copilot对话框中，显示的tools按钮，可以看到目前集成的tools，主要对应playwright的15种主要操作行为&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/072-%E5%BE%AE%E8%BD%AF%E5%B7%B2%E5%8F%91%E5%B8%83playwright-mcp/Pasted-20250402-5.png"
width="1534"
height="1147"
srcset="https://chengxiaqiucao.github.io/post/072-%E5%BE%AE%E8%BD%AF%E5%B7%B2%E5%8F%91%E5%B8%83playwright-mcp/Pasted-20250402-5_hu_bade8d3df695395a.png 480w, https://chengxiaqiucao.github.io/post/072-%E5%BE%AE%E8%BD%AF%E5%B7%B2%E5%8F%91%E5%B8%83playwright-mcp/Pasted-20250402-5_hu_8ce9e42f6fe87c4a.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>&lt;/p>
&lt;h1 id="用playwright-mcp无代码完成浏览器操作和验证">用playwright-mcp无代码完成浏览器操作和验证
&lt;/h1>&lt;p>下面我们就看看效果吧。&lt;/p>
&lt;p>打开copilot，输入指令：&lt;/p>
&lt;blockquote>
&lt;p>导航到&lt;a class="link" href="vscode-file://vscode-app/c:/Users/Administrator/AppData/Local/Programs/Microsoft%20VS%20Code%20Insiders/resources/app/out/vs/code/electron-sandbox/workbench/workbench.html" >https://www.saucedemo.com&lt;/a>, 用账号standard_user和密码secret_sauce登录，并确认登录成功，product页面正常显示&lt;/p>&lt;/blockquote>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/072-%E5%BE%AE%E8%BD%AF%E5%B7%B2%E5%8F%91%E5%B8%83playwright-mcp/Pasted-20250402-6.png"
width="2157"
height="1260"
srcset="https://chengxiaqiucao.github.io/post/072-%E5%BE%AE%E8%BD%AF%E5%B7%B2%E5%8F%91%E5%B8%83playwright-mcp/Pasted-20250402-6_hu_8fe494e7a59ad5b8.png 480w, https://chengxiaqiucao.github.io/post/072-%E5%BE%AE%E8%BD%AF%E5%B7%B2%E5%8F%91%E5%B8%83playwright-mcp/Pasted-20250402-6_hu_254210cae61ea493.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="171"
data-flex-basis="410px"
>&lt;/p>
&lt;p>继续执行，得出结果，用例执行成功&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/072-%E5%BE%AE%E8%BD%AF%E5%B7%B2%E5%8F%91%E5%B8%83playwright-mcp/Pasted-20250402-7.png"
width="2126"
height="1155"
srcset="https://chengxiaqiucao.github.io/post/072-%E5%BE%AE%E8%BD%AF%E5%B7%B2%E5%8F%91%E5%B8%83playwright-mcp/Pasted-20250402-7_hu_21781221ab7518e2.png 480w, https://chengxiaqiucao.github.io/post/072-%E5%BE%AE%E8%BD%AF%E5%B7%B2%E5%8F%91%E5%B8%83playwright-mcp/Pasted-20250402-7_hu_6c9cb4820d181e78.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="184"
data-flex-basis="441px"
>&lt;/p>
&lt;p>可以看到，这里我们没有编写任何代码，就利用Playwright的mcp完成了对登录用例的执行。&lt;/p>
&lt;p>当然实际工作中，通过mcp server的集成，更多是为了我们方便地调用浏览器完成任务执行提供了更多便利！&lt;/p>
&lt;p>基于MCP-Server，相信还有更多、更丰富的实践可以帮助到我们！&lt;/p>
&lt;hr>
&lt;p>上一篇文章中，我们介绍了通过vscode insiders 集成微软官方的playwright mcp并执行测试的一个基本效果。&lt;/p>
&lt;p>有小伙伴提问是否能在 &lt;code>Cursor&lt;/code> 中使用？这里我也进行了尝试，答案是可以成功集成，但有点小坑。 这里就跟大家分享下配置过程，以及Cursor中集成mcp以后的强大能力。让 AI 帮助我们完成大部分基本的功能测试已经不再遥远&lt;/p>
&lt;h2 id="在cursor中启用playwright-mcp">在Cursor中启用playwright-mcp
&lt;/h2>&lt;h3 id="预置安装">预置安装
&lt;/h3>&lt;p>首先，当然要先安装mcp server以及对应的依赖，这里mcp和playwright都是基于nodejs的。所以通过下面命令先安装&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-batch" data-lang="batch">&lt;span class="line">&lt;span class="cl">npm install -g @playwright/mcp@latest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">npm install -g @playwright@latest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">npx playwright install --with-deps
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="cursor配置">Cursor配置
&lt;/h3>&lt;p>完成安装后，进入 Cursor 的设置页面，在其MCP部分，添加 MCP server配置，参照Playwright官网的介绍，
添加mcp sever配置：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;mcpServers&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;playwright&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;command&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;npx&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;args&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;@playwright/mcp@latest&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>但这时，cursor中的mcp server实际并不能正常运行，会显示 &lt;code>Clint closed&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/072-%E5%BE%AE%E8%BD%AF%E5%B7%B2%E5%8F%91%E5%B8%83playwright-mcp/-20250404.png"
width="1915"
height="746"
srcset="https://chengxiaqiucao.github.io/post/072-%E5%BE%AE%E8%BD%AF%E5%B7%B2%E5%8F%91%E5%B8%83playwright-mcp/-20250404_hu_39c9f769da6c86aa.png 480w, https://chengxiaqiucao.github.io/post/072-%E5%BE%AE%E8%BD%AF%E5%B7%B2%E5%8F%91%E5%B8%83playwright-mcp/-20250404_hu_e2be4efa3972eade.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="256"
data-flex-basis="616px"
>&lt;/p>
&lt;h3 id="windows系统安装要规避两个坑">windows系统安装，要规避两个坑
&lt;/h3>&lt;p>&lt;strong>第一个坑：npx 包加载路径应该加入搜索路径&lt;/strong>&lt;/p>
&lt;p>也就是要将全局安装的相关包，放到nodejs的搜索路径中。做法是在windows系统的环境变量中，把npm包目录加入path中，并放到nodejs之前&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/072-%E5%BE%AE%E8%BD%AF%E5%B7%B2%E5%8F%91%E5%B8%83playwright-mcp/Pasted-20250404.png"
width="719"
height="794"
srcset="https://chengxiaqiucao.github.io/post/072-%E5%BE%AE%E8%BD%AF%E5%B7%B2%E5%8F%91%E5%B8%83playwright-mcp/Pasted-20250404_hu_90aeece056371733.png 480w, https://chengxiaqiucao.github.io/post/072-%E5%BE%AE%E8%BD%AF%E5%B7%B2%E5%8F%91%E5%B8%83playwright-mcp/Pasted-20250404_hu_1985853fae73d10.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="90"
data-flex-basis="217px"
>&lt;/p>
&lt;p>&lt;strong>第二个坑：修改mcp命令行调用命令&lt;/strong>&lt;/p>
&lt;p>cursor中调用npx，其实是通过命令行调用的，但windows系统下，直接通过命令行调用npx，cursor本身并不能拿到调用状态，所以这里要用 &lt;code>cmd /c&lt;/code> 命令调用, 获取命令句柄&lt;/p>
&lt;p>也就是上面的配置文件，修改成：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;mcpServers&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;playwright&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;command&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;cmd /c npx&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;args&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;@playwright/mcp@latest&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>修改以上配置后，重新加载cursor，这时会启动一个命令行窗口，其实就是playwright-mcp，不要关闭，然后可以看到 Cursor中mcp也正常启动了&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/072-%E5%BE%AE%E8%BD%AF%E5%B7%B2%E5%8F%91%E5%B8%83playwright-mcp/Pasted-20250403.png"
width="1327"
height="968"
srcset="https://chengxiaqiucao.github.io/post/072-%E5%BE%AE%E8%BD%AF%E5%B7%B2%E5%8F%91%E5%B8%83playwright-mcp/Pasted-20250403_hu_376d11e59d74c973.png 480w, https://chengxiaqiucao.github.io/post/072-%E5%BE%AE%E8%BD%AF%E5%B7%B2%E5%8F%91%E5%B8%83playwright-mcp/Pasted-20250403_hu_ab054adcc69cab03.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="137"
data-flex-basis="329px"
>&lt;/p>
&lt;h2 id="让-playwright-mcp-代替我们执行测试">让 playwright-mcp 代替我们执行测试
&lt;/h2>&lt;p>我们在Cursor中输入一个基本的任务指令：&lt;/p>
&lt;blockquote>
&lt;p>访问www.saucedemo.com网站，使用problem_user登录，验证该网站完整流程并记录发现的问题&lt;/p>&lt;/blockquote>
&lt;p>以下是完整执行过程&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;span class="lnt">136
&lt;/span>&lt;span class="lnt">137
&lt;/span>&lt;span class="lnt">138
&lt;/span>&lt;span class="lnt">139
&lt;/span>&lt;span class="lnt">140
&lt;/span>&lt;span class="lnt">141
&lt;/span>&lt;span class="lnt">142
&lt;/span>&lt;span class="lnt">143
&lt;/span>&lt;span class="lnt">144
&lt;/span>&lt;span class="lnt">145
&lt;/span>&lt;span class="lnt">146
&lt;/span>&lt;span class="lnt">147
&lt;/span>&lt;span class="lnt">148
&lt;/span>&lt;span class="lnt">149
&lt;/span>&lt;span class="lnt">150
&lt;/span>&lt;span class="lnt">151
&lt;/span>&lt;span class="lnt">152
&lt;/span>&lt;span class="lnt">153
&lt;/span>&lt;span class="lnt">154
&lt;/span>&lt;span class="lnt">155
&lt;/span>&lt;span class="lnt">156
&lt;/span>&lt;span class="lnt">157
&lt;/span>&lt;span class="lnt">158
&lt;/span>&lt;span class="lnt">159
&lt;/span>&lt;span class="lnt">160
&lt;/span>&lt;span class="lnt">161
&lt;/span>&lt;span class="lnt">162
&lt;/span>&lt;span class="lnt">163
&lt;/span>&lt;span class="lnt">164
&lt;/span>&lt;span class="lnt">165
&lt;/span>&lt;span class="lnt">166
&lt;/span>&lt;span class="lnt">167
&lt;/span>&lt;span class="lnt">168
&lt;/span>&lt;span class="lnt">169
&lt;/span>&lt;span class="lnt">170
&lt;/span>&lt;span class="lnt">171
&lt;/span>&lt;span class="lnt">172
&lt;/span>&lt;span class="lnt">173
&lt;/span>&lt;span class="lnt">174
&lt;/span>&lt;span class="lnt">175
&lt;/span>&lt;span class="lnt">176
&lt;/span>&lt;span class="lnt">177
&lt;/span>&lt;span class="lnt">178
&lt;/span>&lt;span class="lnt">179
&lt;/span>&lt;span class="lnt">180
&lt;/span>&lt;span class="lnt">181
&lt;/span>&lt;span class="lnt">182
&lt;/span>&lt;span class="lnt">183
&lt;/span>&lt;span class="lnt">184
&lt;/span>&lt;span class="lnt">185
&lt;/span>&lt;span class="lnt">186
&lt;/span>&lt;span class="lnt">187
&lt;/span>&lt;span class="lnt">188
&lt;/span>&lt;span class="lnt">189
&lt;/span>&lt;span class="lnt">190
&lt;/span>&lt;span class="lnt">191
&lt;/span>&lt;span class="lnt">192
&lt;/span>&lt;span class="lnt">193
&lt;/span>&lt;span class="lnt">194
&lt;/span>&lt;span class="lnt">195
&lt;/span>&lt;span class="lnt">196
&lt;/span>&lt;span class="lnt">197
&lt;/span>&lt;span class="lnt">198
&lt;/span>&lt;span class="lnt">199
&lt;/span>&lt;span class="lnt">200
&lt;/span>&lt;span class="lnt">201
&lt;/span>&lt;span class="lnt">202
&lt;/span>&lt;span class="lnt">203
&lt;/span>&lt;span class="lnt">204
&lt;/span>&lt;span class="lnt">205
&lt;/span>&lt;span class="lnt">206
&lt;/span>&lt;span class="lnt">207
&lt;/span>&lt;span class="lnt">208
&lt;/span>&lt;span class="lnt">209
&lt;/span>&lt;span class="lnt">210
&lt;/span>&lt;span class="lnt">211
&lt;/span>&lt;span class="lnt">212
&lt;/span>&lt;span class="lnt">213
&lt;/span>&lt;span class="lnt">214
&lt;/span>&lt;span class="lnt">215
&lt;/span>&lt;span class="lnt">216
&lt;/span>&lt;span class="lnt">217
&lt;/span>&lt;span class="lnt">218
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">我将帮您访问 Sauce Demo 网站并使用 problem_user 账号进行完整测试流程验证。让我们开始吧。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">首先，让我访问网站：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Called MCP toolbrowser_navigate
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">让我使用 problem_user 账号登录：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Called MCP toolbrowser_type
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">现在输入密码：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Called MCP toolbrowser_type
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">点击登录按钮：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Called MCP toolbrowser_click
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">让我们开始测试并记录问题。首先我注意到以下问题：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1. 商品图片问题：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">所有商品的图片都显示相同的图片（狗的图片），这明显是一个bug，因为每个商品应该显示其独特的产品图片。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">让我尝试添加商品到购物车：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Called MCP toolbrowser_click
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">让我点击购物车图标查看购物车：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Called MCP toolbrowser_click
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">让我们返回商品列表并尝试使用排序功能：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Called MCP toolbrowser_click
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">让我尝试使用排序功能：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Called MCP toolbrowser_click
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Called MCP toolbrowser_select_option
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">基于测试过程，我发现了以下问题：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1. 图片显示问题：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 所有商品的图片都显示为相同的狗图片，而不是各自的产品图片
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 这影响了用户对产品的视觉识别
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1. 购物车功能问题：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 点击商品图片或标题时，没有正确跳转到商品详情页，而是直接跳转到了一个固定的商品页面
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 这影响了用户浏览和选择商品的体验
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1. 排序功能问题：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 选择不同的排序选项（如按价格从低到高）后，商品列表顺序没有发生变化
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 排序功能完全失效
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1. 导航问题：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 点击商品时总是跳转到同一个商品页面，而不是所点击的具体商品
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 这严重影响了用户的购物体验
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1. 按钮状态问题：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 某些商品的&amp;#34;Add to cart&amp;#34;和&amp;#34;Remove&amp;#34;按钮状态显示不一致
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 这可能导致用户对购物车中的商品状态产生混淆
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">这些问题严重影响了网站的基本功能和用户体验。problem_user 账号确实展示了多个需要修复的问题，这些问题涵盖了UI显示、功能操作和用户体验等多个方面。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">是否需要我继续测试其他功能，比如结账流程？
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">请继续测试
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">好的，我将继续测试结账流程。首先让我们添加一些商品到购物车，然后进行结账：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Called MCP toolbrowser_click
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">现在让我们点击购物车图标进入购物车页面：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Called MCP toolbrowser_click
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">我发现点击购物车图标又出现了一个问题 - 它把我们带到了商品详情页而不是购物车页面。让我们尝试点击页面右上角的购物车图标：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Called MCP toolbrowser_navigate
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">让我们继续结账流程，点击Checkout按钮：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Called MCP toolbrowser_click
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">让我们填写个人信息：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Called MCP toolbrowser_type
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Called MCP toolbrowser_type
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Called MCP toolbrowser_type
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">点击Continue继续：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Called MCP toolbrowser_click
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">我发现了一个新的问题：虽然我们输入了姓氏，但系统显示&amp;#34;Last Name is required&amp;#34;的错误。这说明在输入字段上存在问题。让我们再次尝试输入姓氏：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Called MCP toolbrowser_type
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">基于测试过程，我发现了以下新的问题：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1. 购物车导航问题：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 点击商品列表页面的购物车图标会错误地导航到商品详情页
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 必须手动输入购物车URL才能访问购物车页面
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1. 结账表单问题：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 姓氏（Last Name）输入框存在严重问题
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 即使输入了姓氏，系统仍然显示&amp;#34;Last Name is required&amp;#34;错误
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 这个问题阻止了用户完成结账流程
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1. 购物车商品显示问题：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 购物车中显示的商品数量与实际添加的商品数量不一致
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 一些未添加的商品也出现在购物车中
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">这些问题与之前发现的问题一起，严重影响了整个购物流程：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 用户无法正常浏览商品（图片问题）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 无法正确添加商品到购物车（购物车功能问题）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 无法使用排序功能（排序失效）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 无法正常访问购物车（导航问题）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 无法完成结账流程（表单验证问题）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">这些问题使得 problem_user 账号几乎无法完成正常的购物流程。每个主要功能都存在不同程度的问题，这可能是为了测试目的而特意设置的。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">是否需要我继续测试其他功能，比如菜单栏的功能？
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">完成测试，请退出登录并汇总发现的问题
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">好的，让我们先点击菜单按钮然后退出登录：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Called MCP toolbrowser_click
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Called MCP toolbrowser_click
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">现在我来汇总使用 problem_user 账号测试发现的所有问题：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">### 1. 商品展示问题
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 所有商品图片显示为相同的狗图片，而不是各自的产品图片
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 这严重影响了用户对产品的视觉识别和购物体验
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">### 2. 导航问题
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 点击商品图片或标题时，总是跳转到固定的商品页面，而不是所点击的具体商品
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 点击购物车图标错误地导航到商品详情页，而不是购物车页面
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 必须手动输入购物车URL才能正确访问购物车页面
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">### 3. 商品排序功能问题
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 选择不同的排序选项（如按价格从低到高）后，商品列表顺序没有任何变化
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 排序功能完全失效，无法帮助用户按需要的方式浏览商品
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">### 4. 购物车功能问题
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 购物车中显示的商品与实际添加的商品不一致
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 一些未添加的商品也出现在购物车中
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- &amp;#34;Add to cart&amp;#34;和&amp;#34;Remove&amp;#34;按钮状态显示不一致，造成用户混淆
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">### 5. 结账流程问题
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 姓氏（Last Name）输入框存在严重问题
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 即使输入了姓氏，系统仍然显示&amp;#34;Last Name is required&amp;#34;错误
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 这个验证问题完全阻止了用户完成结账流程
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">### 6. 用户体验影响
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 以上问题的综合效果导致：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 用户无法正确浏览和选择商品
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 无法管理购物车内容
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 无法完成购物流程
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 整体购物体验严重受损
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">### 7. 功能可用性评估
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 基本功能几乎都存在问题
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 用户无法完成正常的购物流程
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 这个账号可能是专门用于测试目的，展示了各种可能的问题场景
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">这些问题涵盖了电子商务网站的核心功能，包括商品展示、导航、购物车管理和结账流程。每个环节都存在不同程度的问题，使得整个购物体验变得极其困难和令人沮丧。这些问题的存在可能是为了测试目的，帮助开发人员和测试人员理解各种可能的错误场景。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>可以看到，通过 Cursor + Playwright-mcp ，AI 已经可以通过我们交代的基本指令，主动帮助我们去覆盖主要的功能测试场景并发现和记录问题。假以时日，完全可以很大程度上替代掉比较基础功能测试任务，而测试人员则可以更关注在高价值的深度问题挖掘上。当然，另一方面，基础功能测试人员，确实也要有相当的危机意识，技能提升和扩展边界刻不容缓。&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/qrcode_for_gh_e12c318badb4_258%20%281%29.jpg"
loading="lazy"
>&lt;/p>
&lt;p>欢迎关注秋草的测试技能体系化进阶提升课程，公众号回复 &lt;code>大纲&lt;/code> 了解课程详细目录&lt;/p></description></item><item><title>AI下一站 MCPServer</title><link>https://chengxiaqiucao.github.io/post/073-ai%E4%B8%8B%E4%B8%80%E7%AB%99-mcpserver/</link><pubDate>Tue, 01 Apr 2025 00:00:00 +0000</pubDate><guid>https://chengxiaqiucao.github.io/post/073-ai%E4%B8%8B%E4%B8%80%E7%AB%99-mcpserver/</guid><description>&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/073-ai%E4%B8%8B%E4%B8%80%E7%AB%99-mcpserver/Pasted-20250402.png"
width="565"
height="316"
srcset="https://chengxiaqiucao.github.io/post/073-ai%E4%B8%8B%E4%B8%80%E7%AB%99-mcpserver/Pasted-20250402_hu_46206cb9f1795ee6.png 480w, https://chengxiaqiucao.github.io/post/073-ai%E4%B8%8B%E4%B8%80%E7%AB%99-mcpserver/Pasted-20250402_hu_f61027482dac19eb.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="178"
data-flex-basis="429px"
>&lt;/p>
&lt;h2 id="引言">引言
&lt;/h2>&lt;p>在AI技术高速演进的2025年，大模型的局限性日益凸显：它们虽拥有强大的推理能力，却难以直接访问私有数据或调用外部工具。这一痛点催生了一项革命性技术——&lt;strong>MCP（Model Context Protocol，模型上下文协议）&lt;/strong>，而作为其核心组件的&lt;strong>MCP Server&lt;/strong>，正成为AI行业的下一个风口。本文将深入解析MCP Server的技术本质、行业价值，并结合实际案例探讨其应用前景。&lt;/p>
&lt;hr>
&lt;h2 id="一何为mcpmcp的前世今生">一、何为MCP？MCP的前世今生
&lt;/h2>&lt;h3 id="1-mcp的定义与设计目标">1. MCP的定义与设计目标
&lt;/h3>&lt;p>MCP是由AI公司Anthropic（claude母公司）于2024年11月推出的开放协议，旨在标准化大语言模型（LLM）与外部数据源、工具之间的交互接口。其核心设计目标：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>解耦与标准化&lt;/strong>：将LLM与外部系统的集成从定制化开发转变为基于统一协议的通用连接，类似硬件领域的USB-C接口。&lt;/li>
&lt;li>&lt;strong>去中心化&lt;/strong>：通过允许开发者自主构建MCP Server，分散AI能力，避免单一厂商垄断知识和服务。&lt;/li>
&lt;li>&lt;strong>安全可控&lt;/strong>：通过权限验证和本地化部署，确保数据隐私与操作安全。&lt;/li>
&lt;/ul>
&lt;h3 id="2-从langchain到mcp的技术演进">2. 从Langchain到MCP的技术演进
&lt;/h3>&lt;p>在MCP之前，开发者依赖如Langchain等中间层框架连接LLM与工具，但这些方案存在两大瓶颈：&lt;/p>
&lt;ol>
&lt;li>&lt;strong>碎片化&lt;/strong>：不同厂商的API标准不统一，集成成本高；&lt;/li>
&lt;li>&lt;strong>封闭性&lt;/strong>：OpenAI等厂商的插件生态受限于自身平台，难以跨模型复用。&lt;/li>
&lt;li>&lt;/li>
&lt;/ol>
&lt;p>MCP通过协议层的抽象，将工具调用、数据访问等能力封装为标准化接口，使任何支持MCP协议的LLM均可无缝接入第三方服务。&lt;/p>
&lt;h3 id="3-mcp的生态现状">3. MCP的生态现状
&lt;/h3>&lt;p>现阶段，MCP生态已初具规模：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>头部公司支持&lt;/strong>：除了发起公司的claude，包括AI行业领军的OpenAI，在国内百度、腾讯等也均宣称支持MCP&lt;/li>
&lt;li>&lt;strong>开发者众多&lt;/strong>：因开发门槛低，当前公开的各类MCP Server已呈爆炸式增长态势，短短数周已有数千个公开Server，涵盖数据库、设计工具、支付系统等领域。&lt;/li>
&lt;li>&lt;strong>商业价值显现&lt;/strong>：a16z等机构已绘制MCP市场地图，预测其可能催生“Agentic AI领域的Stripe”级公司。&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="二mcp-server有何作用为什么它可能是ai行业的下一个风口">二、MCP Server有何作用？为什么它可能是AI行业的下一个风口？
&lt;/h2>&lt;h3 id="1-mcp-server的核心功能">1. MCP Server的核心功能
&lt;/h3>&lt;p>MCP Server是MCP协议的具体实现，承担以下关键角色：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>工具代理&lt;/strong>：将外部API（如GitHub、PostgreSQL）转化为LLM可理解的标准化工具描述，例如将“创建GitHub Issue”抽象为函数调用。&lt;/li>
&lt;li>&lt;strong>数据网关&lt;/strong>：安全访问本地或云端数据，例如通过文件系统MCP Server让LLM读取桌面文件。&lt;/li>
&lt;li>&lt;strong>流程编排&lt;/strong>：支持多工具串联调用，例如先查询数据库再生成报告。&lt;/li>
&lt;/ul>
&lt;h3 id="2-成为风口的三大驱动力">2. 成为风口的三大驱动力
&lt;/h3>&lt;h4 id="1技术趋势从胖模型到瘦模型生态">（1）技术趋势：从“胖模型”到“瘦模型+生态”
&lt;/h4>&lt;p>传统“胖模型”试图将所有知识内化于参数中，导致训练成本高且时效性差。MCP架构下，LLM专注于语言理解，知识扩展与工具调用由MCP Server网络实现，形成“瘦模型+分布式能力”的新范式。&lt;/p>
&lt;h4 id="2经济模型创作者经济的ai化">（2）经济模型：创作者经济的AI化
&lt;/h4>&lt;p>MCP允许个人开发者通过构建MCP Server（如鸟类知识库）获得收益分成，形成去中心化的知识经济网络。例如，基于以太坊的OpenMCP.Network可通过智能合约实现调用量自动结算。&lt;/p>
&lt;h4 id="3行业需求企业私有化ai落地的刚需">（3）行业需求：企业私有化AI落地的刚需
&lt;/h4>&lt;p>企业可通过MCP Server将内部系统（如CRM、ERP）安全暴露给LLM，无需将敏感数据上传至云端。NineData等公司已推出数据库MCP Server解决方案，支持本地化数据管理。&lt;/p>
&lt;hr>
&lt;h2 id="三作为软件测试从业者我们如何应用mcp-server">三、作为软件测试从业者，我们如何应用MCP Server？
&lt;/h2>&lt;h3 id="1-测试场景的mcp化改造">1. 测试场景的MCP化改造
&lt;/h3>&lt;h4 id="1模拟外部依赖">（1）模拟外部依赖
&lt;/h4>&lt;p>通过构建Mock MCP Server，替代真实支付、第三方API等依赖项，实现测试环境隔离。例如，模拟支付宝接口返回异常响应，验证系统容错能力。&lt;/p>
&lt;h4 id="2数据驱动测试">（2）数据驱动测试
&lt;/h4>&lt;p>将测试用例存储在数据库或文件中，通过MCP Server动态读取并执行。例如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@mcp.tool&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">load_test_cases&lt;/span>&lt;span class="p">():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;从指定目录加载JSON格式测试用例&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">json&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;test_cases.json&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>测试框架可自动获取用例并生成测试报告。&lt;/p>
&lt;h4 id="3ai辅助测试">（3）AI辅助测试
&lt;/h4>&lt;p>利用LLM通过MCP Server调用测试工具，例如：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>自动生成测试脚本&lt;/strong>：根据需求描述生成Selenium代码；&lt;/li>
&lt;li>&lt;strong>智能分析日志&lt;/strong>：结合ELK Stack的MCP Server定位缺陷根源。&lt;/li>
&lt;/ul>
&lt;h3 id="2-测试从业者的技能升级建议">2. 测试从业者的技能升级建议
&lt;/h3>&lt;ul>
&lt;li>&lt;strong>掌握MCP Server开发&lt;/strong>：学习Python/TypeScript的MCP SDK，构建定制化测试工具。&lt;/li>
&lt;li>&lt;strong>熟悉主流MCP生态&lt;/strong>：关注GitHub上的Awesome MCP Servers列表，了解测试相关服务（如PostgreSQL、JIRA集成）。&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="四mcp-server的简单实现案例桌面文件查询服务">四、MCP Server的简单实现案例：桌面文件查询服务
&lt;/h2>&lt;h3 id="1-环境准备">1. 环境准备
&lt;/h3>&lt;ul>
&lt;li>安装Python MCP SDK：&lt;code>pip install mcp&lt;/code>&lt;/li>
&lt;li>创建项目目录：&lt;code>mkdir mcp-demo &amp;amp;&amp;amp; cd mcp-demo&lt;/code>&lt;/li>
&lt;/ul>
&lt;h3 id="2-代码实现">2. 代码实现
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">mcp.server.fastmcp&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">FastMCP&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">os&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">mcp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">FastMCP&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@mcp.tool&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">list_desktop_files&lt;/span>&lt;span class="p">():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;获取当前用户桌面文件列表&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">listdir&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">expanduser&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;~/Desktop&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="vm">__name__&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;__main__&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mcp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">transport&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;stdio&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>此代码定义了一个MCP Server，提供&lt;code>list_desktop_files&lt;/code>工具，允许LLM查询用户桌面文件。&lt;/p>
&lt;h3 id="3-客户端配置与测试">3. 客户端配置与测试
&lt;/h3>&lt;p>在Cursor编辑器的&lt;code>mcp.json&lt;/code>中添加配置：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;mcpServers&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;desktop&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;command&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;python server.py&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>启动服务后，我们可直接提问：“我的桌面有哪些文件？”，Cursor将通过MCP协议调用服务并返回我当前桌面上的文件清单，并按类型进行分类。&lt;/p>
&lt;hr>
&lt;h2 id="结语">结语
&lt;/h2>&lt;p>MCP Server正在重塑AI与物理世界的交互方式。对开发者而言，它是降低集成成本的利器；对企业而言，它是激活数据价值的钥匙；对测试从业者而言，它是自动化演进的新引擎。尽管生态仍处早期，但其标准化、去中心化的设计理念，已为AI行业的下一站指明了方向。正如Anthropic所言：“MCP不是终点，而是Agentic AI时代的起点。”&lt;/p></description></item><item><title>测试人员伤害质量的十大误区</title><link>https://chengxiaqiucao.github.io/post/071-%E6%B5%8B%E8%AF%95%E4%BA%BA%E5%91%98%E4%BC%A4%E5%AE%B3%E8%B4%A8%E9%87%8F%E7%9A%84%E5%8D%81%E5%A4%A7%E8%AF%AF%E5%8C%BA/</link><pubDate>Fri, 28 Mar 2025 15:59:08 +0800</pubDate><guid>https://chengxiaqiucao.github.io/post/071-%E6%B5%8B%E8%AF%95%E4%BA%BA%E5%91%98%E4%BC%A4%E5%AE%B3%E8%B4%A8%E9%87%8F%E7%9A%84%E5%8D%81%E5%A4%A7%E8%AF%AF%E5%8C%BA/</guid><description>&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/071-%E6%B5%8B%E8%AF%95%E4%BA%BA%E5%91%98%E4%BC%A4%E5%AE%B3%E8%B4%A8%E9%87%8F%E7%9A%84%E5%8D%81%E5%A4%A7%E8%AF%AF%E5%8C%BA/%E4%BC%A4%E5%AE%B3%E8%B4%A8%E9%87%8F10%E5%A4%A7%E8%AF%AF%E5%8C%BA.png"
width="900"
height="383"
srcset="https://chengxiaqiucao.github.io/post/071-%E6%B5%8B%E8%AF%95%E4%BA%BA%E5%91%98%E4%BC%A4%E5%AE%B3%E8%B4%A8%E9%87%8F%E7%9A%84%E5%8D%81%E5%A4%A7%E8%AF%AF%E5%8C%BA/%E4%BC%A4%E5%AE%B3%E8%B4%A8%E9%87%8F10%E5%A4%A7%E8%AF%AF%E5%8C%BA_hu_588289c4d5a18079.png 480w, https://chengxiaqiucao.github.io/post/071-%E6%B5%8B%E8%AF%95%E4%BA%BA%E5%91%98%E4%BC%A4%E5%AE%B3%E8%B4%A8%E9%87%8F%E7%9A%84%E5%8D%81%E5%A4%A7%E8%AF%AF%E5%8C%BA/%E4%BC%A4%E5%AE%B3%E8%B4%A8%E9%87%8F10%E5%A4%A7%E8%AF%AF%E5%8C%BA_hu_97ec78e79daba015.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="234"
data-flex-basis="563px"
>&lt;/p>
&lt;p>很多企业会把承担测试的工程师称为QA（quality assurance），但QA和Tester其实是两个不同的岗位，但不可否认，测试工程师的主要职责也是面向质量的，是通过评估质量状态来帮助团队进行质量改进的。&lt;/p>
&lt;p>但即便这样，测试工程师的工作就一定是对质量改进有帮助的吗？在实际工作中，有些误区反而会让测试人员的工作对质量产生负面影响。&lt;/p>
&lt;p>这里秋草梳理总结了测试人员可能伤害质量的十大误区，以及对应的正确做法。&lt;/p>
&lt;h2 id="1-测试的职责是发现并汇报bug但不是确认">1. 测试的职责是发现并汇报Bug，但不是确认
&lt;/h2>&lt;p>&lt;strong>误区：经常有开发同学和测试同学就某个问题是否应该报Bug进行争论， “需求中没要求”， “这个问题不影响用户使用” 等等是经常出现的理由。很多测试同学也确实会因为这些原因不再报这些问题，甚至在报Bug前会去和开发确认能不能报。&lt;/strong>&lt;/p>
&lt;p>这是一个对质量伤害极大的误区。测试的价值在于评估质量状态，而评估的关键在于独立性。质量没有对错，只有好坏。需求中没定义的行为，不代表就是不需要的；不影响用户使用也不代表就是好的实现。测试是站在评估质量的视角，指出缺陷或者提出优化建议都是分内工作。开发则负责分析、认定并解决缺陷。如果开发和测试在认定上有分歧，还有PO或业务分析师、CCB成员可以进行仲裁。&lt;/p>
&lt;p>但对于测试人员来说，汇报&lt;strong>一切&lt;/strong>觉得有问题或者质量不好的产品行为则是工作义务。有意或无意去隐瞒或掩盖缺陷，才是对产品质量真正的伤害。&lt;/p>
&lt;h2 id="2-发现bug只是开始还应为修复bug提供尽可能多的上下文">2. 发现Bug只是开始，还应为修复Bug提供尽可能多的上下文
&lt;/h2>&lt;p>&lt;strong>误区：有的测试同学会认为我发现了问题，并且也进行了报告，那么工作就已经完成，后续修复过程与我无关，只需修复后进行验证即可&lt;/strong>&lt;/p>
&lt;p>测试是整个软件产品研发生命周期中的一个环节，最终是为产品整体质量服务的。而Bug本身其实对产品是无价值的，因为只有解决掉的Bug才会对产品质量有帮助。 从这个角度来说，虽然报告Bug是测试人员的主要工作，但对产品来说，最终解决Bug才是目的。所以测试作为产品研发的一环，即便解决Bug不是测试直接负责，但我们也应该为解决Bug提供必要的支撑。&lt;/p>
&lt;p>这部分在之前地文章 【】中有详细探讨，大家有兴趣可以参阅&lt;/p>
&lt;h2 id="3-测试不只是验证需求">3. 测试不只是验证需求
&lt;/h2>&lt;p>&lt;strong>误区：测试只要将需求中明确定义的部分进行验证无误即可，未定义的部分无需测试&lt;/strong>&lt;/p>
&lt;p>这里和第一个误区有些关联，是很多开发和测试争论bug的前提。在前文 【】中我们对测试目标的认识误区中，也说过这一点。就是测试除了验证需求之外，还有更多探索性工作应该覆盖。测试并不止是检查。&lt;/p>
&lt;p>而除此之外，这里我还想更要强调产品的整体性、系统性。特别是在敏捷研发模式下，这个误区很容易被扩大。&lt;/p>
&lt;p>在敏捷中，敏捷迭代的输出是Increment（产品增量），这个对开发工作是成立的。但测试工作是面向整个产品系统的，并不能只覆盖增量部分。需求也是增量的，所以当然不能仅覆盖增量部分的需求，这就是为什么回归测试是测试中必须包含的范畴，也是自动化测试越来越受重视的根本原因。（关于敏捷相关的分析介绍可以参看之前敏捷系列）&lt;/p>
&lt;h2 id="4-测试无止境好钢用在刀刃上">4. 测试无止境，好钢用在刀刃上
&lt;/h2>&lt;p>&lt;strong>误区：要想更多发现Bug，尽量探索、发散，并利用Bug的集群效应，尽可能多地发现Bug&lt;/strong>&lt;/p>
&lt;p>还是在 【】一文中，我们也澄清过，测试的目标也并不是为了发现更多Bug。而且测试其实无止境的，测试最终的目的是对整个产品或系统提供一个可靠、完整的质量状态评估。而这个质量状态是否客观准确，跟Bug的多少其实并不一定是一个正相关的关系。&lt;/p>
&lt;p>测试在尽可能发现Bug的同时，还是认识到，我们是要系统地对质量进行评估，但测试又是无法穷尽的，所以必须要把有限的时间进行科学地分配，优先关注高优先的部分，比如新功能、代码出现变更、高风险模块这些都是应该优先进行测试并重点保证的部分。&lt;/p>
&lt;p>&lt;code>精准测试&lt;/code>、&lt;code>基于风险的测试RBT&lt;/code>等都是这种思路下，把我们的测试资源、时间优先放到高价值部分的实践。&lt;/p>
&lt;h2 id="5-测试工作不是提测才开展从产品需求讨论就已经开始">5. 测试工作不是提测才开展，从产品需求讨论就已经开始
&lt;/h2>&lt;p>&lt;strong>误区：测试应该在产品提测以后才能正式展开，Bug也应该在提测以后才应该报告&lt;/strong>&lt;/p>
&lt;p>在当今，以上误区当然是不正确的，因为不管是&lt;code>测试左移&lt;/code>还是各种测试理论都强调了测试早期参与的重要性。&lt;/p>
&lt;p>但理论归理论，实际实践中，测试通常还是在提测以后才真正开展工作。&lt;/p>
&lt;p>一方面是产品前期，测试的存在感低，参与度低，容易被忽视；&lt;/p>
&lt;p>另一方面，很多测试团队的考核重Bug数量，这其实更加消磨了测试早期参与的积极性，导致测试并不太愿意在早期协助团队暴露产品的问题。&lt;/p>
&lt;p>但从产品交付角度，越是后期，问题修复的成本就越高。所以从产品管理来说，摒弃以Bug考核的导向，引导测试前期的积极参与，测试可以发挥其对问题的敏感度，从需求讨论开始就能识别、考虑到很多异常场景，并帮助团队提前规避。&lt;/p>
&lt;h2 id="6-设计和架构讨论测试不应是小透明">6. 设计和架构讨论，测试不应是小透明
&lt;/h2>&lt;p>&lt;strong>误区：架构和系统设计、详细设计是开发团队的任务，测试无需了解或参与讨论，等待产品开发完成后根据需求进行测试即可&lt;/strong>&lt;/p>
&lt;p>和上一条类似，&lt;code>测试左移&lt;/code>并不只是说测试更多了解需求，同样也要求测试参与到设计、甚至编码环节。&lt;/p>
&lt;p>还是要谈测试的目标：是要尽可能准确评估出产品的质量状态。而质量必然是和产品的具体实现紧密相关的，对产品的实现细节了解得越清晰，那么在测试时就越能够有的放矢，也包括可以在设计、编码阶段就提前帮助团队规避质量问题。&lt;/p>
&lt;p>相反，如果对设计、代码完全是黑盒，很可能遗漏掉一些关键的测试场景导致问题泄露。&lt;/p>
&lt;ul>
&lt;li>不了解云应用的负载均衡机制实现，只在单节点上验证，就无法验证负载均衡失效导致的问题&lt;/li>
&lt;li>不了解系统的缓存实现机制，就难以针对性地去构建缓存命中场景&lt;/li>
&lt;li>不了解界面的响应式适配实现，就难以高效地进行完成兼容性测试&lt;/li>
&lt;li>不了解接口的校验机制，就难以构造有效的接口测试数据&lt;/li>
&lt;/ul>
&lt;p>以上种种，都是测试不应该游离于设计环节之外，认为产品设计不属于测试范畴而忽略对这个环节的参与&lt;/p>
&lt;h2 id="7-独立的测试环境是充分测试的前提">7. 独立的测试环境是充分测试的前提
&lt;/h2>&lt;p>&lt;strong>误区：测试执行只需要关注产品本身，可以在集成环境甚至开发环境上进行测试，并不影响测试效果&lt;/strong>&lt;/p>
&lt;p>确实，测试的对象是产品本身。但测试环境其实是能否对产品进行全面、高效测试的一个关键制约。&lt;/p>
&lt;p>软件测试和探索过程中，对产品的使用，通常是很多不同的操作、交互的相互叠加。而在发现产品问题时，对问题的判断，一个重要的前提就是产品本身的相关前置条件、关联因素是清晰、明确的。而要保证这一点，一个独立、无干扰的测试环境就尤为必要。如果使用开发环境来进行测试，在测试同时，开发人员同时也在环境上进行调测、变更，不仅会增加大量无效问题的出现，也是对测试、问题定位等资源的极大浪费。&lt;/p>
&lt;p>除此之外，测试中，不可避免还有各种异常场景的营造，而一个独立的测试环境，更便于测试人员调整不同的测试场景，比如：&lt;/p>
&lt;ul>
&lt;li>修改网络配置，营造代理访问、内外部IP、弱网等场景&lt;/li>
&lt;li>修改系统时间、定时任务触发、模拟不同时段数据等场景&lt;/li>
&lt;li>模拟资源不足、空间占满、海量或巨大文件等场景&lt;/li>
&lt;li>产品中的部分限制因素，开启Debug模式、不同的鉴权设定、各种配置变更&lt;/li>
&lt;/ul>
&lt;p>这些测试都是建立在一个独立、可控的测试环境基础上的。&lt;/p>
&lt;h2 id="8-自动化测试代码也是程序像对待产品一样对待测试代码">8. 自动化测试代码也是程序，像对待产品一样对待测试代码
&lt;/h2>&lt;p>&lt;strong>误区：编写自动化测试，就是为了替代部分手工测试的执行，完成自动化代码部分的编写，让它能执行并覆盖相关用例即可&lt;/strong>&lt;/p>
&lt;p>自动化测试的目的确实是为了代替很多人工测试工作，达到效率提升的目的。但自动化测试的实施并非一锤子买卖，它也是一个长期的过程。而且自动化测试，本身也是通过程序代码来实现，是程序就会有bug，因此对自动化测试脚本、工具本身的质量保证和维护也是测试人员的重要工作。&lt;/p>
&lt;p>并不是我们编写出一个可跑的自动化脚本就是进行了自动化。对自动化脚本同样要像软件产品一样经过需求分析、设计、编码、测试以及后续的维护这样的生命周期。&lt;/p>
&lt;p>所以自动化测试本身也是一个较大投入，要让相关脚本长期发挥作用并真正起到提升执行效率的目的，那么对自动化测试代码的良好设计和持续维护就必不可少。&lt;/p>
&lt;h2 id="9--cicd管道同样也是测试的职责">9. CI/CD管道同样也是测试的职责
&lt;/h2>&lt;p>&lt;strong>误区：CI/CD作为现在很多研发团队的基础设施，通常会有专门的DevOps工程师负责搭建、维护，作为测试人员，负责其中自动化测试部分脚本的编写即可&lt;/strong>&lt;/p>
&lt;p>诚然，整个CI/CD管道中，和测试直接相关的部分主要就是自动化测试。但还是那句话：测试作为整个研发过程的一分子，是不可能独立于研发过程之外的。特别是敏捷研发中，更加强调团队的整体性，团队整体对研发过程负责。&lt;/p>
&lt;p>所以CI/CD管道建立、运作和保持畅通的过程，并不存在明显的测试只需要负责自动化测试环节的说法。&lt;/p>
&lt;p>作为质量视角的专业人员，在CI/CD管道建设中，我们也可以发挥更多的作用：&lt;/p>
&lt;ul>
&lt;li>定义管道中各个环节流转的质量门禁，将测试左移反映到CI/CD管道中&lt;/li>
&lt;li>代码变更的管控和识别，这部分对于测试阶段的精准测试，意义重大&lt;/li>
&lt;li>包括开发环境、集成环境、测试环境以至线上生产环境的监控，特别是很多质量相关指标的收集实现&lt;/li>
&lt;li>可视化，包括自动化测试报告、各种数据跟踪的状态呈现等&lt;/li>
&lt;/ul>
&lt;h2 id="10-珍惜所有了解终端用户使用场景的机会">10. 珍惜所有了解终端用户使用场景的机会
&lt;/h2>&lt;p>&lt;strong>误区：作为研发团队成员，测试无须主动接触终端用户。和用户对接更多是销售、售后、客服团队的工作&lt;/strong>&lt;/p>
&lt;p>测试工作面向质量，而质量的最终判断，其实是终端用户。所以很多团队都强调，测试是终端用户的代言人，是要站在用户视角来使用、体验产品并提前发现问题的角色。&lt;/p>
&lt;p>因此，从这个意义上，测试其实应该更多地去接触用户，了解用户使用产品的不同场景，诉求以至偏好。&lt;/p>
&lt;p>所以，在有机会接触用户的场景下，测试应该是主动而非抗拒。作为测试，这方面的机会还是比较多的，充分利用和用户接触的机会，丰富我们对于产品所属行业的理解并应用到我们的测试工作中来。&lt;/p>
&lt;ul>
&lt;li>用户问题支持。在一些反馈到研发团队的客户问题，需要提供技术支持时，作为测试，是经常会要直接面向客户的，这时也是我们直观了解用户对产品使用场景和面临问题的地方。&lt;/li>
&lt;li>对外测试。很多用户在选择产品前，都会有针对产品的验收测试。这些测试往往在客户方进行，但产品测试人员往往会作为产品方来提供支持或实施测试，也就是外场测试。这也是一个很好的深入了解用户场景的窗口&lt;/li>
&lt;li>客户拜访。有的企业在产品研发初期或过程中，会安排和终端客户的拜访、访谈，有时也会邀请研发团队参与，虽然大多情况下是系统分析师、架构等角色参与更多，但测试也会参与到此类拜访中，这是在初期就深入了解产品应用场景的一个绝佳机会。&lt;/li>
&lt;li>行业报告。除了直接和终端客户的沟通外，关注产品所属行业的行业报告、资讯和趋势分析等资料，同样也是一个深入理解产品所处行业和用户的上佳渠道。&lt;/li>
&lt;/ul>
&lt;hr>
&lt;p>以上就是对测试人员伤害质量十大误区的梳理总结，欢迎大家讨论补充。
另外秋草关于测试技能体系化提升的课程，可以回复 &lt;strong>“大纲”&lt;/strong> 或在公众号菜单中查看课程目录。&lt;/p></description></item><item><title>AI时代的软件测试，助手还是对手？</title><link>https://chengxiaqiucao.github.io/post/070-ai%E6%97%B6%E4%BB%A3%E7%9A%84%E6%B5%8B%E8%AF%95/</link><pubDate>Tue, 25 Mar 2025 21:38:36 +0800</pubDate><guid>https://chengxiaqiucao.github.io/post/070-ai%E6%97%B6%E4%BB%A3%E7%9A%84%E6%B5%8B%E8%AF%95/</guid><description>&lt;p>当下时代，AI浪潮呼啸而至，未来已来已不是一句空话。和AI相关的话题、讨论也成了科技圈的“流量密码”，从自动驾驶到智能客服，每个行业似乎都在蹭这波AI的热度。&lt;/p>
&lt;p>但作为测试从业者，我们在面对 AI 的快速发展时，大家更关心的可能是：&lt;strong>AI在软件测试里到底能干啥？真的能帮我们提高产出、效率吗？或者发展下去，AI会否彻底替代测试岗位？&lt;/strong>&lt;/p>
&lt;p>本篇我们就来探讨下这个话题&lt;/p>
&lt;h2 id="ai在软件测试不同阶段中的角色">AI在软件测试不同阶段中的角色
&lt;/h2>&lt;p>AI测试，归根到底，还是希望它承担部分或者辅助、提升原来的测试工作，也就是说，AI本身，并不会改变软件研发的测试生命周期规律。&lt;/p>
&lt;p>所以，我们可以从软件测试生命周期的不同阶段，测试工作职责范围的角度，来看AI可以发挥哪些作用。&lt;/p>
&lt;h3 id="需求分析阶段">需求分析阶段
&lt;/h3>&lt;p>这个阶段，我们可以基于AI的自然语言处理技术，对原始需求文档进行梳理，输出包括业务流程图、操作流图、数据流向等分析结果。&lt;/p>
&lt;p>同时也可以结合更多关联的本地数据，如历史Bug数据、测试日志、项目数据等，识别测试的优先级并构建风险模型，识别风险。并基于这些分析结果，帮助我们更合理地制定测试计划。&lt;/p>
&lt;h3 id="测测试用例设计阶段">测测试用例设计阶段
&lt;/h3>&lt;p>在软件设计和开发阶段，测试人员通常也会同步完成测试设计，这个阶段，我们可以利用 AI 帮助我们基于需求文档和需求分析阶段的成果，完成测试用例的生成，基于AI可以完成更多更充分的正向、反向用例以及各种边界条件以扩大覆盖范围。&lt;/p>
&lt;h3 id="测试准备阶段">测试准备阶段
&lt;/h3>&lt;p>这阶段，最主要的工作是测试环境的搭建部署，可以利用AI能力结合CI平台实现测试服务器、数据库的环境智能化管理和资源的动态调配等工作。&lt;/p>
&lt;h3 id="测试执行阶段">测试执行阶段
&lt;/h3>&lt;p>执行阶段，可以基于各种风险评估、依赖关系及业务影响等因素动态调整测试顺序，优先覆盖更高风险的模块，实现缺陷尽早暴露的目的。&lt;/p>
&lt;p>另外，也可以通过AI增强如日志分析、图像比对等能力，提升我们的测试执行效率和缺陷发现能力。&lt;/p>
&lt;h3 id="测试报告阶段">测试报告阶段
&lt;/h3>&lt;p>在测试的收尾部分，利用AI针对各种过程数据的综合分析，可以帮助我们出具多维度的测试报告，为项目决策者提供结构化的测试状态分析。&lt;/p>
&lt;h2 id="现阶段-ai-如何赋能软件测试">现阶段 AI 如何赋能软件测试
&lt;/h2>&lt;p>目前的AI的发展，已经可以在很多典型的测试场景下提供更多支持，以下梳理了可以通过AI赋能的一些典型场景&lt;/p>
&lt;ul>
&lt;li>&lt;strong>智能数据生成&lt;/strong>：创建多样化数据集，覆盖常规场景与边缘用例&lt;/li>
&lt;li>&lt;strong>自动化测试&lt;/strong>：自动适应UI变更，保证自动化测试脚本稳定性&lt;/li>
&lt;li>&lt;strong>精准回归测试&lt;/strong>：基于代码变更智能选取关联测试用例&lt;/li>
&lt;li>&lt;strong>流程克隆&lt;/strong>：学习测试工作流后自动执行相似流程&lt;/li>
&lt;li>&lt;strong>动态等待机制&lt;/strong>：智能判断页面加载状态后执行操作&lt;/li>
&lt;li>&lt;strong>日志智能分析&lt;/strong>：分析、识别错误日志中的潜在问题模式&lt;/li>
&lt;li>&lt;strong>负载/性能测试&lt;/strong>：模拟真实用户行为、诊断性能瓶颈&lt;/li>
&lt;li>&lt;strong>持续测试监控&lt;/strong>：实时监测应用状态并预警异常&lt;/li>
&lt;li>&lt;strong>探索性测试支持&lt;/strong>：在探索测试过程中提供智能化建议&lt;/li>
&lt;li>&lt;strong>预测性分析&lt;/strong>：基于历史数据预测版本发布风险&lt;/li>
&lt;/ul>
&lt;h2 id="引入ai的优势">引入AI的优势
&lt;/h2>&lt;p>AI 可以通过持续地学习、训练并不断提升，因此引入AI后，可以在以下诸多方面建立起优势：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>成本优化&lt;/strong>：可以降低人工成本，优化资源配置，加速产品上市&lt;/li>
&lt;li>&lt;strong>稳定可靠&lt;/strong>：确保测试的标准化执行与结果一致性&lt;/li>
&lt;li>&lt;strong>缺陷早筛&lt;/strong>：提前暴露问题，缩短修复周期&lt;/li>
&lt;li>&lt;strong>快速反馈&lt;/strong>：多环境并行测试，缩短反馈链路&lt;/li>
&lt;li>&lt;strong>高质量用例&lt;/strong>：自动生成单元测试、回归测试、API测试等多样化用例&lt;/li>
&lt;/ul>
&lt;h2 id="应用ai依然存在巨大的挑战">应用AI依然存在巨大的挑战
&lt;/h2>&lt;h3 id="人工智能还是人工智障">&lt;strong>人工智能还是“人工智障”&lt;/strong>
&lt;/h3>&lt;p>AI的训练数据如果有偏差，结果可能离谱到让你怀疑人生。如果AI的训练结果不理想，那么AI的应用可能不仅无法提升效率，反而还会浪费大量额外的资源去校正它的执行结果。&lt;/p>
&lt;h3 id="数据依赖症">&lt;strong>数据依赖症&lt;/strong>
&lt;/h3>&lt;p>AI 对于优质训练数据和各种参数调整的高要求，往往对具体行业的实际落地应用形成很大制约。&lt;/p>
&lt;h3 id="维护成本比想象中高">&lt;strong>维护成本比想象中高&lt;/strong>
&lt;/h3>&lt;p>不止是数据资源的投入，对本地数据集的模型训练也需要投入大量时间与资金，包括设备资源也是较大的开支。另外现阶段AI人才的缺口，也让AI应用的人力成本高出一大截&lt;/p>
&lt;h3 id="经验和直觉ai永远学不会">&lt;strong>经验和直觉，AI永远学不会&lt;/strong>
&lt;/h3>&lt;p>经验丰富的老测试人通过各种蛛丝马迹可以嗅出产品中一些隐性的缺陷，这种类似第六感的“玄学”，AI必然难以复制。&lt;/p>
&lt;h2 id="助手还是对手">助手还是对手？
&lt;/h2>&lt;p>“AI这么发展，测试工程师是不是要失业了？” &lt;strong>其实大可不必惊慌！&lt;/strong>&lt;/p>
&lt;p>AI的本质还是工具，就像通过自动化测试取代部分手工的校验一样，它只会改变部分工作方式，而非淘汰岗位。未来的测试人员更像是“AI训练师+策略指挥官”——我们需要做的其实就是：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>教会AI理解业务逻辑&lt;/strong>（比如什么是“正确的订单状态流转”）；&lt;/li>
&lt;li>&lt;strong>设计更聪明的测试策略&lt;/strong>（比如如何平衡自动化与探索性测试）；&lt;/li>
&lt;li>&lt;strong>解读AI的结果并决策&lt;/strong>（比如某个异常到底是Bug还是误报）。&lt;/li>
&lt;/ul>
&lt;p>AI就像扫地机器人，能帮你清理地面，但遇到顽固污渍（复杂业务场景）、家具布局变化（需求变更），还是得你亲自出马。&lt;/p>
&lt;h2 id="结语ai不是终点而是新起点">结语：AI不是终点，而是新起点
&lt;/h2>&lt;p>AI在软件测试中的应用还处于起步期，我们可以看到它的巨大潜力，但还不到能完全信赖并放弃原有模式的时候。作为测试人员，与其焦虑“会不会被取代”，不如主动拥抱变化：学点机器学习基础知识，了解主流AI测试工具，甚至参与训练自己的模型。&lt;/p>
&lt;p>毕竟，&lt;strong>未来的软件测试江湖，最吃香的肯定不是“最会点鼠标的人”，而是“最会和AI打交道的人”&lt;/strong>。你说呢？&lt;/p>
&lt;hr>
&lt;p>部分前文也探讨过AI的发展，参考阅读&lt;/p>
&lt;p>&lt;a class="link" href="https://mp.weixin.qq.com/s/JkBcOzZpVEVJBtvZjE4vEQ?token=645759914&amp;amp;lang=zh_CN" target="_blank" rel="noopener"
>AI时代，程序员还有没有出路&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://mp.weixin.qq.com/s/k9Dj9eRBhehPtbMiIHnn9g" target="_blank" rel="noopener"
>测试职业和其发展前景&lt;/a>&lt;/p></description></item><item><title>Deepseek提示词框架助力团队改进现状，效能提升</title><link>https://chengxiaqiucao.github.io/post/069-%E4%BC%98%E5%8C%96ai%E6%8F%90%E7%A4%BA%E6%A1%86%E6%9E%B6%E5%AE%9E%E7%8E%B0%E5%9B%A2%E9%98%9F%E6%8F%90%E5%8D%87/</link><pubDate>Wed, 19 Mar 2025 22:44:42 +0800</pubDate><guid>https://chengxiaqiucao.github.io/post/069-%E4%BC%98%E5%8C%96ai%E6%8F%90%E7%A4%BA%E6%A1%86%E6%9E%B6%E5%AE%9E%E7%8E%B0%E5%9B%A2%E9%98%9F%E6%8F%90%E5%8D%87/</guid><description>&lt;img src="https://chengxiaqiucao.github.io/post/069-%E4%BC%98%E5%8C%96ai%E6%8F%90%E7%A4%BA%E6%A1%86%E6%9E%B6%E5%AE%9E%E7%8E%B0%E5%9B%A2%E9%98%9F%E6%8F%90%E5%8D%87/%E6%8F%90%E7%A4%BA%E8%AF%8D%E6%A1%86%E6%9E%B6.png" alt="Featured image of post Deepseek提示词框架助力团队改进现状，效能提升" />&lt;p>随着 AI 技术的快速发展，从 ChatGPT 到 Deepseek 的爆发，AI已经可以切实起到辅助我们日常工作的作用。&lt;/p>
&lt;p>除了在具体的像辅助编程、文案编写等方面，我们也可以充分利用 AI 的强大逻辑能力和海量基础数据，帮助我们针对工作中的一些困境，提出切实可行的改进方案。&lt;/p>
&lt;p>但要想 AI 帮助我们给出有可操作性的解决方案，提示词的框架设计和提供给AI的上下文信息是极为关键的。一个良好的提示词框架，可以帮助我们快速得到极为有价值的参考。&lt;/p>
&lt;h2 id="面对的困境案例">面对的困境案例
&lt;/h2>&lt;p>这里以一个比较普遍的敏捷团队质量困境的案例来说明：&lt;/p>
&lt;blockquote>
&lt;p>作为一个测试工程师，在一个运行Scrum框架的敏捷团队中负责质量保障，团队成员还包括SM、PO、2个Android开发（其中小李负责了App的整体系统设计），1个后端开发，1个非全职的视觉设计。团队产品是一个物联网智能手环产品的配套Android App。但因为存在和硬件团队的配合、需求经常变化、视觉设计不及时、提测不及时、Bug积压等问题，导致产品质量不乐观。目前App已经运行了多个迭代，按计划上线时间越来越近，如何针对当前的质量困境提出改进方案？&lt;/p>&lt;/blockquote>
&lt;h3 id="设计提示词框架">设计提示词框架
&lt;/h3>&lt;p>要 AI 帮助我们给出有可行性的改进方案，首先我们要合理地设计提示词框架，以便最终给出的方案更贴合团队现状以及具备可操作性。&lt;/p>
&lt;p>那么设计的提示词框架要点：&lt;/p>
&lt;ul>
&lt;li>给定的角色，让 AI 确定从什么角度去提出改进方案&lt;/li>
&lt;li>当前的现状，也就是充分的背景信息上下文&lt;/li>
&lt;li>AI 应该具体分析的内容或它的任务应该是什么&lt;/li>
&lt;li>希望 AI 提供的具体输出，包括格式要求，应包含的要素等&lt;/li>
&lt;li>相关的一些制约因素，这对方案是否可行会有重要影响&lt;/li>
&lt;/ul>
&lt;p>现在针对上述困境，希望AI 能帮助我提供一份针对团队的整体质量提升方案，可以在回顾会上进行讨论。基于以上思路，通过向 Deepseek输入提示词框架，得到如下输出：&lt;/p>
&lt;h3 id="质量改进方案面向迭代回顾会">质量改进方案（面向迭代回顾会）
&lt;/h3>&lt;hr>
&lt;h4 id="1-总体质量目标">&lt;strong>1. 总体质量目标&lt;/strong>
&lt;/h4>&lt;p>&lt;strong>&amp;ldquo;在2个迭代内将自动化测试覆盖率提升至40%，缺陷修复响应时间缩短50%，回归测试时间压缩30%，建立需求变更与测试联动的质量防线&amp;rdquo;&lt;/strong>&lt;/p>
&lt;hr>
&lt;h4 id="2-具体改进举措">&lt;strong>2. 具体改进举措&lt;/strong>
&lt;/h4>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>举措&lt;/th>
&lt;th>执行人&lt;/th>
&lt;th>执行计划&lt;/th>
&lt;th>效果评估方法&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>需求冻结机制&lt;/strong>&lt;br>- 每个迭代前3天锁定核心功能需求&lt;br>- 硬件对接需求由PO与硬件团队联合评审后形成接口文档&lt;/td>
&lt;td>PO、硬件团队负责人&lt;/td>
&lt;td>迭代计划会签署需求基线文档&lt;br>硬件接口文档通过Confluence共享&lt;/td>
&lt;td>需求变更次数减少50%&lt;br>接口文档版本变更记录可追溯&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>自动化用例分级策略&lt;/strong>&lt;br>- L0级（核心业务流）：强制全自动化&lt;br>- L1级（高频使用场景）：优先自动化&lt;br>- L2级（边缘场景）：手动验证&lt;/td>
&lt;td>测试工程师&lt;br>（主导）&lt;br>Android开发工程师&lt;br>（辅助）&lt;/td>
&lt;td>使用Allure标记用例等级&lt;br>每日构建优先执行L0用例&lt;/td>
&lt;td>L0用例100%通过率作为提测准出条件&lt;br>自动化执行时间减少40%&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>开发自测责任制&lt;/strong>&lt;br>- 开发提交代码需附带单元测试（覆盖率≥60%）&lt;br>- 接口测试由后端工程师在Swagger维护&lt;/td>
&lt;td>Android开发工程师&lt;br>后端工程师&lt;/td>
&lt;td>单元测试纳入代码评审检查项&lt;br>Postman接口用例与代码库联动&lt;/td>
&lt;td>提测版本冒烟测试通过率提升至80%&lt;br>接口缺陷率下降30%&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>硬件兼容性Mock服务&lt;/strong>&lt;br>- 基于硬件协议开发模拟器&lt;br>- 自动化测试与真实设备解耦&lt;/td>
&lt;td>测试工程师&lt;br>（主导）&lt;br>硬件团队提供协议文档&lt;/td>
&lt;td>使用Python开发蓝牙协议模拟器&lt;br>Jenkins构建时自动启动Mock服务&lt;/td>
&lt;td>硬件依赖导致测试阻塞次数清零&lt;br>自动化稳定性提升至95%&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>缺陷分级管理&lt;/strong>&lt;br>- P0级缺陷：2小时内响应&lt;br>- P1级缺陷：当前迭代必须修复&lt;br>- 遗留缺陷需PO签字确认风险&lt;/td>
&lt;td>测试工程师&lt;br>（分类）&lt;br>开发工程师&lt;br>（修复）&lt;/td>
&lt;td>Jira配置自动化缺陷流转规则&lt;br>每日站会同步TOP3缺陷进展&lt;/td>
&lt;td>缺陷平均修复周期缩短至8小时&lt;br>积压缺陷数量下降60%&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;hr>
&lt;h4 id="3-风险及应对">&lt;strong>3. 风险及应对&lt;/strong>
&lt;/h4>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>风险&lt;/th>
&lt;th>应对方案&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>开发人员抵触单元测试&lt;/td>
&lt;td>- 由小李（系统设计师）示范编写单元测试&lt;br>- 将测试覆盖率纳入DoD完成标准&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>硬件协议频繁变更&lt;/td>
&lt;td>- 要求硬件团队提前3天通知协议变更&lt;br>- Mock服务设计版本兼容机制&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>UE设计延迟影响UI测试&lt;/td>
&lt;td>- 与UE设计师约定：视觉稿交付同时提供UI元素ID规范&lt;br>- 使用截图对比工具容差10%像素差异&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;hr>
&lt;h4 id="4-外部支持需求">&lt;strong>4. 外部支持需求&lt;/strong>
&lt;/h4>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>类型&lt;/th>
&lt;th>具体需求&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>工具&lt;/td>
&lt;td>- 申请BrowserStack移动云测试平台license&lt;br>- 采购Xray测试用例管理插件License&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>人员&lt;/td>
&lt;td>- 硬件团队指定协议对接接口人&lt;br>- DevOps工程师优化CI/CD流水线&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>培训&lt;/td>
&lt;td>- 邀请单元测试专家开展TDD工作坊&lt;br>- Appium高级用法内部培训&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;hr>
&lt;h4 id="5-效果评估节点">&lt;strong>5. 效果评估节点&lt;/strong>
&lt;/h4>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>节点&lt;/th>
&lt;th>检验标准&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>迭代5中期&lt;/td>
&lt;td>- L0级自动化用例覆盖所有核心业务流程&lt;br>- 单元测试覆盖率≥40%&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>迭代5结束&lt;/td>
&lt;td>- 自动化覆盖率≥25%&lt;br>- 回归测试时间≤8小时/次&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>迭代6结束&lt;/td>
&lt;td>- 自动化覆盖率≥40%&lt;br>- 生产环境致命缺陷数为0&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;hr>
&lt;p>&lt;strong>执行要点说明：&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>&lt;strong>每日质量看板&lt;/strong>：在团队作战室悬挂自动化执行率/缺陷趋势图&lt;/li>
&lt;li>&lt;strong>质量门禁机制&lt;/strong>：代码合并请求必须通过L0用例+SonarQube检测&lt;/li>
&lt;li>&lt;strong>测试左移实践&lt;/strong>：测试工程师参与需求评审时即输出测试要点矩阵&lt;/li>
&lt;/ol>
&lt;p>该方案需团队全员签署质量承诺书，建议在迭代回顾会上通过&amp;quot;5Why分析法&amp;quot;就当前质量问题达成改进共识。&lt;/p>
&lt;p>可以看到，得到了一份极有针对性且有相当可行性的改进方案。我们根据目前的团队现状，进行微调其实就可以纳入实施。&lt;/p>
&lt;p>所以善用 AI 提示词框架，不仅可以帮助我们在具体事务上获取帮助，对于这种整体改进方面的举措，AI 也能提供巨大助力。&lt;/p>
&lt;p>回复 “提示词框架” 可获取上文的提示词完整示例。关于 AI 在工作中的更多应用实践，也欢迎大家留言或入群探讨！&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/qrcode_for_gh_e12c318badb4_258%20%281%29.jpg"
loading="lazy"
>&lt;/p></description></item><item><title>软件测试中"可做但不应做"的一些陷阱</title><link>https://chengxiaqiucao.github.io/post/067-%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95%E4%B8%AD%E5%8F%AF%E5%81%9A%E4%BD%86%E4%B8%8D%E5%BA%94%E5%81%9A%E7%9A%84%E4%B8%80%E4%BA%9B%E9%99%B7%E9%98%B1/</link><pubDate>Tue, 18 Mar 2025 16:49:04 +0800</pubDate><guid>https://chengxiaqiucao.github.io/post/067-%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95%E4%B8%AD%E5%8F%AF%E5%81%9A%E4%BD%86%E4%B8%8D%E5%BA%94%E5%81%9A%E7%9A%84%E4%B8%80%E4%BA%9B%E9%99%B7%E9%98%B1/</guid><description>&lt;h2 id="软件测试中8-种-能做但不应该做-的工作">软件测试中，8 种 &lt;strong>”能做，但不应该做“&lt;/strong> 的工作
&lt;/h2>&lt;p>在软件测试中，我们常常会面临一个问题：很多工作确实是我们可以去做到的，似乎做这些事也理所当然，但很多时候，这些事情往往收效甚微。从过度自动化到频繁运行不必要的回归测试，不一而足。&lt;/p>
&lt;p>随着技术发展，测试人员手中拥有的工具让我们可以完成更多事情，但并不意味每个选择都是明智的。有些工作，盲目地去做，往往会影响真正重要的产出、效率、可维护性等要求。&lt;/p>
&lt;p>本文列举了在测试工作中八个“能做，但不应做”的工作。有时候，退一步可能是更聪明的选择。&lt;/p>
&lt;h3 id="1-自动化所有测试">1. 自动化所有测试
&lt;/h3>&lt;p>&lt;strong>可以做到：&lt;/strong> 现代的测试自动化工具让我们几乎可以自动化任何测试用例，从用户界面的每一次点击到API的每一次调用，技术上来说，都可以通过自动化来进行驱动。&lt;/p>
&lt;p>&lt;strong>但不应该：&lt;/strong> 仅仅因为可以实现自动化测试，却并不意味它是最佳选择。比如：&lt;/p>
&lt;blockquote>
&lt;p>某个产品的用户界面非常动态，设计师每周都会进行调整。如果你选择将所有测试都自动化，每次UI改动后，相关的自动化测试都可能面临失效的风险。&lt;/p>&lt;/blockquote>
&lt;p>这种情况下，&lt;strong>手动测试可能更有效&lt;/strong>。&lt;/p>
&lt;h3 id="2-自动化脚本中使用过于复杂的定位器">2. 自动化脚本中使用过于复杂的定位器
&lt;/h3>&lt;p>&lt;strong>可以做到：&lt;/strong> Selenium, Playwright 等自动化工具中，借助XPath和CSS选择器，我们能够精确定位到页面中最深层的元素。&lt;/p>
&lt;p>&lt;strong>但不应该：&lt;/strong> 过于复杂的定位器往往会让测试变得脆弱。比如：&lt;/p>
&lt;blockquote>
&lt;p>使用复杂的XPath去定位一个菜单，但当开发团队重构HTML结构后，往往导致多个测试失败，团队不得不花费大量时间修复。&lt;/p>&lt;/blockquote>
&lt;p>这时，其他方法可能对自动化用例的稳定性更为有效，比如和开发团队&lt;strong>约定增加元素的 &lt;code>test-id&lt;/code> 属性&lt;/strong>。&lt;/p>
&lt;h3 id="3-每次提交都运行完整的回归测试">3. 每次提交都运行完整的回归测试
&lt;/h3>&lt;p>&lt;strong>可以做到：&lt;/strong> 在现代CI/CD管道中，每次代码提交都可以轻松触发完整的回归测试。&lt;/p>
&lt;p>&lt;strong>但不应该：&lt;/strong> 但实际上，这种做法往往是过度的。想象一下，一个小的代码修复导致整个回归测试运行，而这个过程可能需要几个小时，甚至更长时间。&lt;/p>
&lt;p>如果在没有将自动化覆盖率提升到一定程度的团队，这种提交后进行完整回归更是噩梦。更好的做法，其实还是及时掌握变更内容，并根据变更和影响实现&lt;strong>精准测试&lt;/strong>。&lt;/p>
&lt;h3 id="4-在api测试中过度模拟">4. 在API测试中过度模拟
&lt;/h3>&lt;p>&lt;strong>可以做到：&lt;/strong> 模拟API响应可以大幅提高测试速度，消除对外部服务的依赖。&lt;/p>
&lt;p>&lt;strong>但不应该：&lt;/strong> 然而，过度模拟会让我们失去与真实环境的连接。大量的Mock API 确实可以提升调试和验证效率，但却背离了真正的测试需要。&lt;strong>真实场景下的测试是不可或缺&lt;/strong>的，就像我们不能预知所有的异常一样&lt;/p>
&lt;h3 id="5-为琐碎问题撰写极其详细的缺陷报告">5. 为琐碎问题撰写极其详细的缺陷报告
&lt;/h3>&lt;p>&lt;strong>可以做到：&lt;/strong> 借助辅助测试工具，我们可以捕捉到类似很多细小的UI层、提示信息等缺陷，也可以按照用例规范编写极为详尽的缺陷报告。&lt;/p>
&lt;p>&lt;strong>但不应该：&lt;/strong> 并不是每个小问题都值得进行事无巨细地全面报告。发现Bug的目的最终是为了解决bug而不是bug本身，况且Bug的价值也有高下主次之分。我在 【】中其实对好的缺陷报告进行过分析，缺陷报告的价值是作为和开发沟通的渠道，报告八股文本身并无价值。&lt;/p>
&lt;h3 id="6-在没有人工监督的情况下使用ai生成测试用例">6. 在没有人工监督的情况下使用AI生成测试用例
&lt;/h3>&lt;p>&lt;strong>可以做到：&lt;/strong> AI的发展，其实已经可以做到，利用AI工具，基于需求文档快速生成大量测试用例，覆盖大量场景。&lt;/p>
&lt;p>&lt;strong>但不应该：&lt;/strong> 然而，现阶段的AI，特别是针对特定的业务，缺乏人类的上下文理解以及各种内部沟通获取的综合信息，因而可能导致用例冗余或遗漏关键测试用例。&lt;/p>
&lt;h3 id="7-在测试中过多地使用断言">7. 在测试中过多地使用断言
&lt;/h3>&lt;p>&lt;strong>可以做到：&lt;/strong> 结合自动化工具和AI，我们确实可以做到在一个测试中验证大量字段、属性和UI元素。&lt;/p>
&lt;p>&lt;strong>但不应该：&lt;/strong> 然而，过多的断言只会让测试变得巨大且复杂，难以调试。当部分断言失败，往往需要耗费大量的精力去排查&lt;/p>
&lt;h3 id="8-在每个可能的设备和浏览器组合上执行测试">8. 在每个可能的设备和浏览器组合上执行测试
&lt;/h3>&lt;p>&lt;strong>可以做到：&lt;/strong> 针对兼容性测试，现代的跨浏览器和跨设备测试工具让我们能够在许多操作系统和设备上运行测试。&lt;/p>
&lt;p>&lt;strong>但不应该：&lt;/strong> 测试所有可能的组合既不必要也不切实际。重点是覆盖用户实际使用的关键场景。而且开发技术的发展如响应式编程等，也大大减少了兼容性问题的风险。&lt;/p>
&lt;h3 id="结语">结语
&lt;/h3>&lt;p>在软件测试中，“有能力做” 却并不总意味着是最佳选择。我们需要在技术能力和实际可行性之间找到平衡。通过避免这些“因为可以做到”的陷阱，去建立一个精简、高效且真正有价值的测试集，对产品的质量保障更有意义。&lt;/p>
&lt;p>欢迎关注秋草，持续带来更多软件质量相关技术干货！&lt;/p></description></item><item><title>Linux文本处理三剑客 Sed</title><link>https://chengxiaqiucao.github.io/post/061-linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-sed/</link><pubDate>Thu, 13 Mar 2025 00:00:00 +0000</pubDate><guid>https://chengxiaqiucao.github.io/post/061-linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-sed/</guid><description>&lt;img src="https://chengxiaqiucao.github.io/post/061-linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-sed/sed3.webp" alt="Featured image of post Linux文本处理三剑客 Sed" />&lt;h1 id="前言">前言
&lt;/h1>&lt;p>在本系列上一篇 【】，我们介绍了 Linux 三剑客中的 &lt;code>grep&lt;/code> 命令用法。而实际上，在三剑客中，&lt;code>grep&lt;/code> 只能算是小弟，它的作用更多只是通过正则表达式的加持，实现针对文本的模式查询。
而三剑客中，真正重量级的命令是 &lt;code>sed&lt;/code> 和 &lt;code>awk&lt;/code>, &lt;code>sed&lt;/code> 其实是 &lt;code>stream editor（流编辑器）&lt;/code> 的缩写，因此，sed 命令它其实是能够起到文本编辑器的作用。本篇我们就来介绍这个 &lt;strong>伪装成Linux命令的编辑器&lt;/strong> &lt;code>sed&lt;/code>&lt;/p>
&lt;h1 id="sed-命令概述">sed 命令概述
&lt;/h1>&lt;p>&lt;code>sed&lt;/code>命令的语法如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">sed -命令参数 &amp;#39;操作指令&amp;#39; 文本文件或管道输入
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>sed&lt;/code> 是一个行编辑器，这里的操作指令会按行来对文本进行处理&lt;/p>
&lt;h2 id="命令参数">命令参数
&lt;/h2>&lt;p>它的命令参数主要有如下一些：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">&lt;strong>命令参数&lt;/strong>&lt;/th>
&lt;th style="text-align: center">&lt;strong>含义&lt;/strong>&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>-n&lt;/strong>&lt;/td>
&lt;td style="text-align: center">关闭默认输出&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>-r&lt;/strong>&lt;/td>
&lt;td style="text-align: center">支持正则表达式扩展&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>-i&lt;/strong>&lt;/td>
&lt;td style="text-align: center">直接对源文件进行操作&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>-e&lt;/strong>&lt;/td>
&lt;td style="text-align: center">指定操作指令（默认开启，可指定多个）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>-f&lt;/strong>&lt;/td>
&lt;td style="text-align: center">从文件读取操作指令&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="默认输出">默认输出
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sed &lt;span class="s1">&amp;#39;/root/p&amp;#39;&lt;/span> /etc/passwd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 其实会显示passwd文件中所有行，其中包含root用户的行重复显示&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sed -n &lt;span class="s1">&amp;#39;/root/p&amp;#39;&lt;/span> /etc/passwd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 加上-n参数，才会关闭sed本身的默认输出，这样才是通过p指令显示匹配的行&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="修改原文件">修改原文件
&lt;/h3>&lt;p>实际工作中，&lt;code>-i&lt;/code> 参数是一个比较危险的参数，因为这个参数会直接修改原文件&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sed -i &lt;span class="s1">&amp;#39;/root/q&amp;#39;&lt;/span> /etc/passwd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 这个操作会导致passwd文件中只包含有root用户这一行，因为指令q会在匹配到行后直接退出&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 而sed这时的输出内容会直接写入原文件&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>比较安全的做法，可以在使用&lt;code>-i&lt;/code>参数时指定一个备份文件, 也就是在 &lt;code>-i&lt;/code> 后指定一个备份文件的后缀名&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sed -i.bak &lt;span class="s1">&amp;#39;/root/q&amp;#39;&lt;/span> /etc/passwd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 这个操作虽然还是会修改passwd文件，但在修改前会备份一个.bak文件，便于恢复&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="多重指令">多重指令
&lt;/h3>&lt;p>&lt;code>sed&lt;/code> 命令的指令可以有多个，但又多个指令时，需要为每个指令指定一个&lt;code>-e&lt;/code>参数，如果只使用 1 个指令，则这个 &lt;code>-e&lt;/code> 可以忽略&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sed -e &lt;span class="s1">&amp;#39;=&amp;#39;&lt;/span> -e &lt;span class="s1">&amp;#39;/root/q&amp;#39;&lt;/span> /etc/passwd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># = 指令会输出当前处理行的行号&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果我们想重复指定 &lt;code>-e&lt;/code> ，也可以通过 &lt;code>;&lt;/code> 组合指令&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sed &lt;span class="s1">&amp;#39;=;/root/q&amp;#39;&lt;/span> /etc/passwd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 和通过 -e 多重指定效果一样&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="操作指令说明">操作指令说明
&lt;/h2>&lt;p>在上面的参数介绍中，我们其实已经使用了 如 &lt;code>p&lt;/code>, &lt;code>q&lt;/code> 等指令。&lt;/p>
&lt;p>而这个操作指令，其实是由两部分组成，也就是&lt;strong>寻址部分&lt;/strong>和&lt;strong>操作部分&lt;/strong>：&lt;/p>
&lt;ul>
&lt;li>寻址： &lt;code>sed&lt;/code>命令是行处理命令，寻址其实就是指定要处理的行&lt;/li>
&lt;li>操作： 针对匹配寻址规则的行要执行的操作&lt;/li>
&lt;/ul>
&lt;h3 id="寻址规则">寻址规则
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">&lt;strong>寻址格式&lt;/strong>&lt;/th>
&lt;th style="text-align: center">&lt;strong>含义&lt;/strong>&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>数字&lt;/strong>&lt;/td>
&lt;td style="text-align: center">指定行号匹配&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>m~n&lt;/strong>&lt;/td>
&lt;td style="text-align: center">从m行开始，按步长n匹配&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>$&lt;/strong>&lt;/td>
&lt;td style="text-align: center">匹配末行&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>/regex/&lt;/strong>&lt;/td>
&lt;td style="text-align: center">按正则匹配&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>m,n&lt;/strong>&lt;/td>
&lt;td style="text-align: center">从m行开始，匹配到n行&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>m,+n&lt;/strong>&lt;/td>
&lt;td style="text-align: center">从m行开始，再匹配n行&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sed -n &lt;span class="s1">&amp;#39;5p&amp;#39;&lt;/span> /etc/passwd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 显示第 5 行内容&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sed -n &lt;span class="s1">&amp;#39;2~3p&amp;#39;&lt;/span> /etc/passwd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 显示从第2行开始，步长3递进，即第 2,5,8,11,14.... 行内容&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sed -n &lt;span class="s1">&amp;#39;$p&amp;#39;&lt;/span> /etc/passwd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 显示最后一行内容&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sed -n &lt;span class="s1">&amp;#39;/qiucao/p&amp;#39;&lt;/span> /etc/passwd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 显示包含qiucao的行内容&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sed -n &lt;span class="s1">&amp;#39;5,8p&amp;#39;&lt;/span> /etc/passwd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 显示第 5 行到第 8 行内容&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sed -n &lt;span class="s1">&amp;#39;5,+5p&amp;#39;&lt;/span> /etc/passwd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 显示第 5,6,7,8,9,10行内容&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="操作指令">操作指令
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">&lt;strong>操作指令&lt;/strong>&lt;/th>
&lt;th style="text-align: center">&lt;strong>含义&lt;/strong>&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>p&lt;/strong>&lt;/td>
&lt;td style="text-align: center">&lt;strong>打印&lt;/strong>匹配行&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>=&lt;/strong>&lt;/td>
&lt;td style="text-align: center">输出匹配行行号&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>l&lt;/strong>&lt;/td>
&lt;td style="text-align: center">打印匹配行并显示&lt;strong>不可见字符&lt;/strong>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>s&lt;/strong>&lt;/td>
&lt;td style="text-align: center">&lt;strong>正则表达式&lt;/strong>匹配和替换&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>c&lt;/strong>&lt;/td>
&lt;td style="text-align: center">匹配行&lt;strong>整行&lt;/strong>替换&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>a&lt;/strong>&lt;/td>
&lt;td style="text-align: center">在匹配行&lt;strong>后&lt;/strong>追加内容&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>i&lt;/strong>&lt;/td>
&lt;td style="text-align: center">在匹配行&lt;strong>前&lt;/strong>追加内容&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>d&lt;/strong>&lt;/td>
&lt;td style="text-align: center">&lt;strong>删除&lt;/strong>匹配行&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>r&lt;/strong>&lt;/td>
&lt;td style="text-align: center">在匹配换行后追加内容（从文件中）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>w&lt;/strong>&lt;/td>
&lt;td style="text-align: center">将匹配行内容写入文件&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>q&lt;/strong>&lt;/td>
&lt;td style="text-align: center">匹配后退出，不再继续匹配&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sed -n &lt;span class="s1">&amp;#39;=;5p&amp;#39;&lt;/span> /etc/passwd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 显示所有行号并打印第 5 行内容&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sed -n &lt;span class="s1">&amp;#39;=;5l&amp;#39;&lt;/span> /etc/passwd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 和上条命令类似，但行末的结束符($)也会打印出来&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sed -r &lt;span class="s1">&amp;#39;=;s/^m\w*/test/g&amp;#39;&lt;/span> /etc/passwd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 替换所有以m开头的用户名为test, 加/g的作用是在行内替换所有匹配字符，否则只替换第一个&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sed &lt;span class="s1">&amp;#39;=;5c\测试一下&amp;#39;&lt;/span> /etc/passwd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 将第5行替换为 “测试一下”&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sed &lt;span class="s1">&amp;#39;=;5a\测试一下&amp;#39;&lt;/span> /etc/passwd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 在第5行内容后追加一行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sed &lt;span class="s1">&amp;#39;=;5i\测试一下&amp;#39;&lt;/span> /etc/passwd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 在第5行内容前插入一行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sed &lt;span class="s1">&amp;#39;=;5d&amp;#39;&lt;/span> /etc/passwd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 删除第5行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sed &lt;span class="s1">&amp;#39;=;5r test.txt&amp;#39;&lt;/span> /etc/passwd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 从test.txt中读取一行并添加到第5行后&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sed &lt;span class="s1">&amp;#39;=;5w test.txt&amp;#39;&lt;/span> /etc/passwd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 将第5行内容写入到test.txt&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="模式空间和保留空间">模式空间和保留空间
&lt;/h1>&lt;p>上面介绍的操作指令，主要是针对行内操作的一些指令。 我们既然说 &lt;code>sed&lt;/code> 其实是一个编辑器，那么对于多行的文本编辑操作，比如整行的复制、粘贴、剪切等，当然也是支持的。&lt;/p>
&lt;p>这就要说到 &lt;code>sed&lt;/code> 命令处理时，预留的两个内存空间了：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>模式空间&lt;/strong>： 存储当前处理行的内容，每完成一行的处理，处理完的内容放到这个空间中&lt;/li>
&lt;li>&lt;strong>保留空间&lt;/strong>： 用于临时存储数据，可以认为是像剪切板一样的一个缓存空间，用于不同行内容的交换。初始默认只有一个 &lt;code>\n&lt;/code> 回车符&lt;/li>
&lt;/ul>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">&lt;strong>操作指令&lt;/strong>&lt;/th>
&lt;th style="text-align: center">&lt;strong>用法&lt;/strong>&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>h&lt;/strong>&lt;/td>
&lt;td style="text-align: center">将模式空间内容复制到保留空间，替换原内容(\n)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>H&lt;/strong>&lt;/td>
&lt;td style="text-align: center">追加模式空间内容到保留空间&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>g&lt;/strong>&lt;/td>
&lt;td style="text-align: center">保留空间内容复制到模式空间，覆盖原内容&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>G&lt;/strong>&lt;/td>
&lt;td style="text-align: center">保留空间内容追加到模式空间原内容后&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>x&lt;/strong>&lt;/td>
&lt;td style="text-align: center">交换模式空间和保留空间内容&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">n&lt;/td>
&lt;td style="text-align: center">立即读取下一行，并复制到模式空间&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">N&lt;/td>
&lt;td style="text-align: center">立即读取下一行，并追加到当前模式空间（常用于行合并）&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="示例">示例
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sed &lt;span class="s1">&amp;#39;=;2h;3H;5x;8G&amp;#39;&lt;/span> /etc/passwd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 2h复制第2行到保留空间&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 3H复制第3行并追加到现有保留空间后&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 5x将当前模式空间和保留空间进行交换，复制的内容替换了原第 5 行的内容&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 8G将保留空间内容（原第5行模式空间内容）追加到当前模式空间即第8行内容后&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/061-linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-sed/Pasted-20250313.png"
width="912"
height="750"
srcset="https://chengxiaqiucao.github.io/post/061-linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-sed/Pasted-20250313_hu_78e15c06a8259f1b.png 480w, https://chengxiaqiucao.github.io/post/061-linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-sed/Pasted-20250313_hu_ebdbabdd27bcb610.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="121"
data-flex-basis="291px"
>&lt;/p>
&lt;h1 id="常用-sed-实操案例">常用 sed 实操案例
&lt;/h1>&lt;h2 id="1-删除空白行">1. 删除空白行
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sed -i &lt;span class="s1">&amp;#39;/^\s*$/d&amp;#39;&lt;/span> test.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 正则匹配仅包含空白字符的行并删除&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="2-给文件添加行号">2. 给文件添加行号
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sed &lt;span class="s1">&amp;#39;=&amp;#39;&lt;/span> test.txt &lt;span class="p">|&lt;/span> sed &lt;span class="s1">&amp;#39;N;s/\n/\t/&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 先用sed命令获取行号，或加到每行默认输出前一行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 通过管道传递到后一个sed命令，通过 N 指令合并两行，并将 回车符替换为制表符&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="3-提取所有图片链接">3. 提取所有图片链接
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sed -nr &lt;span class="s1">&amp;#39;s/.*src=&amp;#34;(.*\.png).*/\1/p&amp;#39;&lt;/span> source.html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 正则表达式匹配图片链接，利用正则表达式分组保存路径并替换原有整行内容&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="4-提取log中异常行">4. 提取log中异常行
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sed -n &lt;span class="s1">&amp;#39;/ERROR/{=;p}&amp;#39;&lt;/span> app.log
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 匹配日志中包含ERROR字样的行并打印输出行号&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="结语">结语
&lt;/h1>&lt;p>以上就是关于 linux 三剑客之 &lt;code>sed&lt;/code> 命令的系统梳理，后续还会继续带来 &lt;code>awk&lt;/code> 命令的总结！ 更多测试扩展技能，欢迎关注秋草的体系化提升课程，回复 &lt;code>大纲&lt;/code> 获取详细目录。&lt;/p></description></item><item><title>搞定正则表达式，告别新手村！</title><link>https://chengxiaqiucao.github.io/post/058-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/</link><pubDate>Sun, 09 Mar 2025 00:00:00 +0000</pubDate><guid>https://chengxiaqiucao.github.io/post/058-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/</guid><description>&lt;img src="https://chengxiaqiucao.github.io/post/058-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/Pasted-20250310.png" alt="Featured image of post 搞定正则表达式，告别新手村！" />&lt;h1 id="前言">前言
&lt;/h1>&lt;p>&lt;strong>正则表达式 （Regular Expression）&lt;/strong> 是一种强大的文本模式描述语言，可以通过简洁的符号组合描述复杂的字符串匹配规则。被广泛应用于数据验证、文本提取、日志分析等领域，在我们日常工作中发挥着重要的作用。&lt;/p>
&lt;p>软件行业从业，是否掌握正则表达式的使用，往往是区分菜鸟和老手的重要标识。 本文我们结合一些具体案例，详细梳理下正则表达式的应用，早日告别新手村！&lt;/p>
&lt;h1 id="正则表达式核心语法">正则表达式核心语法
&lt;/h1>&lt;p>学习正则表达式， 这里推荐一个非常直观的线上验证平台， &lt;a class="link" href="https://regex101.com" target="_blank" rel="noopener"
>https://regex101.com&lt;/a> , 对于我们练习和掌握正则语法非常有帮助。&lt;/p>
&lt;h2 id="普通字符和特殊字符">普通字符和特殊字符
&lt;/h2>&lt;p>正则表达式作为一个匹配规则。当然首先可以匹配各种普通字符。主要指各种中英文单词、字母、数字。此外正则表达式还会预留很多特殊字符，如 &lt;code>* ? + . () [] $ ^ \ |&lt;/code> 等，代表一些特别的匹配规则，而如果这些特殊字符我们需要看作普通字符进行匹配时，则需要使用 &lt;code>\&lt;/code> 符号进行转义，因此 &lt;code>\&lt;/code> 也称转义符。比如 &lt;code>\?&lt;/code> 就会匹配目标文本中的 &lt;code>?&lt;/code> 字符， &lt;code>\\&lt;/code> 则会匹配目标文本中的 &lt;code>\&lt;/code> 字符&lt;/p>
&lt;h2 id="量词符quantifiers">量词符（quantifiers）
&lt;/h2>&lt;p>量词符是用于控制匹配次数的符号：&lt;/p>
&lt;ul>
&lt;li>&lt;code>*&lt;/code> 零次或多次（如 &lt;code>a*&lt;/code> 可匹配 &amp;ldquo;&amp;rdquo;, &amp;ldquo;a&amp;rdquo;, &amp;ldquo;aa&amp;rdquo;）&lt;/li>
&lt;li>&lt;code>+&lt;/code> 一次或多次（&lt;code>a+&lt;/code> 必须至少有一个a）&lt;/li>
&lt;li>&lt;code>?&lt;/code> 零次或一次（&lt;code>a?&lt;/code> 可匹配 &amp;quot;&amp;quot; 或 a）&lt;/li>
&lt;li>&lt;code>{n}&lt;/code> 精确匹配n次（&lt;code>{4}&lt;/code> 匹配4次）&lt;/li>
&lt;li>&lt;code>{m,n}&lt;/code> 匹配m到n次（含边界）&lt;/li>
&lt;li>&lt;code>{m,}&lt;/code> 匹配m到多次&lt;/li>
&lt;li>&lt;code>{,n}&lt;/code> 匹配零次到n次&lt;/li>
&lt;/ul>
&lt;p>另外，在正则表达式中，还有两种匹配模式&lt;/p>
&lt;ul>
&lt;li>&lt;strong>贪婪模式&lt;/strong>：这是默认模式，也就会在目标文本中，尽可能最长地去匹配符合规则的字符&lt;/li>
&lt;li>&lt;strong>惰性模式&lt;/strong>：而如果在量词后加&lt;code>?&lt;/code>则标记以惰性模式进行匹配，也就是尽可能少地去匹配符合规则的字符&lt;/li>
&lt;/ul>
&lt;p>举例来说：&lt;/p>
&lt;p>&lt;code>浮云长长长长长长长消&lt;/code>&lt;/p>
&lt;p>这个上联中有 7 个 &lt;code>长&lt;/code> 字，正则表达式 &lt;code>长{2,3}&lt;/code> 默认按贪婪模式匹配，会匹配到 2 次 &lt;code>长长长&lt;/code>， 而加上 &lt;code>长{2,3}?&lt;/code> 则会按尽量少的字符匹配，匹配到 3 次 &lt;code>长长&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/058-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/Pasted-20250309-1.png"
width="1250"
height="531"
srcset="https://chengxiaqiucao.github.io/post/058-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/Pasted-20250309-1_hu_b95a4654bc51ae82.png 480w, https://chengxiaqiucao.github.io/post/058-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/Pasted-20250309-1_hu_6d84fb0f184894d2.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="235"
data-flex-basis="564px"
>&lt;/p>
&lt;h2 id="元字符metacharacters">元字符（Metacharacters）
&lt;/h2>&lt;p>除量词符外，还有一类元字符，被预留构成正则表达式的基础特殊符号：&lt;/p>
&lt;ul>
&lt;li>&lt;code>\d&lt;/code> 匹配数字（等价于 &lt;code>[0-9]&lt;/code>）&lt;/li>
&lt;li>&lt;code>\D&lt;/code> 匹配非数字&lt;/li>
&lt;li>&lt;code>\w&lt;/code> 匹配单词，包括字母、数字和下划线（等价于 &lt;code>[A-Za-z0-9_]&lt;/code>）&lt;/li>
&lt;li>&lt;code>\W&lt;/code> 匹配非单词&lt;/li>
&lt;li>&lt;code>\s&lt;/code> 匹配空白符（空格/制表符/换行符）&lt;/li>
&lt;li>&lt;code>\S&lt;/code> 匹配非空白&lt;/li>
&lt;li>&lt;code>.&lt;/code> 匹配任意单个字符（默认不匹配换行符）&lt;/li>
&lt;li>&lt;code>|&lt;/code> 表示逻辑&amp;quot;或&amp;quot;&lt;/li>
&lt;/ul>
&lt;h2 id="位置限定符position-anchors">位置限定符（Position Anchors）
&lt;/h2>&lt;p>用于精准定位匹配位置：&lt;/p>
&lt;ul>
&lt;li>&lt;code>\b&lt;/code> 匹配单词边界（如 &lt;code>\bcat\b&lt;/code> 匹配完整单词）&lt;/li>
&lt;li>&lt;code>\B&lt;/code> 匹配非单词边界&lt;/li>
&lt;li>&lt;code>^&lt;/code> 匹配目标文本开头，多行模式下也匹配行首&lt;/li>
&lt;li>&lt;code>$&lt;/code> 匹配目标文本结尾，多行模式下也匹配行尾&lt;/li>
&lt;/ul>
&lt;p>举例来说:
在&lt;code>tester is good at testing&lt;/code> 中，用 &lt;code>^test&lt;/code> 就只会匹配到行首的 &lt;code>test&lt;/code>， 但&lt;code>testing&lt;/code> 中的&lt;code>test&lt;/code> 就不会匹配到， 而如果 &lt;code>test\b&lt;/code>，同样匹配不到任何结果，因为这段文本中 &lt;code>test&lt;/code>都不是单独的单词，&lt;code>test&lt;/code> 后不存在单词边界&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/058-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/Pasted-20250309-2.png"
width="1273"
height="451"
srcset="https://chengxiaqiucao.github.io/post/058-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/Pasted-20250309-2_hu_47b16cd281a465bd.png 480w, https://chengxiaqiucao.github.io/post/058-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/Pasted-20250309-2_hu_2eecbf36b14f7a2e.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="282"
data-flex-basis="677px"
>&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/058-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/Pasted-20250309-3.png"
width="1566"
height="414"
srcset="https://chengxiaqiucao.github.io/post/058-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/Pasted-20250309-3_hu_9765a6ec724de524.png 480w, https://chengxiaqiucao.github.io/post/058-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/Pasted-20250309-3_hu_efb327b0f19e9cd.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="378"
data-flex-basis="907px"
>&lt;/p>
&lt;h2 id="字符类character-classes">字符类（Character Classes）
&lt;/h2>&lt;p>字符类用于批量匹配特定字符集合：&lt;/p>
&lt;ul>
&lt;li>&lt;code>[abc]&lt;/code> 匹配a/b/c中的任意字符&lt;/li>
&lt;li>&lt;code>[^abc]&lt;/code> 匹配不在集合中的字符&lt;/li>
&lt;li>范围表示法：&lt;code>[a-z]&lt;/code>（小写字母）、&lt;code>[A-Z]&lt;/code>（大写字母）、&lt;code>[0-9]&lt;/code>（数字）&lt;/li>
&lt;/ul>
&lt;p>下例中 &lt;code>[b-f]&lt;/code>， 就只匹配了目标字串中的 &lt;code>d,e&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/058-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/Pasted-20250309-4.png"
width="1295"
height="668"
srcset="https://chengxiaqiucao.github.io/post/058-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/Pasted-20250309-4_hu_e9f0bbb6b826b273.png 480w, https://chengxiaqiucao.github.io/post/058-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/Pasted-20250309-4_hu_5a5c9b3afd591d18.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="193"
data-flex-basis="465px"
>&lt;/p>
&lt;h2 id="分组groups">分组（Groups）
&lt;/h2>&lt;p>分组是正则表达式中重要的技巧，用于对匹配规则进行分组，便于在后续的文本处理中提取匹配到的内容。 分组通过在表达式中将模式用 &lt;code>()&lt;/code> 框定来表示。&lt;/p>
&lt;p>比如指定一个字串&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">this is a &amp;#34;testtest&amp;#34; string to demo regex group!
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="分组及其引用">分组及其引用
&lt;/h3>&lt;p>分组默认从 1 开始计数，也就是多个分组时，可以按顺序以 &lt;code>\1&lt;/code> &lt;code>\2&lt;/code> 来反向引用分组&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/058-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/Pasted-20250309-5.png"
width="1542"
height="407"
srcset="https://chengxiaqiucao.github.io/post/058-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/Pasted-20250309-5_hu_aa6b934826982b04.png 480w, https://chengxiaqiucao.github.io/post/058-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/Pasted-20250309-5_hu_a33b88c01500c7fd.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="378"
data-flex-basis="909px"
>&lt;/p>
&lt;p>这个例子，我们 通过 &lt;code>(is)(\s)\1\2&lt;/code> 指定了两个分组，组1 匹配 &amp;ldquo;is&amp;rdquo;， 组2匹配空白字符（这里是空格) ，然后用&lt;code>\1\2&lt;/code> 分别引用这两个组，最终其实就匹配了 &lt;code>&amp;quot;is&amp;quot;+空格&lt;/code> 连续出现了两次的情况&lt;/p>
&lt;h3 id="指定分组不进行引用">指定分组不进行引用
&lt;/h3>&lt;p>如果我们进行分组时，某个分组我们并不想在后续引用，那么可以使用 &lt;code>(?:pattern)&lt;/code> 来进行标记，指定当前分组在后续不会进行引用。 这时分组默认的提取序号中，就会忽略这一组不进行编号
。&lt;/p>
&lt;p>上例中，如果我们指定其中第二个分组不进行引用&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(is)(?:\s)\1\2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这时其实上例中的正则表达式就出现语法错误，无法完成匹配，因为这时第二个分组被忽略，而 &lt;code>\2&lt;/code> 进行引用，这时就会因为不存在出现模式错误&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/058-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/Pasted-20250309-6.png"
width="1089"
height="285"
srcset="https://chengxiaqiucao.github.io/post/058-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/Pasted-20250309-6_hu_66b4953a99a239ba.png 480w, https://chengxiaqiucao.github.io/post/058-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/Pasted-20250309-6_hu_7dcf2714bff3884b.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="382"
data-flex-basis="917px"
>&lt;/p>
&lt;h3 id="对分组进行注释">对分组进行注释
&lt;/h3>&lt;p>一些复杂的正则表达式，我们还可以在分组添加注释，起到对正则表达式进行说明的作用 &lt;code>(?#comment)(other group)&lt;/code>&lt;/p>
&lt;h3 id="分组命名">分组命名
&lt;/h3>&lt;p>除了默认用数字序号来引用分组，也可以通过给分组进行命名的方式： &lt;code>(?P&amp;lt;name&amp;gt;pattern)&lt;/code> 进行命名。
然后用&lt;code>(?P=&amp;lt;name&amp;gt;)&lt;/code>进行引用&lt;/p>
&lt;p>综合上面的说明，使用如下正则说明&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(?#这是一个嵌套分组示例)(?P&amp;lt;demo&amp;gt;t(?:\w*)t)(?P=demo)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/058-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/Pasted-20250309-7.png"
width="1798"
height="376"
srcset="https://chengxiaqiucao.github.io/post/058-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/Pasted-20250309-7_hu_7318f26860fb9737.png 480w, https://chengxiaqiucao.github.io/post/058-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/Pasted-20250309-7_hu_46bb8d7a7036b047.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="478"
data-flex-basis="1147px"
>&lt;/p>
&lt;h2 id="断言assertions">断言（Assertions）
&lt;/h2>&lt;p>断言主要用于判断，用来匹配符合模式的字符所在位置。因为它主要用判断位置，不会消费字符，所以一般也叫 &lt;strong>零宽断言&lt;/strong>&lt;/p>
&lt;p>断言可分为4类，还是用上例中的文本举例&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">this is a &amp;#34;testtest&amp;#34; string to demo regex group!
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="正向肯定断言">正向肯定断言
&lt;/h3>&lt;p>判断匹配位置之后的字符符合模式， 通过&lt;code>(?=pattern)&lt;/code> 来进行断言&lt;/p>
&lt;p>示例：&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/058-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/Pasted-20250309-8.png"
width="1665"
height="301"
srcset="https://chengxiaqiucao.github.io/post/058-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/Pasted-20250309-8_hu_eaeae5c021a65cf9.png 480w, https://chengxiaqiucao.github.io/post/058-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/Pasted-20250309-8_hu_fbd343bdca89110b.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="553"
data-flex-basis="1327px"
>&lt;/p>
&lt;h3 id="正向否定断言">正向否定断言
&lt;/h3>&lt;p>判断匹配位置之后的字符不符合给定模式， 通过&lt;code>(?!pattern)&lt;/code> 来进行断言&lt;/p>
&lt;p>示例：&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/058-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/Pasted-20250309-9.png"
width="1594"
height="722"
srcset="https://chengxiaqiucao.github.io/post/058-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/Pasted-20250309-9_hu_9702474baae8aa63.png 480w, https://chengxiaqiucao.github.io/post/058-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/Pasted-20250309-9_hu_5f7113905515b6ad.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="220"
data-flex-basis="529px"
>&lt;/p>
&lt;h3 id="反向肯定断言和反向否定断言">反向肯定断言和反向否定断言
&lt;/h3>&lt;p>和正向相对，反向断言匹配的是预期位置之前的字符是否符合模式，也有肯定和否定之分。在 &lt;code>?&lt;/code>后再添加一个&lt;code>&amp;lt;&lt;/code>表示反向， 即&lt;code>(?&amp;lt;=pattern)&lt;/code> 和 &lt;code>(?&amp;lt;!pattern)&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/058-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/Pasted-20250309-10.png"
width="1558"
height="357"
srcset="https://chengxiaqiucao.github.io/post/058-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/Pasted-20250309-10_hu_afc1bd2600ffa6b6.png 480w, https://chengxiaqiucao.github.io/post/058-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/Pasted-20250309-10_hu_c15a8fd618e404f4.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="436"
data-flex-basis="1047px"
>&lt;/p>
&lt;h1 id="匹配模式">匹配模式
&lt;/h1>&lt;p>除了上述正则表达式的主要匹配规则外，正则表达式还有一些匹配模式。是用 &lt;code>\&lt;/code> 加上一些特殊的字母代表不同的模式&lt;/p>
&lt;ul>
&lt;li>&lt;code>\g&lt;/code> 表示全局匹配，也就是会在给定的文本中匹配所有符合条件的字串，如果不指定，则仅匹配出现的第一个符合模式的字串&lt;/li>
&lt;li>&lt;code>\m&lt;/code> 多行模式，主要是指定 &lt;code>^ $&lt;/code>是否匹配行首行尾&lt;/li>
&lt;li>&lt;code>\i&lt;/code> 匹配时忽略大小写&lt;/li>
&lt;li>&lt;code>\x&lt;/code> 匹配时是否忽略我们模式文本中的空白，在编写比较复杂规则时较为有用&lt;/li>
&lt;li>&lt;code>\s&lt;/code> 指定 &lt;code>.&lt;/code> 匹配字符时包含换行符&lt;/li>
&lt;li>&lt;code>\u&lt;/code> 匹配unicode字符，如中文&lt;/li>
&lt;li>&lt;code>\a&lt;/code> 仅匹配ascii字符&lt;/li>
&lt;/ul>
&lt;h1 id="实用案例">实用案例
&lt;/h1>&lt;p>针对下面这段文本：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">用户注册信息如下：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">联系电话：+86 138-0013-8000（北京） / 400-800-8888（全国客服）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">电子邮箱：support@example.com / service@sub.domain.org.cn / user.name+tag+sorting@example.co.uk
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">网站链接：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">https://www.example.com/page1.html?query=123&amp;amp;sort=desc#section2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">http://sub.example.co.jp:8080/admin/dashboard
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ftp://ftp.example.org/upload.zip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">产品序列号：SKU-20240309-001234（生产日期：2024-03-09）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INV-2023-Winter-Sale-0456（有效期至：2024-01-31）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">活动时间：2024年第一季度（2024-01-01 至 2024-03-31）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">特殊字符测试：!@#$%^&amp;amp;*()_+-=[]{}|;&amp;#39;:&amp;#34;,./&amp;lt;&amp;gt;?`~
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">测试用密码：Password123!@#（正确） / password123（错误） / Passw0rd!（错误）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">日志条目：ERROR[2024-03-09T15:40:22+08:00] 用户登录失败
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IP地址记录：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.1 / 203.0.113.255 / ::1 / IPv6-Test-Address::FFFFF:1234
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="匹配完整url含协议域名端口路径">匹配完整URL（含协议、域名、端口、路径）
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">^(https?:\/\/)([\w\-\.]+\.[a-z]{2,6})(:[0-9]{1,5})?(\/\S*)?$
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>匹配结果：&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/058-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/Pasted-20250309.png"
width="1569"
height="994"
srcset="https://chengxiaqiucao.github.io/post/058-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/Pasted-20250309_hu_734382e546f0c7e2.png 480w, https://chengxiaqiucao.github.io/post/058-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/Pasted-20250309_hu_7095757f980ba1ee.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="157"
data-flex-basis="378px"
>&lt;/p>
&lt;h2 id="提取电话号码">提取电话号码
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">\b(\+?\d{2,3})[-\s]+?(?:\d{3,4}[- ]?)+
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>说明：首先&lt;code>\b&lt;/code>匹配单词边界，用分组提取国家码（2-3位，兼容有&lt;code>+&lt;/code>情况），跟&lt;code>-&lt;/code>或空格，惰性模式，再匹配3-4个数字和&lt;code>-&lt;/code>连续多次出现的情况&lt;/p>
&lt;p>&lt;strong>匹配结果&lt;/strong>：&lt;/p>
&lt;ul>
&lt;li>&lt;code>+86 138-0013-8000&lt;/code>&lt;/li>
&lt;li>&lt;code>400-800-8888&lt;/code>&lt;/li>
&lt;/ul>
&lt;h2 id="验证电子邮箱地址">验证电子邮箱地址
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[-.\w]+@[-.\w]+\.[-.\w]+\b
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>匹配结果&lt;/strong>：&lt;/p>
&lt;ul>
&lt;li>&lt;code>support@example.com&lt;/code>&lt;/li>
&lt;li>&lt;code>service@sub.domain.org.cn&lt;/code>&lt;/li>
&lt;li>&lt;code>sorting@example.co.uk&lt;/code>&lt;/li>
&lt;/ul>
&lt;h2 id="捕获产品序列号包含日期和唯一编码">捕获产品序列号（包含日期和唯一编码）
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">SKU-\d{8}-\d{6}|INV-\d{4}[-A-Za-z]+-\d{4}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>匹配结果&lt;/strong>：&lt;/p>
&lt;ul>
&lt;li>&lt;code>SKU-20240309-001234&lt;/code>&lt;/li>
&lt;li>&lt;code>INV-2023-Winter-Sale-0456&lt;/code>&lt;/li>
&lt;/ul>
&lt;h2 id="匹配中文">匹配中文
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[\u4e00-\u9fa5]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="解析日志条目中的时间戳">解析日志条目中的时间戳
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ERROR\[(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}[+-]\d{2}:\d{2})\]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>分组提取结果&lt;/strong>：
&lt;code>2024-03-09T15:40:22+08:00&lt;/code>&lt;/p>
&lt;h2 id="提取ip地址">提取IP地址
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(?:\d{1,3}\.){3}\d{1,3}|(?:(?:[A-Fa-f0-9]{1,4}:){7}[A-Fa-f0-9]{1,4})
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>匹配结果&lt;/strong>：&lt;/p>
&lt;ul>
&lt;li>192.168.1.1&lt;/li>
&lt;li>203.0.113.255&lt;/li>
&lt;/ul>
&lt;h1 id="结语">结语
&lt;/h1>&lt;p>以上就是针对正则表达式的相关总结和部分案例演示。更多关于测试技能系统提升的学习可关注我的课程，回复 &lt;code>大纲&lt;/code> 获取详细目录。&lt;/p></description></item><item><title>批处理脚本之For命令</title><link>https://chengxiaqiucao.github.io/post/063-%E6%89%B9%E5%A4%84%E7%90%86%E8%84%9A%E6%9C%AC%E4%B9%8Bfor%E5%91%BD%E4%BB%A4/</link><pubDate>Sat, 01 Mar 2025 15:13:59 +0800</pubDate><guid>https://chengxiaqiucao.github.io/post/063-%E6%89%B9%E5%A4%84%E7%90%86%E8%84%9A%E6%9C%AC%E4%B9%8Bfor%E5%91%BD%E4%BB%A4/</guid><description>&lt;img src="https://chengxiaqiucao.github.io/post/063-%E6%89%B9%E5%A4%84%E7%90%86%E8%84%9A%E6%9C%AC%E4%B9%8Bfor%E5%91%BD%E4%BB%A4/%E6%89%B9%E5%A4%84%E7%90%86For%E5%91%BD%E4%BB%A4_%E5%85%AC%E4%BC%97%E5%8F%B7.jpg" alt="Featured image of post 批处理脚本之For命令" />&lt;h2 id="前言">前言
&lt;/h2>&lt;p>在我们工作中，如果使用Windows系统，善用批处理命令，特别是在批量的文件处理，文本处理时能帮助我们极大地提升工作效率，起到事半功倍的效果！&lt;/p>
&lt;p>但很多同学，对批处理的使用更多还停留在可以将多个command命令组合到一起执行，省去重复敲命令和等待的时间。这个其实只是批处理脚本最基本的使用方法&lt;/p>
&lt;p>但要充分发挥批处理的作用，批处理脚本中的 &lt;code>for&lt;/code> 命令其实才是核心，它作为一个兼顾循环处理，和文本列处理的命令工具，在提升批处理脚本效率方面，无出其右！&lt;/p>
&lt;p>但 for 命令的使用，相对比较复杂，很多同学可能并未很好掌握，所以本文，我们带来关于批处理中这个核心命令的系统介绍&lt;/p>
&lt;blockquote>
&lt;p>文中还有一个秋草发现的彩蛋，微软竟然有一个官方陈年Bug一直没有修 😂😂😂&lt;/p>&lt;/blockquote>
&lt;h2 id="for-命令介绍">For 命令介绍
&lt;/h2>&lt;p>下面我们就来详细介绍这个 windows 批处理中的重磅命令&lt;/p>
&lt;h3 id="基础语法">&lt;strong>基础语法&lt;/strong>
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-batch" data-lang="batch">&lt;span class="line">&lt;span class="cl">&lt;span class="k">FOR&lt;/span> %variable &lt;span class="k">IN&lt;/span> &lt;span class="p">(&lt;/span>set&lt;span class="p">)&lt;/span> &lt;span class="k">DO&lt;/span> command [command-parameters]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>&lt;strong>%variable&lt;/strong>: for循环变量，批处理脚本中需用 &lt;code>%%&lt;/code>，命令行直接执行用 &lt;code>%&lt;/code>&lt;/li>
&lt;li>(&lt;strong>set)&lt;/strong>： 可以是文件、目录、字符串或命令输出。。&lt;/li>
&lt;li>&lt;strong>command&lt;/strong>： 指定对每组循环执行的命令。&lt;/li>
&lt;li>&lt;strong>command-parameters&lt;/strong>： 控制循环行为（如 &lt;code>/R&lt;/code>, &lt;code>/D&lt;/code>, &lt;code>/L&lt;/code>, &lt;code>/F&lt;/code> 等）&lt;/li>
&lt;/ul>
&lt;p>如遍历集合:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-batch" data-lang="batch">&lt;span class="line">&lt;span class="cl">&lt;span class="p">@&lt;/span>&lt;span class="k">echo&lt;/span> off
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="se">%%&lt;/span>a &lt;span class="k">in&lt;/span> &lt;span class="p">(&lt;/span>苹果 香蕉 &lt;span class="s2">&amp;#34;西瓜 芒果&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">do&lt;/span> &lt;span class="k">echo&lt;/span> 水果：&lt;span class="se">%%&lt;/span>a
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>输出&lt;/strong>：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">水果：苹果
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">水果：香蕉
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">水果：&amp;#34;西瓜 芒果&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>&lt;strong>说明&lt;/strong>：默认按空格分隔元素，带引号的字符串视为整体。&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h3 id="-r参数递归遍历文件">** &lt;code>/R&lt;/code>参数：递归遍历文件**
&lt;/h3>&lt;p>这个参数，用于递归遍历目录及其子目录中的文件。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-batch" data-lang="batch">&lt;span class="line">&lt;span class="cl">&lt;span class="p">@&lt;/span>&lt;span class="k">echo&lt;/span> off
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> /R &lt;span class="s2">&amp;#34;C:\Chengxiaqiucao&amp;#34;&lt;/span> &lt;span class="se">%%&lt;/span>a &lt;span class="k">in&lt;/span> &lt;span class="p">(&lt;/span>*.txt&lt;span class="p">)&lt;/span> &lt;span class="k">do&lt;/span> &lt;span class="k">echo&lt;/span> 找到文件：&lt;span class="se">%%&lt;/span>a
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>功能&lt;/strong>：&lt;/p>
&lt;ul>
&lt;li>遍历 &lt;code>C:\Chengxiaqiucao&lt;/code> 及其子目录下的所有 &lt;code>.txt&lt;/code> 文件。&lt;/li>
&lt;li>&lt;code>%%a&lt;/code> 会包含完整文件路径（如 &lt;code>C:\Chengxiaqiucao\test\file.txt&lt;/code>）。&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h3 id="d">&lt;strong>&lt;code>/D&lt;/code>：处理目录&lt;/strong>
&lt;/h3>&lt;p>这个参数会仅遍历目录（不处理文件）。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-batch" data-lang="batch">&lt;span class="line">&lt;span class="cl">&lt;span class="p">@&lt;/span>&lt;span class="k">echo&lt;/span> off
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> /D &lt;span class="se">%%&lt;/span>a &lt;span class="k">in&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;C:\*&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">do&lt;/span> &lt;span class="k">echo&lt;/span> 目录：&lt;span class="se">%%&lt;/span>a
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>功能&lt;/strong>：&lt;/p>
&lt;ul>
&lt;li>列出 &lt;code>C:\&lt;/code> 下的所有一级目录（如 &lt;code>Program Files&lt;/code>, &lt;code>Users&lt;/code> 等）。&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h4 id="4">&lt;strong>4. &lt;code>/L&lt;/code>：生成数字序列&lt;/strong>
&lt;/h4>&lt;p>这个参数和我们编程时控制循环次数比较类似。&lt;/p>
&lt;p>&lt;strong>语法&lt;/strong>：&lt;code>for /L %%a in (起始, 步长, 结束)&lt;/code>&lt;/p>
&lt;p>如下例生成等差数列：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-batch" data-lang="batch">&lt;span class="line">&lt;span class="cl">&lt;span class="p">@&lt;/span>&lt;span class="k">echo&lt;/span> off
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="k">/L&lt;/span> &lt;span class="se">%%&lt;/span>a &lt;span class="k">in&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>, &lt;span class="mi">2&lt;/span>, &lt;span class="mi">10&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">do&lt;/span> &lt;span class="k">echo&lt;/span> 当前数字：&lt;span class="se">%%&lt;/span>a
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>输出&lt;/strong>：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">当前数字：1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">当前数字：3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">当前数字：5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">当前数字：7
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">当前数字：9
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h3 id="f">&lt;strong>&lt;code>/F&lt;/code>：高级文本解析（核心参数）&lt;/strong>
&lt;/h3>&lt;p>这个参数可以说是 For 命令最核心的参数，For命令大展身手，大部分情况下都是这个参数的功劳。&lt;/p>
&lt;p>这个参数主要用于逐行解析文本、字符串或命令输出，并支持复杂规则。&lt;/p>
&lt;h5 id="语法">&lt;strong>语法&lt;/strong>：
&lt;/h5>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-batch" data-lang="batch">&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="k">/F&lt;/span> [&lt;span class="s2">&amp;#34;选项&amp;#34;&lt;/span>] &lt;span class="se">%%&lt;/span>a &lt;span class="k">in&lt;/span> &lt;span class="p">(&lt;/span>数据源&lt;span class="p">)&lt;/span> &lt;span class="k">do&lt;/span> 命令
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>&lt;strong>数据源&lt;/strong>：文件、字符串或命令输出（用反引号 &lt;code>`&lt;/code> 包裹）。&lt;/li>
&lt;li>&lt;strong>选项&lt;/strong>：&lt;code>delims&lt;/code>, &lt;code>tokens&lt;/code>, &lt;code>skip&lt;/code>, &lt;code>eol&lt;/code>, &lt;code>usebackq&lt;/code> 等。&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h4 id="f-1">&lt;strong>&lt;code>/F&lt;/code> 的常用选项&lt;/strong>
&lt;/h4>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>选项&lt;/th>
&lt;th>作用&lt;/th>
&lt;th>示例&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>delims=xyz&lt;/code>&lt;/td>
&lt;td>定义分隔符（默认空格/制表符）&lt;/td>
&lt;td>&lt;code>delims=,&lt;/code> 按逗号分割&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>tokens=n&lt;/code>&lt;/td>
&lt;td>提取第n列（多列用逗号分隔，如 &lt;code>1,3&lt;/code>）&lt;/td>
&lt;td>&lt;code>tokens=2&lt;/code> 提取第二列&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>skip=n&lt;/code>&lt;/td>
&lt;td>跳过前n行&lt;/td>
&lt;td>&lt;code>skip=2&lt;/code> 跳过前两行&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>eol=;&lt;/code>&lt;/td>
&lt;td>定义行注释符（默认 &lt;code>;&lt;/code>）&lt;/td>
&lt;td>&lt;code>eol=#&lt;/code> 忽略以 &lt;code>#&lt;/code> 开头的行&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>usebackq&lt;/code>&lt;/td>
&lt;td>改变数据源引用方式（见下文）&lt;/td>
&lt;td>处理带空格路径或命令输出&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;hr>
&lt;h4 id="usebackq">&lt;strong>&lt;code>usebackq&lt;/code> 的作用&lt;/strong>
&lt;/h4>&lt;h5 id="此处有彩蛋官方文档中的bug">此处有彩蛋：官方文档中的Bug
&lt;/h5>&lt;p>在windows的中文官方帮助中，对 &lt;code>-F&lt;/code> 参数的说明，其实是错误的&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/063-%E6%89%B9%E5%A4%84%E7%90%86%E8%84%9A%E6%9C%AC%E4%B9%8Bfor%E5%91%BD%E4%BB%A4/Pasted-20250303.png"
width="1134"
height="927"
srcset="https://chengxiaqiucao.github.io/post/063-%E6%89%B9%E5%A4%84%E7%90%86%E8%84%9A%E6%9C%AC%E4%B9%8Bfor%E5%91%BD%E4%BB%A4/Pasted-20250303_hu_69c28a787679498a.png 480w, https://chengxiaqiucao.github.io/post/063-%E6%89%B9%E5%A4%84%E7%90%86%E8%84%9A%E6%9C%AC%E4%B9%8Bfor%E5%91%BD%E4%BB%A4/Pasted-20250303_hu_6b054e8443412a20.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="122"
data-flex-basis="293px"
>&lt;/p>
&lt;p>可以看到，这里对使用 &lt;code>usebackq&lt;/code> 的介绍和不使用该参数完全一样，而且，这里中文翻译的非常拗口，很难理解什么意思&lt;/p>
&lt;p>不过，我们通过 &lt;code>chcp 65001&lt;/code> 命令将命令行代码页切换至utf8，这时查看帮助会显示英文帮助&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/063-%E6%89%B9%E5%A4%84%E7%90%86%E8%84%9A%E6%9C%AC%E4%B9%8Bfor%E5%91%BD%E4%BB%A4/Pasted-20250303-1.png"
width="882"
height="1016"
srcset="https://chengxiaqiucao.github.io/post/063-%E6%89%B9%E5%A4%84%E7%90%86%E8%84%9A%E6%9C%AC%E4%B9%8Bfor%E5%91%BD%E4%BB%A4/Pasted-20250303-1_hu_58dff411620f63af.png 480w, https://chengxiaqiucao.github.io/post/063-%E6%89%B9%E5%A4%84%E7%90%86%E8%84%9A%E6%9C%AC%E4%B9%8Bfor%E5%91%BD%E4%BB%A4/Pasted-20250303-1_hu_70197c22987e192e.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="86"
data-flex-basis="208px"
>&lt;/p>
&lt;p>可以看到，理解起来就清晰多了， &lt;code>usebackq&lt;/code>解决以下场景的问题：&lt;/p>
&lt;ol>
&lt;li>&lt;strong>处理带空格的文件路径&lt;/strong>：用双引号引用文件名。&lt;/li>
&lt;li>&lt;strong>执行命令并解析输出&lt;/strong>：用反引号 &lt;code>`&lt;/code> 引用系统命令。&lt;/li>
&lt;li>&lt;strong>直接解析字符串&lt;/strong>：用单引号 &lt;code>'&lt;/code> 引用字符串。&lt;/li>
&lt;/ol>
&lt;h5 id="案例一">&lt;strong>案例一&lt;/strong>：
&lt;/h5>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-batch" data-lang="batch">&lt;span class="line">&lt;span class="cl">&lt;span class="p">@&lt;/span>&lt;span class="k">echo&lt;/span> off
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="k">/F&lt;/span> &lt;span class="s2">&amp;#34;usebackq delims=&amp;#34;&lt;/span> &lt;span class="se">%%&lt;/span>a &lt;span class="k">in&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;C:\My Files\data.txt&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">do&lt;/span> &lt;span class="k">echo&lt;/span> &lt;span class="se">%%&lt;/span>a
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>若不使用 &lt;code>usebackq&lt;/code>，路径中的空格会导致解析错误。&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h5 id="-案例二">** 案例二**
&lt;/h5>&lt;p>解析 &lt;code>data.csv&lt;/code>（格式：&lt;code>姓名,年龄,城市&lt;/code>），跳过标题行，提取姓名和城市。&lt;/p>
&lt;p>&lt;strong>输入文件 &lt;code>data.csv&lt;/code>&lt;/strong>：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">姓名,年龄,城市
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">张三,25,北京
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">李四,30,上海
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>批处理：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-batch" data-lang="batch">&lt;span class="line">&lt;span class="cl">&lt;span class="p">@&lt;/span>&lt;span class="k">echo&lt;/span> off
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="k">/F&lt;/span> &lt;span class="s2">&amp;#34;usebackq skip=1 delims=, tokens=1,3&amp;#34;&lt;/span> &lt;span class="se">%%&lt;/span>a &lt;span class="k">in&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;data.csv&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">do&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">echo&lt;/span> 姓名：&lt;span class="se">%%&lt;/span>a，城市：&lt;span class="se">%%&lt;/span>b
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>输出&lt;/strong>：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">姓名：张三，城市：北京
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">姓名：李四，城市：上海
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="应用场景总结">&lt;strong>应用场景总结&lt;/strong>
&lt;/h2>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>参数&lt;/th>
&lt;th>适用场景&lt;/th>
&lt;th>典型命令示例&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>无参数&lt;/td>
&lt;td>遍历简单文件或字符串列表&lt;/td>
&lt;td>&lt;code>for %%a in (*.txt) do echo %%a&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>/R&lt;/code>&lt;/td>
&lt;td>递归处理目录下的文件&lt;/td>
&lt;td>&lt;code>for /R %%a in (*.log) do del %%a&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>/D&lt;/code>&lt;/td>
&lt;td>仅处理目录&lt;/td>
&lt;td>&lt;code>for /D %%a in (C:\*) do echo %%a&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>/L&lt;/code>&lt;/td>
&lt;td>生成数字序列（如循环固定次数）&lt;/td>
&lt;td>&lt;code>for /L %%a in (1,1,5) do echo %%a&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>/F&lt;/code>&lt;/td>
&lt;td>解析文本文件、命令输出或复杂字符串&lt;/td>
&lt;td>&lt;code>for /F &amp;quot;tokens=2&amp;quot; %%a in (data.txt)&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>所以通过掌握For命令的这些参数和技巧，完全可以让它成为批处理脚本中处理文件、文本和系统任务的“瑞士军刀”。&lt;/p>
&lt;hr></description></item><item><title>测试工程师进阶必学 - Linux三剑客（grep）</title><link>https://chengxiaqiucao.github.io/post/060-linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep/</link><pubDate>Thu, 20 Feb 2025 14:02:28 +0800</pubDate><guid>https://chengxiaqiucao.github.io/post/060-linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep/</guid><description>&lt;img src="https://chengxiaqiucao.github.io/post/060-linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep/Pasted-20250310.png" alt="Featured image of post 测试工程师进阶必学 - Linux三剑客（grep）" />&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/060-linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep/Pasted-20250310.png"
width="1379"
height="583"
srcset="https://chengxiaqiucao.github.io/post/060-linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep/Pasted-20250310_hu_5f3d8e3ae753f3ae.png 480w, https://chengxiaqiucao.github.io/post/060-linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep/Pasted-20250310_hu_a3750a6d12eb971d.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="236"
data-flex-basis="567px"
>&lt;/p>
&lt;h1 id="前言">前言
&lt;/h1>&lt;p>&lt;code>grep&lt;/code> 是 Linux 三剑客（&lt;code>grep&lt;/code>, &lt;code>sed&lt;/code>, &lt;code>awk&lt;/code>）之一，用于在文件中搜索特定的文本模式。它不仅功能强大，而且非常灵活，能够处理各种文本搜索需求。下文我们梳理 &lt;code>grep&lt;/code> 命令的详细用法及进阶示例。&lt;/p>
&lt;h1 id="基本用法">基本用法
&lt;/h1>&lt;h2 id="基本搜索">基本搜索
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">grep &lt;span class="s2">&amp;#34;pattern&amp;#34;&lt;/span> filename
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>用于在 &lt;code>filename&lt;/code> 文件中搜索包含 &lt;code>pattern&lt;/code> 的行，并打印出来。&lt;/p>
&lt;h2 id="忽略大小写">忽略大小写
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">grep -i &lt;span class="s2">&amp;#34;pattern&amp;#34;&lt;/span> filename
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用 &lt;code>-i&lt;/code> 选项忽略大小写。&lt;/p>
&lt;h2 id="递归搜索">递归搜索
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">grep -r &lt;span class="s2">&amp;#34;pattern&amp;#34;&lt;/span> directory
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在 &lt;code>directory&lt;/code> 目录及其子目录中递归搜索包含 &lt;code>pattern&lt;/code> 的文件内容。&lt;/p>
&lt;h2 id="显示行号">显示行号
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">grep -n &lt;span class="s2">&amp;#34;pattern&amp;#34;&lt;/span> filename
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用 &lt;code>-n&lt;/code> 选项显示匹配行的行号。&lt;/p>
&lt;h2 id="反向搜索显示不匹配的行">反向搜索（显示不匹配的行）
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">grep -v &lt;span class="s2">&amp;#34;pattern&amp;#34;&lt;/span> filename
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用 &lt;code>-v&lt;/code> 选项显示不包含 &lt;code>pattern&lt;/code> 的行。&lt;/p>
&lt;h2 id="显示文件名">显示文件名
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">grep &lt;span class="s2">&amp;#34;pattern&amp;#34;&lt;/span> file1 file2 file3
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>当搜索多个文件时，默认会显示匹配的文件名。使用 &lt;code>-H&lt;/code> 可以强制显示文件名，使用 &lt;code>-h&lt;/code> 可以隐藏文件名。&lt;/p>
&lt;h1 id="进阶用法">进阶用法
&lt;/h1>&lt;h2 id="使用正则表达式">使用正则表达式
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">grep -E &lt;span class="s2">&amp;#34;pattern1|pattern2&amp;#34;&lt;/span> filename
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用 &lt;code>-E&lt;/code> 选项支持扩展正则表达式，例如 &lt;code>|&lt;/code> 表示或操作。&lt;/p>
&lt;h2 id="计数匹配的行数">计数匹配的行数
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">grep -c &lt;span class="s2">&amp;#34;pattern&amp;#34;&lt;/span> filename
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用 &lt;code>-c&lt;/code> 选项统计匹配的行数。&lt;/p>
&lt;h2 id="只显示匹配的部分">只显示匹配的部分
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">grep -o &lt;span class="s2">&amp;#34;pattern&amp;#34;&lt;/span> filename
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用 &lt;code>-o&lt;/code> 选项只显示匹配的部分，而不是整行内容。&lt;/p>
&lt;h2 id="前后行显示">前后行显示
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">grep -A &lt;span class="m">3&lt;/span> &lt;span class="s2">&amp;#34;pattern&amp;#34;&lt;/span> filename &lt;span class="c1"># 显示匹配行及其后3行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">grep -B &lt;span class="m">3&lt;/span> &lt;span class="s2">&amp;#34;pattern&amp;#34;&lt;/span> filename &lt;span class="c1"># 显示匹配行及其前3行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">grep -C &lt;span class="m">3&lt;/span> &lt;span class="s2">&amp;#34;pattern&amp;#34;&lt;/span> filename &lt;span class="c1"># 显示匹配行及其前后各3行&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>-A&lt;/code>, &lt;code>-B&lt;/code>, &lt;code>-C&lt;/code> 选项分别用于显示匹配行之后、之前或前后的指定行数。&lt;/p>
&lt;h2 id="从标准输入读取数据">从标准输入读取数据
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;some text&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> grep &lt;span class="s2">&amp;#34;pattern&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>grep&lt;/code> 可以从标准输入读取数据，这在管道操作中非常有用。&lt;/p>
&lt;h2 id="使用固定字符串搜索提高性能">使用固定字符串搜索（提高性能）
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">grep -F &lt;span class="s2">&amp;#34;fixed_string&amp;#34;&lt;/span> filename
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用 &lt;code>-F&lt;/code> 选项将 &lt;code>pattern&lt;/code> 视为固定字符串而非正则表达式，可以提高搜索性能。&lt;/p>
&lt;h2 id="排除文件">排除文件
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">grep -r --exclude&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;*.log&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;pattern&amp;#34;&lt;/span> directory
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用 &lt;code>--exclude&lt;/code> 选项排除特定类型的文件。&lt;/p>
&lt;h2 id="使用-perl-兼容正则表达式">使用 Perl 兼容正则表达式
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">grep -P &lt;span class="s2">&amp;#34;\d+&amp;#34;&lt;/span> filename
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用 &lt;code>-P&lt;/code> 选项启用 Perl 兼容正则表达式，例如 &lt;code>\d+&lt;/code> 表示一个或多个数字。&lt;/p>
&lt;h2 id="零宽断言">零宽断言
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">grep -P &lt;span class="s1">&amp;#39;(?&amp;lt;=foo)bar&amp;#39;&lt;/span> filename
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用 Perl 兼容正则表达式支持零宽断言，例如 &lt;code>(?&amp;lt;=foo)bar&lt;/code> 匹配前面是 &lt;code>foo&lt;/code> 的 &lt;code>bar&lt;/code>。&lt;/p>
&lt;h1 id="组合使用示例">组合使用示例
&lt;/h1>&lt;h2 id="查找特定目录中的特定类型文件并搜索内容">查找特定目录中的特定类型文件并搜索内容
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">grep -r --include&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;*.py&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;import&amp;#34;&lt;/span> /path/to/directory
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在 &lt;code>/path/to/directory&lt;/code> 目录中递归搜索所有 &lt;code>.py&lt;/code> 文件，查找包含 &lt;code>import&lt;/code> 的行。&lt;/p>
&lt;h2 id="查找并显示匹配行及其前后两行">查找并显示匹配行及其前后两行
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">grep -C &lt;span class="m">2&lt;/span> &lt;span class="s2">&amp;#34;error&amp;#34;&lt;/span> /var/log/syslog
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在 &lt;code>/var/log/syslog&lt;/code> 文件中查找包含 &lt;code>error&lt;/code> 的行，并显示其前后两行。&lt;/p>
&lt;h2 id="统计包含特定单词的文件数量">统计包含特定单词的文件数量
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">grep -rl &lt;span class="s2">&amp;#34;word&amp;#34;&lt;/span> /path/to/directory &lt;span class="p">|&lt;/span> wc -l
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在 &lt;code>/path/to/directory&lt;/code> 目录中递归搜索包含 &lt;code>word&lt;/code> 的文件，并统计文件数量。&lt;/p>
&lt;h2 id="结语">结语
&lt;/h2>&lt;p>通过这些示例，可以体会到 &lt;code>grep&lt;/code> 的强大能力和灵活性，也让它成为Linux中最实用的文本处理工具之一。&lt;/p></description></item><item><title>还在用print大法调试代码？换个玩法</title><link>https://chengxiaqiucao.github.io/post/055-debug%E5%B7%A5%E5%85%B7pysnooper/</link><pubDate>Sat, 15 Feb 2025 19:13:42 +0800</pubDate><guid>https://chengxiaqiucao.github.io/post/055-debug%E5%B7%A5%E5%85%B7pysnooper/</guid><description>&lt;img src="https://chengxiaqiucao.github.io/post/055-debug%E5%B7%A5%E5%85%B7pysnooper/Pasted-20250215.png" alt="Featured image of post 还在用print大法调试代码？换个玩法" />&lt;h2 id="为什么需要pysnooper">为什么需要PySnooper？
&lt;/h2>&lt;p>在Python开发过程中，print调试法和断点调试法是最常用的调试手段。但面对复杂逻辑时，传统方法存在明显不足：&lt;/p>
&lt;ul>
&lt;li>print语句需要手动添加/删除，破坏代码整洁性&lt;/li>
&lt;li>IDE断点调试在远程服务器场景难以使用&lt;/li>
&lt;li>多线程/异步场景调试困难&lt;/li>
&lt;/ul>
&lt;p>PySnooper通过智能日志记录机制，实现了&lt;strong>零侵入式调试&lt;/strong>，提供了另一种直观、便利地观测调试手段&lt;/p>
&lt;h2 id="核心功能详解">核心功能详解
&lt;/h2>&lt;h3 id="1-智能上下文追踪">1. 智能上下文追踪
&lt;/h3>&lt;p>比如我们编写一个递归函数&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">pysnooper&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@pysnooper.snoop&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">factorial&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">factorial&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">factorial&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>输出示例：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">venv&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">C&lt;/span>&lt;span class="p">:&lt;/span>\&lt;span class="n">Chengxiaqiucao&lt;/span>\&lt;span class="n">AI&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">python&lt;/span> &lt;span class="n">ai_test&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">py&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Source&lt;/span> &lt;span class="n">path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">...&lt;/span> &lt;span class="n">C&lt;/span>&lt;span class="p">:&lt;/span>\&lt;span class="n">Chengxiaqiucao&lt;/span>\&lt;span class="n">AI&lt;/span>\&lt;span class="n">ai_test&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">py&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Starting&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">..&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">14&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">50.353061&lt;/span> &lt;span class="n">call&lt;/span> &lt;span class="mi">9&lt;/span> &lt;span class="k">def&lt;/span> &lt;span class="nf">factorial&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">14&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">50.357038&lt;/span> &lt;span class="n">line&lt;/span> &lt;span class="mi">10&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">14&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">50.357103&lt;/span> &lt;span class="n">line&lt;/span> &lt;span class="mi">13&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">factorial&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Starting&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">..&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">14&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">50.357159&lt;/span> &lt;span class="n">call&lt;/span> &lt;span class="mi">9&lt;/span> &lt;span class="k">def&lt;/span> &lt;span class="nf">factorial&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">14&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">50.357220&lt;/span> &lt;span class="n">line&lt;/span> &lt;span class="mi">10&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">14&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">50.357291&lt;/span> &lt;span class="n">line&lt;/span> &lt;span class="mi">13&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">factorial&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Starting&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">..&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">14&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">50.357348&lt;/span> &lt;span class="n">call&lt;/span> &lt;span class="mi">9&lt;/span> &lt;span class="k">def&lt;/span> &lt;span class="nf">factorial&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">14&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">50.357421&lt;/span> &lt;span class="n">line&lt;/span> &lt;span class="mi">10&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">14&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">50.357460&lt;/span> &lt;span class="n">line&lt;/span> &lt;span class="mi">11&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">14&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">50.357501&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="mi">11&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Return&lt;/span> &lt;span class="n">value&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">..&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Elapsed&lt;/span> &lt;span class="n">time&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">00.000248&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">14&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">50.357716&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="mi">13&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">factorial&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Return&lt;/span> &lt;span class="n">value&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">..&lt;/span> &lt;span class="mi">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Elapsed&lt;/span> &lt;span class="n">time&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">00.000649&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">14&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">50.357843&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="mi">13&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">factorial&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Return&lt;/span> &lt;span class="n">value&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">..&lt;/span> &lt;span class="mi">6&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Elapsed&lt;/span> &lt;span class="n">time&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">00.005107&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>自动记录函数调用栈和代码执行路径，支持递归函数追踪&lt;/p>
&lt;h3 id="2-变量监控">2. 变量监控
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@pysnooper.snoop&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">watch&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;result&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;len(data)&amp;#39;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">process_data&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">item&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">processed&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">item&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">result&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">processed&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nb">sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">result&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>监控特点：&lt;/p>
&lt;ul>
&lt;li>支持表达式监控（如&lt;code>len(data)&lt;/code>)&lt;/li>
&lt;li>实时显示变量类型&lt;/li>
&lt;li>数值变化提示&lt;/li>
&lt;/ul>
&lt;h3 id="3-上下文管理模式输出到文件">3. 上下文管理模式、输出到文件
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 上下文管理器模式&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">with&lt;/span> &lt;span class="n">pysnooper&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">snoop&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">output&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;/var/log/debug.log&amp;#39;&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">critical_operation&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="4-多处跟踪时指定前缀">4. 多处跟踪时指定前缀
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@pysnooper.snoop&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">prefix&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;[add]&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">b&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@pysnooper.snoop&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">prefix&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;[main]&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">result&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">main&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;Final result: &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">result&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>输出时会显示指定的不同前缀&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">main&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">29&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">01.818895&lt;/span> &lt;span class="n">call&lt;/span> &lt;span class="mi">17&lt;/span> &lt;span class="k">def&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">main&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">29&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">01.819578&lt;/span> &lt;span class="n">line&lt;/span> &lt;span class="mi">18&lt;/span> &lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">Source&lt;/span> &lt;span class="n">path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">...&lt;/span> &lt;span class="n">C&lt;/span>&lt;span class="p">:&lt;/span>\&lt;span class="n">Chengxiaqiucao&lt;/span>\&lt;span class="n">AI&lt;/span>\&lt;span class="n">ai_test&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">py&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">Starting&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">..&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">Starting&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">..&lt;/span> &lt;span class="n">b&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">7&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">29&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">01.819791&lt;/span> &lt;span class="n">call&lt;/span> &lt;span class="mi">13&lt;/span> &lt;span class="k">def&lt;/span> &lt;span class="nf">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">29&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">01.820558&lt;/span> &lt;span class="n">line&lt;/span> &lt;span class="mi">14&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">b&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">29&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">01.820758&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="mi">14&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">b&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">Return&lt;/span> &lt;span class="n">value&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">..&lt;/span> &lt;span class="mi">12&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">Elapsed&lt;/span> &lt;span class="n">time&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">00.001314&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">main&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="n">New&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">.......&lt;/span> &lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">12&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">main&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">29&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">01.821253&lt;/span> &lt;span class="n">line&lt;/span> &lt;span class="mi">19&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">result&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">main&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">29&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">01.821503&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="mi">19&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">result&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">main&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="n">Return&lt;/span> &lt;span class="n">value&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">..&lt;/span> &lt;span class="mi">12&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">main&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="n">Elapsed&lt;/span> &lt;span class="n">time&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">00.002834&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Final&lt;/span> &lt;span class="n">result&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">12&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="5-设置跟踪深度">5. 设置跟踪深度
&lt;/h3>&lt;p>如果代码中牵涉多层函数调用，还可以通过指定记录深度，默认深度为 &lt;strong>1&lt;/strong>，灵活结合&lt;code>depth&lt;/code>参数，可以帮助我们重点查看关注部分&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@pysnooper.snoop&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">depth&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">outer_function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">inner_function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@pysnooper.snoop&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">depth&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">inner_function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">outer_function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;Outer function result: &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">result&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>输出：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">Starting&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">..&lt;/span> &lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">37&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">49.360851&lt;/span> &lt;span class="n">call&lt;/span> &lt;span class="mi">9&lt;/span> &lt;span class="k">def&lt;/span> &lt;span class="nf">outer_function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">37&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">49.361569&lt;/span> &lt;span class="n">line&lt;/span> &lt;span class="mi">10&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">inner_function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Source&lt;/span> &lt;span class="n">path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">...&lt;/span> &lt;span class="n">C&lt;/span>&lt;span class="p">:&lt;/span>\&lt;span class="n">Chengxiaqiucao&lt;/span>\&lt;span class="n">ai&lt;/span>\&lt;span class="n">ai_test&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">py&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Starting&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">..&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">11&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">37&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">49.361734&lt;/span> &lt;span class="n">call&lt;/span> &lt;span class="mi">13&lt;/span> &lt;span class="k">def&lt;/span> &lt;span class="nf">inner_function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">37&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">49.362077&lt;/span> &lt;span class="n">line&lt;/span> &lt;span class="mi">14&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">37&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">49.362184&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="mi">14&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Return&lt;/span> &lt;span class="n">value&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">..&lt;/span> &lt;span class="mi">22&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Elapsed&lt;/span> &lt;span class="n">time&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">00.000589&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">37&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">49.362380&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="mi">10&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">inner_function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Return&lt;/span> &lt;span class="n">value&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">..&lt;/span> &lt;span class="mi">22&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Elapsed&lt;/span> &lt;span class="n">time&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">00.001683&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Outer&lt;/span> &lt;span class="n">function&lt;/span> &lt;span class="n">result&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">22&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="总结">总结
&lt;/h2>&lt;p>有了这个工具， 我们在调试时，特别是在一些服务器上进行代码调测，就可以通过一行装饰代码实现运行变量和过程的监测了，远离print大法的繁杂啦！&lt;/p></description></item><item><title>搭建基于https的Docker私有仓库</title><link>https://chengxiaqiucao.github.io/post/025-%E6%90%AD%E5%BB%BA%E5%9F%BA%E4%BA%8Ehttps%E7%9A%84docker%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/</link><pubDate>Tue, 11 Feb 2025 00:00:00 +0000</pubDate><guid>https://chengxiaqiucao.github.io/post/025-%E6%90%AD%E5%BB%BA%E5%9F%BA%E4%BA%8Ehttps%E7%9A%84docker%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/</guid><description>&lt;img src="https://chengxiaqiucao.github.io/post/025-%E6%90%AD%E5%BB%BA%E5%9F%BA%E4%BA%8Ehttps%E7%9A%84docker%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/docker%E4%BB%93%E5%BA%93.png" alt="Featured image of post 搭建基于https的Docker私有仓库" />&lt;h2 id="前言">前言
&lt;/h2>&lt;p>在我们日常工作中，基于Docker技术进行开发、测试环境的快速部署和管理已经非常普遍，而对于我们自己的产品研发来说，必然就离不开很多私有的docker镜像管理，更加上docker官方镜像仓库的访问困难，在我们的研发环境中的搭建私有docker镜像仓库就成为一个普遍需求。&lt;/p>
&lt;h2 id="搭建私有docker镜像仓库的基本方法---http">搭建私有docker镜像仓库的基本方法 - http
&lt;/h2>&lt;p>搭建docker私有镜像仓库的基础方法，其实非常简便，也是大家网上搜索最容易找到的方案。&lt;/p>
&lt;p>直接通过 docker 启动它的仓库镜像 registry 即可&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">docker&lt;/span> &lt;span class="n">run&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">d&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">restart&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">always&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="n">registry&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="mi">5100&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">5000&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span>&lt;span class="n">v&lt;/span> &lt;span class="n">registry&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">registry&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">registry&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>&amp;ndash;restart&lt;/strong> 设置在仓库异常时自动重启仓库，保证可用性
&lt;strong>&amp;ndash;name&lt;/strong> 设置仓库名称
&lt;strong>&amp;ndash;p&lt;/strong> 内部仓库服务端口5000映射到宿主机5100端口
&lt;strong>&amp;ndash;v&lt;/strong> 仓库存储持久化到数据卷&lt;/p>
&lt;p>镜像启动完成以后，通过浏览器访问一下这台宿主机5100端口的 &lt;code>v2&lt;/code> 接口，可以正常显示一个空的 json 字串，表示仓库已经可以正常提供服务&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/025-%E6%90%AD%E5%BB%BA%E5%9F%BA%E4%BA%8Ehttps%E7%9A%84docker%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/Pasted-20250212.png"
width="653"
height="186"
srcset="https://chengxiaqiucao.github.io/post/025-%E6%90%AD%E5%BB%BA%E5%9F%BA%E4%BA%8Ehttps%E7%9A%84docker%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/Pasted-20250212_hu_1c442ea7ed3a7900.png 480w, https://chengxiaqiucao.github.io/post/025-%E6%90%AD%E5%BB%BA%E5%9F%BA%E4%BA%8Ehttps%E7%9A%84docker%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/Pasted-20250212_hu_3bfbbbdad98e8cca.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="351"
data-flex-basis="842px"
>&lt;/p>
&lt;p>但这时，如果我们通过 &lt;code>docker push&lt;/code> 命令向这个私有仓库上传镜像，会得到一个提示默认协议https不匹配的提示。&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/025-%E6%90%AD%E5%BB%BA%E5%9F%BA%E4%BA%8Ehttps%E7%9A%84docker%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/Pasted-20250212-1.png"
width="1513"
height="107"
srcset="https://chengxiaqiucao.github.io/post/025-%E6%90%AD%E5%BB%BA%E5%9F%BA%E4%BA%8Ehttps%E7%9A%84docker%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/Pasted-20250212-1_hu_47792a33861a55bb.png 480w, https://chengxiaqiucao.github.io/post/025-%E6%90%AD%E5%BB%BA%E5%9F%BA%E4%BA%8Ehttps%E7%9A%84docker%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/Pasted-20250212-1_hu_c877914cc7e69b67.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="1414"
data-flex-basis="3393px"
>&lt;/p>
&lt;p>这里我们还需要通过docker配置使其接受http协议，Linux 系统下通常在 &lt;code>/etc/docker/daemon.json&lt;/code> 这个docker守护进程配置文件中。&lt;/p>
&lt;p>在其中添加私有镜像服务器地址:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;insecure-registries&amp;#34;&lt;/span>&lt;span class="err">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;192.168.101.67:5100&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err">,&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果是在windows中使用docker desktop，在docker engine中进行配置&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/025-%E6%90%AD%E5%BB%BA%E5%9F%BA%E4%BA%8Ehttps%E7%9A%84docker%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/Pasted-20250212-2.png"
width="1720"
height="799"
srcset="https://chengxiaqiucao.github.io/post/025-%E6%90%AD%E5%BB%BA%E5%9F%BA%E4%BA%8Ehttps%E7%9A%84docker%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/Pasted-20250212-2_hu_693d6cf7528172d8.png 480w, https://chengxiaqiucao.github.io/post/025-%E6%90%AD%E5%BB%BA%E5%9F%BA%E4%BA%8Ehttps%E7%9A%84docker%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/Pasted-20250212-2_hu_a3fbb14c4f02522f.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="215"
data-flex-basis="516px"
>&lt;/p>
&lt;p>重启docker引擎后，就可以正常对刚搭建的私有参考进行push和pull操作了。&lt;/p>
&lt;p>但是，虽然基于http协议的基础镜像仓库能满足我们日常的基本使用要求，但如果我们的产品项目不是个小型项目，牵涉多个docker镜像联动和多个节点的话，一般会需要使用docker集群。&lt;/p>
&lt;p>docker官方的集群系统docker swarm使用也非常简便，但docker swarm中对于私有镜像仓库，出于安全考虑，是需要强制通过 &lt;code>https&lt;/code> 协议访问的，因此，我们本文的重点，还是介绍下如何搭建一个基于&lt;code>https&lt;/code> 协议的私有镜像仓库&lt;/p>
&lt;h2 id="https协议镜像仓库的要求">https协议镜像仓库的要求
&lt;/h2>&lt;p>&lt;code>https&lt;/code> 协议相对于 &lt;code>http&lt;/code> 协议，主要就是提供了传输安全性上的保护。关于 https协议原理的详细说明，可以参看我前面的文章&lt;/p>
&lt;p>&lt;a class="link" href="https://chengxiaqiucao.github.io/post/21-%E5%82%BB%E7%93%9C%E5%BC%8F%E7%90%86%E8%A7%A3https%E5%8D%8F%E8%AE%AE/" target="_blank" rel="noopener"
>大话HTTPS协议，理解SSL、TLS和HTTP的关系&lt;/a>&lt;/p>
&lt;p>因此，我们要搭建基于 https 协议的镜像仓库，复杂的地方主要是解决https协议要求的相关认证和鉴权上的要求。主要包括：&lt;/p>
&lt;ul>
&lt;li>生成证书和访问密钥，非生产环境一般使用自签名证书。&lt;/li>
&lt;li>配置镜像仓库启动时挂载证书&lt;/li>
&lt;li>配置访问节点对证书的信任&lt;/li>
&lt;li>加入集群，推送、拉取docker镜像&lt;/li>
&lt;/ul>
&lt;h2 id="集群中部署私有镜像仓库">集群中部署私有镜像仓库
&lt;/h2>&lt;p>下面，我们逐步详细说明部署过程&lt;/p>
&lt;h3 id="自签名证书生成">自签名证书生成
&lt;/h3>&lt;h4 id="生成根证书私钥和证书">生成根证书私钥和证书
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">openssl req -newkey rsa:4096 -nodes -sha256 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -keyout ca.key -x509 -days &lt;span class="m">3650&lt;/span> -out ca.crt &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -subj &lt;span class="s2">&amp;#34;/C=CN/ST=Beijing/L=Beijing/O=Qiucao Inc./CN=Qiucao Root CA&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="生成服务器私钥和-csr">生成服务器私钥和 CSR
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">openssl req -newkey rsa:4096 -nodes -sha256 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -keyout registry.key -out registry.csr &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -subj &lt;span class="s2">&amp;#34;/C=CN/ST=Beijing/L=Beijing/O=Qiucao Inc./CN=qiucao.com&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="使用根证书签发服务器证书">使用根证书签发服务器证书
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">openssl x509 -req -days &lt;span class="m">3650&lt;/span> -in registry.csr -CA ca.crt -CAkey ca.key &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -CAcreateserial -out registry.crt -extfile &amp;lt;&lt;span class="o">(&lt;/span>&lt;span class="nb">printf&lt;/span> &lt;span class="s2">&amp;#34;subjectAltName=DNS:qiucao.com&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>通过以上操作，会生成我们需要的证书清单&lt;/p>
&lt;ul>
&lt;li>&lt;code>ca.crt&lt;/code>：根证书&lt;/li>
&lt;li>&lt;code>registry.crt&lt;/code>：服务器证书&lt;/li>
&lt;li>&lt;code>registry.key&lt;/code>：服务器私钥&lt;/li>
&lt;/ul>
&lt;h3 id="配置镜像registry">配置镜像Registry
&lt;/h3>&lt;p>在swarm集群中启用Registry仓库，可以通过&lt;code>docker compose&lt;/code>， 先配置compose启动文件&lt;/p>
&lt;p>docker-compose.yml&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">services&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">registry&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">registry:2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;5100:5000&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">REGISTRY_HTTP_TLS_CERTIFICATE&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/certs/registry.crt&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">REGISTRY_HTTP_TLS_KEY&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/certs/registry.key&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">REGISTRY_STORAGE_FILESYSTEM_ROOTDIRECTORY&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/var/lib/registry&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./certs:/certs&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">/var/docker-registry:/var/lib/registry&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">networks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">registry-net&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">networks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">registry-net&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">driver&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">overlay&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后通过 &lt;code>docker stack&lt;/code> 在集群中启用仓库&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 创建 overlay 网络&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker network create -d overlay registry-net
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 部署 Registry 服务&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker stack deploy -c docker-compose.yml registry
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这样，我们就启用了支持认证的仓库&lt;/p>
&lt;h3 id="配置访问节点信任证书">配置访问节点信任证书
&lt;/h3>&lt;p>但仓库支持认证，要在访问时能正常对服务进行认证，在客户节点上，还有一个操作，也就是需要信任仓库的自签名证书&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir -p /etc/docker/certs.d/qiucao.com:5100
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cp ca.crt /etc/docker/certs.d/qiucao.com:5100/ca.crt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>重启本地docker服务，以加载信任证书&lt;/p>
&lt;h3 id="验证仓库镜像拉取">验证仓库镜像拉取
&lt;/h3>&lt;p>然后，在客户机上，我们就可以通过私有仓库来完成镜像的拉取了&lt;/p>
&lt;p>这里还有一个步骤，就是我们配置的仓库地址是 &lt;code>qiucao.com&lt;/code>，并不是一个实际存在的公共网络域名，所以这里我们还应该在本地的 &lt;code>/etc/hosts&lt;/code>中添加对域名的解析&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">192.168.101.67 qiucao.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后执行命令&lt;code> docker pull&lt;/code> 拉取仓库中的镜像，可以成功完成镜像的拉取&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/025-%E6%90%AD%E5%BB%BA%E5%9F%BA%E4%BA%8Ehttps%E7%9A%84docker%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/Pasted-20250212-3.png"
width="1366"
height="450"
srcset="https://chengxiaqiucao.github.io/post/025-%E6%90%AD%E5%BB%BA%E5%9F%BA%E4%BA%8Ehttps%E7%9A%84docker%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/Pasted-20250212-3_hu_acda33db5f33567e.png 480w, https://chengxiaqiucao.github.io/post/025-%E6%90%AD%E5%BB%BA%E5%9F%BA%E4%BA%8Ehttps%E7%9A%84docker%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/Pasted-20250212-3_hu_48c07b002de8afd.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="303"
data-flex-basis="728px"
>&lt;/p>
&lt;hr>
&lt;p>更多关于docker使用和体系化的测试技能提升，可了解我的测试课程，回复 &lt;code>大纲&lt;/code> 了解课程详细内容。&lt;/p></description></item><item><title>用deepseek+vscode自动完成测试脚本</title><link>https://chengxiaqiucao.github.io/post/052-%E7%94%A8deepseek+vscode%E8%87%AA%E5%8A%A8%E5%AE%8C%E6%88%90%E6%B5%8B%E8%AF%95%E8%84%9A%E6%9C%AC/</link><pubDate>Fri, 31 Jan 2025 21:29:12 +0800</pubDate><guid>https://chengxiaqiucao.github.io/post/052-%E7%94%A8deepseek+vscode%E8%87%AA%E5%8A%A8%E5%AE%8C%E6%88%90%E6%B5%8B%E8%AF%95%E8%84%9A%E6%9C%AC/</guid><description>&lt;p>近几日Deepseek大火，我这里也尝试了一下，确实很强。而目前vscode的AI toolkit插件也已经集成了deepseek R1，这里就介绍下在vscode中利用deepseek帮助我们完成自动化测试脚本的实践分享&lt;/p>
&lt;h2 id="安装ai-toolkit并启用deepseek">安装AI ToolKit并启用Deepseek
&lt;/h2>&lt;p>微软官方提供了一个针对AI辅助的插件，也就是 &lt;strong>AI Toolkit for Visual Studio Code&lt;/strong>， 这个插件可以利用各种开源或商用的大模型，目前也已经集成了Deepseek R1模型，可以让我们在VS code中方便地利用Deepseek来帮助我们的代码开发&lt;/p>
&lt;p>首先在插件中心中找到&lt;strong>AI Toolkit&lt;/strong>并完成安装&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/052-%E7%94%A8deepseek&amp;#43;vscode%E8%87%AA%E5%8A%A8%E5%AE%8C%E6%88%90%E6%B5%8B%E8%AF%95%E8%84%9A%E6%9C%AC/Pasted-20250131-1.png"
width="1586"
height="1180"
srcset="https://chengxiaqiucao.github.io/post/052-%E7%94%A8deepseek&amp;#43;vscode%E8%87%AA%E5%8A%A8%E5%AE%8C%E6%88%90%E6%B5%8B%E8%AF%95%E8%84%9A%E6%9C%AC/Pasted-20250131-1_hu_21e0d5258939b6d2.png 480w, https://chengxiaqiucao.github.io/post/052-%E7%94%A8deepseek&amp;#43;vscode%E8%87%AA%E5%8A%A8%E5%AE%8C%E6%88%90%E6%B5%8B%E8%AF%95%E8%84%9A%E6%9C%AC/Pasted-20250131-1_hu_b96bba8591f888d8.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="134"
data-flex-basis="322px"
>&lt;/p>
&lt;p>安装完成插件以后，在插件页面，选择catalog中的models模型页面，并通过筛选条件 &lt;code>hosted by Github&lt;/code>, 以及 &lt;code>publisher Deepseek&lt;/code> 使用Deepseek-R1模型&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/052-%E7%94%A8deepseek&amp;#43;vscode%E8%87%AA%E5%8A%A8%E5%AE%8C%E6%88%90%E6%B5%8B%E8%AF%95%E8%84%9A%E6%9C%AC/Pasted-20250131.png"
width="1403"
height="1040"
srcset="https://chengxiaqiucao.github.io/post/052-%E7%94%A8deepseek&amp;#43;vscode%E8%87%AA%E5%8A%A8%E5%AE%8C%E6%88%90%E6%B5%8B%E8%AF%95%E8%84%9A%E6%9C%AC/Pasted-20250131_hu_75f3fee0b99aaf21.png 480w, https://chengxiaqiucao.github.io/post/052-%E7%94%A8deepseek&amp;#43;vscode%E8%87%AA%E5%8A%A8%E5%AE%8C%E6%88%90%E6%B5%8B%E8%AF%95%E8%84%9A%E6%9C%AC/Pasted-20250131_hu_ec9505cc538860aa.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="134"
data-flex-basis="323px"
>&lt;/p>
&lt;h2 id="ai帮助生成脚本">AI帮助生成脚本
&lt;/h2>&lt;p>有了deepseek模型后，我们就可以新建一个playgroud让deepseek帮助我们生成自动化脚本了，以下是我让Deepseek生成的针对saucedemo的测试脚本&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/052-%E7%94%A8deepseek&amp;#43;vscode%E8%87%AA%E5%8A%A8%E5%AE%8C%E6%88%90%E6%B5%8B%E8%AF%95%E8%84%9A%E6%9C%AC/Pasted-20250131-2.png"
width="1196"
height="657"
srcset="https://chengxiaqiucao.github.io/post/052-%E7%94%A8deepseek&amp;#43;vscode%E8%87%AA%E5%8A%A8%E5%AE%8C%E6%88%90%E6%B5%8B%E8%AF%95%E8%84%9A%E6%9C%AC/Pasted-20250131-2_hu_de464dae80bb5d2a.png 480w, https://chengxiaqiucao.github.io/post/052-%E7%94%A8deepseek&amp;#43;vscode%E8%87%AA%E5%8A%A8%E5%AE%8C%E6%88%90%E6%B5%8B%E8%AF%95%E8%84%9A%E6%9C%AC/Pasted-20250131-2_hu_2b9c36158ae3ebfc.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="182"
data-flex-basis="436px"
>&lt;/p>
&lt;h3 id="思考过程">思考过程
&lt;/h3>&lt;p>嗯，我现在需要帮忙设计一个基于pytest和Playwright的自动化测试项目，针对saucedemo.com的登录和checkout流程，使用POM模式，用户数据放在user.yml里，还要包含异常场景。好的，我得一步一步来。&lt;/p>
&lt;p>首先，应该确定项目的结构。POM模式的话，通常会有page对象、测试用例、配置文件、数据文件等。可能需要这样的目录结构：&lt;/p>
&lt;ul>
&lt;li>tests/
&lt;ul>
&lt;li>pages/
&lt;ul>
&lt;li>login_page.py&lt;/li>
&lt;li>inventory_page.py&lt;/li>
&lt;li>cart_page.py&lt;/li>
&lt;li>checkout_page.py&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>test_login.py&lt;/li>
&lt;li>test_checkout.py&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>conftest.py&lt;/li>
&lt;li>user.yml&lt;/li>
&lt;li>pytest.ini&lt;/li>
&lt;/ul>
&lt;p>然后，用户数据存在user.yml里，里面应该有不同的用户类型，比如标准用户，锁定用户，错误密码，没有用户等。然后测试用例要读取这些数据。&lt;/p>
&lt;p>接下来是Page Object Model的实现。每个页面比如登录页、商品页，购物车页、结算页都有自己的类，封装元素和操作。比如LoginPage有用户名、密码输入框，登录按钮，错误提示的方法。&lt;/p>
&lt;p>测试用例应该使用pytest的参数化来覆盖不同的用户场景。比如正常登录成功，无效密码，锁定用户等。同时，checkout流程需要正常流程的测试，可能还有填写信息不完整的情况。&lt;/p>
&lt;p>然后考虑conftest.py里面设置Playwright的fixture，比如browser，page，以及各个page对象的fixture。比如，每次测试前都转到登录页，登录后到库存页，这样可以处理前置条件。&lt;/p>
&lt;p>异常场景的话，例如登录时的各种错误信息，结账时的表单验证，比如必须填first name等。需要编写这些测试用例，并验证错误提示是否正确。&lt;/p>
&lt;p>用户的数据如何加载呢？可能用pyYAML库来读取user.yml文件，里面分不同用户的数据。测试时用@pytest.mark.parametrize参数化输入不同的用户数据。&lt;/p>
&lt;p>比如，用户数据分成valid_users，invalid_password，locked_user等键。在测试登录的时候，参数化这些情况，触发不同的测试用例。&lt;/p>
&lt;p>在测试checkout流程时，可能需要先登录，然后添加商品到购物车，进入购物车，进入结算页，填写信息，完成checkout。这时候，正常的测试用例需要用有效的数据，而异常情况比如不填写某些字段需要验证错误提示。&lt;/p>
&lt;p>还需要处理元素的选择器，Playwright的定位方法，比如使用CSS选择器或文本定位。例如，登录页可能通过id定位用户名和密码输入框。&lt;/p>
&lt;p>此外，测试完成后需要清理状态吗？比如，购物车中的商品或者是否需要登出，或者每个测试用例之间保持独立，可能使用 fixtures 来确保各自的状态。&lt;/p>
&lt;p>也可能需要处理异步操作，不过Playwright是自动处理等待的，所以在页面导航或元素点击时不需要额外处理。&lt;/p>
&lt;p>现在，具体的步骤：&lt;/p>
&lt;ol>
&lt;li>创建项目结构，安装依赖：pytest, playwright, pyyaml。&lt;/li>
&lt;li>编写user.yml，包含不同类型的用户数据。&lt;/li>
&lt;li>实现各个页面的Page类，包含元素定位和操作方法。&lt;/li>
&lt;li>在conftest.py中定义fixture，例如初始化page，创建各page对象的实例。&lt;/li>
&lt;li>编写测试用例，参数化用户数据，覆盖正常和异常流程。&lt;/li>
&lt;li>处理测试中的等待和断言，确保元素的存在或文本正确。&lt;/li>
&lt;/ol>
&lt;p>需要检查测试用例是否覆盖以下场景：&lt;/p>
&lt;p>登录：&lt;/p>
&lt;ul>
&lt;li>正确用户密码登录成功。&lt;/li>
&lt;li>错误密码提示错误信息。&lt;/li>
&lt;li>锁定用户无法登录。&lt;/li>
&lt;li>空用户名或密码提示错误。&lt;/li>
&lt;/ul>
&lt;p>Checkout：&lt;/p>
&lt;ul>
&lt;li>正常填写所有信息，完成订单。&lt;/li>
&lt;li>必填字段缺失（如first name为空）提示错误。&lt;/li>
&lt;li>取消订单流程。&lt;/li>
&lt;/ul>
&lt;p>现在，user.yml的结构应该是什么样的？&lt;/p>
&lt;p>可能如下：&lt;/p>
&lt;p>users: valid_user: username: standard_user password: secret_sauce invalid_password_user: username: standard_user password: wrongpass locked_user: username: locked_out_user password: secret_sauce missing_username: username: &amp;quot;&amp;quot; password: secret_sauce missing_password: username: standard_user password: &amp;quot;&amp;quot;&lt;/p>
&lt;p>在测试登录的时候，参数化这些情况。比如，对于valid_user，应该登录成功，跳转到/inventory.html。对于invalid_password，显示Epic sadface: Username and password do not match。锁定的用户提示Epic sadface: Sorry, this user has been locked out。缺少用户名或密码提示相应的错误信息。&lt;/p>
&lt;p>对于checkout流程，可行的步骤是：&lt;/p>
&lt;p>登录后，添加一个商品到购物车，点击购物车图标，进入购物车页，点击checkout按钮，填写信息，继续，完成。&lt;/p>
&lt;p>所以测试用例需要参数化填写的信息是否正确。例如：&lt;/p>
&lt;p>正常情况下的信息：&lt;/p>
&lt;p>first_name: John last_name: Doe zip: 12345&lt;/p>
&lt;p>异常情况，比如不填first name，是否提示错误。&lt;/p>
&lt;p>在编写这些测试时，需要使用页面对象的方法来完成每个步骤，比如添加商品，进入购物车，填写信息，继续按钮等。&lt;/p>
&lt;p>可能的问题点：&lt;/p>
&lt;p>元素的定位是否正确，特别是动态生成的内容或者异步加载的部分是否需要等待。不过Playwright有自动等待机制，所以选择元素时只要正确选择应该没问题。&lt;/p>
&lt;p>需要断言的地方包括：登录后的页面URL是否正确，订单完成后的确认信息是否存在，错误提示是否显示正确的文本。&lt;/p>
&lt;p>比如，登录成功后应该跳转到/inventory.html；checkout完成后应该显示“Thank you for your order”。&lt;/p>
&lt;p>另外，可能需要清理购物车，但因为每个测试可能独立运行，或者每个测试都重新开始会话，所以在fixture中可以处理，如在每次测试前登录并重置状态？&lt;/p>
&lt;p>或者使用类似于beforeEach的fixture，让每个测试用例开始时处于某个状态。比如，登录后的页面。&lt;/p>
&lt;p>此外，测试购物流程需要添加商品到购物车，所以库存页面的类需要有添加商品的方法。&lt;/p>
&lt;p>Page类示例：&lt;/p>
&lt;p>InventoryPage可以有添加某个商品的方法，比如点击“Add to cart”按钮。比如，根据商品名称定位对应的按钮。不过这可能比较复杂，也许在页面上使用通用的方法。&lt;/p>
&lt;p>或者，在InventoryPage中有方法add_item_to_cart(item_name)，用于点击对应商品的添加按钮。这时需要使用Playwright的定位方法，例如：&lt;/p>
&lt;p>def add_item_to_cart(self, item_name): self.page.locator(f&amp;quot;text={item_name}&amp;quot;).locator(&amp;ldquo;xpath=..&amp;rdquo;).locator(&amp;ldquo;button&amp;rdquo;).click()&lt;/p>
&lt;p>不过这可能需要根据实际的DOM结构来确定。可能需要inspector查看元素结构。&lt;/p>
&lt;p>例如，每个商品项的结构可能类似：&lt;/p>
&lt;div class="inventory_item"> &lt;div class="inventory_item_name">Sauce Labs Backpack&lt;/div> &lt;button class="btn btn_primary">Add to cart&lt;/button> &lt;/div>
&lt;p>所以，找到对应的名称元素，然后找到其父级元素中的按钮。&lt;/p>
&lt;p>或者，更简单的办法是每个商品的“Add to cart”按钮有不同的id，比如 add-to-cart-sauce-labs-backpack，或其他属性。需要看实际网站的结构。&lt;/p>
&lt;p>登录后的页面可能有多个商品，每个商品对应的添加按钮可能需要通过其文本来定位对应的按钮。或者通过其他属性。&lt;/p>
&lt;p>现在，需要实际查看saucedemo.com的结构。可能使用Playwright的代码生成功能来获取正确的选择器。&lt;/p>
&lt;p>假设，例如，每个商品的“Add to cart”按钮的id是动态生成的或者类似，例如对于“Sauce Labs Backpack”，对应的按钮的id可能是add-to-cart-sauce-labs-backpack，那么可以直接通过这个id去定位。&lt;/p>
&lt;p>这样的话，InventoryPage中可以有一个方法：&lt;/p>
&lt;p>def add_product_to_cart(self, product_name): product_id = product_name.lower().replace(&amp;rsquo; &amp;lsquo;, &amp;lsquo;-&amp;rsquo;) self.page.click(f&amp;quot;#add-to-cart-{product_id}&amp;quot;)&lt;/p>
&lt;p>当然，这需要查看实际的网站结构是否正确。&lt;/p>
&lt;p>假设正确的商品example在这里是Sauce Labs Backpack，其id可能确实是这样的，这样方法可行。&lt;/p>
&lt;p>另外，购物车图标上的数量是否正确，当商品添加后，购物车的图标显示数量为1。当进入购物车页，是否有对应的商品。&lt;/p>
&lt;p>需要注意，每个操作之后的页面变化是否需要新的Page对象实例，比如在InventoryPage点击购物车后跳转到CartPage，所以该操作应该返回CartPage的实例，从而能够继续操作。&lt;/p>
&lt;p>这样方法的返回值处理可能成为问题。比如：&lt;/p>
&lt;p>在InventoryPage中的方法：&lt;/p>
&lt;p>def go_to_cart(self): self.page.click(&amp;quot;.shopping_cart_link&amp;quot;) return CartPage(self.page)&lt;/p>
&lt;p>类似这样，每个导航动作返回新的Page对象。&lt;/p>
&lt;p>这会需要在各个页面的方法中处理返回相应的页面对象。&lt;/p>
&lt;p>然后是测试流程的组装：&lt;/p>
&lt;p>在测试checkout的时候，可能步骤很多，需要写一个大的测试用例，分步骤进行：&lt;/p>
&lt;p>例如：&lt;/p>
&lt;p>def test_checkout_process(login_page, inventory_page, checkout_data): # 登录 login_page.login(&amp;ldquo;standard_user&amp;rdquo;, &amp;ldquo;secret_sauce&amp;rdquo;) # 添加商品 inventory_page.add_product_to_cart(&amp;ldquo;Sauce Labs Backpack&amp;rdquo;) inventory_page.go_to_cart() # 进入购物车页面，点击checkout cart_page.click_checkout() # 填写checkout信息 checkout_page.fill_shipping_info(checkout_data) checkout_page.continue_to_overview() # 确认订单 checkout_page.finish_checkout() # 断言是否成功 assert checkout_page.get_order_confirmation() == &amp;ldquo;Thank you for your order!&amp;rdquo;&lt;/p>
&lt;p>当然，这可能涉及到许多页面的跳转，每个页面之间需要用对应的方法来连接。&lt;/p>
&lt;p>异常场景的话，比如在填写信息的时候不输入first name，点击continue时，出现错误提示。&lt;/p>
&lt;p>此时，测试用例可能参数化不同的数据，比如：&lt;/p>
&lt;p>@pytest.mark.parametrize(&amp;ldquo;first_name, last_name, zip_code, error_message&amp;rdquo;, [ (&amp;quot;&amp;quot;, &amp;ldquo;Doe&amp;rdquo;, &amp;ldquo;12345&amp;rdquo;, &amp;ldquo;Error: First Name is required&amp;rdquo;), (&amp;ldquo;John&amp;rdquo;, &amp;ldquo;&amp;rdquo;, &amp;ldquo;12345&amp;rdquo;, &amp;ldquo;Error: Last Name is required&amp;rdquo;), (&amp;ldquo;John&amp;rdquo;, &amp;ldquo;Doe&amp;rdquo;, &amp;ldquo;&amp;rdquo;, &amp;ldquo;Error: Postal Code is required&amp;rdquo;), ]) def test_checkout_missing_fields(&amp;hellip;, first_name, last_name, zip_code, error_message): # 填信息时，漏掉对应字段 checkout_page.fill_shipping_info(first_name, last_name, zip_code) checkout_page.continue_to_overview() assert checkout_page.get_error_message() == error_message&lt;/p>
&lt;p>可能还需要考虑，错误信息提示元素的定位是否正确，以及当出现错误时是否阻止进入下一步。&lt;/p>
&lt;p>现在，问题可能是如何组织这些数据和页面方法。&lt;/p>
&lt;p>另外，关于用户数据的读取，测试用例需要从YAML文件中加载。可能的做法是在conftest.py里面写个fixture读取YAML的数据，然后参数化测试用例。&lt;/p>
&lt;p>但pytest的参数化可能需要特定的方式处理，可能将YAML数据转换成测试参数。或者使用外部数据源来参数化测试。&lt;/p>
&lt;p>例如，在conftest.py中读取user.yml的所有用户数据，并为登录测试创建一个参数化的fixture。&lt;/p>
&lt;p>或者，可以在测试用例中直接读取YAML文件中的数据，并将其参数化。&lt;/p>
&lt;p>比如：&lt;/p>
&lt;p>import yaml&lt;/p>
&lt;p>def load_users(): with open(&amp;lsquo;user.yml&amp;rsquo;) as f: data = yaml.safe_load(f) return data[&amp;lsquo;users&amp;rsquo;]&lt;/p>
&lt;p>然后在测试用例中用：&lt;/p>
&lt;p>@pytest.mark.parametrize(&amp;ldquo;user&amp;rdquo;, [ (&amp;ldquo;valid_user&amp;rdquo;), (&amp;ldquo;invalid_password_user&amp;rdquo;), (&amp;ldquo;locked_user&amp;rdquo;), # &amp;hellip; 其他情况 ], indirect=True) def test_login(login_page, user): login_page.login(user[&amp;lsquo;username&amp;rsquo;], user[&amp;lsquo;password&amp;rsquo;]) # 断言等操作&lt;/p>
&lt;p>不过，如何将数据转换为参数可能需要更细致的处理，比如将各个用户数据提取成各个测试实例的参数。&lt;/p>
&lt;p>可能更好的方法是将不同的用户情况分别写成不同的测试数据项。例如，把不同用户类型数据的键列出来，然后根据这些键从数据中加载相应的参数。&lt;/p>
&lt;p>或者，在所有参数化时，导入所有用户数据作为参数。&lt;/p>
&lt;p>比如：&lt;/p>
&lt;p>import yaml import pytest&lt;/p>
&lt;p>with open(&amp;lsquo;user.yml&amp;rsquo;) as f: user_data = yaml.safe_load(f)[&amp;lsquo;users&amp;rsquo;]&lt;/p>
&lt;p>login_test_data = [ (user_data[&amp;lsquo;valid_user&amp;rsquo;], True, None), # 正常用户，登录成功，没有错误 (user_data[&amp;lsquo;invalid_password_user&amp;rsquo;], False, &amp;lsquo;Epic sadface: Username and password do not match&amp;rsquo;), (user_data[&amp;rsquo;locked_user&amp;rsquo;], False, &amp;lsquo;Epic sadface: Sorry, this user has been locked out.&amp;rsquo;), # &amp;hellip; 其他情况 ]&lt;/p>
&lt;p>@pytest.mark.parametrize(&amp;ldquo;user, success, error_msg&amp;rdquo;, login_test_data) def test_login_user(login_page, user, success, error_msg): login_page.navigate() login_page.login(user[&amp;lsquo;username&amp;rsquo;], user[&amp;lsquo;password&amp;rsquo;]) if success: assert login_page.current_url == &amp;lsquo;&lt;a class="link" href="https://www.saucedemo.com/inventory.html%27" target="_blank" rel="noopener"
>https://www.saucedemo.com/inventory.html'&lt;/a> else: assert login_page.get_error_message() == error_msg&lt;/p>
&lt;p>这时候，需要在user.yml里的每个用户数据中有一个error键，或者在参数化的准备阶段处理错误信息的映射。&lt;/p>
&lt;p>不过这样的参数方式可能更灵活，能够同时指定预期结果。&lt;/p>
&lt;p>对于YAML的结构，可能需要更详细的数据项，每个用户数据包含预期的错误消息。&lt;/p>
&lt;p>例如，user.yml部分内容：&lt;/p>
&lt;p>valid_user: username: standard_user password: secret_sauce expected: success: true error: null&lt;/p>
&lt;p>invalid_password_user: username: standard_user password: wrong expected: success: false error: &amp;ldquo;Epic sadface: Username and password do not match&amp;rdquo;&lt;/p>
&lt;p>locked_user: username: locked_out_user password: secret_sauce expected: success: false error: &amp;ldquo;Epic sadface: Sorry, this user has been locked out.&amp;rdquo;&lt;/p>
&lt;p>这样参数化时可以更具结构化。但在编写YAML时需要考虑每个用例的期望结果。&lt;/p>
&lt;p>这样，测试用例的参数可能会是直接从YAML中读取的结构，然后通过解析不同的用户组生成测试用例参数。&lt;/p>
&lt;p>不过，这可能有些复杂。另一个办法是，将每个测试案例定义为YAML中的一个项目，包含输入数据和预期结果。&lt;/p>
&lt;p>总之，这部分的处理可能需要更多设计。&lt;/p>
&lt;p>然后，关于Playwright的fixture设置，在conftest.py里可以使用pytest-playwright提供的fixture。例如，使用pytest-playwright插件中的page fixture。不过这可能需要安装pytest-playwright库，并调用playwright的安装步骤。&lt;/p>
&lt;p>安装依赖包括：&lt;/p>
&lt;p>pytest-playwright playwright pyyaml&lt;/p>
&lt;p>执行playwright install安装浏览器。&lt;/p>
&lt;p>然后，在conftest.py中，定义如何初始化各个page对象，并将它们作为fixture注入到测试用例中。&lt;/p>
&lt;p>例如：&lt;/p>
&lt;p>import pytest from playwright.sync_api import Page from pages.login_page import LoginPage from pages.inventory_page import InventoryPage&lt;/p>
&lt;h5 id="其他页面的导入">其他页面的导入
&lt;/h5>&lt;p>@pytest.fixture def login_page(page: Page): return LoginPage(page)&lt;/p>
&lt;p>@pytest.fixture def inventory_page(page: Page): return InventoryPage(page)&lt;/p>
&lt;p>等等。这样每个测试用例如果需要用到特定的页面对象，可以直接在参数中声明需要的fixture。&lt;/p>
&lt;p>例如，一个测试用例函数可能接收login_page和inventory_page作为参数。&lt;/p>
&lt;p>接下来，各个Page类的示例。&lt;/p>
&lt;p>LoginPage类是这样的：&lt;/p>
&lt;p>class LoginPage: def &lt;strong>init&lt;/strong>(self, page): self.page = page self.username_input = page.locator(&amp;quot;#user-name&amp;quot;) self.password_input = page.locator(&amp;quot;#password&amp;quot;) self.login_button = page.locator(&amp;quot;#login-button&amp;quot;) self.error_message = page.locator(&amp;quot;.error-message-container&amp;quot;)&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">def navigate(self):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> self.page.goto(&amp;#34;https://www.saucedemo.com&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">def login(self, username, password):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> self.username_input.fill(username)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> self.password_input.fill(password)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> self.login_button.click()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">def get_error_message(self):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return self.error_message.inner_text()
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>但实际情况需要根据saucedemo.com的实际HTML结构调整选择器。比如，错误信息的元素可能是div.error-message-container带有data-test=&amp;ldquo;error&amp;quot;的属性，其文本可能在某个子元素内。&lt;/p>
&lt;p>比如说，实际的网站中，错误信息的HTML可能是：&lt;/p>
&lt;div class="error-message-container" data-test="error"> &lt;h3>Epic sadface: Username and password do not match any user in this service&lt;/h3> &lt;button class="error-button" data-test="关闭错误信息">&lt;/button> &lt;/div>
&lt;p>那么，error_message的locator需要定位到h3元素的文本。或者，定位到整个容器，然后用inner_text()获取文本。&lt;/p>
&lt;p>或者，正确的选择器可能是：&lt;/p>
&lt;p>error_message = page.locator(&amp;rsquo;[data-test=&amp;ldquo;error&amp;rdquo;]&amp;rsquo;)&lt;/p>
&lt;p>但Playwright支持多种选择方式，比如用data-testid属性等，所以在编写时需要查证正确的元素定位方式。&lt;/p>
&lt;p>所以可能更好的方式是使用data-test属性来选择元素，例如登录页的数据测试属性：&lt;/p>
&lt;p>用户名输入：data-test=&amp;ldquo;username&amp;rdquo;&lt;/p>
&lt;p>密码输入：data-test=&amp;ldquo;password&amp;rdquo;&lt;/p>
&lt;p>登录按钮：data-test=&amp;ldquo;login-button&amp;rdquo;&lt;/p>
&lt;p>错误信息元素：data-test=&amp;ldquo;error&amp;rdquo;，所以其元素可以定位为：&lt;/p>
&lt;p>self.error_message = page.locator(&amp;rsquo;[data-test=&amp;ldquo;error&amp;rdquo;]&amp;rsquo;)&lt;/p>
&lt;p>然后其文本内容可以用error_message.inner_text()来获取，包含错误信息的关键部分。&lt;/p>
&lt;p>至于其他页面，比如库存页面，购物车页等：&lt;/p>
&lt;p>InventoryPage可能有添加商品到购物车的方法，跳转到购物车的方法，或许购物车数量的显示。例如：&lt;/p>
&lt;p>class InventoryPage: def &lt;strong>init&lt;/strong>(self, page: Page): self.page = page&lt;/p>
&lt;p>def add_product_to_cart(self, product_name):
# 这里假设商品名称对应的添加按钮如何定位，假设data-test属性中有对应的add-to-cart按钮，例如 data-test=&amp;ldquo;add-to-cart-sauce-labs-backpack&amp;rdquo;
product_id = product_name.lower().replace(&amp;rsquo; &amp;lsquo;, &amp;lsquo;-&amp;rsquo;)
self.page.locator(f&amp;rsquo;[data-test=&amp;ldquo;add-to-cart-{product_id}&amp;rdquo;]&amp;rsquo;).click()&lt;/p>
&lt;p>def get_cart_count(self):
return self.page.locator(&amp;rsquo;.shopping_cart_badge&amp;rsquo;).inner_text()&lt;/p>
&lt;p>def go_to_cart(self):
self.page.locator(&amp;rsquo;.shopping_cart_link&amp;rsquo;).click()
return CartPage(self.page)&lt;/p>
&lt;p>CartPage类，可能有checkout按钮：&lt;/p>
&lt;p>class CartPage: def &lt;strong>init&lt;/strong>(self, page: Page): self.page = page&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">def checkout(self):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> self.page.locator(&amp;#39;[data-test=&amp;#34;checkout&amp;#34;]&amp;#39;).click()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return CheckoutPage(self.page)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>CheckoutPage类：&lt;/p>
&lt;p>class CheckoutPage: def &lt;strong>init&lt;/strong>(self, page: Page): self.page = page self.first_name_input = page.locator(&amp;rsquo;[data-test=&amp;ldquo;firstName&amp;rdquo;]&amp;rsquo;) self.last_name_input = page.locator(&amp;rsquo;[data-test=&amp;ldquo;lastName&amp;rdquo;]&amp;rsquo;) self.postal_code_input = page.locator(&amp;rsquo;[data-test=&amp;ldquo;postalCode&amp;rdquo;]&amp;rsquo;) self.continue_button = page.locator(&amp;rsquo;[data-test=&amp;ldquo;continue&amp;rdquo;]&amp;rsquo;) self.error_message = page.locator(&amp;rsquo;[data-test=&amp;ldquo;error&amp;rdquo;]&amp;rsquo;)&lt;/p>
&lt;p>def fill_shipping_info(self, first_name, last_name, postal_code):
self.first_name_input.fill(first_name)
self.last_name_input.fill(last_name)
self.postal_code_input.fill(postal_code)&lt;/p>
&lt;p>def continue_to_overview(self):
self.continue_button.click()&lt;/p>
&lt;p>def get_error_message(self):
return self.error_message.inner_text().strip()&lt;/p>
&lt;p>然后，在完成信息填写后的页面，可能有finish按钮，在CheckoutOverviewPage类中：&lt;/p>
&lt;p>class CheckoutOverviewPage: def &lt;strong>init&lt;/strong>(self, page: Page): self.page = page self.finish_button = page.locator(&amp;rsquo;[data-test=&amp;ldquo;finish&amp;rdquo;]&amp;rsquo;) self.confirmation_message = page.locator(&amp;rsquo;.complete-header&amp;rsquo;)&lt;/p>
&lt;p>def finish_checkout(self):
self.finish_button.click()&lt;/p>
&lt;p>def get_confirmation_message(self):
return self.confirmation_message.inner_text()&lt;/p>
&lt;p>当然，这些需要根据实际页面的结构进行调整，比如确认信息的元素是否正确。&lt;/p>
&lt;p>这样，整体测试流程就可以通过各个页面的方法来串联。&lt;/p>
&lt;p>现在编写测试用例的步骤：&lt;/p>
&lt;p>测试登录流程：&lt;/p>
&lt;p>参数化不同的用户数据，判断登录是否成功，或者是否出现正确的错误提示。&lt;/p>
&lt;p>例如：&lt;/p>
&lt;p>在test_login.py中：&lt;/p>
&lt;p>import pytest from playwright.sync_api import Page&lt;/p>
&lt;p>@pytest.mark.parametrize(&amp;ldquo;user_key, expected_success, expected_error&amp;rdquo;, [ (&amp;ldquo;valid_user&amp;rdquo;, True, None), (&amp;ldquo;invalid_password_user&amp;rdquo;, False, &amp;ldquo;Epic sadface: Username and password do not match&amp;rdquo;), (&amp;ldquo;locked_user&amp;rdquo;, False, &amp;ldquo;Epic sadface: Sorry, this user has been locked out.&amp;rdquo;), (&amp;ldquo;missing_username&amp;rdquo;, False, &amp;ldquo;Epic sadface: Username is required&amp;rdquo;), (&amp;ldquo;missing_password&amp;rdquo;, False, &amp;ldquo;Epic sadface: Password is required&amp;rdquo;), ]) def test_login(login_page, user_key, expected_success, expected_error): # 从YAML加载用户数据，这里假设有一个fixture可以加载全部的测试用户数据 users = load_users() user = users[user_key] login_page.navigate() login_page.login(user[&amp;lsquo;username&amp;rsquo;], user[&amp;lsquo;password&amp;rsquo;])&lt;/p>
&lt;p>if expected_success:
assert login_page.page.url == &amp;ldquo;&lt;a class="link" href="https://www.saucedemo.com/inventory.html%22" target="_blank" rel="noopener"
>https://www.saucedemo.com/inventory.html"&lt;/a>
else:
assert login_page.get_error_message() == expected_error&lt;/p>
&lt;p>需要写出load_users函数，或者使用fixture来传递给测试用例。&lt;/p>
&lt;p>这里的load_users可能是在conftest.py中的一个fixture：&lt;/p>
&lt;p>import pytest import yaml&lt;/p>
&lt;p>@pytest.fixture def users(): with open(&amp;lsquo;user.yml&amp;rsquo;) as f: data = yaml.safe_load(f) return data[&amp;lsquo;users&amp;rsquo;]&lt;/p>
&lt;p>然后测试用例可以接收users作为一个fixture：&lt;/p>
&lt;p>def test_login(login_page, users, user_key, expected_success, &amp;hellip;): user = users[user_key] &amp;hellip;&lt;/p>
&lt;p>但这种参数化可能需要结合indirect参数的使用，或者在参数化时动态获取用户数据。&lt;/p>
&lt;p>或者，将参数化的数据和用户密钥对应起来，通过字典获取正确的用户数据。&lt;/p>
&lt;p>这可能需要对pytest的参数化更深入的处理，例如使用间接参数化，将用户键作为参数，然后在测试函数内部获取相应用户的数据。&lt;/p>
&lt;p>或者，这种参数传递方式可能不太直接，可能需要重新设计参数化的结构。&lt;/p>
&lt;p>可能最好的方式在参数化的列表中直接指定用户数据的键，然后在测试用例中使用该键来索引users fixture中的对应数据。&lt;/p>
&lt;p>例如：&lt;/p>
&lt;p>@pytest.mark.parametrize(&amp;ldquo;user_key, expected_success, expected_error&amp;rdquo;, [ (&amp;ldquo;valid_user&amp;rdquo;, True, None), (&amp;ldquo;invalid_password_user&amp;rdquo;, False, &amp;ldquo;Epic sadface: Username and password do not match&amp;rdquo;), (&amp;ldquo;locked_user&amp;rdquo;, False, &amp;ldquo;Epic sadface: Sorry, this user has been locked out.&amp;rdquo;), (&amp;ldquo;missing_username&amp;rdquo;, False, &amp;ldquo;Epic sadface: Username is required&amp;rdquo;), (&amp;ldquo;missing_password&amp;rdquo;, False, &amp;ldquo;Epic sadface: Password is required&amp;rdquo;), ]) def test_login(login_page, users, user_key, expected_success, expected_error): user = users[user_key] login_page.navigate() login_page.login(user[&amp;lsquo;username&amp;rsquo;], user[&amp;lsquo;password&amp;rsquo;]) if expected_success: assert login_page.page.url == &amp;ldquo;&lt;a class="link" href="https://www.saucedemo.com/inventory.html%22" target="_blank" rel="noopener"
>https://www.saucedemo.com/inventory.html"&lt;/a> else: assert login_page.get_error_message() == expected_error&lt;/p>
&lt;p>需要确保user.yml中存在相应的键，且各用户的数据正确。&lt;/p>
&lt;p>对于checkout流程的正常测试：&lt;/p>
&lt;p>在test_checkout.py中：&lt;/p>
&lt;p>def test_successful_checkout(login_page, inventory_page, users): valid_user = users[&amp;lsquo;valid_user&amp;rsquo;] login_page.login(valid_user[&amp;lsquo;username&amp;rsquo;], valid_user[&amp;lsquo;password&amp;rsquo;]) inventory_page.add_product_to_cart(&amp;ldquo;Sauce Labs Backpack&amp;rdquo;) cart_page = inventory_page.go_to_cart() checkout_page = cart_page.checkout() checkout_page.fill_shipping_info(&amp;ldquo;John&amp;rdquo;, &amp;ldquo;Doe&amp;rdquo;, &amp;ldquo;12345&amp;rdquo;) checkout_page.continue_to_overview() overview_page = CheckoutOverviewPage(checkout_page.page) overview_page.finish_checkout() assert overview_page.get_confirmation_message() == &amp;ldquo;Thank you for your order!&amp;rdquo;&lt;/p>
&lt;p>这需要定义CheckoutOverviewPage类的相应元素和方法。&lt;/p>
&lt;p>对于异常测试：&lt;/p>
&lt;p>比如，填写信息时省略必填字段：&lt;/p>
&lt;p>@pytest.mark.parametrize(&amp;ldquo;first_name, last_name, zip_code, expected_error&amp;rdquo;, [ (&amp;rdquo;&amp;rdquo;, &amp;ldquo;Doe&amp;rdquo;, &amp;ldquo;12345&amp;rdquo;, &amp;ldquo;Error: First Name is required&amp;rdquo;), (&amp;ldquo;John&amp;rdquo;, &amp;ldquo;&amp;rdquo;, &amp;ldquo;12345&amp;rdquo;, &amp;ldquo;Error: Last Name is required&amp;rdquo;), (&amp;ldquo;John&amp;rdquo;, &amp;ldquo;Doe&amp;rdquo;, &amp;ldquo;&amp;rdquo;, &amp;ldquo;Error: Postal Code is required&amp;rdquo;), ]) def test_checkout_error_messages(login_page, inventory_page, users, first_name, last_name, zip_code, expected_error): valid_user = users[&amp;lsquo;valid_user&amp;rsquo;] login_page.login(valid_user[&amp;lsquo;username&amp;rsquo;], valid_user[&amp;lsquo;password&amp;rsquo;]) inventory_page.add_product_to_cart(&amp;ldquo;Sauce Labs Backpack&amp;rdquo;) cart_page = inventory_page.go_to_cart() checkout_page = cart_page.checkout() checkout_page.fill_shipping_info(first_name, last_name, zip_code) checkout_page.continue_to_overview() assert checkout_page.get_error_message() == expected_error&lt;/p>
&lt;p>这里，需要确定实际的错误提示是否是类似这样的文本。比如，在reqreal的网站上，不填first name并继续时，错误提示是否真的是“Error: First Name is required”。需要查看实际页面的情况，可能错误信息是否包含在data-test=&amp;ldquo;error&amp;quot;元素中，或者是否是其他结构。&lt;/p>
&lt;p>综上所述，整个项目需要：&lt;/p>
&lt;ul>
&lt;li>正确配置POM的各个页面类。&lt;/li>
&lt;li>正确读取用户数据并参数化测试用例。&lt;/li>
&lt;li>处理不同测试场景的流程，尤其是Test checkout的流程可能需要连续的页面导航和状态维护。&lt;/li>
&lt;li>对异常情况进行断言，如错误消息的正确性。&lt;/li>
&lt;/ul>
&lt;p>可能还需要对页面元素的同步进行确认，尽管Playwright自动等待，但例如，点击按钮后的跳转是否完成可能会需要确认页面的某些元素，这样更稳定。&lt;/p>
&lt;p>对于一些异步动作，比如点击按钮后元素变化，可以不用等待，因为Playwright内部已经处理了。&lt;/p>
&lt;p>总的来说，这样的设计应该能够覆盖所需的自动化测试需求。接下来，我需要根据这些思路编写具体的代码文件，并验证是否正确工作。&lt;/p>
&lt;h3 id="具体实现">具体实现
&lt;/h3>&lt;p>为了基于pytest和Playwright完成针对saucedemo.com的自动化测试登录和checkout流程，并遵循POM模式，以下是详细的实现方案：&lt;/p>
&lt;h3 id="项目结构">项目结构
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plaintext" data-lang="plaintext">&lt;span class="line">&lt;span class="cl">project-root/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── tests/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── pages/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── login_page.py
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── inventory_page.py
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── cart_page.py
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── checkout_page.py
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ └── checkout_overview_page.py
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── test_login.py
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ └── test_checkout.py
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── conftest.py
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── user.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└── pytest.ini
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="依赖安装">依赖安装
&lt;/h3>&lt;ol>
&lt;li>安装所需库：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">pip install pytest playwright pyyaml pytest-playwright
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">playwright install
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="文件实现">文件实现
&lt;/h3>&lt;h4 id="useryml">user.yml
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">users&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">valid_user&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">username&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">standard_user&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">password&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">secret_sauce&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">invalid_password_user&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">username&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">standard_user&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">password&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">wrong_pass&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">locked_user&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">username&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">locked_out_user&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">password&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">secret_sauce&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">missing_username&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">username&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">password&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">secret_sauce&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">missing_password&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">username&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">standard_user&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">password&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="pageslogin_pagepy">pages/login_page.py
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">LoginPage&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="fm">__init__&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">page&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">page&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">page&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">username_input&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">locator&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;[data-test=&amp;#34;username&amp;#34;]&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">password_input&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">locator&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;[data-test=&amp;#34;password&amp;#34;]&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">login_button&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">locator&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;[data-test=&amp;#34;login-button&amp;#34;]&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">error_message&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">locator&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;[data-test=&amp;#34;error&amp;#34;]&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">navigate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;导航到登录页&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">goto&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;https://www.saucedemo.com&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">login&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">username&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">password&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;填充并提交登录表单&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">username_input&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fill&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">username&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">password_input&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fill&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">password&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">login_button&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">click&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">get_error_message&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;获取错误提示文本&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">error_message&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">inner_text&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="pagesinventory_pagepy">pages/inventory_page.py
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">InventoryPage&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="fm">__init__&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">page&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">page&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">page&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">add_product_to_cart&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">product_name&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;将指定商品添加到购物车&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">product_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">product_name&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lower&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39; &amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;-&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">locator&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">f&lt;/span>&lt;span class="s1">&amp;#39;[data-test=&amp;#34;add-to-cart-&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">product_id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s1">&amp;#34;]&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">click&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">go_to_cart&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;进入购物车页面&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">locator&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;.shopping_cart_link&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">click&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">CartPage&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">page&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="pagescart_pagepy">pages/cart_page.py
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">CartPage&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="fm">__init__&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">page&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">page&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">page&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">checkout&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;进入结算页面&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">locator&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;[data-test=&amp;#34;checkout&amp;#34;]&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">click&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">CheckoutPage&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">page&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="pagescheckout_pagepy">pages/checkout_page.py
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">CheckoutPage&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="fm">__init__&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">page&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">page&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">page&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">first_name_input&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">locator&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;[data-test=&amp;#34;firstName&amp;#34;]&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">last_name_input&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">locator&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;[data-test=&amp;#34;lastName&amp;#34;]&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">postal_code_input&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">locator&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;[data-test=&amp;#34;postalCode&amp;#34;]&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">continue_button&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">locator&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;[data-test=&amp;#34;continue&amp;#34;]&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">error_message&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">locator&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;[data-test=&amp;#34;error&amp;#34;]&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">fill_shipping_info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">first_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">last_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">postal_code&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;填写配送信息&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">first_name_input&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fill&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">first_name&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">last_name_input&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fill&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">last_name&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">postal_code_input&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fill&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">postal_code&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">continue_to_overview&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;提交并进入订单概览&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">continue_button&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">click&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">get_error_message&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;获取错误提示文本&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">error_message&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">inner_text&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="pagescheckout_overview_pagepy">pages/checkout_overview_page.py
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">CheckoutOverviewPage&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="fm">__init__&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">page&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">page&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">page&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">finish_button&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">locator&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;[data-test=&amp;#34;finish&amp;#34;]&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">confirmation_message&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">locator&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;.complete-header&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">finish_checkout&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;完成订单&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">finish_button&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">click&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">get_confirmation_message&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;获取订单完成确认信息&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">confirmation_message&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">inner_text&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="conftestpy">conftest.py
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">pytest&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">playwright.sync_api&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">Page&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">tests.pages.login_page&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">LoginPage&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">tests.pages.inventory_page&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">InventoryPage&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">tests.pages.cart_page&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">CartPage&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">tests.pages.checkout_page&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">CheckoutPage&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@pytest.fixture&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">scope&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;session&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">users&lt;/span>&lt;span class="p">():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">with&lt;/span> &lt;span class="nb">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;user.yml&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;r&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">yaml&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">safe_load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">f&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;users&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@pytest.fixture&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">login_page&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">page&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Page&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">login_page&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">LoginPage&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">page&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">login_page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">navigate&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">login_page&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@pytest.fixture&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">inventory_page&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">login_page&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">LoginPage&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">users&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">login_page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">login&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;valid_user&amp;#39;&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="s1">&amp;#39;username&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">users&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;valid_user&amp;#39;&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="s1">&amp;#39;password&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">InventoryPage&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">login_page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">page&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@pytest.fixture&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">cart_page&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">inventory_page&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">InventoryPage&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">inventory_page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">go_to_cart&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@pytest.fixture&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">checkout_page&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cart_page&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">CartPage&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">cart_page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">checkout&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="test_loginpy">test_login.py
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">pytest&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@pytest.mark.parametrize&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;user_key, expected_success, expected_error&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;valid_user&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">True&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">None&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;invalid_password_user&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">False&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Epic sadface: Username and password do not match&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;locked_user&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">False&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Epic sadface: Sorry, this user has been locked out.&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;missing_username&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">False&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Epic sadface: Username is required&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;missing_password&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">False&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Epic sadface: Password is required&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">test_login&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">login_page&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">users&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">user_key&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">expected_success&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">expected_error&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">user&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">users&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">user_key&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">login_page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">login&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">user&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;username&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">user&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;password&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">expected_success&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">assert&lt;/span> &lt;span class="n">login_page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">url&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;https://www.saucedemo.com/inventory.html&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">assert&lt;/span> &lt;span class="n">login_page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get_error_message&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">expected_error&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="test_checkoutpy">test_checkout.py
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">pytest&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">test_successful_checkout&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">inventory_page&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">checkout_page&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">inventory_page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add_product_to_cart&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;sauce-labs-backpack&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">checkout_page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fill_shipping_info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;John&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Doe&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;12345&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">checkout_page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">continue_to_overview&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">overview_page&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">CheckoutOverviewPage&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">checkout_page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">page&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">overview_page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">finish_checkout&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">assert&lt;/span> &lt;span class="n">overview_page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get_confirmation_message&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;Thank you for your order!&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@pytest.mark.parametrize&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;first_name, last_name, postal_code, expected_error&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Doe&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;12345&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Error: First Name is required&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;John&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;12345&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Error: Last Name is required&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;John&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Doe&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Error: Postal Code is required&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">test_checkout_errors&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">checkout_page&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">first_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">last_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">postal_code&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">expected_error&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">checkout_page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fill_shipping_info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">first_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">last_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">postal_code&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">checkout_page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">continue_to_overview&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">assert&lt;/span> &lt;span class="n">checkout_page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get_error_message&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">expected_error&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="知识点和解释">知识点和解释
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>&lt;strong>POM设计模式&lt;/strong>:&lt;/p>
&lt;ul>
&lt;li>每个页面（如登录页、商品页）被封装为一个类，页面元素和操作抽象为方法，从而提高代码复用性和可维护性。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>数据驱动测试&lt;/strong>:&lt;/p>
&lt;ul>
&lt;li>用户数据与测试代码分离，存储在YAML文件中，提升了可维护性，方便添加新的测试场景。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>异常场景覆盖&lt;/strong>:&lt;/p>
&lt;ul>
&lt;li>通过参数化测试验证不同错误输入（如锁定用户、错误密码、缺失必填字段）是否会触发正确的错误提示。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Fixture管理&lt;/strong>:&lt;/p>
&lt;ul>
&lt;li>利用pytest的fixture管理浏览器和页面对象，确保每个测试用例的独立性，减少重复代码。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Playwright自动等待机制&lt;/strong>:&lt;/p>
&lt;ul>
&lt;li>Playwright内置的自动等待确保在操作元素前其已处于可交互状态，增强了测试的稳定性。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;p>此方案覆盖了正常和异常的业务流程，确保核心功能点（登录、购物车、结算）的自动化验证，提高了软件质量。&lt;/p>
&lt;h3 id="结论">结论
&lt;/h3>&lt;p>参照给出的结果，基本不用做什么微调就可以执行成功，确实极大提升了我们进行自动化实现的效率。最难能可贵的是，deepseek给出的思考过程，对于我们代码实现和用例设计的要点也有极大的参考价值！&lt;/p></description></item><item><title>手机应用和电脑端应用测试的不同</title><link>https://chengxiaqiucao.github.io/post/049-%E6%89%8B%E6%9C%BA%E5%BA%94%E7%94%A8%E5%92%8C%E7%94%B5%E8%84%91%E7%AB%AF%E5%BA%94%E7%94%A8%E6%B5%8B%E8%AF%95%E7%9A%84%E4%B8%8D%E5%90%8C/</link><pubDate>Fri, 13 Dec 2024 13:37:35 +0800</pubDate><guid>https://chengxiaqiucao.github.io/post/049-%E6%89%8B%E6%9C%BA%E5%BA%94%E7%94%A8%E5%92%8C%E7%94%B5%E8%84%91%E7%AB%AF%E5%BA%94%E7%94%A8%E6%B5%8B%E8%AF%95%E7%9A%84%E4%B8%8D%E5%90%8C/</guid><description>&lt;img src="https://chengxiaqiucao.github.io/post/049-%E6%89%8B%E6%9C%BA%E5%BA%94%E7%94%A8%E5%92%8C%E7%94%B5%E8%84%91%E7%AB%AF%E5%BA%94%E7%94%A8%E6%B5%8B%E8%AF%95%E7%9A%84%E4%B8%8D%E5%90%8C/Pasted-20241213.png" alt="Featured image of post 手机应用和电脑端应用测试的不同" />&lt;p>这二者不同的地方还是挺多的。主要还是从测试对象的特点出发来看&lt;/p>
&lt;h2 id="设备处理性能上的区别">设备处理性能上的区别
&lt;/h2>&lt;p>虽然现在手机处理器、内存等硬件性能上已经有了非常大的提升，但一些低端手机和电脑端相比，处理性能上的差距还是比较明显的。因此在测试时，针对手机端的软件，加载效率、卡顿等就需要重点关注&lt;/p>
&lt;h2 id="屏幕分辨率和系统版本碎片化">屏幕分辨率和系统版本碎片化
&lt;/h2>&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/049-%E6%89%8B%E6%9C%BA%E5%BA%94%E7%94%A8%E5%92%8C%E7%94%B5%E8%84%91%E7%AB%AF%E5%BA%94%E7%94%A8%E6%B5%8B%E8%AF%95%E7%9A%84%E4%B8%8D%E5%90%8C/Pasted-20241213-2.png"
width="476"
height="477"
srcset="https://chengxiaqiucao.github.io/post/049-%E6%89%8B%E6%9C%BA%E5%BA%94%E7%94%A8%E5%92%8C%E7%94%B5%E8%84%91%E7%AB%AF%E5%BA%94%E7%94%A8%E6%B5%8B%E8%AF%95%E7%9A%84%E4%B8%8D%E5%90%8C/Pasted-20241213-2_hu_c3b0a63a589a0543.png 480w, https://chengxiaqiucao.github.io/post/049-%E6%89%8B%E6%9C%BA%E5%BA%94%E7%94%A8%E5%92%8C%E7%94%B5%E8%84%91%E7%AB%AF%E5%BA%94%E7%94%A8%E6%B5%8B%E8%AF%95%E7%9A%84%E4%B8%8D%E5%90%8C/Pasted-20241213-2_hu_aa76a302ddfad7c9.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="99"
data-flex-basis="239px"
>&lt;/p>
&lt;p>手机因为便携，屏幕分辨率有限，再加上厂商、型号众多，所以碎片化情况非常突出。因此针对手机应用测试，考虑不同分辨率和厂商定制的影响，对应用呈现效果的验证也是和电脑端比较明显的不同。&lt;/p>
&lt;h2 id="交互方式差异">交互方式差异
&lt;/h2>&lt;p>电脑端主要的交互方式是键盘鼠标，手机端则主要是触屏、多点触控，拖拽等等。文字输入和页面精准触控比电脑端困难，所以针对应用的测试上，这些也是区别所在&lt;/p>
&lt;h2 id="使用场景差异">使用场景差异
&lt;/h2>&lt;p>手机端应用，使用场景和电脑端的区别，还有一些典型的特殊场景：&lt;/p>
&lt;h3 id="网络稳定性">网络稳定性
&lt;/h3>&lt;p>手机因为是移动设备，移动过程中，出现网络切换、网络不稳定的情况是大概率事件，所以应用对网络持续稳定的兼容性要求比电脑端要高得多&lt;/p>
&lt;h3 id="耗电量">耗电量
&lt;/h3>&lt;p>手机依靠电池供电，移动场景下对电量的使用应更为节制，所以应用本身对耗电控制的要求更高&lt;/p>
&lt;h3 id="网络流量">网络流量
&lt;/h3>&lt;p>虽然现在手机流量资费已经大幅下调，但流量依然在手机费用中占据极大比重，所以应用在网络交互中对数据包大小、频率等影响流量的控制也是手机App的特点。&lt;/p>
&lt;h3 id="应用安全">应用安全
&lt;/h3>&lt;p>虽然电脑端和手机端都存在应用安全问题，但手机作为随身携带且日常使用频率很好的设备，包括定位、通话、摄像等功能也都和个人隐私紧密相关，信息安全上的挑战更大，所以手机应用本身的安全要求和隐私防护上，一般也比电脑端要求更严格。&lt;/p>
&lt;h2 id="测试工具上的不同">测试工具上的不同
&lt;/h2>&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/049-%E6%89%8B%E6%9C%BA%E5%BA%94%E7%94%A8%E5%92%8C%E7%94%B5%E8%84%91%E7%AB%AF%E5%BA%94%E7%94%A8%E6%B5%8B%E8%AF%95%E7%9A%84%E4%B8%8D%E5%90%8C/Pasted-20241213-1.png"
width="544"
height="205"
srcset="https://chengxiaqiucao.github.io/post/049-%E6%89%8B%E6%9C%BA%E5%BA%94%E7%94%A8%E5%92%8C%E7%94%B5%E8%84%91%E7%AB%AF%E5%BA%94%E7%94%A8%E6%B5%8B%E8%AF%95%E7%9A%84%E4%B8%8D%E5%90%8C/Pasted-20241213-1_hu_63b86e9a574e2494.png 480w, https://chengxiaqiucao.github.io/post/049-%E6%89%8B%E6%9C%BA%E5%BA%94%E7%94%A8%E5%92%8C%E7%94%B5%E8%84%91%E7%AB%AF%E5%BA%94%E7%94%A8%E6%B5%8B%E8%AF%95%E7%9A%84%E4%B8%8D%E5%90%8C/Pasted-20241213-1_hu_dbad971bfe3e32ee.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="265"
data-flex-basis="636px"
>
手机端应用和电脑端应用，在操作系统、开发工具方面有明显差异，对应到测试工具上也有明显区别。&lt;/p>
&lt;p>以自动化工具为例，电脑端可能有selenium、robotframework、postman等，但对应到手机端，相应的工具则是以Appium、airtest这样的一些工具为代表。&lt;/p>
&lt;hr>
&lt;p>大致从以上这些方面来看，可以看到，区别还是非常明显的，不可一概而论。&lt;/p></description></item><item><title>安装部署测试怎么做</title><link>https://chengxiaqiucao.github.io/post/047-%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2%E6%B5%8B%E8%AF%95%E6%80%8E%E4%B9%88%E5%81%9A/</link><pubDate>Sat, 16 Nov 2024 16:28:04 +0800</pubDate><guid>https://chengxiaqiucao.github.io/post/047-%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2%E6%B5%8B%E8%AF%95%E6%80%8E%E4%B9%88%E5%81%9A/</guid><description>&lt;img src="https://chengxiaqiucao.github.io/post/047-%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2%E6%B5%8B%E8%AF%95%E6%80%8E%E4%B9%88%E5%81%9A/Pasted-20241116-3.png" alt="Featured image of post 安装部署测试怎么做" />&lt;p>知乎上看到的问题：&lt;/p>
&lt;blockquote>
&lt;p>各位专业的IT或是测试大牛能告诉我环境部署怎么做吗？每次我都是说根据测试文档安装相应软件，环境变量设置！准备相关材料！总觉得回答不够好！求解正确答案？&lt;/p>&lt;/blockquote>
&lt;p>作为一个专业的测试人员，这个回答不能说不好，而是基本等同于不会测试。&lt;/p>
&lt;p>这个问题虽然是直接问的如何做安装部署，但其实是问你对于安装部署需要怎么测试？ 不直接问是因为很多小白都意识不到安装部署其实是软件功能测试范围中极为重要的一块，比如题主。&lt;/p>
&lt;p>一个软件系统的安装，特别是直接交付给用户的系统，这部分可以说就是整个系统的门面，是使用这个软件的第一步，表现好坏直接影响用户对这个软件的评价。&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/047-%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2%E6%B5%8B%E8%AF%95%E6%80%8E%E4%B9%88%E5%81%9A/Pasted-20241116.png"
width="847"
height="312"
srcset="https://chengxiaqiucao.github.io/post/047-%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2%E6%B5%8B%E8%AF%95%E6%80%8E%E4%B9%88%E5%81%9A/Pasted-20241116_hu_8fc6846772fae3ae.png 480w, https://chengxiaqiucao.github.io/post/047-%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2%E6%B5%8B%E8%AF%95%E6%80%8E%E4%B9%88%E5%81%9A/Pasted-20241116_hu_17c2359e0c37dcba.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="271"
data-flex-basis="651px"
>&lt;/p>
&lt;p>那么软件的安装部署测试要做哪些测试方面的考虑呢？可以从以下几个方面来看：&lt;/p>
&lt;h2 id="全新安装全量安装">全新安装/全量安装
&lt;/h2>&lt;p>&lt;strong>全新安装，指一个软件首次部署或者是在不保留原先已安装信息的情况下重新部署。&lt;/strong>&lt;/p>
&lt;p>这部分其实是测试的主要部分，题主所说的安装文档其实也主要会针对这一部分说明。&lt;/p>
&lt;p>但测试时还是有很多需要注意的测试要点&lt;/p>
&lt;h3 id="1-安装的依赖">1. 安装的依赖
&lt;/h3>&lt;p>大部分的安装程序或脚本，它其实都是有一定的条件依赖的：&lt;/p>
&lt;ul>
&lt;li>需要的磁盘空间？&lt;/li>
&lt;li>网络的连接状态？&lt;/li>
&lt;li>CPU/内存有没有要求？&lt;/li>
&lt;li>操作系统的版本？&lt;/li>
&lt;li>系统用户的权限（是不是需要操作系统的管理员权限来安装？）&lt;/li>
&lt;li>&amp;hellip;.&lt;/li>
&lt;/ul>
&lt;p>而且这些依赖也不单纯只是安装程序本身的依赖，也包括安装完成后，软件系统要正常运行需要的依赖条件，这些在我们程序安装的时候，都应该由安装程序提前进行验证。所有这些都是测试时需要考虑和进行设计的。&lt;/p>
&lt;h3 id="2-安装程序脚本的功能验证">2. 安装程序/脚本的功能验证
&lt;/h3>&lt;p>不管是有安装程序还是通过执行脚本，这部分是安装部署的主体，也是安装部署文档中重点描述的部分，大部分面向用户的安装程序其实都是有界面的。&lt;/p>
&lt;p>那这里的验证其实和普通软件的功能测试没太大区别。&lt;/p>
&lt;ul>
&lt;li>界面中描述性信息、文字是否清晰&lt;/li>
&lt;li>一些操作的提示信息是否明确&lt;/li>
&lt;li>有用户交互部分，用户不同选择的分支验证&lt;/li>
&lt;li>不同的屏幕分辨率下的兼容性&lt;/li>
&lt;li>是否提供步骤回溯？误操作时能否返回上一步&amp;hellip;.&lt;/li>
&lt;/ul>
&lt;p>在设计这部分验证时，最好结合流程图，梳理出各种不同路径逐一确认。&lt;/p>
&lt;h3 id="3-安装异常处理">3. 安装异常处理
&lt;/h3>&lt;p>这个是考验测试人员经验的重要环节。&lt;/p>
&lt;ul>
&lt;li>磁盘空间不足？&lt;/li>
&lt;li>中途断网？&lt;/li>
&lt;li>本地服务端口冲突？&lt;/li>
&lt;li>中途断电？&amp;hellip;.&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/047-%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2%E6%B5%8B%E8%AF%95%E6%80%8E%E4%B9%88%E5%81%9A/Pasted-20241116-1.png"
width="1158"
height="622"
srcset="https://chengxiaqiucao.github.io/post/047-%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2%E6%B5%8B%E8%AF%95%E6%80%8E%E4%B9%88%E5%81%9A/Pasted-20241116-1_hu_2d64b2df316a6805.png 480w, https://chengxiaqiucao.github.io/post/047-%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2%E6%B5%8B%E8%AF%95%E6%80%8E%E4%B9%88%E5%81%9A/Pasted-20241116-1_hu_901d40c92bf0d7ce.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="186"
data-flex-basis="446px"
>&lt;/p>
&lt;h3 id="4-易用性">4. 易用性
&lt;/h3>&lt;p>关于安装程序的易用性，主要考虑安装过程中有没有对用户体验优化的一些考虑。&lt;/p>
&lt;ul>
&lt;li>比如安装选择一个已经存在的目录，是否有提示？&lt;/li>
&lt;li>文件的覆盖会不会有二次确认？&lt;/li>
&lt;li>安装过程中，有没有进度条显示安装进度?&lt;/li>
&lt;li>在比较大的文件拷贝时，界面有没有一些信息变化提示，避免用户怀疑程序卡死？&lt;/li>
&lt;li>检测到冲突，有没有给用户提供解决方案建议？&amp;hellip;..&lt;/li>
&lt;/ul>
&lt;p>这些其实都是属于易用性的范畴&lt;/p>
&lt;h3 id="5-安装校验">5. 安装校验
&lt;/h3>&lt;p>在执行安装测试时，我们还应该了解并确认安装前后系统有哪些变化，这些变化是否是符合设计要求。&lt;/p>
&lt;ul>
&lt;li>安装后安装目录下会包含哪些程序文件？&lt;/li>
&lt;li>操作系统的系统文件夹或非安装目录下有没有生成什么文件？&lt;/li>
&lt;li>注册表有无增加和修改？&lt;/li>
&lt;li>系统服务有没有增加和修改？&lt;/li>
&lt;li>开始菜单中有没有添加程序组？&lt;/li>
&lt;li>桌面上有没有创建快捷方式？&amp;hellip;..&lt;/li>
&lt;/ul>
&lt;p>掌握这些不仅是功能的检查，也是我们理解安装程序本身做了哪些事情，有没有测试场景的遗漏。&lt;/p>
&lt;h2 id="升级安装更新">升级安装/更新
&lt;/h2>&lt;p>除了全新安装外，另一个重要的场景是系统的升级，更新。也就是系统已经存在了一个版本，需要在原有基础上升级到当前安装包的版本。&lt;/p>
&lt;p>而升级又可以分为全量升级和增量升级&lt;/p>
&lt;h3 id="全量升级">全量升级
&lt;/h3>&lt;p>全量的升级会完整替换原先的程序文件，但一般会保留原有的配置和数据，安装包通常会包含当前版本的所有文件，安装包通常比较大&lt;/p>
&lt;h3 id="增量升级">增量升级
&lt;/h3>&lt;p>增量升级则是根据用户的当前版本，安装包只包含增量的一些程序文件，包括一些升级操作的脚本文件。这种安装包一般比较小，安装过程也通常更加快速。但安装包要和用户的当前版本严格匹配。一般会在全量安装包非常庞大，分发给用户效率不高的时候采用&lt;/p>
&lt;h3 id="版本跨度">版本跨度
&lt;/h3>&lt;p>不管是全量还是增量，验证时和全新安装的要点基本类似。但有一个升级验证特定的场景需要重点考虑，就是版本的跨度问题&lt;/p>
&lt;p>如果软件迭代，版本变更次数非常多，那么从历史古早版本升级到新版本往往会带来很多问题，包括配置、数据结构的变化造成的影响，以及升级策略的选择，是一次到位还是逐个中间版本升级？对测试策略可能都有影响。&lt;/p>
&lt;h3 id="数据转换">数据转换
&lt;/h3>&lt;p>对于牵涉到数据库，数据结构变化的版本升级，业务数据可能会需要进行很多数据转换的操作，这里也是Bug的高发地带，需要结合升级后的业务测试重点关注。&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/047-%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2%E6%B5%8B%E8%AF%95%E6%80%8E%E4%B9%88%E5%81%9A/Pasted-20241116-2.png"
width="553"
height="335"
srcset="https://chengxiaqiucao.github.io/post/047-%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2%E6%B5%8B%E8%AF%95%E6%80%8E%E4%B9%88%E5%81%9A/Pasted-20241116-2_hu_f9e6d1d117bfa0ee.png 480w, https://chengxiaqiucao.github.io/post/047-%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2%E6%B5%8B%E8%AF%95%E6%80%8E%E4%B9%88%E5%81%9A/Pasted-20241116-2_hu_86256f77b398ed1b.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="165"
data-flex-basis="396px"
>&lt;/p>
&lt;h2 id="回退">回退
&lt;/h2>&lt;p>回退通常属于安装出现问题时，是否可以恢复原先状态，以不影响原来的业务。&lt;/p>
&lt;p>这里主要从几个方面考虑：&lt;/p>
&lt;h3 id="正常取消安装部署">正常取消安装/部署
&lt;/h3>&lt;p>用户主动发起，属于正常回退，这时安装程序应该要能够清理掉已完成的安装文件，恢复原有的系统配置，将状态重置到安装前的状态&lt;/p>
&lt;h3 id="异常回退">异常回退
&lt;/h3>&lt;p>除了用户主动发起的正常回退外，如果安装过程中出现了一些未知的异常导致安装无法继续，这时需要提示用户安装失败，同时也应该触发回退流程，将系统恢复到安装前。&lt;/p>
&lt;p>这种属于我们安装程序本身的异常捕捉和处理的一部分。&lt;/p>
&lt;p>而即便不是安装程序本身捕捉的异常，比如安装过程中拔电源强制中断这样，我们的软件也应该提供一些清理脚本来将部署状态恢复到安装前。 这也是安装测试的重要场景之一。&lt;/p>
&lt;h3 id="回退有效性">回退有效性
&lt;/h3>&lt;p>除了回退的触发，就是我们还要对回退的效果进行确认。是否确实正确完成了清理和状态恢复。&lt;/p>
&lt;p>另外，在回退执行过程中，如果出现异常（和因为异常触发回退不同），是否有对应的解决方案？比如提供清理工具&lt;/p>
&lt;h2 id="卸载">卸载
&lt;/h2>&lt;p>当然，有安装就有卸载。除了安装程序的验证，我们还要验证卸载程序或脚本。类似安装程序的功能验证&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/047-%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2%E6%B5%8B%E8%AF%95%E6%80%8E%E4%B9%88%E5%81%9A/Pasted-20241116-3.png"
width="1228"
height="812"
srcset="https://chengxiaqiucao.github.io/post/047-%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2%E6%B5%8B%E8%AF%95%E6%80%8E%E4%B9%88%E5%81%9A/Pasted-20241116-3_hu_630e6d0df0367ecb.png 480w, https://chengxiaqiucao.github.io/post/047-%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2%E6%B5%8B%E8%AF%95%E6%80%8E%E4%B9%88%E5%81%9A/Pasted-20241116-3_hu_94d130970a192fc9.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="151"
data-flex-basis="362px"
>&lt;/p>
&lt;h3 id="卸载入口">卸载入口
&lt;/h3>&lt;p>除了直接执行卸载程序，还有通过操作系统的卸载入口进行卸载，都是应该考虑的场景&lt;/p>
&lt;h3 id="卸载遗留">卸载遗留
&lt;/h3>&lt;p>软件卸载以后，有哪些文件、配置会遗留在操作系统中，是否符合设计要求？&lt;/p>
&lt;h3 id="破坏性卸载">破坏性卸载
&lt;/h3>&lt;p>制造一些特殊场景，比如一些关键文件物理删除，关键的配置被变更，确认卸载还是否能正常进行？&lt;/p>
&lt;h3 id="卸载中的异常">卸载中的异常
&lt;/h3>&lt;p>同样也要考虑卸载中的各种异常场景&lt;/p>
&lt;ul>
&lt;li>文件正在使用？&lt;/li>
&lt;li>断网？&lt;/li>
&lt;li>断电？&amp;hellip;&lt;/li>
&lt;/ul>
&lt;p>异常出现时，有没有对应的手段可以善后&lt;/p>
&lt;hr>
&lt;p>很多时候，看上去简单的问题，深究的话门道可并不小。 测试是一门关于探索和发现未知的艺术，自有奥妙​。&lt;/p></description></item><item><title>WebDriver将退出历史？BIDI登场</title><link>https://chengxiaqiucao.github.io/post/026-%E5%A4%A7%E8%AF%9Dchrom%E5%BC%80%E5%8F%91%E8%80%85%E5%8D%8F%E8%AE%AEcdp/</link><pubDate>Thu, 03 Oct 2024 00:00:00 +0000</pubDate><guid>https://chengxiaqiucao.github.io/post/026-%E5%A4%A7%E8%AF%9Dchrom%E5%BC%80%E5%8F%91%E8%80%85%E5%8D%8F%E8%AE%AEcdp/</guid><description>&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/026-%E5%A4%A7%E8%AF%9Dchrom%E5%BC%80%E5%8F%91%E8%80%85%E5%8D%8F%E8%AE%AEcdp/BiDi.png"
width="1039"
height="325"
srcset="https://chengxiaqiucao.github.io/post/026-%E5%A4%A7%E8%AF%9Dchrom%E5%BC%80%E5%8F%91%E8%80%85%E5%8D%8F%E8%AE%AEcdp/BiDi_hu_34ef2d91df9bc5c2.png 480w, https://chengxiaqiucao.github.io/post/026-%E5%A4%A7%E8%AF%9Dchrom%E5%BC%80%E5%8F%91%E8%80%85%E5%8D%8F%E8%AE%AEcdp/BiDi_hu_190c71a116613266.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="319"
data-flex-basis="767px"
>&lt;/p>
&lt;h2 id="前言">前言
&lt;/h2>&lt;p>web自动化测试领域，最核心的其实是浏览器的驱动方法。现在最流行的是已经被W3C标准化的webDriver，而占据浏览器垄断地位的Chrome其实也有自己的一个标准协议，也就是CDP（chrome devTools protocol），它可以提供更比WebDriver更底层的对浏览器的控制。google 自己的自动化测试工具 puppeteer 其实就是基于 CDP 进行的自动化实现。&lt;/p>
&lt;h2 id="webdriver的发展历程">WebDriver的发展历程
&lt;/h2>&lt;p>跟随 Selenium 发展起来的 webDriver 协议是目前 Web 自动化测试领域的事实标准。而这一历程也是逐步发展而来的。&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/026-%E5%A4%A7%E8%AF%9Dchrom%E5%BC%80%E5%8F%91%E8%80%85%E5%8D%8F%E8%AE%AEcdp/Pasted-20241003.png"
width="1200"
height="353"
srcset="https://chengxiaqiucao.github.io/post/026-%E5%A4%A7%E8%AF%9Dchrom%E5%BC%80%E5%8F%91%E8%80%85%E5%8D%8F%E8%AE%AEcdp/Pasted-20241003_hu_3684508c9e245657.png 480w, https://chengxiaqiucao.github.io/post/026-%E5%A4%A7%E8%AF%9Dchrom%E5%BC%80%E5%8F%91%E8%80%85%E5%8D%8F%E8%AE%AEcdp/Pasted-20241003_hu_fba1de2c28e3762e.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="339"
data-flex-basis="815px"
>&lt;/p>
&lt;ul>
&lt;li>2004 Selenium 诞生&lt;/li>
&lt;li>2006 WebDriver 作为一款工具诞生&lt;/li>
&lt;li>2009 google自动化测试大会，Seleium 和 WebDriver 合并为一个项目，发布Selenium 2.0&lt;/li>
&lt;li>2016 Selenium3 发布，彻底抛弃1.0中的Selenium RC&lt;/li>
&lt;li>2018 W3C标准组织吸纳了WebDriver为标准协议&lt;/li>
&lt;li>2021 Selnium 4.0发布，取消了WebDriver原先的Json Wire协议，全面采用W3C webDriver&lt;/li>
&lt;/ul>
&lt;h2 id="javascript和nodejs壮大-自动化测试百花齐放">JavaScript和Node.js壮大， 自动化测试百花齐放
&lt;/h2>&lt;p>而随着 Web 页面的前端开发越来越依赖 JavaScript，一批新的自动化测试工作也逐渐推出，包括WebdriverIO、Appium、Nightwatch、Protractor（已废弃）、Testcafe、Cypress、Puppeteer 和 Playwright 等新的自动化解决方案应运而生。&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/026-%E5%A4%A7%E8%AF%9Dchrom%E5%BC%80%E5%8F%91%E8%80%85%E5%8D%8F%E8%AE%AEcdp/Pasted-20241003-1.png"
width="1200"
height="370"
srcset="https://chengxiaqiucao.github.io/post/026-%E5%A4%A7%E8%AF%9Dchrom%E5%BC%80%E5%8F%91%E8%80%85%E5%8D%8F%E8%AE%AEcdp/Pasted-20241003-1_hu_40718d6e3355324.png 480w, https://chengxiaqiucao.github.io/post/026-%E5%A4%A7%E8%AF%9Dchrom%E5%BC%80%E5%8F%91%E8%80%85%E5%8D%8F%E8%AE%AEcdp/Pasted-20241003-1_hu_19a0763a5a01d543.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="324"
data-flex-basis="778px"
>&lt;/p>
&lt;h2 id="自动化工具的两大流派">自动化工具的两大流派
&lt;/h2>&lt;p>以上这些自动化工具，根据它们运行的层级，可以分为下面两大流派&lt;/p>
&lt;ul>
&lt;li>&lt;strong>上层控制&lt;/strong>：&lt;strong>在浏览器中&lt;/strong>执行 JavaScript 的工具。例如，&lt;a class="link" href="https://bit.ly/cypress-architecture" target="_blank" rel="noopener"
>Cypress&lt;/a> 和 &lt;a class="link" href="https://bit.ly/testcafe-architecture" target="_blank" rel="noopener"
>TestCafe&lt;/a> 利用 Web API 和 Node.js 来直接在浏览器中运行测试。&lt;/li>
&lt;li>&lt;strong>底层控制&lt;/strong>：通过在&lt;strong>浏览器之外&lt;/strong>执行远程命令的工具。当工具需要更强的控制力时（例如打开多个标签页或模拟设备模式），此时它们需要执行远程命令，以通过协议控制浏览器。 两种主要的自动化协议为 &lt;strong>WebDriver（W3C）&lt;/strong> 和 &lt;strong>Chrome 开发者工具协议 (CDP)&lt;/strong>。分别以 &lt;code>Selenium&lt;/code> 和 &lt;code>puppeteer&lt;/code> 为代表&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/026-%E5%A4%A7%E8%AF%9Dchrom%E5%BC%80%E5%8F%91%E8%80%85%E5%8D%8F%E8%AE%AEcdp/Pasted-20241003-2.png"
width="1200"
height="682"
srcset="https://chengxiaqiucao.github.io/post/026-%E5%A4%A7%E8%AF%9Dchrom%E5%BC%80%E5%8F%91%E8%80%85%E5%8D%8F%E8%AE%AEcdp/Pasted-20241003-2_hu_7a00d56fbd310c05.png 480w, https://chengxiaqiucao.github.io/post/026-%E5%A4%A7%E8%AF%9Dchrom%E5%BC%80%E5%8F%91%E8%80%85%E5%8D%8F%E8%AE%AEcdp/Pasted-20241003-2_hu_8b44ea3387cf4ac8.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="175"
data-flex-basis="422px"
>&lt;/p>
&lt;h2 id="webdriver-和-cdp-的对比">WebDriver 和 CDP 的对比
&lt;/h2>&lt;h3 id="webdriver-工作原理">webDriver 工作原理
&lt;/h3>&lt;p>基于 WebDriver 协议的自动化测试工具，需要一个专门的浏览器驱动，通过浏览器驱动来实现跨不同浏览器的标准协议。工具和驱动之间通过 http 协议交互。&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/026-%E5%A4%A7%E8%AF%9Dchrom%E5%BC%80%E5%8F%91%E8%80%85%E5%8D%8F%E8%AE%AEcdp/Pasted-20241003-3.png"
width="1200"
height="516"
srcset="https://chengxiaqiucao.github.io/post/026-%E5%A4%A7%E8%AF%9Dchrom%E5%BC%80%E5%8F%91%E8%80%85%E5%8D%8F%E8%AE%AEcdp/Pasted-20241003-3_hu_4474f70a6867d39c.png 480w, https://chengxiaqiucao.github.io/post/026-%E5%A4%A7%E8%AF%9Dchrom%E5%BC%80%E5%8F%91%E8%80%85%E5%8D%8F%E8%AE%AEcdp/Pasted-20241003-3_hu_d71d07da545bacaa.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="232"
data-flex-basis="558px"
>&lt;/p>
&lt;p>也就是说，我们在web页面上完成的相关操作，实际上是自动化工具将其转换为了一个符合 webDriver 协议的 http 请求，再通过具体的driver驱动浏览器完成动作。&lt;/p>
&lt;p>比如一个页面点击操作，实际是向对应浏览器驱动发出如下请求：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># WebDriver: Click on a coffee element&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">curl&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">X&lt;/span> &lt;span class="n">POST&lt;/span> &lt;span class="n">http&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="mf">127.0.0.1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">4444&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">session&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">element_id&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">element&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">click&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span>&lt;span class="n">H&lt;/span> &lt;span class="s1">&amp;#39;Content-Type: application/json&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="si">{}&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>但对于一些底层的控制，如浏览器本身的一些事件如新开窗口等，因为 webDriver 协议基于 http 请求，就很难处理。&lt;/p>
&lt;h3 id="cdp工作原理">CDP工作原理
&lt;/h3>&lt;p>而 CDP，它原先并不是专门应用于自动化测试目的，是为 chrome 浏览器的开发者工具的调试功能设计，只是后来被 &lt;strong>puppeteer&lt;/strong> 用于了自动化测试。相比 Webdriver ，它是基于 WebSocket 直接和基于 chromium 的浏览器实现底层通信，可以双向传递，能提供更快速和更底层的控制。完成一些 webDriver协议 无法处理的动作。&lt;/p>
&lt;p>&lt;strong>底层控制：&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>捕获控制台消息&lt;/li>
&lt;li>拦截网络请求&lt;/li>
&lt;li>模拟 Device Mode&lt;/li>
&lt;li>模拟地理定位&lt;/li>
&lt;li>&amp;hellip;..&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/026-%E5%A4%A7%E8%AF%9Dchrom%E5%BC%80%E5%8F%91%E8%80%85%E5%8D%8F%E8%AE%AEcdp/Pasted-20241003-4.png"
width="1200"
height="366"
srcset="https://chengxiaqiucao.github.io/post/026-%E5%A4%A7%E8%AF%9Dchrom%E5%BC%80%E5%8F%91%E8%80%85%E5%8D%8F%E8%AE%AEcdp/Pasted-20241003-4_hu_67295a57aa91e8de.png 480w, https://chengxiaqiucao.github.io/post/026-%E5%A4%A7%E8%AF%9Dchrom%E5%BC%80%E5%8F%91%E8%80%85%E5%8D%8F%E8%AE%AEcdp/Pasted-20241003-4_hu_513ba702af1adfd5.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="327"
data-flex-basis="786px"
>&lt;/p>
&lt;p>页面操作，实际上是转换为了一系列 CDP 命令：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="o">//&lt;/span> &lt;span class="n">CDP&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Click&lt;/span> &lt;span class="n">on&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">coffee&lt;/span> &lt;span class="n">element&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">//&lt;/span> &lt;span class="n">Mouse&lt;/span> &lt;span class="n">pressed&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">command&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;Input.dispatchMouseEvent&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">parameters&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;mousePressed&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mf">10.34&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mf">27.1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">clickCount&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">//&lt;/span> &lt;span class="n">Mouse&lt;/span> &lt;span class="n">released&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">command&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;Input.dispatchMouseEvent&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">parameters&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;mouseReleased&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mf">10.34&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mf">27.1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">clickCount&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>但是，虽然提供了底层支持，但 CDP 协议最大的问题就是只能支持 Chromium 内核浏览器，并不是一个开放标准。 此外 CDP 协议也设计的比较复杂，不太适合直接从编码层面调用。&lt;/p>
&lt;h2 id="何为webdriver-bidi">何为WebDriver BiDi？
&lt;/h2>&lt;p>基于 WebDriver 协议和 CDP 协议各自的优缺点，自动化测试领域目前正在讨论推出全新的标准。也就是 WebDriver BiDi。&lt;/p>
&lt;p>这个协议的目标是兼顾 WebDriver 和 CDP 协议的优点，提供如下特性（愿景）：&lt;/p>
&lt;ul>
&lt;li>跨浏览器支持&lt;/li>
&lt;li>双向信息传递&lt;/li>
&lt;li>作为通用标准，纳入W3C&lt;/li>
&lt;li>提供底层控制&lt;/li>
&lt;li>以自动化测试为目的，更简洁方便地通过API调用&lt;/li>
&lt;li>支持各种工具和浏览器&lt;/li>
&lt;/ul>
&lt;p>目前这个协议还在协商、开发阶段。但已经引入了各大主流浏览器厂商、测试工具和服务提供商的参与，可以预见，将会是 Web 自动化测试领域下一个重大更新！&lt;/p>
&lt;p>参与厂商：&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/026-%E5%A4%A7%E8%AF%9Dchrom%E5%BC%80%E5%8F%91%E8%80%85%E5%8D%8F%E8%AE%AEcdp/BiDi.png"
width="1039"
height="325"
srcset="https://chengxiaqiucao.github.io/post/026-%E5%A4%A7%E8%AF%9Dchrom%E5%BC%80%E5%8F%91%E8%80%85%E5%8D%8F%E8%AE%AEcdp/BiDi_hu_34ef2d91df9bc5c2.png 480w, https://chengxiaqiucao.github.io/post/026-%E5%A4%A7%E8%AF%9Dchrom%E5%BC%80%E5%8F%91%E8%80%85%E5%8D%8F%E8%AE%AEcdp/BiDi_hu_190c71a116613266.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="319"
data-flex-basis="767px"
>&lt;/p>
&lt;p>目前的最新的进展是 2024-09-23 推出的草案版本。
&lt;img src="https://chengxiaqiucao.github.io/post/026-%E5%A4%A7%E8%AF%9Dchrom%E5%BC%80%E5%8F%91%E8%80%85%E5%8D%8F%E8%AE%AEcdp/Pasted-20241003-6.png"
width="1471"
height="208"
srcset="https://chengxiaqiucao.github.io/post/026-%E5%A4%A7%E8%AF%9Dchrom%E5%BC%80%E5%8F%91%E8%80%85%E5%8D%8F%E8%AE%AEcdp/Pasted-20241003-6_hu_97219f094a70612.png 480w, https://chengxiaqiucao.github.io/post/026-%E5%A4%A7%E8%AF%9Dchrom%E5%BC%80%E5%8F%91%E8%80%85%E5%8D%8F%E8%AE%AEcdp/Pasted-20241003-6_hu_487e7d80184905ac.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="707"
data-flex-basis="1697px"
>&lt;/p>
&lt;p>从草案内容来看，目前还处于相对早期阶段，短期内应该不会正式推出，所以相当长时间内， WebDriver 依然会是web自动化测试工具的事实标准，但相信BiDi将会是后续的主要发展方向。&lt;/p>
&lt;p>其实从 近期 Selenium 4的更新源码中，已经可以看到对BiDi协议的支持扩展方法了&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/026-%E5%A4%A7%E8%AF%9Dchrom%E5%BC%80%E5%8F%91%E8%80%85%E5%8D%8F%E8%AE%AEcdp/Pasted-20241003-7.png"
width="1540"
height="819"
srcset="https://chengxiaqiucao.github.io/post/026-%E5%A4%A7%E8%AF%9Dchrom%E5%BC%80%E5%8F%91%E8%80%85%E5%8D%8F%E8%AE%AEcdp/Pasted-20241003-7_hu_31dc3360f905dd9a.png 480w, https://chengxiaqiucao.github.io/post/026-%E5%A4%A7%E8%AF%9Dchrom%E5%BC%80%E5%8F%91%E8%80%85%E5%8D%8F%E8%AE%AEcdp/Pasted-20241003-7_hu_61ac338f18915c83.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="188"
data-flex-basis="451px"
>&lt;/p>
&lt;p>我们将长期关注这一标准的发展趋势和对目前自动化测试技术的影响。&lt;/p></description></item><item><title>自动化测试奇技淫巧之保存网页为PDF</title><link>https://chengxiaqiucao.github.io/post/029-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E5%A5%87%E6%8A%80%E6%B7%AB%E5%B7%A7%E4%B9%8B%E4%BF%9D%E5%AD%98%E7%BD%91%E9%A1%B5%E4%B8%BApdf/</link><pubDate>Thu, 03 Oct 2024 00:00:00 +0000</pubDate><guid>https://chengxiaqiucao.github.io/post/029-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E5%A5%87%E6%8A%80%E6%B7%AB%E5%B7%A7%E4%B9%8B%E4%BF%9D%E5%AD%98%E7%BD%91%E9%A1%B5%E4%B8%BApdf/</guid><description>&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/029-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E5%A5%87%E6%8A%80%E6%B7%AB%E5%B7%A7%E4%B9%8B%E4%BF%9D%E5%AD%98%E7%BD%91%E9%A1%B5%E4%B8%BApdf/Pasted-20241003-3.png"
width="734"
height="369"
srcset="https://chengxiaqiucao.github.io/post/029-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E5%A5%87%E6%8A%80%E6%B7%AB%E5%B7%A7%E4%B9%8B%E4%BF%9D%E5%AD%98%E7%BD%91%E9%A1%B5%E4%B8%BApdf/Pasted-20241003-3_hu_32bf543762afb175.png 480w, https://chengxiaqiucao.github.io/post/029-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E5%A5%87%E6%8A%80%E6%B7%AB%E5%B7%A7%E4%B9%8B%E4%BF%9D%E5%AD%98%E7%BD%91%E9%A1%B5%E4%B8%BApdf/Pasted-20241003-3_hu_2258d9e590022671.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="198"
data-flex-basis="477px"
>&lt;/p>
&lt;p>我们浏览网站资料的时候，发现有价值的文档，经常需要把材料保存下来。直接复制其实比较麻烦，况且有的网站还做了限制，不方便直接保存。这时将页面直接保存为 PDF 格式的文件是一个很好的需求。&lt;/p>
&lt;p>通常的做法是需要借助一些浏览器插件或者打印扩展来实现，这里我们学习自动化的话，其实利用 puppeteer 就可以方便地实现这个目的。再加上工具的自动化加持，绝对是爬取并保存重要资料的利器。&lt;/p>
&lt;h2 id="puppeteer用法">Puppeteer用法
&lt;/h2>&lt;p>关于 Puppeteer 工具的基本用法，在我之前的博文 &lt;a class="link" href="https://chengxiaqiucao.github.io/post/28-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7puppeteer%E7%AE%80%E4%BB%8B/" target="_blank" rel="noopener"
>自动化测试工具Puppeteer简介&lt;/a> 中已有较全面介绍，大家可以参考。&lt;/p>
&lt;h2 id="pdf-的基本用法">pdf() 的基本用法
&lt;/h2>&lt;p>在 Puppeteer 中保存 pdf 文件其实非常简单，通过调用 puppeteer 内置的 pdf() 方法就可以将当前页面保存为一个pdf文件&lt;/p>
&lt;p>官方给的案例：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kr">async&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">browser&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">puppeteer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">launch&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">page&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">browser&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">newPage&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">await&lt;/span> &lt;span class="nx">page&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="kr">goto&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;https://news.ycombinator.com&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">waitUntil&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;networkidle2&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">await&lt;/span> &lt;span class="nx">page&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">pdf&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">path&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;hn.pdf&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">format&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;letter&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">await&lt;/span> &lt;span class="nx">browser&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">close&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">})();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>用来访问一个技术新闻聚合网站，并将页面保存到 &lt;code>hn.pdf&lt;/code> 文件中&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/029-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E5%A5%87%E6%8A%80%E6%B7%AB%E5%B7%A7%E4%B9%8B%E4%BF%9D%E5%AD%98%E7%BD%91%E9%A1%B5%E4%B8%BApdf/Pasted-20241003.png"
width="650"
height="848"
srcset="https://chengxiaqiucao.github.io/post/029-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E5%A5%87%E6%8A%80%E6%B7%AB%E5%B7%A7%E4%B9%8B%E4%BF%9D%E5%AD%98%E7%BD%91%E9%A1%B5%E4%B8%BApdf/Pasted-20241003_hu_17f7098ace28a6ed.png 480w, https://chengxiaqiucao.github.io/post/029-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E5%A5%87%E6%8A%80%E6%B7%AB%E5%B7%A7%E4%B9%8B%E4%BF%9D%E5%AD%98%E7%BD%91%E9%A1%B5%E4%B8%BApdf/Pasted-20241003_hu_33da3eb23c1a1c2e.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="76"
data-flex-basis="183px"
>&lt;/p>
&lt;h3 id="paperformat">PaperFormat
&lt;/h3>&lt;p>上面的例子中有个参数 &lt;code>format&lt;/code>， 这个参数其实是指定保存的页面大小，可以取值为一些默认的打印页面大小，取值清单和对应的大小如下(单位英寸)：&lt;/p>
&lt;ul>
&lt;li>&lt;code>Letter&lt;/code>: 8.5in x 11in&lt;/li>
&lt;li>&lt;code>Legal&lt;/code>: 8.5in x 14in&lt;/li>
&lt;li>&lt;code>Tabloid&lt;/code>: 11in x 17in&lt;/li>
&lt;li>&lt;code>Ledger&lt;/code>: 17in x 11in&lt;/li>
&lt;li>&lt;code>A0&lt;/code>: 33.1102in x 46.811in&lt;/li>
&lt;li>&lt;code>A1&lt;/code>: 23.3858in x 33.1102in&lt;/li>
&lt;li>&lt;code>A2&lt;/code>: 16.5354in x 23.3858in&lt;/li>
&lt;li>&lt;code>A3&lt;/code>: 11.6929in x 16.5354in&lt;/li>
&lt;li>&lt;code>A4&lt;/code>: 8.2677in x 11.6929in&lt;/li>
&lt;li>&lt;code>A5&lt;/code>: 5.8268in x 8.2677in&lt;/li>
&lt;li>&lt;code>A6&lt;/code>: 4.1339in x 5.8268in&lt;/li>
&lt;/ul>
&lt;h3 id="pdfmargin">PDFMargin
&lt;/h3>&lt;p>除了 &lt;code>format&lt;/code>， 还可以像打印时设置页边距，设置 &lt;code>margin&lt;/code> 属性, 对应取值&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Property&lt;/th>
&lt;th>Modifiers&lt;/th>
&lt;th>Type&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>bottom&lt;/td>
&lt;td>&lt;code>optional&lt;/code>&lt;/td>
&lt;td>string | number&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>left&lt;/td>
&lt;td>&lt;code>optional&lt;/code>&lt;/td>
&lt;td>string | number&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>right&lt;/td>
&lt;td>&lt;code>optional&lt;/code>&lt;/td>
&lt;td>string | number&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>top&lt;/td>
&lt;td>&lt;code>optional&lt;/code>&lt;/td>
&lt;td>string | number&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>上面的代码加上页边距设置：&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">  &lt;span class="kr">await&lt;/span> &lt;span class="nx">page&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">pdf&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    &lt;span class="nx">path&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;hn.pdf&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    &lt;span class="nx">format&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;A4&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    &lt;span class="nx">margin&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s1">&amp;#39;left&amp;#39;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">80&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;top&amp;#39;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">40&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">  &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>可以看到页边距也进行了调整
&lt;img src="https://chengxiaqiucao.github.io/post/029-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E5%A5%87%E6%8A%80%E6%B7%AB%E5%B7%A7%E4%B9%8B%E4%BF%9D%E5%AD%98%E7%BD%91%E9%A1%B5%E4%B8%BApdf/Pasted-20241003-1.png"
width="657"
height="843"
srcset="https://chengxiaqiucao.github.io/post/029-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E5%A5%87%E6%8A%80%E6%B7%AB%E5%B7%A7%E4%B9%8B%E4%BF%9D%E5%AD%98%E7%BD%91%E9%A1%B5%E4%B8%BApdf/Pasted-20241003-1_hu_12841432f85ae97b.png 480w, https://chengxiaqiucao.github.io/post/029-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E5%A5%87%E6%8A%80%E6%B7%AB%E5%B7%A7%E4%B9%8B%E4%BF%9D%E5%AD%98%E7%BD%91%E9%A1%B5%E4%B8%BApdf/Pasted-20241003-1_hu_5baf4ee454c3e930.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="77"
data-flex-basis="187px"
>&lt;/p>
&lt;h3 id="pdfoption">PDFOption
&lt;/h3>&lt;p>除了上面两个常用的调整参数外，这个方法其实也提供了其他更丰富的设置，基本可以实现我们保存 pdf 文档时的各种样式设置需要。&lt;/p>
&lt;p>比如 &lt;code>scale&lt;/code> 参数可以设置页面缩放，取值为0.1 ~ 2:&lt;/p>
&lt;p>&lt;code>scale: 0.5,&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/029-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E5%A5%87%E6%8A%80%E6%B7%AB%E5%B7%A7%E4%B9%8B%E4%BF%9D%E5%AD%98%E7%BD%91%E9%A1%B5%E4%B8%BApdf/Pasted-20241003-2.png"
width="1050"
height="817"
srcset="https://chengxiaqiucao.github.io/post/029-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E5%A5%87%E6%8A%80%E6%B7%AB%E5%B7%A7%E4%B9%8B%E4%BF%9D%E5%AD%98%E7%BD%91%E9%A1%B5%E4%B8%BApdf/Pasted-20241003-2_hu_9c1850f78a230a8.png 480w, https://chengxiaqiucao.github.io/post/029-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E5%A5%87%E6%8A%80%E6%B7%AB%E5%B7%A7%E4%B9%8B%E4%BF%9D%E5%AD%98%E7%BD%91%E9%A1%B5%E4%B8%BApdf/Pasted-20241003-2_hu_3798a25d5fbc7136.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="128"
data-flex-basis="308px"
>&lt;/p>
&lt;p>其更多的设置参数，这里不再验证，清单如下：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Property&lt;/th>
&lt;th>Modifiers&lt;/th>
&lt;th>Type&lt;/th>
&lt;th>Description&lt;/th>
&lt;th>Default&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>displayHeaderFooter&lt;/td>
&lt;td>&lt;code>optional&lt;/code>&lt;/td>
&lt;td>boolean&lt;/td>
&lt;td>Whether to show the header and footer.&lt;/td>
&lt;td>&lt;code>false&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>footerTemplate&lt;/td>
&lt;td>&lt;code>optional&lt;/code>&lt;/td>
&lt;td>string&lt;/td>
&lt;td>HTML template for the print footer. Has the same constraints and support for special classes as &lt;a class="link" href="https://pptr.dev/api/puppeteer.pdfoptions#headertemplate" target="_blank" rel="noopener"
>PDFOptions.headerTemplate&lt;/a>.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>format&lt;/td>
&lt;td>&lt;code>optional&lt;/code>&lt;/td>
&lt;td>&lt;a class="link" href="https://pptr.dev/api/puppeteer.paperformat" target="_blank" rel="noopener"
>PaperFormat&lt;/a>&lt;/td>
&lt;td>&lt;strong>Remarks:&lt;/strong>&lt;br>&lt;br>If set, this takes priority over the &lt;code>width&lt;/code> and &lt;code>height&lt;/code> options.&lt;/td>
&lt;td>&lt;code>letter&lt;/code>.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>headerTemplate&lt;/td>
&lt;td>&lt;code>optional&lt;/code>&lt;/td>
&lt;td>string&lt;/td>
&lt;td>HTML template for the print header. Should be valid HTML with the following classes used to inject values into them:&lt;br>&lt;br>- &lt;code>date&lt;/code> formatted print date&lt;br> &lt;br>- &lt;code>title&lt;/code> document title&lt;br> &lt;br>- &lt;code>url&lt;/code> document location&lt;br> &lt;br>- &lt;code>pageNumber&lt;/code> current page number&lt;br> &lt;br>- &lt;code>totalPages&lt;/code> total pages in the document&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>height&lt;/td>
&lt;td>&lt;code>optional&lt;/code>&lt;/td>
&lt;td>string | number&lt;/td>
&lt;td>Sets the height of paper. You can pass in a number or a string with a unit.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>landscape&lt;/td>
&lt;td>&lt;code>optional&lt;/code>&lt;/td>
&lt;td>boolean&lt;/td>
&lt;td>Whether to print in landscape orientation.&lt;/td>
&lt;td>&lt;code>false&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>margin&lt;/td>
&lt;td>&lt;code>optional&lt;/code>&lt;/td>
&lt;td>&lt;a class="link" href="https://pptr.dev/api/puppeteer.pdfmargin" target="_blank" rel="noopener"
>PDFMargin&lt;/a>&lt;/td>
&lt;td>Set the PDF margins.&lt;/td>
&lt;td>&lt;code>undefined&lt;/code> no margins are set.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>omitBackground&lt;/td>
&lt;td>&lt;code>optional&lt;/code>&lt;/td>
&lt;td>boolean&lt;/td>
&lt;td>Hides default white background and allows generating pdfs with transparency.&lt;/td>
&lt;td>&lt;code>false&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>outline&lt;/td>
&lt;td>&lt;code>optional&lt;/code>&lt;/td>
&lt;td>boolean&lt;/td>
&lt;td>&lt;strong>&lt;em>(Experimental)&lt;/em>&lt;/strong> Generate document outline.&lt;/td>
&lt;td>&lt;code>false&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>pageRanges&lt;/td>
&lt;td>&lt;code>optional&lt;/code>&lt;/td>
&lt;td>string&lt;/td>
&lt;td>Paper ranges to print, e.g. &lt;code>1-5, 8, 11-13&lt;/code>.&lt;/td>
&lt;td>The empty string, which means all pages are printed.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>path&lt;/td>
&lt;td>&lt;code>optional&lt;/code>&lt;/td>
&lt;td>string&lt;/td>
&lt;td>The path to save the file to.&lt;br>&lt;br>&lt;strong>Remarks:&lt;/strong>&lt;br>&lt;br>If the path is relative, it&amp;rsquo;s resolved relative to the current working directory.&lt;/td>
&lt;td>&lt;code>undefined&lt;/code>, which means the PDF will not be written to disk.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>preferCSSPageSize&lt;/td>
&lt;td>&lt;code>optional&lt;/code>&lt;/td>
&lt;td>boolean&lt;/td>
&lt;td>Give any CSS &lt;code>@page&lt;/code> size declared in the page priority over what is declared in the &lt;code>width&lt;/code> or &lt;code>height&lt;/code> or &lt;code>format&lt;/code> option.&lt;/td>
&lt;td>&lt;code>false&lt;/code>, which will scale the content to fit the paper size.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>printBackground&lt;/td>
&lt;td>&lt;code>optional&lt;/code>&lt;/td>
&lt;td>boolean&lt;/td>
&lt;td>Set to &lt;code>true&lt;/code> to print background graphics.&lt;/td>
&lt;td>&lt;code>false&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>scale&lt;/td>
&lt;td>&lt;code>optional&lt;/code>&lt;/td>
&lt;td>number&lt;/td>
&lt;td>Scales the rendering of the web page. Amount must be between &lt;code>0.1&lt;/code> and &lt;code>2&lt;/code>.&lt;/td>
&lt;td>&lt;code>1&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>tagged&lt;/td>
&lt;td>&lt;code>optional&lt;/code>&lt;/td>
&lt;td>boolean&lt;/td>
&lt;td>&lt;strong>&lt;em>(Experimental)&lt;/em>&lt;/strong> Generate tagged (accessible) PDF.&lt;/td>
&lt;td>&lt;code>true&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>timeout&lt;/td>
&lt;td>&lt;code>optional&lt;/code>&lt;/td>
&lt;td>number&lt;/td>
&lt;td>Timeout in milliseconds. Pass &lt;code>0&lt;/code> to disable timeout.&lt;br>&lt;br>The default value can be changed by using &lt;a class="link" href="https://pptr.dev/api/puppeteer.page.setdefaulttimeout" target="_blank" rel="noopener"
>Page.setDefaultTimeout()&lt;/a>&lt;/td>
&lt;td>&lt;code>30_000&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>waitForFonts&lt;/td>
&lt;td>&lt;code>optional&lt;/code>&lt;/td>
&lt;td>boolean&lt;/td>
&lt;td>If true, waits for &lt;code>document.fonts.ready&lt;/code> to resolve. This might require activating the page using &lt;a class="link" href="https://pptr.dev/api/puppeteer.page.bringtofront" target="_blank" rel="noopener"
>Page.bringToFront()&lt;/a> if the page is in the background.&lt;/td>
&lt;td>&lt;code>true&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>width&lt;/td>
&lt;td>&lt;code>optional&lt;/code>&lt;/td>
&lt;td>string | number&lt;/td>
&lt;td>Sets the width of paper. You can pass in a number or a string with a unit.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>大话Https协议</title><link>https://chengxiaqiucao.github.io/post/021-%E5%82%BB%E7%93%9C%E5%BC%8F%E7%90%86%E8%A7%A3https%E5%8D%8F%E8%AE%AE/</link><pubDate>Sat, 28 Sep 2024 00:00:00 +0000</pubDate><guid>https://chengxiaqiucao.github.io/post/021-%E5%82%BB%E7%93%9C%E5%BC%8F%E7%90%86%E8%A7%A3https%E5%8D%8F%E8%AE%AE/</guid><description>&lt;img src="https://chengxiaqiucao.github.io/post/021-%E5%82%BB%E7%93%9C%E5%BC%8F%E7%90%86%E8%A7%A3https%E5%8D%8F%E8%AE%AE/Pasted-20240928-1.png" alt="Featured image of post 大话Https协议" />&lt;p>大家现在访问网络，浏览网页，注意一下的话，网址前面基本上都是一个 &lt;code>https://&lt;/code> 的前缀，这里就是说明这个网址所采用的协议是 https 协议。那么具体应该怎么理解 https 呢？ 本文我们就力争能清楚地解释明白这个我们目前应该最广的协议。&lt;/p>
&lt;h2 id="理解http协议">理解HTTP协议
&lt;/h2>&lt;p>要解释 https 协议，当然首先应该知道 http 协议。http 协议可以说是现代互联网的基础。在现代网络的 OSI 七层模型中，http 是典型的第 7 层应用层协议。也就是它是基于网络通信的实际应用，比如浏览器呈现网页内容，这就是网络通信的具体应用。&lt;/p>
&lt;p>如下图分别是 http 协议的消息请求和响应报文的协议定义格式：&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/021-%E5%82%BB%E7%93%9C%E5%BC%8F%E7%90%86%E8%A7%A3https%E5%8D%8F%E8%AE%AE/Pasted-20240928.png"
width="466"
height="165"
srcset="https://chengxiaqiucao.github.io/post/021-%E5%82%BB%E7%93%9C%E5%BC%8F%E7%90%86%E8%A7%A3https%E5%8D%8F%E8%AE%AE/Pasted-20240928_hu_a08e1f59ab391875.png 480w, https://chengxiaqiucao.github.io/post/021-%E5%82%BB%E7%93%9C%E5%BC%8F%E7%90%86%E8%A7%A3https%E5%8D%8F%E8%AE%AE/Pasted-20240928_hu_d9059691b287935e.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="282"
data-flex-basis="677px"
>&lt;/p>
&lt;p>访问百度的请求解析如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">GET https://www.baidu.com/ HTTP/1.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#请求方法 URL HTTP协议版本
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Host: www.baidu.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#请求服务器地址
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#以下是消息头内容
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Connection: keep-alive
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#连接方式：长连接
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Cache-Control: max-age=0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#请求缓存控制，需确认请求内容是否有修改
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Upgrade-Insecure-Requests: 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#支持https协议
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/71.0.3578.98 Safari/537.36
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#请求客户端，浏览器版本
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#支持的响应内容类型
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Accept-Encoding: gzip, deflate, br
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#支持的编码类型
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Accept-Language: zh-CN,zh;q=0.9,en;q=0.8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#支持的语言
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Cookie: BAIDUID=C0A2...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#携带的cookie信息
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#未携带请求消息体，body为空
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/021-%E5%82%BB%E7%93%9C%E5%BC%8F%E7%90%86%E8%A7%A3https%E5%8D%8F%E8%AE%AE/Pasted-20240928103246.png"
width="484"
height="325"
srcset="https://chengxiaqiucao.github.io/post/021-%E5%82%BB%E7%93%9C%E5%BC%8F%E7%90%86%E8%A7%A3https%E5%8D%8F%E8%AE%AE/Pasted-20240928103246_hu_ae75e69c12be897f.png 480w, https://chengxiaqiucao.github.io/post/021-%E5%82%BB%E7%93%9C%E5%BC%8F%E7%90%86%E8%A7%A3https%E5%8D%8F%E8%AE%AE/Pasted-20240928103246_hu_c66146f7ab6dea62.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="148"
data-flex-basis="357px"
>&lt;/p>
&lt;p>响应解析：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">HTTP/1.1 200 OK
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#协议版本 消息状态码 状态描述
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Bdpagetype: 2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Bdqid: 0x8707d7d80001f34e
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#自定义消息头
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Cache-Control: private
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#缓存控制策略
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Connection: Keep-Alive
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#长连接
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Content-Type: text/html;charset=utf-8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#响应内容类型
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Date: Sat, 22 Dec 2018 08:54:51 GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#响应时间
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expires: Sat, 22 Dec 2018 08:54:51 GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#过期失效时间
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Server: BWS/1.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#服务器系统及版本
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Set-Cookie: BDSVRTM=372; path=/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Set-Cookie: BD_HOME=1; path=/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Set-Cookie: path=/; domain=.baidu.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#设置客户端cookie
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Strict-Transport-Security: max-age=172800
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#严格安全传输，有效时间
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">X-Ua-Compatible: IE=Edge,chrome=1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#兼容浏览器版本
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Content-Length: 191722
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#消息体长度
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#以下消息体内容
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;!Doctype html&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;html xmlns=http://www.w3.org/1999/xhtml&amp;gt;&amp;lt;head&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>关于 http 协议的详细说明，可以参照我之前的博文 &lt;a class="link" href="https://chengxiaqiucao.github.io/post/01-postman%E5%9F%BA%E7%A1%80%E7%AF%87/" target="_blank" rel="noopener"
>接口测试工具Postman-基础篇&lt;/a>中关于 http 协议基础的部分&lt;/p>
&lt;p>那这里其实请求的地址 Url 是 &lt;code>https://www.baidu.com&lt;/code>， 是https协议，为什么这里又说它是 http 协议呢？ 这两者到底是什么关系？&lt;/p>
&lt;h2 id="https协议和tlsssl">HTTPS协议和TLS、SSL
&lt;/h2>&lt;p>其实 https 协议是指 &lt;strong>HyperText Transfer Protocol over Secure Socket Layer&lt;/strong>，也就是基于SSL之上的HTTP协议。&lt;/p>
&lt;p>&lt;strong>SSL&lt;/strong>(Secure Socket Layer) 指安全套接字层，是互联网鼻祖公司网景（Netscape）提出的为网络通信提供安全性和隐私保护的标准协议。 发展到 SSL3.0版本后，标准组织 IETF 对 SSL 协议进行了标准化，并重新命名为 &lt;strong>TLS&lt;/strong>(Transport Layer Security，传输层安全)。目前更新到 TLS1.3 版本。&lt;/p>
&lt;p>所以说SSL和TLS其实是一脉相承的，可以认为二者其实是不同时期的同一个协议。而HTTPS协议其实就是：&lt;/p>
&lt;blockquote>
&lt;p>HTTPS = HTTP + SSL/TLS&lt;/p>&lt;/blockquote>
&lt;p>为什么需要 https 协议呢？ 因为http协议本身在传输过程中，传递的信息基本都是透明的，传输过程中的任何节点，其实都可以看到传输的消息体内容。&lt;/p>
&lt;p>因此为了安全起见，就有了对传输内容加密的需求，SSL/TLS 协议的作用，其实就是为了保护这个内容安全而推出的。&lt;/p>
&lt;p>从 TLS 协议的命名也可以看出，它其实是在 TCP 协议（传输控制协议）的基础上，增加了安全特性的一个协议。&lt;/p>
&lt;p>HTTPS 协议基于HTTP协议，所以它还是属于应用层协议，而TLS 是在第四层的TCP协议基础上，一般认为是属于第五层即会话层。&lt;/p>
&lt;p>通过TLS，可以实现网络通信传输过程中，通信数据的加密&lt;/p>
&lt;h2 id="关于加密">关于加密
&lt;/h2>&lt;p>那么理解 https 协议，这里也就是要搞清楚 TLS 是怎么对通信数据完成加密的。&lt;/p>
&lt;h3 id="对称加密">对称加密
&lt;/h3>&lt;p>我们正常理解加密，就是通过双方约定的一个规则，也就是通过加密算法，把原始字串变更为一个只有通信双方知道的密文，这样其他人即便知道通信内容，就并不能知道原始的信息。&lt;/p>
&lt;p>比如我们看谍战片，传递情报一般都有个重要的东西叫做 &lt;strong>密码本&lt;/strong>, 这里密码本其实就是加密算法，也就是&lt;strong>密钥&lt;/strong>。&lt;/p>
&lt;p>这种加密方式，双方是对等的，对通信内容加密和解密使用的是同一个密钥，因此叫 &lt;strong>对称加密&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/021-%E5%82%BB%E7%93%9C%E5%BC%8F%E7%90%86%E8%A7%A3https%E5%8D%8F%E8%AE%AE/Pasted-20240928-1.png"
width="1054"
height="436"
srcset="https://chengxiaqiucao.github.io/post/021-%E5%82%BB%E7%93%9C%E5%BC%8F%E7%90%86%E8%A7%A3https%E5%8D%8F%E8%AE%AE/Pasted-20240928-1_hu_8e5135f3cf1994a9.png 480w, https://chengxiaqiucao.github.io/post/021-%E5%82%BB%E7%93%9C%E5%BC%8F%E7%90%86%E8%A7%A3https%E5%8D%8F%E8%AE%AE/Pasted-20240928-1_hu_42498ea2d03dccc0.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="241"
data-flex-basis="580px"
>&lt;/p>
&lt;p>但这种加密方式，有一个最大的问题，就是这里的密码本。谍战片中，情报人员舍生忘死也要保护密码本，否则一旦泄露，情报就存在泄露风险。&lt;/p>
&lt;p>网络通信也是一样，这里最大的问题，就是这里的密钥如何避免泄露。但只要密钥本身也需要通过网络通信来传输，那么依然不安全。&lt;/p>
&lt;p>这个过程好比：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">A: 跟你说个秘密，我下面的话你不要直接听，我全部说第几页第几行第几列，你去《红楼梦》找到对应的字连起来读。你回话也告诉我对应字的位置就行
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">B: 好嘞，《红楼梦》已摆好，你说吧
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">。。。。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">C：我偷听到啦，赶快买本《红楼梦》去...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="非对称加密">非对称加密
&lt;/h3>&lt;p>而除了对称加密之外，还有一种加密方式是 &lt;strong>非对称加密&lt;/strong>， 这种方式会采用一些特殊的加密算法，生成两份密钥，分为 &lt;strong>公钥&lt;/strong> 和 &lt;strong>私钥&lt;/strong>, 通过其中一把钥匙加密的内容，只能通过另一把要是才能解密。并且这个算法是很难通过暴力破解逆向还原推导仿冒出另一把钥匙。&lt;/p>
&lt;p>类似古代调遣军队的虎符，只有双方严丝合缝对得上才能验证为真。&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/021-%E5%82%BB%E7%93%9C%E5%BC%8F%E7%90%86%E8%A7%A3https%E5%8D%8F%E8%AE%AE/Pasted-20240928-2.png"
width="991"
height="560"
srcset="https://chengxiaqiucao.github.io/post/021-%E5%82%BB%E7%93%9C%E5%BC%8F%E7%90%86%E8%A7%A3https%E5%8D%8F%E8%AE%AE/Pasted-20240928-2_hu_e74263285cddfe8c.png 480w, https://chengxiaqiucao.github.io/post/021-%E5%82%BB%E7%93%9C%E5%BC%8F%E7%90%86%E8%A7%A3https%E5%8D%8F%E8%AE%AE/Pasted-20240928-2_hu_7adcb1b2fbe49700.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="176"
data-flex-basis="424px"
>&lt;/p>
&lt;p>有了这个机制，就可以把私钥保存在自己这里，并且绝不外传，而公钥可以公告天下，通过网络正常传递，谁都有可能拿到。这样，对方要给我发送加密信息，只要使用公钥加密，而解密只能在我自己这里才能完成。&lt;/p>
&lt;p>所以，非对称加密大致的过程就是：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> A: 我有点秘密想跟你说, 不能被其他人听到....
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> B：稍等，我给你个公钥，你上个锁以后再说给我听。拿到公钥先念下公钥上的字给我看看对不对
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> A: 收到公钥，上面写着“我是王大锤”
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> B: 对，你收到的就是我给你的公钥，用它上锁吧
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> A：公钥加密上锁，打包发给B
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> B：取出私钥，打开包裹，阅读内容...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>相比 &lt;strong>对称加密&lt;/strong>，&lt;strong>非对称加密&lt;/strong>明显更加安全，但这种方式的缺点是计算量比较大，加解密过程效率不高，速度较慢，所以实际应用中，通常是两种方式结合使用。&lt;/p>
&lt;p>也就是 TLS 加密过程：&lt;/p>
&lt;blockquote>
&lt;p>双方会首先通过非对称加密过程，协商出一个用于通信的对称密钥；这个对称密钥的生成都在各自的本地完成，而完成密钥协商后，后方各自都有了一个相同的对称密钥，就可以基于这个相同的密钥进行后续对称加密通信。&lt;/p>&lt;/blockquote>
&lt;p>因为这个对称密钥是通过非对称加密的方式得到的，所以并不会在双方的通信过程中传递。这样就兼顾了安全和效率。&lt;/p>
&lt;h2 id="签名和证书">签名和证书
&lt;/h2>&lt;p>不过用非对称加密，还是存在一个漏洞。&lt;/p>
&lt;p>就是在服务器和客户端通信的过程中，通信过程其实会通过大量中间环节，如果存在一个恶意的劫持者，它在收到服务端信息后，想自己假冒服务端，篡改信息后再发给客户端。&lt;/p>
&lt;p>这时它其实可以伪装成服务端，自己给客户端发放公钥，拿到客户端的信息后，用自己的私钥解密，再用真正的服务端公钥重新加密，发给服务端。&lt;/p>
&lt;p>这个风险其实就是安全领域中的 &lt;strong>中间人攻击&lt;/strong> 漏洞。&lt;/p>
&lt;p>而为了规避这个问题，需要服务端应该证明自己的身份，然后客户端还可以验证这个身份。因此就有了签名和证书。&lt;/p>
&lt;p>签名就是服务端表明自己的身份，拿到公钥的客户端就可以通过签名判断这个发送端是正确的服务器。这里的签名和公钥其实都保存在一个文件中，也就是服务端的签名证书。&lt;/p>
&lt;p>而为了防止中间人伪造证书，这时就引入了&lt;strong>CA（Certificate Authority)&lt;/strong>，也就是权威的第三方证书颁发机构。这些权威的第三方颁发机构会用私钥对服务端的签名进行加密，这样客户端就可以通过机构的公钥来验证这个签名是否是对应的服务端。验证无误，就可以用证书中携带的公钥来完成和服务端后续的通信协商。&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/021-%E5%82%BB%E7%93%9C%E5%BC%8F%E7%90%86%E8%A7%A3https%E5%8D%8F%E8%AE%AE/Pasted-20240928-4.png"
width="698"
height="864"
srcset="https://chengxiaqiucao.github.io/post/021-%E5%82%BB%E7%93%9C%E5%BC%8F%E7%90%86%E8%A7%A3https%E5%8D%8F%E8%AE%AE/Pasted-20240928-4_hu_2950ee2ea2f04dc6.png 480w, https://chengxiaqiucao.github.io/post/021-%E5%82%BB%E7%93%9C%E5%BC%8F%E7%90%86%E8%A7%A3https%E5%8D%8F%E8%AE%AE/Pasted-20240928-4_hu_5b6d08632ce2d28c.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="80"
data-flex-basis="193px"
>&lt;/p>
&lt;h2 id="https协议交互过程">HTTPS协议交互过程
&lt;/h2>&lt;p>有了上面的基础，我们来具体看一下访问一个 https 网站的具体通信过程。&lt;/p>
&lt;p>TLS因为有不同的版本，并且支持多种不同密钥交换和加密算法，所以在通信前，首先要完成使用何种加密算法、用什么密钥生成方式等过程。而 TLS 是基于TCP协议之上的，所以在 TCP 典型的 3次握手完成建链之后，会进行 TLS 的握手建链过程：&lt;/p>
&lt;ul>
&lt;li>比如客户端从浏览器访问网站， 这时浏览器会首先发送&lt;code>Client Hello&lt;/code> 消息到服务器，这个消息中主要包含了客户端支持的&lt;code>加密套件ciphersuites&lt;/code>， TLS 版本信息和&lt;strong>客户端随机数&lt;/strong>。（明文传输）&lt;/li>
&lt;li>服务器接收到消息后，返回自己支持的&lt;code>ciphersuites&lt;/code>， TLS 版本，自己的数字证书和服务器端生成的随机数等几项内容。（明文传输）&lt;/li>
&lt;li>客户端对收到的数字证书进行验证。验证无误之后生成一个新的密钥，也就是&lt;code>预主密钥pre-master key&lt;/code>，并使用证书中携带的公钥来对&lt;code>pre-master key&lt;/code>进行加密，发送给服务器。（此时是非对称加密传输）&lt;/li>
&lt;li>服务器接收到客户端的密文，使用私钥进行解密，获得了&lt;code>pre-master key&lt;/code>。（非对称加密传输）&lt;/li>
&lt;li>到这里为止，服务器和客户端都有了三组数字，分别是&lt;strong>客户端的随机数、服务端的随机数和pre-master key&lt;/strong>。前两个随机数虽然是明文传输，有泄露风险，但 &lt;code>pre-master key&lt;/code>并没有在通信中传递，是计算而得到的安全密钥。 所以再将这三者结合，使用之前协商好的特定的加密算法再生成一个密钥，这个密钥称为&lt;code>shared secert&lt;/code>。也就是之后的会话密钥，这个密钥是后续对称加密的密钥。&lt;/li>
&lt;li>客户端在计算出对称加密的密钥之后，使用该密钥对通信内容进行对称加密，告知服务器之后都使用该密钥进行对称加密。（对称加密传输）&lt;/li>
&lt;li>服务器接收到密文后，使用之前计算出的密钥来进行对称解密，解密成功之后，同样再使用该密钥进行对称加密通信。并告知客户端密钥确认无误，可以使用该密钥进行通信。（对称加密传输）&lt;/li>
&lt;/ul>
&lt;p>至此，整个TLS的握手过程完整，之后就可以开始对称加密的通信了。&lt;/p>
&lt;p>通过 WireShark 抓包的话，通常是这样的一个过程：&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/021-%E5%82%BB%E7%93%9C%E5%BC%8F%E7%90%86%E8%A7%A3https%E5%8D%8F%E8%AE%AE/Pasted-20240928-5.png"
width="1317"
height="315"
srcset="https://chengxiaqiucao.github.io/post/021-%E5%82%BB%E7%93%9C%E5%BC%8F%E7%90%86%E8%A7%A3https%E5%8D%8F%E8%AE%AE/Pasted-20240928-5_hu_49d182a58ea91b45.png 480w, https://chengxiaqiucao.github.io/post/021-%E5%82%BB%E7%93%9C%E5%BC%8F%E7%90%86%E8%A7%A3https%E5%8D%8F%E8%AE%AE/Pasted-20240928-5_hu_8e5d0d431298012.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="418"
data-flex-basis="1003px"
>&lt;/p>
&lt;p>具体的交互过程，参考下图 (图片来自网络&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/021-%E5%82%BB%E7%93%9C%E5%BC%8F%E7%90%86%E8%A7%A3https%E5%8D%8F%E8%AE%AE/Pasted-20240928-6.png"
width="1308"
height="946"
srcset="https://chengxiaqiucao.github.io/post/021-%E5%82%BB%E7%93%9C%E5%BC%8F%E7%90%86%E8%A7%A3https%E5%8D%8F%E8%AE%AE/Pasted-20240928-6_hu_f82923a9e2715688.png 480w, https://chengxiaqiucao.github.io/post/021-%E5%82%BB%E7%93%9C%E5%BC%8F%E7%90%86%E8%A7%A3https%E5%8D%8F%E8%AE%AE/Pasted-20240928-6_hu_6089939db8ce688d.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="138"
data-flex-basis="331px"
>&lt;/p>
&lt;hr>
&lt;p>以上就是关于 Https 协议通信过程的整体梳理，更多测试和技术相关文章，欢迎关注 &lt;a class="link" href="https://chengxiaqiucao.github.io/" target="_blank" rel="noopener"
>城下秋草的博客&lt;/a> 或公众号（秋草说测试）&lt;/p></description></item><item><title>软件分支策略和集成模式梳理</title><link>https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/</link><pubDate>Fri, 27 Sep 2024 00:00:00 +0000</pubDate><guid>https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/</guid><description>&lt;img src="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/branch.png" alt="Featured image of post 软件分支策略和集成模式梳理" />&lt;h2 id="前言">前言
&lt;/h2>&lt;p>软件代码是任何一个软件研发团队的核心资产。而软件的分支管理就是团队中多人合作时，如何协调处理不同人员的代码同步、集成并解决冲突的主要方式。&lt;/p>
&lt;p>本文根据软件大牛Martin Flower的分支模型阅读笔记整理&lt;/p>
&lt;h2 id="基础模式">基础模式
&lt;/h2>&lt;h3 id="源分支">源分支
&lt;/h3>&lt;p>所有修改都记录到同一分支&lt;/p>
&lt;p>分支的定义：
&lt;img src="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927.png"
width="701"
height="259"
srcset="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927_hu_d4d3068e3f2598bc.png 480w, https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927_hu_a8449443230e7ad4.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="270"
data-flex-basis="649px"
>
创建分支：
&lt;img src="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-1.png"
width="916"
height="590"
srcset="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-1_hu_6098059e69a69708.png 480w, https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-1_hu_76295e80e62f86e2.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="155"
data-flex-basis="372px"
>&lt;/p>
&lt;p>不同的两个开发者基于主分支拉去各自的开发分支：
&lt;img src="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-2.png"
width="872"
height="439"
srcset="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-2_hu_f52032f3cbeccd64.png 480w, https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-2_hu_a4a8cfd6c8cb1d23.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="198"
data-flex-basis="476px"
>&lt;/p>
&lt;p>Jonny LeRoy 指出我们绘制分支线时，其实忽略了随着时间，导致的复杂度提升
&lt;img src="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-3.png"
width="883"
height="521"
srcset="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-3_hu_3f48b100679b4356.png 480w, https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-3_hu_b114d269317d2d1.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="169"
data-flex-basis="406px"
>&lt;/p>
&lt;h4 id="主干的定义">主干的定义：
&lt;/h4>&lt;p>&lt;strong>Master、Trunk&lt;/strong>&lt;/p>
&lt;p>是反映产品当前实际状态的唯一公用分支&lt;/p>
&lt;p>可以随时获得当前产品版本状态，并基于此进行开发&lt;/p>
&lt;h4 id="健康分支">健康分支：
&lt;/h4>&lt;p>为每一次提交进行自动化构建、测试，确保没有在当前分支引入故障（可工作的无故障分支）&lt;/p>
&lt;p>优点：&lt;/p>
&lt;ol>
&lt;li>健康的公用分支，可以避免从这个分支上拉取的新分支工作在错误的基础上&lt;/li>
&lt;li>健康分支更易入直接发布到产品&lt;/li>
&lt;li>随时保持一个健康分支能极大降低集成的工作量并减少潜在风险。&lt;/li>
&lt;li>便于进行差异调试。（可以将调试失败的commit去除，仅保留健康的commit）&lt;/li>
&lt;li>在集成到主干时如果出现问题，就可以非常明确地确认是冲突导致而非代码错误&lt;/li>
&lt;/ol>
&lt;p>可能是公用分支、也可以是自己的分支。
自测代码是健康分支的核心，自测应可以快速得到结果（分钟级）&lt;/p>
&lt;h2 id="集成模式">集成模式
&lt;/h2>&lt;h3 id="主线集成">主线集成
&lt;/h3>&lt;p>开发从主干拉取代码进行开发，集成，并将健康的更改推送回主干
&lt;img src="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-4.png"
width="1086"
height="253"
srcset="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-4_hu_13469664a5d85941.png 480w, https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-4_hu_e78cbd5209ceaec2.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="429"
data-flex-basis="1030px"
>
从主干拉取分支到本地，并在本地分支上进行开发&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-5.png"
width="1058"
height="302"
srcset="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-5_hu_2e852c5d48edaa74.png 480w, https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-5_hu_95b356c339ee0ff5.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="350"
data-flex-basis="840px"
>
开发过程中，其他开发已经提交了变更到主干分支
&lt;img src="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-6.png"
width="1021"
height="313"
srcset="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-6_hu_1c0b4402c038b960.png 480w, https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-6_hu_9c1d222d40356939.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="326"
data-flex-basis="782px"
>
此时如需向主干提交，则首先需要合入其他的变更
&lt;img src="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-7.png"
width="1067"
height="334"
srcset="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-7_hu_71458497204245e0.png 480w, https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-7_hu_73d9f4f1fb973746.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="319"
data-flex-basis="766px"
>
有时，本地的修改和已经提交的变更会有冲突，此时需要先解决冲突
&lt;img src="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-8.png"
width="1055"
height="322"
srcset="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-8_hu_4e9aad39450c55f7.png 480w, https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-8_hu_aafa4ba988541945.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="327"
data-flex-basis="786px"
>
再重新将修改并自测后的健康代码提交到主干分支&lt;/p>
&lt;p>使用主干时，意味着我们会实行&lt;strong>主干集成模式&lt;/strong>&lt;/p>
&lt;h3 id="特性分支">特性分支
&lt;/h3>&lt;p>为每一个功能特性拉取它独立的分支，并在feture完成后集成回主干&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-9.png"
width="933"
height="366"
srcset="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-9_hu_74b95c7ee6bcc59d.png 480w, https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-9_hu_32c0ddbd05ee967a.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="254"
data-flex-basis="611px"
>
从主干拉取不同的特性分支并分别进行开发
&lt;img src="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927175324.png"
width="952"
height="350"
srcset="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927175324_hu_12d1719d35d77f7d.png 480w, https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927175324_hu_afcf5cdf5e2a68df.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="272"
data-flex-basis="652px"
>
开发过程中会持续从主干拉取最新代码，如果有其他功能变更，要及时进行集成解决冲突（本地）。&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-10.png"
width="885"
height="360"
srcset="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-10_hu_20dd7f755d09ae7a.png 480w, https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-10_hu_f29cffe845a9b55e.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="245"
data-flex-basis="590px"
>
特性完成开发后，集成回主干。（受影响的冲突已在本地解决，所有其他特性分支上直接拉取变更，不会存在冲突需要解决）&lt;/p>
&lt;h3 id="低频集成">低频集成
&lt;/h3>&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-11.png"
width="1063"
height="335"
srcset="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-11_hu_a05c68bed305ab44.png 480w, https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-11_hu_9daf312ea04c227f.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="317"
data-flex-basis="761px"
>&lt;/p>
&lt;p>两条独立的开发分支上分别进行了几次本地提交，但没有向主干推送
&lt;img src="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-12.png"
width="1015"
height="333"
srcset="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-12_hu_26b3824f0bf7a0e8.png 480w, https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-12_hu_13f0a04d517dcf1.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="304"
data-flex-basis="731px"
>
主干上合入了变更&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-13.png"
width="1064"
height="338"
srcset="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-13_hu_78ae884a57bcb222.png 480w, https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-13_hu_ed2fa66bb5a8fc68.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="314"
data-flex-basis="755px"
>
开发分支需要拉取变更并合入到本地分支（解决冲突）&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-14.png"
width="1067"
height="342"
srcset="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-14_hu_d54a092c550a112e.png 480w, https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-14_hu_819f06a28caca5af.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="311"
data-flex-basis="748px"
>
分支A上继续完成了4，5两个提交，然后推送大主干
&lt;img src="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-15.png"
width="1052"
height="321"
srcset="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-15_hu_450e64d3035717ed.png 480w, https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-15_hu_11fe33b1a4c666ee.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="327"
data-flex-basis="786px"
>
分支B上完成了4，5，6几个提交后，需要在本地合入主干上A的提交，集成后推送到主干。（本地合入的大小代表工作量）&lt;/p>
&lt;h3 id="高频集成">高频集成
&lt;/h3>&lt;p>每次提交都向主干进行集成和推送呢？
&lt;img src="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-16.png"
width="1057"
height="312"
srcset="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-16_hu_af2461a8a4eeb452.png 480w, https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-16_hu_c2915e7288889683.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="338"
data-flex-basis="813px"
>
V完成第1次提交后就推送回主干&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-17.png"
width="1025"
height="324"
srcset="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-17_hu_3bd84e894d966406.png 480w, https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-17_hu_5e73f50ccccec7f2.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="316"
data-flex-basis="759px"
>
S在完成第1次提交后就进行本地合入，并推送回主干
&lt;img src="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-18.png"
width="1036"
height="327"
srcset="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-18_hu_81fb63d9bcbd438c.png 480w, https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-18_hu_a427bc1c01c61ba7.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="316"
data-flex-basis="760px"
>
S的第2次推送，主干没有变更，没有本地合入工作
V完成第2次提交和本地合入，推送
&lt;img src="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-19.png"
width="1074"
height="323"
srcset="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-19_hu_3b84f8f85861beda.png 480w, https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-19_hu_711e4f940a79bb3e.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="332"
data-flex-basis="798px"
>
S的第3次提交，需要本地合入，推送
&lt;img src="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-20.png"
width="1078"
height="345"
srcset="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-20_hu_92be6eb77101a99a.png 480w, https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-20_hu_3e1c6ae613104a6.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="312"
data-flex-basis="749px"
>
如此，每次本地的提交，都会向主干进行推送&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-21.png"
width="1021"
height="401"
srcset="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-21_hu_d27d5d59cebb2a27.png 480w, https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-21_hu_e4a65e5ebd0a4c1.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="254"
data-flex-basis="611px"
>&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-22.png"
width="1053"
height="429"
srcset="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-22_hu_f963bcda7ec114e5.png 480w, https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-22_hu_9b20a62829346550.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="245"
data-flex-basis="589px"
>&lt;/p>
&lt;p>比较二者，高频集成会有更多的本地集成工作，但这些集成的工作量比低频集成低得多。
同时，比工作量减少更重要的是，这样做减少了风险。（虽然大多情况下，进行大的合入也能顺利完成，但有时却会有严重的冲突问题难以解决。这种情况，偶发的巨大问题比常规的小问题更糟糕）
如果每次常规集成10分钟，但50次集成合在一起要6小时，看起来6小时比500分钟还是要少，但是这会导致&lt;em>集成恐惧&lt;/em>（if it hurt，do it more often）&lt;/p>
&lt;p>而且高频集成模式下，可以更早发现代码间的冲突情况，并避免在冲突代码在后期才发现而导致中间持续产生了很多本不应该存在的更多冲突代码。&lt;/p>
&lt;p>源码控制系统其实更多是一个沟通平台，可以意识到其他团队成员的工作&lt;/p>
&lt;h3 id="持续集成">持续集成
&lt;/h3>&lt;p>开发者一旦完成一个健康的提交，就会尽快完成主干集成，一般不超过1天。&lt;/p>
&lt;p>（如果高频集成更有效率且可实施，但使用特性分支，意味着限制了变更不能比一个特性更小，那么集成频次就成了问题？）&lt;/p>
&lt;p>持续集成-只要特性上的开发是有进展并且是健康的，就可以向主干集成。唯一的原则就是每天都要进行集成（甚至更短）&lt;/p>
&lt;p>开发团队需要习惯在主干上存在未完成特性的情况并考虑如何在产品中不暴露这些特性。（通过隐藏入口、配置控制），有时我们还可以实现灰度发布。&lt;/p>
&lt;p>在持续集成模式下，开发着往往不需要创建自己的特性分支，只要在本地的主干分支上工作即可。&lt;/p>
&lt;p>特性分支和持续集成的区别不在于是否有特性分支存在，而在于何时向主干集成。&lt;/p>
&lt;p>两者的比较：&lt;/p>
&lt;p>两种模式的差异更多取决于特性的大小，如果特性足够小（一天以内可以完成），就可以同时实行特性分支和持续集成。&lt;/p>
&lt;p>特性分支最明显的问题在于合并的工作量和不确定性，然而更大的问题是它可能阻止重构。重构是软件优化最有效的途径，但是重构会产生冲突，当解决冲突工作量太大时，重构往往需要极大的勇气。&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>功能分支&lt;/th>
&lt;th>持续集成&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>- 可以将某个功能中的所有代码作为一个单元进行质量评估&lt;br>- 功能完成后才将功能代码添加到产品中&lt;br>- 合并频率较低&lt;/td>
&lt;td>- 支持比特征长度更高的频率集成&lt;br>- 减少发现冲突的时间&lt;br>- 规模较小的合并&lt;br>- 鼓励重构&lt;br>- 需要致力于健康的分支（从而实现自我测试代码）&lt;br>- 科学证据表明它有助于提高软件交付性能&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="特性分支和开源软件">特性分支和开源软件
&lt;/h4>&lt;p>github的特性分支？pull request模式
上下文不同：分散、不定时、团队成员不了解 vs 全职、熟悉的团队成员、可靠&lt;/p>
&lt;p>提交的审核review&lt;/p>
&lt;ul>
&lt;li>代码审核·&lt;/li>
&lt;li>集成受阻&lt;/li>
&lt;li>模块化的重要性&lt;/li>
&lt;li>&lt;/li>
&lt;/ul>
&lt;h2 id="发布模式">发布模式
&lt;/h2>&lt;p>主干分支是活动分支，代码持续在其上开发。如果能保持主干的健康状态，任何人都可以从一个稳定的基础开始自己的工作。
而且足够健康的话，也可以直接从主干分支进行产品的发布&lt;/p>
&lt;p>&lt;img src="https://i-blog.csdnimg.cn/blog_migrate/b1dee5579befaf2a2e007af2dbb2c29f.png#pic_center"
loading="lazy"
alt="在这里插入图片描述"
>
对于实施CI/CD的团队，一个常用的实践是通过打Tag标记来跟踪每一个发布的版本。但不实践CD的团队，则需要其他的发布模式&lt;/p>
&lt;h3 id="release-branch-发布分支">Release Branch 发布分支
&lt;/h3>&lt;p>预备发布的分支，只接受以版本稳定和交付为目标的提交 （一般系统测试阶段）
&lt;img src="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-23.png"
width="716"
height="287"
srcset="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-23_hu_81382339d9d451f8.png 480w, https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-23_hu_7bf94c3181911e26.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="249"
data-flex-basis="598px"
>&lt;/p>
&lt;p>Release分支从主干分支中拉取，不再接受任何新feature的合入。工作在release分支上的开发工作主要是修复发现的bug或影响交付的功能。所有的修改最终还需要合并回主干。
&lt;img src="https://i-blog.csdnimg.cn/blog_migrate/4e7655a86c338d8ce135fc704ded3f97.png#pic_center"
loading="lazy"
alt="cherry-pick 到release分支"
>
尽管release分支上的工作往往比新feature的开发工作量更小，但是如果在其上的开发时间过长依然会导致合并回主干非常困难（主干上的提交越多，合入就越困难）&lt;/p>
&lt;p>实际工作中，因为release分支的存在，合并回主干的操作往往容易被忽视，特别是有困难的冲突需要解决并且存在发布压力的情况下。&lt;/p>
&lt;p>所以有的开发会采用另一种方式，继续在主干上开发，然后通过cherry-pick将只和发布相关的提交合入到release分支。这种方式的缺点是很多时候chrry-pick有时也很困难（对之前的commit有依赖的情况），在实际发布之前对release分支往往有一些重做工作。&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-24.png"
width="1000"
height="430"
srcset="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-24_hu_2d6097156d59f34e.png 480w, https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-24_hu_4afd22e582bedc82.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="232"
data-flex-basis="558px"
>
对于只有一个产品版本的团队来说，使用单一的release分支就好。但很多情况下，会存在需要支持多个产品版本的情况，比如客户本地部署的软件，可能会长时间运行在一个历史版本上，但是又需要继续做一些bug fix或者一些特别的需求，此时就需要维护多个不同的release 分支，并定期保持和主干同步&lt;/p>
&lt;p>对开发团队这明显是大大增加了维护难度和工作量，但这更多是产品策略带来的成本。唯一可以做的就是鼓励客户更及时地升级到最近版本（保持产品稳定非常关键，一旦产品不稳定导致问题，会使客户更倾向不再升级）&lt;/p>
&lt;p>Release分支对于难以保持主干分支持续在健康状态的团队非常有必要，团队可以关注在产品发布的功能验证上。但对于单一产品的团队，release分支并不必要，使用主干分支并保持健康状态即可（发布的版本进行Tag标记）
另外，对于发布流程存在很多阻塞的团队，relase分支也是必要的（比如有比较缓慢的审核流程，在应用商店上线的时间窗、安全、法务、合规等的审核等）&lt;/p>
&lt;h3 id="成熟分支">成熟分支
&lt;/h3>&lt;p>分支的head总是标记为最近版本的成熟代码基线&lt;/p>
&lt;p>根据团队对产品成熟度的不同定义，拉取出的对应的成熟分支。比如QA分支（提测）、Staging分支（预发）、production分支（上线）&lt;/p>
&lt;p>但很多情况下，使用清晰定义的Tag机制就可以代替成熟分支的作用。比如“成熟级别-内部版本号”，“qa-233”，“prod-445”
&lt;img src="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-25.png"
width="808"
height="418"
srcset="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-25_hu_384ca6b5a8e6e3fb.png 480w, https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-25_hu_5bc1629d3f4c0e2.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="193"
data-flex-basis="463px"
>&lt;/p>
&lt;h3 id="长期发布分支">长期发布分支
&lt;/h3>&lt;p>release分支一般在产品发布后就可以删除，但我们也可以维持一个长期的发布分支。它的作用可以看作是发布分支和成熟分支的集合。这个分支上进行release前的fix工作并合并回主线，并在实际发布时打上发布Tag，然后进入下一个版本的发布准备。
&lt;img src="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-26.png"
width="940"
height="304"
srcset="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-26_hu_9c8e0e55cb8f7a79.png 480w, https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-26_hu_53dfcd4c2a28453e.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="309"
data-flex-basis="742px"
>&lt;/p>
&lt;h3 id="环境分支">环境分支
&lt;/h3>&lt;p>通过不同的提交来配置代码的运行环境
&lt;img src="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-27.png"
width="825"
height="467"
srcset="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-27_hu_fecd763b06fd168d.png 480w, https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-27_hu_ddb2fac8f5b9c999.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="176"
data-flex-basis="423px"
>&lt;/p>
&lt;p>不同的产品运行环境往往会有不同的配置代码（测试环境、开发环境、性能验证、安全验证环境、预发环境、产品环境等），环境分支会包含这些配置的变更提交并触发对应的构建、部署。&lt;/p>
&lt;p>环境分支一般也用作成熟分支，比如QA的成熟分支，会包含QA环境的配置变更。&lt;/p>
&lt;p>但是环境分支并不是好的实践，不同的环境需要不同的编译代码会引入风险。如果产品程序在不同的环境上有不同的行为表现会使问题的修复、定位变得极其困难。所以最好保证不同环境下运行的可执行代码都是相同的，环境的配置都通过显式的配置文件或变量来控制。环境变更导致的任何更改都不应包含在源码控制系统中&lt;/p>
&lt;p>环境分支只应是缺乏这种环境切换控制机制团队的应急机制存在。&lt;/p>
&lt;h3 id="hotfix">Hotfix
&lt;/h3>&lt;p>用于进行紧急产品故障修复的分支&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-28.png"
width="908"
height="310"
srcset="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-28_hu_acc30d14bafe8983.png 480w, https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-28_hu_d0d781cb2c1c3797.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="292"
data-flex-basis="702px"
>
从主线分支对应的release版本拉取hotfix分支，并在完成后合入回主线（如果release时间比较久，合并工作可能会比较大）
&lt;img src="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-29.png"
width="819"
height="289"
srcset="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-29_hu_de9c76df8a7edc9a.png 480w, https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-29_hu_5c98c8fddd3a9342.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="283"
data-flex-basis="680px"
>
对使用release 分支的团队，也可以直接在release分支上进行hotfix，此时相当于将原release分支转变为hotfix分支
&lt;img src="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-30.png"
width="785"
height="293"
srcset="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-30_hu_855c768ad01d0c1f.png 480w, https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-30_hu_f596bdaa59685590.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="267"
data-flex-basis="643px"
>
对于实践CD的团队，甚至可以直接在主干上完成hotfix（还是会拉取hotfix分支，但会从最新的提交拉取），因为一般团队已经具备了不公开未发布特性的能力。而且在hotfix过程中，不允许向主线进行任何新的提交。（hotfix优先）&lt;/p>
&lt;p>如何定义hotfix？对于可以发布频率较高的团队，一般可以将问题纳入日常发布节奏而不需要进行hotfix。取决于团队发布频率和对业务的实际影响&lt;/p>
&lt;h3 id="release-train">release train
&lt;/h3>&lt;p>象火车发车一样有定期的发布间隔，特性完成后选择放入哪一次发布（和SAFe的Agile release train不是一个概念，那更多是组织层面的实践）
&lt;img src="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-31.png"
width="789"
height="361"
srcset="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-31_hu_1167bd31713427f4.png 480w, https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-31_hu_8fd7313e73bea9d4.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="218"
data-flex-basis="524px"
>
团队定义定期的发布计划，并确定每列发布列车上的功能，据此承诺、安排各自的工作任务。一旦火车发车，当前分支就转化为release分支，只会接受bug fix。发布列车一般会和feature分支一起使用。对于发布流程中存在较多阻塞的团队来说，release train是非常有用的，不会因为这些阻塞而影响后续功能的研发。
但比较明显的缺点是，如果一个功能很早就完成，也需要等到发车时间才能上线。&lt;/p>
&lt;p>release train可以看作是团队release流程的一个提升手段，对与很难进行稳定发布的团队，实施CD往往不够现实 ，此时release train会是一个好选择。&lt;/p>
&lt;h4 id="loading-future-trains">loading future trains
&lt;/h4>&lt;p>和旧列车发车后再向新的列车上装载需求不同，可以使用这种模式的变种。如果一些功能不能确定是否能在预定发车前完成，可以同时开启两列train（预期发车时间不同），在三月列车上完成的开发工作同时向4月列车上提交并在三月列车发车后继续在4月列车上完成剩余工作。&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-32.png"
width="895"
height="304"
srcset="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-32_hu_d04c6c121bd084fa.png 480w, https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-32_hu_aeb573cbb9964815.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="294"
data-flex-basis="706px"
>
这种模式可以让4月列车上的工作不影响三月列车，但缺点是如果4月列车上的变更影响到3月的功能，会是后续的合并工作更加复杂。&lt;/p>
&lt;h4 id="和主线发布比较">和主线发布比较
&lt;/h4>&lt;p>release train的主要好处是可以有一个定期的产品发布日历，但是多个分支依然会引入复杂性。
其实使用主线模式也可以如此工作，在主线上开发，到发布日期后增加一个对应的发布分支即可。
&lt;img src="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-33.png"
width="820"
height="445"
srcset="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-33_hu_e9c39230173121cc.png 480w, https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-33_hu_8505908c388c8ec1.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="184"
data-flex-basis="442px"
>&lt;/p>
&lt;h3 id="预发布主线">预发布主线
&lt;/h3>&lt;p>确保主线是绝对健康状态，并且主线的head永远能被直接发布到产品环境。（每个提交都具备直接发布的健康状态，但是只有实际发布的提交才需要加上tag）
&lt;img src="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-34.png"
width="796"
height="265"
srcset="https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-34_hu_58a256d1b3e13f3a.png 480w, https://chengxiaqiucao.github.io/post/020-%E7%90%86%E8%A7%A3%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/Pasted-20240927-34_hu_51c51264bf398328.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="300"
data-flex-basis="720px"
>&lt;/p>
&lt;h2 id="其他发布模式">其他发布模式
&lt;/h2>&lt;h3 id="实验分支">实验分支
&lt;/h3>&lt;p>在代码基线上收集用于实验的工作，这些功能不会被直接合入产品环境&lt;/p>
&lt;p>实验性的点子
功能的不同实现方式&lt;/p>
&lt;h3 id="未来分支">未来分支
&lt;/h3>&lt;p>一个用于对其他分支侵入性太大的变更分支&lt;/p>
&lt;p>较少使用的模式，只会从主线pull而不会merge回其他分支。一旦使用，意味着团队中存在一个独立的代码特区。应尽可能缩短这个分支存在的时间。&lt;/p>
&lt;h3 id="合作分支">合作分支
&lt;/h3>&lt;p>用于开发者之间协同工作，但不需要进行正式的集成的情况。&lt;/p>
&lt;h3 id="团队集成分支">团队集成分支
&lt;/h3>&lt;p>在向主线集成前，允许子团队间先进行互相集成。（大型项目）&lt;/p>
&lt;hr>
&lt;p>原文参考Martin的博客 &lt;a class="link" href="https://martinfowler.com/articles/branching-patterns.html" target="_blank" rel="noopener"
>Branch Patterns&lt;/a>&lt;/p></description></item><item><title>Git工作原理和常用指令</title><link>https://chengxiaqiucao.github.io/post/024-git%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/</link><pubDate>Thu, 26 Sep 2024 00:00:00 +0000</pubDate><guid>https://chengxiaqiucao.github.io/post/024-git%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/</guid><description>&lt;img src="https://chengxiaqiucao.github.io/post/024-git%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/git.png" alt="Featured image of post Git工作原理和常用指令" />&lt;h2 id="序言">序言
&lt;/h2>&lt;p>作为一个有追求的测试工程师，现如今敏捷起来，需要和开发人员紧密配合，像配合单元测试、集成测试，都是需要直接面对开发代码的。而且自己做的自动化测试，本身也是代码，因此代码管理其实也是现在做测试绕不过的一个技能。&lt;/p>
&lt;p>而在和开发人员相爱相杀的过程中，直接冲进代码库，看看都写了什么见不得测试的勾当，也是咱们深度测试的高阶招数。&lt;/p>
&lt;p>不过这里首要一关，就是跟代码库打交道。所以本文我们来了解下现在最主流的 &lt;code>Git&lt;/code> 代码分支管理工具， 如何用正确的姿势操作代码库。&lt;/p>
&lt;h2 id="git是什么">Git是什么？
&lt;/h2>&lt;p>Git的作者是大名鼎鼎的Linus Torvalds, 众所周知，著名的 Linux 之父。&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/024-git%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/Pasted-20240926-1.png"
width="1338"
height="747"
srcset="https://chengxiaqiucao.github.io/post/024-git%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/Pasted-20240926-1_hu_34c10f21f7c649f.png 480w, https://chengxiaqiucao.github.io/post/024-git%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/Pasted-20240926-1_hu_924e7168506e8e94.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="179"
data-flex-basis="429px"
>&lt;/p>
&lt;p>Linux虽然获得了极大的成功，吸引了众多的开发者参与项目，但在早期，作为Linux项目的管理者，Linus主要还是通过手工方式来合并大家的代码。并没有借助任何代码管理工具。&lt;/p>
&lt;p>倒不是说 Linus 喜欢这种方式，而是因为他对代码版本管理工具非常挑剔，商用的 clearcase，开源的 CVS、SVN等等都不符合他对代码分支管理的预期。&lt;/p>
&lt;p>直到 2002 年，Linus 才相中了一款商用的分布式版本控制系统 BitKeeper，而基于Linux极大的号召力，BitKeeper也愿意让 Linux 社区免费使用。但到2005年，一位社区开发者在未经允许的情况下逆向了BitKeeper并利用了它未公开的接口，导致 BitKeeper 收回了社区的免费使用权。&lt;/p>
&lt;p>回到原点的Linus这时就决定自己开发一个代码的版本控制系统，对这个系统的基本诉求是：&lt;/p>
&lt;ul>
&lt;li>速度&lt;/li>
&lt;li>设计简单&lt;/li>
&lt;li>允许大量并行开发的分支&lt;/li>
&lt;li>完全分布式&lt;/li>
&lt;li>有能力高效管理类似 Linux 内核一样的超大规模项目&lt;/li>
&lt;/ul>
&lt;p>然后，大神的效率，Linus 只用了 10 天时间就推出了 Git 的第一个版本。并且给这个版本起了一个略带嘲讽意味的名字——Git（英语俚语中表示“不愉快的人”）。&lt;/p>
&lt;blockquote>
&lt;p>The name &amp;ldquo;git&amp;rdquo; was given by Linus Torvalds when he wrote the very first version. He described the tool as &amp;ldquo;the stupid content tracker&amp;rdquo; and the name as (depending on your way)&lt;/p>&lt;/blockquote>
&lt;p>当然，在 Linus 推出 Git 的第一个版本后，社区中开始有其他感兴趣的成员(Junio Hamano)开始参与并逐渐接手了 Git 的日常维护，Linus 则继续将主要精力放回到了 Linux 内核的维护上。&lt;/p>
&lt;h2 id="git-vs-svn">Git vs SVN
&lt;/h2>&lt;p>在 Git 之前，最流行的代码版本管理用工具应该是 SVN。&lt;/p>
&lt;p>不能说 SVN 有很大缺点，但 Git 和 SVN 的应用场景确实有较大区别，这里列表做个比较&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">特性&lt;/th>
&lt;th style="text-align: center">Git&lt;/th>
&lt;th style="text-align: center">SVN&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>分支&lt;/strong>&lt;/td>
&lt;td style="text-align: center">轻量级分支，创建快速&lt;/td>
&lt;td style="text-align: center">分支是代码库的完整拷贝&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>分支合并&lt;/strong>&lt;/td>
&lt;td style="text-align: center">快进式合并，合并快速&lt;/td>
&lt;td style="text-align: center">需要手动合并修改&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>分布式&lt;/strong>&lt;/td>
&lt;td style="text-align: center">是，设计为分布式&lt;/td>
&lt;td style="text-align: center">不是，不支持完全分布式&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>快照&lt;/strong>&lt;/td>
&lt;td style="text-align: center">保存更改的快照&lt;/td>
&lt;td style="text-align: center">保存文件的差异&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>速度&lt;/strong>&lt;/td>
&lt;td style="text-align: center">快，分布式设计&lt;/td>
&lt;td style="text-align: center">慢，中心化设计&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>权限控制&lt;/strong>&lt;/td>
&lt;td style="text-align: center">通过Git Hooks和Gitolite控制&lt;/td>
&lt;td style="text-align: center">通过钩子脚本控制&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>学习曲线&lt;/strong>&lt;/td>
&lt;td style="text-align: center">较高，需要理解命令和概念&lt;/td>
&lt;td style="text-align: center">较低，容易上手&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>标签&lt;/strong>&lt;/td>
&lt;td style="text-align: center">轻量级标签，可以后续修改&lt;/td>
&lt;td style="text-align: center">不可变的静态标签&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>历史记录&lt;/strong>&lt;/td>
&lt;td style="text-align: center">保留所有历史记录&lt;/td>
&lt;td style="text-align: center">只保留最近的历史记录&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>合并冲突&lt;/strong>&lt;/td>
&lt;td style="text-align: center">需要手动解决&lt;/td>
&lt;td style="text-align: center">自动尝试解决，有冲突时需手动介入&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>命令行工具&lt;/strong>&lt;/td>
&lt;td style="text-align: center">是，Git命令行强大灵活&lt;/td>
&lt;td style="text-align: center">较为简单，主要用于管理和操作仓库&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>总体来说，现在 Git 更为流行，围绕 Git 的生态更加健全，因此逐渐成为了目前最主流的版本控制工具&lt;/p>
&lt;h2 id="git的工作原理">Git的工作原理
&lt;/h2>&lt;p>那 Git 到底是如何进行工作的呢？&lt;/p>
&lt;p>git 在架构上其实是一个三层架构，&lt;/p>
&lt;ol>
&lt;li>&lt;strong>工作目录（working directory）&lt;/strong>： 这是项目文件所在的实际目录。对工作目录中的文件所做的修改被认为是“未跟踪”状态，直到显式地进行 commit 操作。&lt;/li>
&lt;li>&lt;strong>暂存区（staging area）&lt;/strong>：暂存区充当工作目录和 &lt;code>.git&lt;/code> 目录之间的缓冲地带。暂存区域中的文件处于“暂存”状态，以便在下一次 commit 时包含。是允许选择和控制更改的手段。&lt;/li>
&lt;li>&lt;strong>本地库（local repository）&lt;/strong>：也就是 &lt;code>.git&lt;/code> 目录， 它是Git版本控制系统的核心容器，包含各种元数据、对象数据库和配置信息。&lt;code>.git&lt;/code> 目录存储 commit 的快照，并管理项目的历史记录，接受git的各种操作指令。&lt;/li>
&lt;/ol>
&lt;p>而除了本地代码管理的这三层，还存在一个&lt;code>远程库&lt;/code>的概念，用于不同成员间对同一个项目代码进行协作。&lt;/p>
&lt;ol start="4">
&lt;li>&lt;strong>远程仓库（remote repository）：&lt;/strong> 远程仓库是一个中心仓库，用于团队成员协作，通过push、pull、merge等方式确保代码的同步和协同。&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/024-git%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/git-architechture.gif"
width="1600"
height="900"
srcset="https://chengxiaqiucao.github.io/post/024-git%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/git-architechture_hu_481a628f3cb08d92.gif 480w, https://chengxiaqiucao.github.io/post/024-git%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/git-architechture_hu_7330cee6f686572a.gif 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="177"
data-flex-basis="426px"
>&lt;/p>
&lt;p>结合上面这个架构和主要的Git操作命令，我们理解一下 git 的运作过程：&lt;/p>
&lt;ol>
&lt;li>首先我们通过 &lt;code>git init&lt;/code> 或者 &lt;code>git clone&lt;/code> 建立起本地的git仓库，也就是会包含 &lt;code>.git&lt;/code> 这个本地库目录。&lt;/li>
&lt;li>本地新增或修改的代码，这时其实是处于 &lt;code>未跟踪(untracked)&lt;/code> 状态&lt;/li>
&lt;li>执行 &lt;code>git add .&lt;/code>指令，这时相关变更会进入 &lt;code>暂存区&lt;/code>， 对应的状态是 &lt;code>已缓存(staged)&lt;/code> 或者 &lt;code>已修改(modified)&lt;/code>&lt;/li>
&lt;li>这时再执行 &lt;code>git commit&lt;/code>指令， 作用是从暂存区将变更提交到本地库中，对应状态是&lt;code>已提交(committed)&lt;/code>&lt;/li>
&lt;li>&lt;code>git diff&lt;/code> 是查看变更的命令，可以看到，它其实比较的是工作目录和暂存区的区别，而 &lt;code>git diff HEAD&lt;/code> 则比较本地库和工作目录&lt;/li>
&lt;li>&lt;code>git push&lt;/code> 会将本地库中的内容，提交到远程库&lt;/li>
&lt;li>&lt;code>git fetch&lt;/code> 用于将远程库同步到本地库&lt;/li>
&lt;li>我们常用的&lt;code>git pull&lt;/code>则是将远程库直接拉取到本地的工作目录下&lt;/li>
&lt;/ol>
&lt;h2 id="常用-git-命令">常用 Git 命令
&lt;/h2>&lt;p>借用一个中文的Git cheatsheet，便于速查。&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/024-git%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/Pasted-20240926-2.png"
width="990"
height="699"
srcset="https://chengxiaqiucao.github.io/post/024-git%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/Pasted-20240926-2_hu_3de360ecc490869f.png 480w, https://chengxiaqiucao.github.io/post/024-git%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/Pasted-20240926-2_hu_dd872a6b0c9a6353.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="141"
data-flex-basis="339px"
>&lt;/p>
&lt;p>详细的命令用法这里就不再罗列了，核心命令主要也就是上面原理图中提及到的几个。&lt;/p>
&lt;p>进一步学习的话，也可以利用在线的学习工具，这里推荐一个：&lt;/p>
&lt;p>&lt;a class="link" href="https://learngitbranching.js.org/" target="_blank" rel="noopener"
>https://learngitbranching.js.org/&lt;/a>&lt;/p></description></item><item><title>软件测试的目的到底是什么？</title><link>https://chengxiaqiucao.github.io/post/007-%E5%88%B0%E5%BA%95%E4%BB%80%E4%B9%88%E6%98%AF%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95%E7%9A%84%E7%9B%AE%E7%9A%84/</link><pubDate>Fri, 30 Aug 2024 20:35:21 +0800</pubDate><guid>https://chengxiaqiucao.github.io/post/007-%E5%88%B0%E5%BA%95%E4%BB%80%E4%B9%88%E6%98%AF%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95%E7%9A%84%E7%9B%AE%E7%9A%84/</guid><description>&lt;img src="https://chengxiaqiucao.github.io/post/007-%E5%88%B0%E5%BA%95%E4%BB%80%E4%B9%88%E6%98%AF%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95%E7%9A%84%E7%9B%AE%E7%9A%84/testing.png" alt="Featured image of post 软件测试的目的到底是什么？" />&lt;h2 id="对测试工作目的的认识误区">对测试工作目的的认识误区
&lt;/h2>&lt;p>在IT行业，其实一直对软件测试，测试这个工作的目的，一直有着不太准确的认识。&lt;/p>
&lt;p>各种说法都有，比较流行，被很多IT工作甚至测试从业者认可的有下面两种：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>测试是为了发现Bug&lt;/strong>&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>大家一般概念中通常都会把做测试和找Bug等同起来，也就是说软件测试的目的是为了发现产品中的问题。&lt;/p>&lt;/blockquote>
&lt;ul>
&lt;li>&lt;strong>测试是为了验证产品满足需求&lt;/strong>&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>也有从测试执行的角度来说，测试工作是为了证明软件产品是符合产品需求定义，是为了验证需求是否实现的。&lt;/p>&lt;/blockquote>
&lt;p>那这些说法对不对呢？ 可以说对，也可以说不对&lt;/p>
&lt;p>确实，测试工作的主要产出就是我们发现的各种产品bug，而要验证需求则是我们测试工作的主要输入和评估标准。&lt;/p>
&lt;p>但这些就是我们要进行测试工作的目的吗？&lt;/p>
&lt;p>单纯把测试工作的目的从上面几点来看就狭隘了。&lt;/p>
&lt;h3 id="测试是为了找bug吗">测试是为了找Bug吗？
&lt;/h3>&lt;p>我们做测试工作是为了发现bug吗？&lt;/p>
&lt;p>bug对于产品来说，意味着成本，bug本身对产品来说是不会产生价值的。被解决掉的Bug才会带来产品质量的提升，进而体现到产品的价值中去。bug的减少，对产品才有价值。&lt;/p>
&lt;p>所以，单纯地把发现更多bug作为测试工作目的是一个误区，这也是很多团队错误地把发现bug的数量作为测试工作成效依据的主要原因。如果bug发现得越多代表测试工作越好，测试人员是不是就不应该再早期阶段去参与？因为在前期就规避掉的问题其实会导致到测试阶段bug变少，如果测试工作是希望发现更多bug，是不是就应该希望产品提测的时候包含更多bug呢？ 这个导向显然是不符合产品利益的。&lt;/p>
&lt;p>因此把发现bug作为测试工作的目的是一个常见的，明显的对测试工作的认识误区&lt;/p>
&lt;h3 id="测试就是为了验证需求吗">测试就是为了验证需求吗？
&lt;/h3>&lt;p>第二个对测试工作目的的认识误区，就是认为测试工作就是为了验证产品的需求。这其实是另一个被广泛接受的错误认识。甚至我们当今流传广泛的很多软件工程实践，都是建立在这个错误认识之上的。&lt;/p>
&lt;p>测试大牛James Bach有篇著名的论文，探讨了Testing跟Checking的区别。&lt;/p>
&lt;p>也就是测试工作远远不止是checking。而验证需求，这样的checking只是测试工作的一部分。测试要深入产品、发现潜在的深层问题，还需要除了checking之外的更多其他能力支撑，包括探索、试验、设问、推理等等&lt;/p>
&lt;p>&lt;img src="https://chengxiaqiucao.github.io/post/007-%E5%88%B0%E5%BA%95%E4%BB%80%E4%B9%88%E6%98%AF%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95%E7%9A%84%E7%9B%AE%E7%9A%84/Pasted-20240830.png"
width="833"
height="582"
srcset="https://chengxiaqiucao.github.io/post/007-%E5%88%B0%E5%BA%95%E4%BB%80%E4%B9%88%E6%98%AF%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95%E7%9A%84%E7%9B%AE%E7%9A%84/Pasted-20240830_hu_25cc6891f9026da1.png 480w, https://chengxiaqiucao.github.io/post/007-%E5%88%B0%E5%BA%95%E4%BB%80%E4%B9%88%E6%98%AF%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95%E7%9A%84%E7%9B%AE%E7%9A%84/Pasted-20240830_hu_70c44345306bceff.png 1024w"
loading="lazy"
alt="Testing vs Checking"
class="gallery-image"
data-flex-grow="143"
data-flex-basis="343px"
>&lt;/p>
&lt;p>所以，把验证需求，当作测试工作的目的，是不够的。像工厂质检那样依据严格的规程来确定产品是否合格，和软件产品这种偏创造性的行业也并不匹配。这也是我们说自动化测试更多是为了提升执行效率和快速得到已覆盖场景的验证结果反馈，但自动化测试本身并不能达到完成产品测试的目的。&lt;/p>
&lt;p>测试除了验证需求中明确的功能外，还需要针对交付产品进行更深度的探索，才更可能充分发现产品中的质量问题。这也是近年探索式测试被更多提及的主要缘由。&lt;/p>
&lt;h2 id="软件测试工作的真正目的">软件测试工作的真正目的
&lt;/h2>&lt;p>好，那既然测试工作的目的既不是为了找Bug，也不是为了验证需求，那目的究竟是什么呢？&lt;/p>
&lt;blockquote>
&lt;p>软件测试的真正目的： &lt;strong>准确&lt;/strong>、&lt;strong>及时&lt;/strong>地&lt;strong>评估&lt;/strong>出被测对象的&lt;strong>质量状态&lt;/strong>&lt;/p>&lt;/blockquote>
&lt;p>这里的核心是&lt;strong>评估质量状态&lt;/strong>。质量是产品属性，只能通过产品本身的变更来调整，所以测试工作无法提高质量，也无法保证质量。但通过测试工作，我们可以通过暴露产品中的问题，反映出产品的质量状态。我们的主要作用是对当前产品的质量进行评估。再由产品或项目针对这个状态来对质量进行改进。&lt;/p>
&lt;p>所以测试工作对于质量的贡献更多体现在这个评估出的质量状态是否及时和准确两方面。&lt;/p>
&lt;h3 id="准确评估">准确评估
&lt;/h3>&lt;p>测试无法穷尽，在有限的时间内发现产品的所有问题也是不可能的。但测试的职责是需要在有限的时间内，尽可能多地将影响产品质量的问题暴露出来。这里除了数量外，我们还要看问题的影响，综合这两点，才是更准确地反映质量。&lt;/p>
&lt;h3 id="及时评估">及时评估
&lt;/h3>&lt;p>产品是无法进行无限测试的，而且测试工作其实本身是成本支出。所以通过测试工作得出产品质量状态的时效对于产品的质量改进和成本控制也尤为关键。问题发现得越早，修复成本就越低；得出质量状态评估的时间越短，产品进行针对性改进的空间就越大。所以测试工作的目的，还包括提高测试效率，通过自动化、测试左移等手段来尽可能及时地完成产品质量评估。&lt;/p>
&lt;p>所以这才是我们进行软件测试工作的真正目的，不是为了发现更多的bug，也不是仅仅是对需求实现的检查，而是通过我们的专业能力，在有限的时间内，及时、充分地反映出当前产品实际的质量状态。&lt;/p>
&lt;p>以上就是关于软件测试工作目的 的分享，我是城下秋草。 &lt;strong>秋草观测台，观察测试业&lt;/strong>&lt;/p>
&lt;hr>
&lt;p>推广下我的测试课程，感兴趣的小伙伴可以通过以下链接了解下哦&lt;/p>
&lt;p>❤️❤️❤️❤️ &lt;a class="link" href="https://coding.imooc.com/class/chapter/885.html#Anchor" target="_blank" rel="noopener"
>城下秋草的测试职业进阶提升课&lt;/a> ❤️❤️❤️❤️&lt;/p></description></item><item><title>提 Bug 的艺术</title><link>https://chengxiaqiucao.github.io/post/bug-art/</link><pubDate>Sat, 19 Aug 2023 00:00:00 +0000</pubDate><guid>https://chengxiaqiucao.github.io/post/bug-art/</guid><description>&lt;h3 id="前言">前言
&lt;/h3>&lt;p>作为测试工程师最重要的工作产出，Bug Report（或者故障单、问题单）是测试工程师工作成果的直接体现，也是最能呈现测试工程师价值和能力的输出物。但项目干系人甚至测试工程师本身对Bug Report的重要性往往认识不足，Bug 单的内容及其提交方式、处理流程对项目推进、运作效率甚至团队士气都有重要影响。&lt;/p>
&lt;p>行业针对 Bug Report 的讨论和总结还比较少，本篇我们希望以笔者多年的从业观察出发，对 Bug report 的要素及专业测试工程师的处理方式给出一些总结和建议，意在抛砖引玉，错漏之处还请多多指正。&lt;/p>
&lt;p>主要包含以下内容：&lt;/p>
&lt;ul>
&lt;li>Bug 是什么，Bug 报告单是什么&lt;/li>
&lt;li>开发或项目团队看到 Bug 实际希望获取的信息是什么&lt;/li>
&lt;li>测试小白在提 Bug 时的常见错误做法&lt;/li>
&lt;li>提 Bug 与说故事&lt;/li>
&lt;li>专业测试工程师如何高质量地提交 Bug&lt;/li>
&lt;/ul>
&lt;h3 id="何为bug-bug的历史">何为Bug？ Bug的历史
&lt;/h3>&lt;p>Bug 一词在英文中本是虫子，臭虫之意，现在 IT 行业用它来代指软件中存在的缺陷，其实这个历史还比较有意思：&lt;/p>
&lt;p>早在 1878 年，大发明家爱迪生就在给朋友的信中就用 bug 一词代指过电子电路中的故障（或可能导致故障的原因），但是真正在计算机行业载入史册还要到 1947 年 9 月 9 日。&lt;/p>
&lt;p>这时第一批写程序的程序员们正在哈佛大学研发 markII 计算机，其中 [Grace Murray Hopper][1] 在查找一个问题时，在中继器触点旁发现了一个飞蛾，用日志本拍死了它，并标记它为“第一个找到 bug 的真实案例”。由此 bug 一词便被用来代指计算机中的缺陷或故障。相应地 debug 则被用来指代去除故障的调测行为。&lt;/p>
&lt;p>下图即保存在美国管家博物馆的史上第一个 bug 实物：
&lt;img src="https://chengxiaqiucao.github.io/post/bug-art/20240820134227.png"
width="743"
height="599"
srcset="https://chengxiaqiucao.github.io/post/bug-art/20240820134227_hu_e82606b7db3ba596.png 480w, https://chengxiaqiucao.github.io/post/bug-art/20240820134227_hu_b4619dde3aa4f924.png 1024w"
loading="lazy"
alt="first bug"
class="gallery-image"
data-flex-grow="124"
data-flex-basis="297px"
>&lt;/p>
&lt;p>史上第一批程序员，其中唯一的女性就是“虫”母：
&lt;img src="https://chengxiaqiucao.github.io/post/bug-art/20240820134247.png"
width="888"
height="588"
srcset="https://chengxiaqiucao.github.io/post/bug-art/20240820134247_hu_92d04c99af73787e.png 480w, https://chengxiaqiucao.github.io/post/bug-art/20240820134247_hu_cb11bc7065bce58e.png 1024w"
loading="lazy"
alt="bug mother"
class="gallery-image"
data-flex-grow="151"
data-flex-basis="362px"
>&lt;/p>
&lt;p>总之，现在 Bug 一词可以代指软件或程序中存在的缺陷或者故障。但对于项目团队来说，建议不要简单地将 Bug 定义成&lt;code>故障&lt;/code>，因为&lt;code>故障&lt;/code>一词定性上有否定的意味，而将 Bug 视作&lt;code>缺陷&lt;/code>、或者&lt;code>问题&lt;/code>，强调&lt;strong>可改进空间&lt;/strong>对项目团队更加有积极的引导作用。&lt;/p>
&lt;h3 id="bug-report-问题单是什么">Bug Report （问题单）是什么?
&lt;/h3>&lt;p>report 这个词在英文中既可作动词也可作名词。所以 &lt;code>Bug report&lt;/code> 既可表示发现问题并报告的这个动作，也可以指问题发现后提交的报告内容。 这里我们一般还是将它看作是问题报告(名词)，即 &lt;code>问题单&lt;/code>，那么&lt;code>问题单&lt;/code>到底是什么呢？&lt;/p>
&lt;p>测试大神 Cem Kaner 曾指出:&lt;/p>
&lt;blockquote>
&lt;p>The purpose of testing is not to find bugs. The purpose is to get bugs fixed.&lt;/p>
&lt;p>测试的目的不是发现 Bug, 而是使 Bug 被修复。&lt;/p>&lt;/blockquote>
&lt;p>这个观点其实指出了很多测试人员认识上的一个误区，就是觉得测试工作就是尽可能多地发现 Bug。 其实对团队来说，发现的 Bug 再多，最终还是要解决掉才能体现这些 Bug 被发现的价值。&lt;/p>
&lt;p>而从发现到被解决， &lt;code>问题单&lt;/code> 是其中的主要媒介，既是测试人员测试工作的输出，又是开发人员解决问题的输入，重要性不言而喻。&lt;/p>
&lt;p>另外，虽然将发现的问题知会给开发人员有各种形式：口头告知、实际演示、电子邮件、IM聊天等等都可以起到知会的作用。但在现代软件研发过程中，一般还会有专门的系统来进行缺陷追踪，如 JIRA、禅道、bugfree、QC（HP quality center） 等软件都能进行缺陷的提交和跟踪。通过这些专门的系统，不仅能够起到记录和反馈的作用，还能够通过统计和分析更好地反映出项目整体的质量状况和研发进展。&lt;/p>
&lt;p>因此：&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;code>问题单&lt;/code> 是测试人员测试活动中发现缺陷后的输出&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>问题单&lt;/code> 是开发人员解决缺陷的输入&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>问题单&lt;/code> 是测试人员和开发人员之间针对 Bug 的沟通媒介&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>问题单&lt;/code> 还是项目团队评估当前研发状态和产品成熟度的指示器。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="问题单的作用和重要性">问题单的作用和重要性
&lt;/h3>&lt;p>相信很多测试工程师在提交问题单后，都有得到如下一些反馈或抱怨的经历：&lt;/p>
&lt;ul>
&lt;li>
&lt;p>你这个问题单到底想说明啥？&lt;/p>
&lt;/li>
&lt;li>
&lt;p>在我这里运行没有这个问题&lt;/p>
&lt;/li>
&lt;li>
&lt;p>为什么你提交的这个算是缺陷？&lt;/p>
&lt;/li>
&lt;li>
&lt;p>一般人不会像问题单那样使用软件，脑子有问题的人才会那样用&lt;/p>
&lt;/li>
&lt;li>
&lt;p>这个确实是问题，但是修复成本太大，而且也可以换种操作方式来规避&lt;/p>
&lt;/li>
&lt;li>
&lt;p>你虽然认为这是个问题，但是实际用户不会觉得不好&lt;/p>
&lt;/li>
&lt;li>
&lt;p>你提交的虽然确实是问题，但是影响用户很小。那些影响用户更大的部分为什么看不到多少问题单？&lt;/p>
&lt;p>&amp;hellip;&amp;hellip;&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>测试人员当然不希望得到这样的反馈。但这些问题也从侧面反映出在对待 Bug 这件事上，开发人员或项目团队更加注重的其实是 Bug 如何解决（包括是否&lt;strong>需要&lt;/strong>解决的判断），他们更希望从&lt;code>问题单&lt;/code>中获知的是如下的一些信息：&lt;/p>
&lt;ul>
&lt;li>
&lt;p>所发现的什么问题？&lt;/p>
&lt;ul>
&lt;li>问题现象是什么？&lt;/li>
&lt;li>总是会出现吗？&lt;/li>
&lt;li>发现这个问题时的背景、上下文是什么？&lt;/li>
&lt;li>除了看到的现象，系统同时还发生了什么？&lt;/li>
&lt;li>有没有截图、日志、录屏？&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>为什么它是个问题？&lt;/p>
&lt;ul>
&lt;li>这个问题有什么影响？&lt;/li>
&lt;li>不解决它会怎么样？&lt;/li>
&lt;li>发生概率怎么样？&lt;/li>
&lt;li>有没有和其他问题重复？&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>是做了什么操作，暴露出的这个问题？&lt;/p>
&lt;ul>
&lt;li>输入是什么？&lt;/li>
&lt;li>用了什么测试路径？测试数据？&lt;/li>
&lt;li>所在测试环境、软件版本如何？&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>所以，作为测试，不应把&lt;code>问题单&lt;/code>看作是一个简单的问题记录，它是测试和开发之间的重要沟通媒介，好的问题单可以极大减少双方的沟通成本，既极大减轻开发人员解决问题的工作量，同时也减少测试人员澄清、重复验证等的工作量。对项目来说，&lt;code>问题单&lt;/code>的提交质量，影响的就是团队的生产力以及交付速度，不容小觑。&lt;/p>
&lt;h3 id="问题单的要素">问题单的要素
&lt;/h3>&lt;p>了解了&lt;code>问题单&lt;/code>的作用，那么&lt;code>问题单&lt;/code>中应该包含的要素也就比较清楚了，一般有以下方面：&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;strong>方便初步判断的标题&lt;/strong>&lt;/p>
&lt;p>标题应该能够比较清楚地概要说明问题，以及这个问题所处的模块。便于开发人员作一个初步的判断&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>上下文及必要的关联信息&lt;/strong>&lt;/p>
&lt;p>发生问题时的上下文背景，关联的信息如软件版本、测试环境、配置情况、资源状态等&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>准确合理的详细描述信息&lt;/strong>&lt;/p>
&lt;p>详细描述问题发现的步骤，操作预期，实际发生的状况。问题发生频率，所使用的测试输入、数据、文件等&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>帮助问题解决的补充信息&lt;/strong>&lt;/p>
&lt;p>能够帮助开发人员加快解决问题进度的补充信息，比如截图、录屏、操作日志、系统日志等&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>帮助项目决策的辅助信息&lt;/strong>&lt;/p>
&lt;p>测试人员作为 Bug 的第一判断者，应给出问题的严重程度、解决优先级建议。初步指派解决问题的开发人员，以及便于统计、追踪的关联信息标识。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="测试小白的错误做法">测试小白的错误做法
&lt;/h3>&lt;p>那么结合&lt;code>问题单&lt;/code>的要素，我们可以初步总结一些测试小白或者不专业测试在提交 Bug 时常见的一些错误做法：&lt;/p>
&lt;ul>
&lt;li>
&lt;p>标题不够明确&lt;/p>
&lt;p>标题非常简单，不便于初步判断问题。比如简单地写 “系统 crash”，太过笼统，而且过于简单的标题很容易产生雷同，对问题的集中回顾、评审都带来很多不便。&lt;/p>
&lt;p>或者过于复杂。太长的标题，容易导致阅读疲劳，没有重点。比如标题中详细描写操作步骤就没什么必要&lt;/p>
&lt;/li>
&lt;li>
&lt;p>脱离实际，偏离需求场景。&lt;/p>
&lt;p>有时候测试小白会从个人偏好角度出发，想当然地提出一些问题。“我觉得”、“感觉上不好” 是这类小白问题中出现的高频词汇。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>不是问题&lt;/p>
&lt;p>测试小白，往往因为对系统实现原理理解上的错误或技能水平上的不足，提交出不是 bug 的问题单。&lt;/p>
&lt;p>还有因为测试小白的测试方法或者环境配置本身就是不正确的，由此导致的问题&lt;/p>
&lt;/li>
&lt;li>
&lt;p>描述信息不足&lt;/p>
&lt;p>典型的，通过问题单的描述信息，开发人员不足以确认问题现象或自行复现。测试小白往往觉得发现问题就完成工作，没有把充分的信息提供给开发人员，比如截图、日志等。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>无关信息过多、格式杂乱&lt;/p>
&lt;p>有时小白的问题单中会包含太多冗余的嘈杂信息，很难看到重点。比如不分青红皂白把几万行的 log 贴到问题单中&lt;/p>
&lt;p>或者完全不进行排版，一大堆信息杂乱地混杂在一起，阅读难度极高&lt;/p>
&lt;/li>
&lt;li>
&lt;p>问题过多&lt;/p>
&lt;p>问题单应该聚焦，有时测试小白会在同一个问题单中包含很多个不同的问题。这对于问题追踪和聚焦都非常不利&lt;/p>
&lt;/li>
&lt;li>
&lt;p>只看现象不考虑本质&lt;/p>
&lt;p>有时候简单的问题现象，往往是一些严重问题的体现或线索。小白往往会忽视重要的风险，对一些看似蛛丝马迹的问题视而不见，将潜藏在现象之下的 Bug 轻易漏过。比如有些预期外的提示信息，往往是后台计算、统计准确性等 Bug 的体现。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="提-bug-与说故事">提 Bug 与说故事
&lt;/h3>&lt;p>再回到 &lt;code>提交 Bug&lt;/code> 这件事，本质上，这其实是一个沟通的过程，&lt;code>问题单&lt;/code> 承载了这个沟通媒介的作用，通过&lt;code>问题单&lt;/code>，测试人员将自己在测试过程中看到的、发现到的问题描述出来，开发人员通过阅读&lt;code>问题单&lt;/code>，掌握到对应信息并相应地去解决问题。&lt;/p>
&lt;p>所以&lt;code>提 Bug&lt;/code> 其实和写一个小短文，说一个小故事一样，测试人员是作者，而开发人员是读者。&lt;/p>
&lt;p>我们在提&lt;code>问题单&lt;/code>时，其实也是写作的一种。写作的 &lt;strong>5W&lt;/strong> 要求也一样适用：&lt;/p>
&lt;ul>
&lt;li>
&lt;p>What 内容&amp;ndash;具体的问题是什么？&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Why 目的&amp;ndash;为什么要提出这个问题？为什么它是个问题？&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Who 主体-问题主体是谁？关联方有谁？？&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Where 地点&amp;ndash;问题发生在哪？&lt;/p>
&lt;/li>
&lt;li>
&lt;p>When 时间&amp;ndash;在什么时间和频率下发生？&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>提 Bug 时思考这 &lt;strong>5W&lt;/strong>，再结合上文提到问题单要素，一般就不会犯很多测试新手在提问题单时常犯的错误了。&lt;/p>
&lt;h3 id="提-bug-的艺术">提 Bug 的艺术
&lt;/h3>&lt;p>上文阐述问题单的要素以及 提Bug 时应注意的一些细节，但是为什么我们还要说提 Bug 其实是一件艺术性的工作？&lt;/p>
&lt;p>我们来举几个问题单的例子：&lt;/p>
&lt;p>假设有一个商品管理系统，用户在某个特定商品分类下（水果）新增商品时会发生crash&lt;/p>
&lt;p>&lt;strong>问题单 例一：&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">用户新增商品，发生Crash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">如图所示（crash界面截图）
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这个问题单通过提供截图其实基本描述了问题现象。但是对开发人员来说，信息量太少，而且很有可能并不能第一时间复现问题（水果分类）。问题单中包含的信息太过于简单，可以说是非常糟糕的问题单案例。&lt;/p>
&lt;p>&lt;strong>问题单 例二：&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">用户在新增商品时，会发生Crash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">操作步骤：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1. 打开App
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2. 用户登录系统，输入正确的用户名、密码并登录
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">3. 进入商品管理页面
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">4. 选择分类：水果
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5. 点击新建商品按钮
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">6. 输入商品信息：*********
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">7. 点击提交按钮
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">预期结果：商品创建成功App
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">实际结果：发生 crash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">使用的设备机型：xiaomi 8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">操作系统版本：android 8.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">软件版本 V1.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">附件：crash截图
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这个问题单，是很多测试小白常见的提单形式，包含了非常详细的操作步骤和相关辅助信息。但是这也是一个非常糟糕的问题单。
首先，这样的步骤描述毫无必要，开发人员不会连打开app、登录、提交这样的操作也不了解需要在问题单中交代
其次，辅助信息虽多，但是基本和问题原因无关，并不利于开发人员定位，反而引入了一些干扰信息。
这样的问题单，无法体现测试人员的专业价值，对问题的快速解决也没有好处&lt;/p>
&lt;p>&lt;strong>问题单 例三：&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">用户在水果分类下进行新增商品操作时，会发生Crash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">操作步骤：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1. 选择水果分类，创建商品，发生crash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2. 选择非水果分类，创建商品，商品创建成功
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">已验证机型：xiaomi 8，huawei mate 7 等现象一致，应和机型、操作系统、版本无关
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">附件：错误截图、系统 crash 时的 logcat 日志
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">影响：用户无法新增水果分类商品，直接影戏用户使用。需高优先级解决
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>此问题单已经可以算比较合格的问题单了，比较明确地指明了问题发生的场景，并将一些无关信息进行了初步排除。开发人员可以聚焦在水果这个类别下的商品创建进行问题分析。
同时指出了问题对软件的影响和解决优先级建议，使项目团队明确知道这个问题的影响所在&lt;/p>
&lt;p>&lt;strong>问题单 例四：&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">用户在水果分类下进行新增商品操作时，会发生空指针Crash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">操作步骤：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1. 选择水果分类，创建商品，发生crash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2. 选择非水果分类，创建商品，商品创建成功
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">3. 对已有水果分类下的商品进行编辑操作，可以编辑成功
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">后台数据库对水果分类因字段缺失insert操作出错，update操作正常。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">已验证机型：xiaomi 8，huawei mate 7 等现象一致，应和机型、操作系统、版本无关
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">附件：错误截图、系统 crash 时的 logcat 日志
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">影响：用户无法新增水果分类商品，直接影戏用户使用。需高优先级解决
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这个问题单，则在上一个问题单基础上更进一步，初步分析出了问题原因，新增操作时，有一个关键字段信息未包含，所以导致的crash。开发人员已经可以很明确地对问题进行修复了&lt;/p>
&lt;p>&lt;strong>问题单 例五：&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">用户在水果分类下进行新增商品操作时，会发生空指针Crash。导入商品操作旧模板也同样存在问题。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">操作步骤：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1. 选择水果分类，创建商品，发生crash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2. 选择非水果分类，创建商品，商品创建成功
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">3. 对已有水果分类下的商品进行编辑操作，可以编辑成功
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">后台数据库对水果分类因字段缺失insert操作出错，update操作正常。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">在商品管理导入商品功能中，新模板水果商品导入成功，使用旧模板（未包含新增字段）导入水果数据，也会发生失败。需一并修复。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">已验证机型：xiaomi 8，huawei mate 7 等现象一致，应和机型、操作系统、版本无关
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">附件：错误截图、系统 crash 时的 logcat 日志、新旧模板导入日志
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">影响：用户无法新增水果分类商品，直接影戏用户使用。需高优先级解决
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这个问题单，则在上一个例子的基础上，根据测试人员的经验，推理出有类似逻辑的导入功能，可能存在同样问题并进行了验证。很好体现了测试人员专业能力。&lt;/p>
&lt;p>通过以上这个简单的案例，我们可以看到，不同的问题单提法，对问题解决效果却有很大差距。&lt;/p>
&lt;ul>
&lt;li>
&lt;p>包含的信息太少，开发人员难以确定产生 Bug 的根本原因，Debug 的工作量成倍上升。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>包含的信息过多，开发人员又会耗费额外的精力去分析那些冗余的信息，甚至干扰调试、解决的方向，同样造成很大的工作量浪费&lt;/p>
&lt;/li>
&lt;li>
&lt;p>越是能清晰、明确地反映问题的根本原因，开发人员解决问题就越是高效。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>测试人员的经验和判断推理能力，通过问题单能够很好地得到体现&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>所以为什么说提 Bug 是个艺术性的工作？问题单既不能太过简单，也不应太过冗杂，还要能够将信息尽可能准确、全面地传递给开发，这真的是一件非常艺术性的事情。&lt;/p>
&lt;h3 id="结语">结语
&lt;/h3>&lt;p>总而言之，提 Bug 在软件研发过程中，是一件相当重要的活动，&lt;code>问题单&lt;/code>的质量直接影响团队的效率和产出。作为专业的测试人员，掌握提 Bug 的艺术，&lt;code>问题单&lt;/code>不在是个简单的问题记录，更是测试和开发间的沟通桥梁，是帮助开发高效修复 Bug 的支撑。&lt;/p>
&lt;p>欢迎大家关注评论，也可关注公众号： &lt;strong>秋草说测试&lt;/strong>&lt;/p></description></item></channel></rss>
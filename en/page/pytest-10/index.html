<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="Pytest Releases History (latest 10) pytest 8.3.5 (2025-03-02) Bug fixes #11777: Fixed issue where sequences were still being shortened even with -vv verbosity.\n#12888: Fixed broken input when using Python 3.13+ and a libedit build of Python, such as on macOS or with uv-managed Python binaries from the python-build-standalone project. This could manifest e.g. by a broken prompt when using Pdb, or seeing empty inputs with manual usage of input() and suspended capturing.\n"><title>Pytest Releases History (latest 10)</title><link rel=canonical href=https://chengxiaqiucao.github.io/en/page/pytest-10/><link rel=stylesheet href=/scss/style.min.d6334826c849a420a2748e4872b915ae516105f86c3993d9bad2032725f784b8.css><meta property='og:title' content="Pytest Releases History (latest 10)"><meta property='og:description' content="Pytest Releases History (latest 10) pytest 8.3.5 (2025-03-02) Bug fixes #11777: Fixed issue where sequences were still being shortened even with -vv verbosity.\n#12888: Fixed broken input when using Python 3.13+ and a libedit build of Python, such as on macOS or with uv-managed Python binaries from the python-build-standalone project. This could manifest e.g. by a broken prompt when using Pdb, or seeing empty inputs with manual usage of input() and suspended capturing.\n"><meta property='og:url' content='https://chengxiaqiucao.github.io/en/page/pytest-10/'><meta property='og:site_name' content='Testing Observation'><meta property='og:type' content='article'><meta property='article:section' content='Page'><meta property='article:tag' content='Open Source'><meta property='article:published_time' content='2025-04-15T00:00:00+00:00'><meta property='article:modified_time' content='2025-04-15T00:00:00+00:00'><meta name=twitter:title content="Pytest Releases History (latest 10)"><meta name=twitter:description content="Pytest Releases History (latest 10) pytest 8.3.5 (2025-03-02) Bug fixes #11777: Fixed issue where sequences were still being shortened even with -vv verbosity.\n#12888: Fixed broken input when using Python 3.13+ and a libedit build of Python, such as on macOS or with uv-managed Python binaries from the python-build-standalone project. This could manifest e.g. by a broken prompt when using Pdb, or seeing empty inputs with manual usage of input() and suspended capturing.\n"></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/en/><img src=/img/automnGrass_hu_5e44a092fd905642.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/en>Testing Observation</a></h1><h2 class=site-description>Testing is not just checking...</h2></div></header><ol class=menu-social><li><a href=https://github.com/chengxiaqiucao target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://space.bilibili.com/472272606 target=_blank title=Bilibili rel=me><!doctype html><svg t="1750732982440" class="icon" viewBox="0 0 1024 1024" p-id="4593" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M306.005333 117.632 444.330667 256h135.296l138.368-138.325333A42.666667 42.666667.0 01778.368 178.048L700.330667 256H789.333333A149.333333 149.333333.0 01938.666667 405.333333v341.333334A149.333333 149.333333.0 01789.333333 896H234.666667A149.333333 149.333333.0 0185.333333 746.666667V405.333333A149.333333 149.333333.0 01234.666667 256h88.96L245.632 177.962667a42.666667 42.666667.0 0160.373333-60.373334zm483.328 223.701333H234.666667a64 64 0 00-63.701334 57.856L170.666667 405.333333v341.333334a64 64 0 0057.856 63.701333L234.666667 810.666667h554.666666a64 64 0 0063.701334-57.856L853.333333 746.666667V405.333333a64 64 0 00-64-64zm-448 128A42.666667 42.666667.0 01384 512v85.333333a42.666667 42.666667.0 01-85.333333.0V512a42.666667 42.666667.0 0142.666666-42.666667zm341.333334.0A42.666667 42.666667.0 01725.333333 512v85.333333a42.666667 42.666667.0 01-85.333333.0V512a42.666667 42.666667.0 0142.666667-42.666667z" p-id="4594" fill="#8a8a8a"/></svg></a></li><li><a href=https://www.zhihu.com/people/qiucao target=_blank title=zhihu rel=me><!doctype html><svg t="1750733049138" class="icon" viewBox="0 0 1024 1024" p-id="5820" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M570.581333 806.272h61.952L652.928 876.117333 764.074667 806.272h130.986666V230.186667h-324.48V806.272zM636.501333 292.693333h192.64V743.68h-73.898666l-73.813334 46.378667L668.032 743.808l-31.530667-.128V292.736zM515.754667 493.738667H377.429333a2999.466667 2999.466667.0 005.802667-194.56h135.338667S523.776 239.445334 495.872 240.128H261.76c9.216-34.730667 20.821333-70.613333 34.688-107.690667.0.0-63.701333.0-85.333333 57.130667C202.112 213.12 176.128 303.786667 129.877333 396.416c15.573333-1.706667 67.114667-3.114667 97.450667-58.794667 5.589333-15.616 6.656-17.621333 13.568-38.485333h76.373333c0 27.776-3.157333 177.109333-4.437333 194.474667h-138.24c-31.104.0-41.173333 62.549333-41.173333 62.549333h173.482666C295.253333 688.256 232.789333 799.573333 119.466667 887.466667c54.186667 15.488 108.202667-2.432 134.912-26.197334.0.0 60.8-55.338667 94.122666-183.381333L491.264 849.834667s20.906667-71.168-3.285333-105.856c-20.053333-23.637333-74.24-87.552-97.322667-110.72l-38.698667 30.72c11.52-36.992 18.474667-72.96 20.821334-107.690667h163.072s-.213333-62.549333-20.053334-62.549333z" p-id="5821" fill="#8a8a8a"/></svg></a></li><li><a href=mailto:%20danmyw@qq.com target=_blank title=e-mail rel=me><!doctype html><svg t="1750733089669" class="icon" viewBox="0 0 1451 1024" p-id="6983" xmlns:xlink="http://www.w3.org/1999/xlink" width="283.3984375" height="200"><path d="M664.781909 681.472759.0 97.881301C0 3.997201 71.046997.0 71.046997.0H474.477909 961.649408h399.992405s71.046998 3.997201 71.046998 97.881301L771.345323 681.472759S764.482731 685.154773 753.594283 688.65053V688.664858C741.602731 693.493018 729.424896 695.068979 718.077952 694.839748 706.731093 695.068979 694.553173 693.493018 682.561621 688.664858V688.65053C671.644501 685.140446 664.781909 681.472759 664.781909 681.472759zm53.281707 130.131124C693.779541 811.016482 658.879232 802.205449 619.10784 767.734955 542.989056 701.759633.0 212.052267.0 212.052267V942.809523S0 1024 83.726336 1024H682.532949 753.579947h595.368192C1432.688811 1024 1432.688811 942.809523 1432.688811 942.809523V212.052267S893.138176 701.759633 817.019477 767.734955c-39.771477 34.470494-74.671786 43.295855-98.955861 43.868928z" fill="#8a8a8a" p-id="6984"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/en/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/en/page/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/en/page/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/en/page/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li><a href=/en/page/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About..</span></a></li><li><a href=/en/page/releases/><svg class="icon icon-tabler icon-tabler-infinity" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M9.828 9.172a4 4 0 100 5.656A10 10 0 0012 12a10 10 0 012.172-2.828 4 4 0 110 5.656A10 10 0 0112 12 10 10 0 009.828 9.172"/></svg>
<span>OpenSources</span></a></li><li class=menu-bottom-section><ol class=menu><li id=i18n-switch><svg class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg>
<select name=language title=language onchange="window.location.href=this.selectedOptions[0].value"><option value=https://chengxiaqiucao.github.io/en/ selected>English</option><option value=https://chengxiaqiucao.github.io/>中文</option></select></li><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#pytest-835-2025-03-02>pytest 8.3.5 (2025-03-02)</a><ol><li><a href=#bug-fixes>Bug fixes</a></li><li><a href=#improved-documentation>Improved documentation</a></li><li><a href=#contributor-facing-changes>Contributor-facing changes</a></li></ol></li><li><a href=#pytest-834-2024-12-01>pytest 8.3.4 (2024-12-01)</a><ol><li><a href=#bug-fixes-1>Bug fixes</a></li><li><a href=#improved-documentation-1>Improved documentation</a></li><li><a href=#contributor-facing-changes-1>Contributor-facing changes</a></li></ol></li></ol><ol><li><a href=#bug-fixes-2>Bug fixes</a></li><li><a href=#improved-documentation-2>Improved documentation</a></li><li><a href=#miscellaneous-internal-changes>Miscellaneous internal changes</a></li></ol><ol><li><a href=#bug-fixes-3>Bug fixes</a></li></ol><ol><li><a href=#pytest-830-2024-07-20>pytest 8.3.0 (2024-07-20)</a><ol><li><a href=#new-features>New features</a></li><li><a href=#improvements-in-existing-functionality>Improvements in existing functionality</a></li><li><a href=#bug-fixes-4>Bug fixes</a></li><li><a href=#improved-documentation-3>Improved documentation</a></li><li><a href=#contributor-facing-changes-2>Contributor-facing changes</a></li></ol></li></ol><ol><li><a href=#bug-fixes-5>Bug Fixes</a></li><li><a href=#improved-documentation-4>Improved Documentation</a></li></ol><ol><li><a href=#deprecations>Deprecations</a></li><li><a href=#features>Features</a></li><li><a href=#improvements>Improvements</a></li><li><a href=#bug-fixes-6>Bug Fixes</a></li><li><a href=#trivialinternal-changes>Trivial/Internal Changes</a></li></ol><ol><li><a href=#bug-fixes-7>Bug Fixes</a></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/en/categories/testing-tools/>Testing Tools</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/en/page/pytest-10/>Pytest Releases History (latest 10)</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Apr 15, 2025</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>6 minute read</time></div></footer><footer class=article-translations><svg class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg><div><a href=https://chengxiaqiucao.github.io/page/pytest-10/ class=link>中文</a></div></footer></div></header><section class=article-content><h1 id=pytest-releases-history-latest-10>Pytest Releases History (latest 10)</h1><hr><h2 id=pytest-835-2025-03-02>pytest 8.3.5 (2025-03-02)</h2><h3 id=bug-fixes>Bug fixes</h3><ul><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/11777 target=_blank rel=noopener>#11777</a>: Fixed issue where sequences were still being shortened even with <code>-vv</code> verbosity.</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12888 target=_blank rel=noopener>#12888</a>: Fixed broken input when using Python 3.13+ and a <code>libedit</code> build of Python, such as on macOS or with uv-managed Python binaries from the <code>python-build-standalone</code> project. This could manifest e.g. by a broken prompt when using <code>Pdb</code>, or seeing empty inputs with manual usage of <code>input()</code> and suspended capturing.</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/13026 target=_blank rel=noopener>#13026</a>: Fixed <code>AttributeError</code>{.interpreted-text role=&ldquo;class&rdquo;} crash when using <code>--import-mode=importlib</code> when top-level directory same name as another module of the standard library.</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/13053 target=_blank rel=noopener>#13053</a>: Fixed a regression in pytest 8.3.4 where, when using <code>--import-mode=importlib</code>, a directory containing py file with the same name would cause an <code>ImportError</code></p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/13083 target=_blank rel=noopener>#13083</a>: Fixed issue where pytest could crash if one of the collected directories got removed during collection.</p></li></ul><h3 id=improved-documentation>Improved documentation</h3><ul><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12842 target=_blank rel=noopener>#12842</a>: Added dedicated page about using types with pytest.</p><p>See <code>types</code>{.interpreted-text role=&ldquo;ref&rdquo;} for detailed usage.</p></li></ul><h3 id=contributor-facing-changes>Contributor-facing changes</h3><ul><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/13112 target=_blank rel=noopener>#13112</a>: Fixed selftest failures in <code>test_terminal.py</code> with Pygments >= 2.19.0</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/13256 target=_blank rel=noopener>#13256</a>: Support for Towncrier versions released in 2024 has been re-enabled</p><p>when building Sphinx docs -- by <code>webknjaz</code>{.interpreted-text role=&ldquo;user&rdquo;}.</p></li></ul><p>========================================</p><h2 id=pytest-834-2024-12-01>pytest 8.3.4 (2024-12-01)</h2><h3 id=bug-fixes-1>Bug fixes</h3><ul><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12592 target=_blank rel=noopener>#12592</a>: Fixed <code>KeyError</code>{.interpreted-text role=&ldquo;class&rdquo;} crash when using <code>--import-mode=importlib</code> in a directory layout where a directory contains a child directory with the same name.</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12818 target=_blank rel=noopener>#12818</a>: Assertion rewriting now preserves the source ranges of the original instructions, making it play well with tools that deal with the <code>AST</code>, like <a class=link href=https://github.com/alexmojaki/executing target=_blank rel=noopener>executing</a>.</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12849 target=_blank rel=noopener>#12849</a>: ANSI escape codes for colored output now handled correctly in <code>pytest.fail</code>{.interpreted-text role=&ldquo;func&rdquo;} with [pytrace=False]{.title-ref}.</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/9353 target=_blank rel=noopener>#9353</a>: <code>pytest.approx</code>{.interpreted-text role=&ldquo;func&rdquo;} now uses strict equality when given booleans.</p></li></ul><h3 id=improved-documentation-1>Improved documentation</h3><ul><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/10558 target=_blank rel=noopener>#10558</a>: Fix ambiguous docstring of <code>pytest.Config.getoption</code>{.interpreted-text role=&ldquo;func&rdquo;}.</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/10829 target=_blank rel=noopener>#10829</a>: Improve documentation on the current handling of the <code>--basetemp</code> option and its lack of retention functionality (<code>temporary directory location and retention</code>{.interpreted-text role=&ldquo;ref&rdquo;}).</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12866 target=_blank rel=noopener>#12866</a>: Improved cross-references concerning the <code>recwarn</code>{.interpreted-text role=&ldquo;fixture&rdquo;} fixture.</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12966 target=_blank rel=noopener>#12966</a>: Clarify <code>filterwarnings</code>{.interpreted-text role=&ldquo;ref&rdquo;} docs on filter precedence/order when using multiple <code>@pytest.mark.filterwarnings &lt;pytest.mark.filterwarnings ref></code>{.interpreted-text role=&ldquo;ref&rdquo;} marks.</p></li></ul><h3 id=contributor-facing-changes-1>Contributor-facing changes</h3><ul><li><a class=link href=https://github.com/pytest-dev/pytest/issues/12497 target=_blank rel=noopener>#12497</a>: Fixed two failing pdb-related tests on Python 3.13.</li></ul><p>========================================</p><h1 id=pytest-833-2024-09-09>pytest 8.3.3 (2024-09-09)</h1><h2 id=bug-fixes-2>Bug fixes</h2><ul><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12446 target=_blank rel=noopener>#12446</a>: Avoid calling <code>@property</code> (and other instance descriptors) during fixture discovery -- by <code>asottile</code>{.interpreted-text role=&ldquo;user&rdquo;}</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12659 target=_blank rel=noopener>#12659</a>: Fixed the issue of not displaying assertion failure differences when using the parameter <code>--import-mode=importlib</code> in pytest>=8.1.</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12667 target=_blank rel=noopener>#12667</a>: Fixed a regression where type change in [ExceptionInfo.errisinstance]{.title-ref} caused [mypy]{.title-ref} to fail.</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12744 target=_blank rel=noopener>#12744</a>: Fixed typing compatibility with Python 3.9 or less -- replaced [typing.Self]{.title-ref} with [typing_extensions.Self]{.title-ref} -- by <code>Avasam</code>{.interpreted-text role=&ldquo;user&rdquo;}</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12745 target=_blank rel=noopener>#12745</a>: Fixed an issue with backslashes being incorrectly converted in nodeid paths on Windows, ensuring consistent path handling across environments.</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/6682 target=_blank rel=noopener>#6682</a>: Fixed bug where the verbosity levels where not being respected when printing the "msg" part of failed assertion (as in <code>assert condition, msg</code>).</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/9422 target=_blank rel=noopener>#9422</a>: Fix bug where disabling the terminal plugin via <code>-p no:terminal</code> would cause crashes related to missing the <code>verbose</code> option.</p><p>-- by <code>GTowers1</code>{.interpreted-text role=&ldquo;user&rdquo;}</p></li></ul><h2 id=improved-documentation-2>Improved documentation</h2><ul><li><a class=link href=https://github.com/pytest-dev/pytest/issues/12663 target=_blank rel=noopener>#12663</a>: Clarify that the [pytest_deselected]{.title-ref} hook should be called from [pytest_collection_modifyitems]{.title-ref} hook implementations when items are deselected.</li><li><a class=link href=https://github.com/pytest-dev/pytest/issues/12678 target=_blank rel=noopener>#12678</a>: Remove erroneous quotes from [tmp_path_retention_policy]{.title-ref} example in docs.</li></ul><h2 id=miscellaneous-internal-changes>Miscellaneous internal changes</h2><ul><li><a class=link href=https://github.com/pytest-dev/pytest/issues/12769 target=_blank rel=noopener>#12769</a>: Fix typos discovered by codespell and add codespell to pre-commit hooks.</li></ul><p>========================================</p><h1 id=pytest-832-2024-07-24>pytest 8.3.2 (2024-07-24)</h1><h2 id=bug-fixes-3>Bug fixes</h2><ul><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12652 target=_blank rel=noopener>#12652</a>: Resolve regression [conda]{.title-ref} environments where no longer being automatically detected.</p><p>-- by <code>RonnyPfannschmidt</code>{.interpreted-text role=&ldquo;user&rdquo;}</p></li></ul><p>========================================</p><h1 id=pytest-831-2024-07-20>pytest 8.3.1 (2024-07-20)</h1><p>The 8.3.0 release failed to include the change notes and docs for the release. This patch release remedies this. There are no other changes.</p><p>========================================</p><h2 id=pytest-830-2024-07-20>pytest 8.3.0 (2024-07-20)</h2><h3 id=new-features>New features</h3><ul><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12231 target=_blank rel=noopener>#12231</a>: Added [--xfail-tb]{.title-ref} flag, which turns on traceback output for XFAIL results.</p><ul><li><p>If the [--xfail-tb]{.title-ref} flag is not given, tracebacks for XFAIL results are NOT shown.</p></li><li><p>The style of traceback for XFAIL is set with [--tb]{.title-ref}, and can be [auto|long|short|line|native|no]{.title-ref}.</p></li><li><p>Note: Even if you have [--xfail-tb]{.title-ref} set, you won't see them if [--tb=no]{.title-ref}.</p></li></ul><p>Some history:</p><p>With pytest 8.0, [-rx]{.title-ref} or [-ra]{.title-ref} would not only turn on summary reports for xfail, but also report the tracebacks for xfail results. This caused issues with some projects that utilize xfail, but don't want to see all of the xfail tracebacks.</p><p>This change detaches xfail tracebacks from [-rx]{.title-ref}, and now we turn on xfail tracebacks with [--xfail-tb]{.title-ref}. With this, the default [-rx]{.title-ref}/ [-ra]{.title-ref} behavior is identical to pre-8.0 with respect to xfail tracebacks. While this is a behavior change, it brings default behavior back to pre-8.0.0 behavior, which ultimately was considered the better course of action.</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12281 target=_blank rel=noopener>#12281</a>: Added support for keyword matching in marker expressions.</p><p>Now tests can be selected by marker keyword arguments.</p><p>Supported values are <code>int</code>{.interpreted-text role=&ldquo;class&rdquo;}, (unescaped) <code>str</code>{.interpreted-text role=&ldquo;class&rdquo;}, <code>bool</code>{.interpreted-text role=&ldquo;class&rdquo;} & <code>None</code>{.interpreted-text role=&ldquo;data&rdquo;}.</p><p>See <code>marker examples &lt;marker_keyword_expression_example></code>{.interpreted-text role=&ldquo;ref&rdquo;} for more information.</p><p>-- by <code>lovetheguitar</code>{.interpreted-text role=&ldquo;user&rdquo;}</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12567 target=_blank rel=noopener>#12567</a>: Added <code>--no-fold-skipped</code> command line option.</p><p>If this option is set, then skipped tests in short summary are no longer grouped</p><p>by reason but all tests are printed individually with their nodeid in the same</p><p>way as other statuses.</p><p>-- by <code>pbrezina</code>{.interpreted-text role=&ldquo;user&rdquo;}</p></li></ul><h3 id=improvements-in-existing-functionality>Improvements in existing functionality</h3><ul><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12469 target=_blank rel=noopener>#12469</a>: The console output now uses the "third-party plugins" terminology,</p><p>replacing the previously established but confusing and outdated</p><p>reference to <code>setuptools &lt;setuptools:index></code>{.interpreted-text role=&ldquo;std:doc&rdquo;}</p><p>-- by <code>webknjaz</code>{.interpreted-text role=&ldquo;user&rdquo;}.</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12544 target=_blank rel=noopener>#12544</a>, <a class=link href=https://github.com/pytest-dev/pytest/issues/12545 target=_blank rel=noopener>#12545</a>: Python virtual environment detection was improved by</p><p>checking for a <code>pyvenv.cfg</code>{.interpreted-text role=&ldquo;file&rdquo;} file, ensuring reliable detection on</p><p>various platforms -- by <code>zachsnickers</code>{.interpreted-text role=&ldquo;user&rdquo;}.</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/2871 target=_blank rel=noopener>#2871</a>: Do not truncate arguments to functions in output when running with [-vvv]{.title-ref}.</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/389 target=_blank rel=noopener>#389</a>: The readability of assertion introspection of bound methods has been enhanced</p><p>-- by <code>farbodahm</code>{.interpreted-text role=&ldquo;user&rdquo;}, <code>webknjaz</code>{.interpreted-text role=&ldquo;user&rdquo;}, <code>obestwalter</code>{.interpreted-text role=&ldquo;user&rdquo;}, <code>flub</code>{.interpreted-text role=&ldquo;user&rdquo;}</p><p>and <code>glyphack</code>{.interpreted-text role=&ldquo;user&rdquo;}.</p><p>Earlier, it was like:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=go>=================================== FAILURES ===================================
</span></span></span><span class=line><span class=cl><span class=go></span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=go>_____________________________________ test _____________________________________
</span></span></span><span class=line><span class=cl><span class=go></span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=go>    def test():
</span></span></span><span class=line><span class=cl><span class=go></span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=gp>&gt;</span>       assert Help<span class=o>()</span>.fun<span class=o>()</span> <span class=o>==</span> <span class=m>2</span>
</span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=go>E       assert 1 == 2
</span></span></span><span class=line><span class=cl><span class=go></span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=go>E        +  where 1 = &lt;bound method Help.fun of &lt;example.Help instance at 0x256a830&gt;&gt;()
</span></span></span><span class=line><span class=cl><span class=go></span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=go>E        +    where &lt;bound method Help.fun of &lt;example.Help instance at 0x256a830&gt;&gt; = &lt;example.Help instance at 0x256a830&gt;.fun
</span></span></span><span class=line><span class=cl><span class=go></span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=go>E        +      where &lt;example.Help instance at 0x256a830&gt; = Help()
</span></span></span><span class=line><span class=cl><span class=go></span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=go>example.py:7: AssertionError
</span></span></span><span class=line><span class=cl><span class=go></span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=go>=========================== 1 failed in 0.03 seconds ===========================
</span></span></span></code></pre></td></tr></table></div></div><p>And now it's like:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=go>=================================== FAILURES ===================================
</span></span></span><span class=line><span class=cl><span class=go></span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=go>_____________________________________ test _____________________________________
</span></span></span><span class=line><span class=cl><span class=go></span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=go>    def test():
</span></span></span><span class=line><span class=cl><span class=go></span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=gp>&gt;</span>       assert Help<span class=o>()</span>.fun<span class=o>()</span> <span class=o>==</span> <span class=m>2</span>
</span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=go>E       assert 1 == 2
</span></span></span><span class=line><span class=cl><span class=go></span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=go>E        +  where 1 = fun()
</span></span></span><span class=line><span class=cl><span class=go></span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=go>E        +    where fun = &lt;test_local.Help object at 0x1074be230&gt;.fun
</span></span></span><span class=line><span class=cl><span class=go></span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=go>E        +      where &lt;test_local.Help object at 0x1074be230&gt; = Help()
</span></span></span><span class=line><span class=cl><span class=go></span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=go>test_local.py:13: AssertionError
</span></span></span><span class=line><span class=cl><span class=go></span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=go>=========================== 1 failed in 0.03 seconds ===========================
</span></span></span></code></pre></td></tr></table></div></div></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/7662 target=_blank rel=noopener>#7662</a>: Added timezone information to the testsuite timestamp in the JUnit XML report.</p></li></ul><h3 id=bug-fixes-4>Bug fixes</h3><ul><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/11706 target=_blank rel=noopener>#11706</a>: Fixed reporting of teardown errors in higher-scoped fixtures when using [--maxfail]{.title-ref} or [--stepwise]{.title-ref}.</p><p>Originally added in pytest 8.0.0, but reverted in 8.0.2 due to a regression in pytest-xdist.</p><p>This regression was fixed in pytest-xdist 3.6.1.</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/11797 target=_blank rel=noopener>#11797</a>: <code>pytest.approx</code>{.interpreted-text role=&ldquo;func&rdquo;} now correctly handles <code>Sequence &lt;collections.abc.Sequence></code>{.interpreted-text role=&ldquo;class&rdquo;}-like objects.</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12204 target=_blank rel=noopener>#12204</a>, <a class=link href=https://github.com/pytest-dev/pytest/issues/12264 target=_blank rel=noopener>#12264</a>: Fixed a regression in pytest 8.0 where tracebacks get longer and longer when multiple</p><p>tests fail due to a shared higher-scope fixture which raised -- by <code>bluetech</code>{.interpreted-text role=&ldquo;user&rdquo;}.</p><p>Also fixed a similar regression in pytest 5.4 for collectors which raise during setup.</p><p>The fix necessitated internal changes which may affect some plugins:</p><ul><li><p><code>FixtureDef.cached_result[2]</code> is now a tuple <code>(exc, tb)</code></p><p>instead of <code>exc</code>.</p></li><li><p><code>SetupState.stack</code> failures are now a tuple <code>(exc, tb)</code></p><p>instead of <code>exc</code>.</p></li></ul></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12275 target=_blank rel=noopener>#12275</a>: Fixed collection error upon encountering an <code>abstract &lt;abc></code>{.interpreted-text role=&ldquo;mod&rdquo;} class, including abstract [unittest.TestCase]{.title-ref} subclasses.</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12328 target=_blank rel=noopener>#12328</a>: Fixed a regression in pytest 8.0.0 where package-scoped parameterized items were not correctly reordered to minimize setups/teardowns in some cases.</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12424 target=_blank rel=noopener>#12424</a>: Fixed crash with [assert testcase is not None]{.title-ref} assertion failure when re-running unittest tests using plugins like pytest-rerunfailures. Regressed in 8.2.2.</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12472 target=_blank rel=noopener>#12472</a>: Fixed a crash when returning category <code>"error"</code> or <code>"failed"</code> with a custom test status from <code>pytest_report_teststatus</code>{.interpreted-text role=&ldquo;hook&rdquo;} hook -- <code>pbrezina</code>{.interpreted-text role=&ldquo;user&rdquo;}.</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12505 target=_blank rel=noopener>#12505</a>: Improved handling of invalid regex patterns in <code>pytest.raises(match=r'...') &lt;pytest.raises></code>{.interpreted-text role=&ldquo;func&rdquo;} by providing a clear error message.</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12580 target=_blank rel=noopener>#12580</a>: Fixed a crash when using the cache class on Windows and the cache directory was created concurrently.</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/6962 target=_blank rel=noopener>#6962</a>: Parametrization parameters are now compared using [==]{.title-ref} instead of [is]{.title-ref} ([is]{.title-ref} is still used as a fallback if the parameter does not support [==]{.title-ref}).</p><p>This fixes use of parameters such as lists, which have a different [id]{.title-ref} but compare equal, causing fixtures to be re-computed instead of being cached.</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/7166 target=_blank rel=noopener>#7166</a>: Fixed progress percentages (the <code>[ 87%]</code> at the edge of the screen) sometimes not aligning correctly when running with pytest-xdist <code>-n</code>.</p></li></ul><h3 id=improved-documentation-3>Improved documentation</h3><ul><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12153 target=_blank rel=noopener>#12153</a>: Documented using <code>PYTEST_VERSION</code>{.interpreted-text role=&ldquo;envvar&rdquo;} to detect if code is running from within a pytest run.</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12469 target=_blank rel=noopener>#12469</a>: The external plugin mentions in the documentation now avoid mentioning</p><p><code>setuptools entry-points &lt;setuptools:index></code>{.interpreted-text role=&ldquo;std:doc&rdquo;} as the concept is</p><p>much more generic nowadays. Instead, the terminology of "external",</p><p>"installed", or "third-party" plugins (or packages) replaces that.</p><p>-- by <code>webknjaz</code>{.interpreted-text role=&ldquo;user&rdquo;}</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12577 target=_blank rel=noopener>#12577</a>: [CI]{.title-ref} and [BUILD_NUMBER]{.title-ref} environment variables role is discribed in</p><p>the reference doc. They now also appear when doing [pytest -h]{.title-ref}</p><p>-- by <code>MarcBresson</code>{.interpreted-text role=&ldquo;user&rdquo;}.</p></li></ul><h3 id=contributor-facing-changes-2>Contributor-facing changes</h3><ul><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12467 target=_blank rel=noopener>#12467</a>: Migrated all internal type-annotations to the python3.10+ style by using the [annotations]{.title-ref} future import.</p><p>-- by <code>RonnyPfannschmidt</code>{.interpreted-text role=&ldquo;user&rdquo;}</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/11771 target=_blank rel=noopener>#11771</a>, <a class=link href=https://github.com/pytest-dev/pytest/issues/12557 target=_blank rel=noopener>#12557</a>: The PyPy runtime version has been updated to 3.9 from 3.8 that introduced</p><p>a flaky bug at the garbage collector which was not expected to fix there</p><p>as the 3.8 is EoL.</p><p>-- by <code>x612skm</code>{.interpreted-text role=&ldquo;user&rdquo;}</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12493 target=_blank rel=noopener>#12493</a>: The change log draft preview integration has been refactored to use a</p><p>third party extension <code>sphinxcontib-towncrier</code>. The previous in-repo</p><p>script was putting the change log preview file at</p><p><code>doc/en/_changelog_towncrier_draft.rst</code>{.interpreted-text role=&ldquo;file&rdquo;}. Said file is no longer</p><p>ignored in Git and might show up among untracked files in the</p><p>development environments of the contributors. To address that, the</p><p>contributors can run the following command that will clean it up:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=gp>$</span> git clean -x -i -- doc/en/_changelog_towncrier_draft.rst
</span></span></code></pre></td></tr></table></div></div><p>-- by <code>webknjaz</code>{.interpreted-text role=&ldquo;user&rdquo;}</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12498 target=_blank rel=noopener>#12498</a>: All the undocumented <code>tox</code> environments now have descriptions.</p><p>They can be listed in one's development environment by invoking</p><p><code>tox -av</code> in a terminal.</p><p>-- by <code>webknjaz</code>{.interpreted-text role=&ldquo;user&rdquo;}</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12501 target=_blank rel=noopener>#12501</a>: The changelog configuration has been updated to introduce more accurate</p><p>audience-tailored categories. Previously, there was a <code>trivial</code></p><p>change log fragment type with an unclear and broad meaning. It was</p><p>removed and we now have <code>contrib</code>, <code>misc</code> and <code>packaging</code> in</p><p>place of it.</p><p>The new change note types target the readers who are downstream</p><p>packagers and project contributors. Additionally, the miscellaneous</p><p>section is kept for unspecified updates that do not fit anywhere else.</p><p>-- by <code>webknjaz</code>{.interpreted-text role=&ldquo;user&rdquo;}</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12502 target=_blank rel=noopener>#12502</a>: The UX of the GitHub automation making pull requests to update the</p><p>plugin list has been updated. Previously, the maintainers had to close</p><p>the automatically created pull requests and re-open them to trigger the</p><p>CI runs. From now on, they only need to click the [Ready for review]{.title-ref}</p><p>button instead.</p><p>-- by <code>webknjaz</code>{.interpreted-text role=&ldquo;user&rdquo;}</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12522 target=_blank rel=noopener>#12522</a>: The <code>:pull:</code> RST role has been replaced with a shorter</p><p><code>:pr:</code> due to starting to use the implementation from</p><p>the third-party <code>sphinx-issues</code>{.interpreted-text role=&ldquo;pypi&rdquo;} Sphinx extension</p><p>-- by <code>webknjaz</code>{.interpreted-text role=&ldquo;user&rdquo;}.</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12531 target=_blank rel=noopener>#12531</a>: The coverage reporting configuration has been updated to exclude</p><p>pytest's own tests marked as expected to fail from the coverage</p><p>report. This has an effect of reducing the influence of flaky</p><p>tests on the resulting number.</p><p>-- by <code>webknjaz</code>{.interpreted-text role=&ldquo;user&rdquo;}</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12533 target=_blank rel=noopener>#12533</a>: The <code>extlinks</code> Sphinx extension is no longer enabled. The <code>:bpo:</code></p><p>role it used to declare has been removed with that. BPO itself has</p><p>migrated to GitHub some years ago and it is possible to link the</p><p>respective issues by using their GitHub issue numbers and the</p><p><code>:issue:</code> role that the <code>sphinx-issues</code> extension implements.</p><p>-- by <code>webknjaz</code>{.interpreted-text role=&ldquo;user&rdquo;}</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12562 target=_blank rel=noopener>#12562</a>: Possible typos in using the <code>:user:</code> RST role is now being linted</p><p>through the pre-commit tool integration -- by <code>webknjaz</code>{.interpreted-text role=&ldquo;user&rdquo;}.</p></li></ul><p>========================================</p><h1 id=pytest-822-2024-06-04>pytest 8.2.2 (2024-06-04)</h1><h2 id=bug-fixes-5>Bug Fixes</h2><ul><li><a class=link href=https://github.com/pytest-dev/pytest/issues/12355 target=_blank rel=noopener>#12355</a>: Fix possible catastrophic performance slowdown on a certain parametrization pattern involving many higher-scoped parameters.</li><li><a class=link href=https://github.com/pytest-dev/pytest/issues/12367 target=_blank rel=noopener>#12367</a>: Fix a regression in pytest 8.2.0 where unittest class instances (a fresh one is created for each test) were not released promptly on test teardown but only on session teardown.</li><li><a class=link href=https://github.com/pytest-dev/pytest/issues/12381 target=_blank rel=noopener>#12381</a>: Fix possible "Directory not empty" crashes arising from concurent cache dir (<code>.pytest_cache</code>) creation. Regressed in pytest 8.2.0.</li></ul><h2 id=improved-documentation-4>Improved Documentation</h2><ul><li><a class=link href=https://github.com/pytest-dev/pytest/issues/12290 target=_blank rel=noopener>#12290</a>: Updated Sphinx theme to use Furo instead of Flask, enabling Dark mode theme.</li><li><a class=link href=https://github.com/pytest-dev/pytest/issues/12356 target=_blank rel=noopener>#12356</a>: Added a subsection to the documentation for debugging flaky tests to mention
lack of thread safety in pytest as a possible source of flakyness.</li><li><a class=link href=https://github.com/pytest-dev/pytest/issues/12363 target=_blank rel=noopener>#12363</a>: The documentation webpages now links to a canonical version to reduce outdated documentation in search engine results.</li></ul><p>========================================</p><p>pytest 8.2.1 (2024-05-19)</p><p>=========================</p><p>Improvements</p><hr><ul><li><a class=link href=https://github.com/pytest-dev/pytest/issues/12334 target=_blank rel=noopener>#12334</a>: Support for Python 3.13 (beta1 at the time of writing).</li></ul><p>Bug Fixes</p><hr><ul><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12120 target=_blank rel=noopener>#12120</a>: Fix [PermissionError]{.title-ref} crashes arising from directories which are not selected on the command-line.</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12191 target=_blank rel=noopener>#12191</a>: Keyboard interrupts and system exits are now properly handled during the test collection.</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12300 target=_blank rel=noopener>#12300</a>: Fixed handling of 'Function not implemented' error under squashfuse_ll, which is a different way to say that the mountpoint is read-only.</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12308 target=_blank rel=noopener>#12308</a>: Fix a regression in pytest 8.2.0 where the permissions of automatically-created <code>.pytest_cache</code> directories became <code>rwx------</code> instead of the expected <code>rwxr-xr-x</code>.</p></li></ul><p>Trivial/Internal Changes</p><hr><ul><li><a class=link href=https://github.com/pytest-dev/pytest/issues/12333 target=_blank rel=noopener>#12333</a>: pytest releases are now attested using the recent <a class=link href=https://github.blog/2024-05-02-introducing-artifact-attestations-now-in-public-beta/ target=_blank rel=noopener>Artifact Attestation</a> support from GitHub, allowing users to verify the provenance of pytest's sdist and wheel artifacts.</li></ul><p>========================================</p><h1 id=pytest-820-2024-04-27>pytest 8.2.0 (2024-04-27)</h1><h2 id=deprecations>Deprecations</h2><ul><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12069 target=_blank rel=noopener>#12069</a>: A deprecation warning is now raised when implementations of one of the following hooks request a deprecated <code>py.path.local</code> parameter instead of the <code>pathlib.Path</code> parameter which replaced it:</p><ul><li><code>pytest_ignore_collect</code>{.interpreted-text role=&ldquo;hook&rdquo;} - the <code>path</code> parameter - use <code>collection_path</code> instead.</li><li><code>pytest_collect_file</code>{.interpreted-text role=&ldquo;hook&rdquo;} - the <code>path</code> parameter - use <code>file_path</code> instead.</li><li><code>pytest_pycollect_makemodule</code>{.interpreted-text role=&ldquo;hook&rdquo;} - the <code>path</code> parameter - use <code>module_path</code> instead.</li><li><code>pytest_report_header</code>{.interpreted-text role=&ldquo;hook&rdquo;} - the <code>startdir</code> parameter - use <code>start_path</code> instead.</li><li><code>pytest_report_collectionfinish</code>{.interpreted-text role=&ldquo;hook&rdquo;} - the <code>startdir</code> parameter - use <code>start_path</code> instead.</li></ul><p>The replacement parameters are available since pytest 7.0.0.
The old parameters will be removed in pytest 9.0.0.</p><p>See <code>legacy-path-hooks-deprecated</code>{.interpreted-text role=&ldquo;ref&rdquo;} for more details.</p></li></ul><h2 id=features>Features</h2><ul><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/11871 target=_blank rel=noopener>#11871</a>: Added support for reading command line arguments from a file using the prefix character <code>@</code>, like e.g.: <code>pytest @tests.txt</code>. The file must have one argument per line.</p><p>See <code>Read arguments from file &lt;args-from-file></code>{.interpreted-text role=&ldquo;ref&rdquo;} for details.</p></li></ul><h2 id=improvements>Improvements</h2><ul><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/11523 target=_blank rel=noopener>#11523</a>: <code>pytest.importorskip</code>{.interpreted-text role=&ldquo;func&rdquo;} will now issue a warning if the module could be found, but raised <code>ImportError</code>{.interpreted-text role=&ldquo;class&rdquo;} instead of <code>ModuleNotFoundError</code>{.interpreted-text role=&ldquo;class&rdquo;}.</p><p>The warning can be suppressed by passing <code>exc_type=ImportError</code> to <code>pytest.importorskip</code>{.interpreted-text role=&ldquo;func&rdquo;}.</p><p>See <code>import-or-skip-import-error</code>{.interpreted-text role=&ldquo;ref&rdquo;} for details.</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/11728 target=_blank rel=noopener>#11728</a>: For <code>unittest</code>-based tests, exceptions during class cleanup (as raised by functions registered with <code>TestCase.addClassCleanup &lt;unittest.TestCase.addClassCleanup></code>{.interpreted-text role=&ldquo;meth&rdquo;}) are now reported instead of silently failing.</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/11777 target=_blank rel=noopener>#11777</a>: Text is no longer truncated in the <code>short test summary info</code> section when <code>-vv</code> is given.</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12112 target=_blank rel=noopener>#12112</a>: Improved namespace packages detection when <code>consider_namespace_packages</code>{.interpreted-text role=&ldquo;confval&rdquo;} is enabled, covering more situations (like editable installs).</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/9502 target=_blank rel=noopener>#9502</a>: Added <code>PYTEST_VERSION</code>{.interpreted-text role=&ldquo;envvar&rdquo;} environment variable which is defined at the start of the pytest session and undefined afterwards. It contains the value of <code>pytest.__version__</code>, and among other things can be used to easily check if code is running from within a pytest run.</p></li></ul><h2 id=bug-fixes-6>Bug Fixes</h2><ul><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12065 target=_blank rel=noopener>#12065</a>: Fixed a regression in pytest 8.0.0 where test classes containing <code>setup_method</code> and tests using <code>@staticmethod</code> or <code>@classmethod</code> would crash with <code>AttributeError: 'NoneType' object has no attribute 'setup_method'</code>.</p><p>Now the <code>request.instance &lt;pytest.FixtureRequest.instance></code>{.interpreted-text role=&ldquo;attr&rdquo;} attribute of tests using <code>@staticmethod</code> and <code>@classmethod</code> is no longer <code>None</code>, but a fresh instance of the class, like in non-static methods.
Previously it was <code>None</code>, and all fixtures of such tests would share a single <code>self</code>.</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12135 target=_blank rel=noopener>#12135</a>: Fixed issue where fixtures adding their finalizer multiple times to fixtures they request would cause unreliable and non-intuitive teardown ordering in some instances.</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/12194 target=_blank rel=noopener>#12194</a>: Fixed a bug with <code>--importmode=importlib</code> and <code>--doctest-modules</code> where child modules did not appear as attributes in parent modules.</p></li><li><p><a class=link href=https://github.com/pytest-dev/pytest/issues/1489 target=_blank rel=noopener>#1489</a>: Fixed some instances where teardown of higher-scoped fixtures was not happening in the reverse order they were initialized in.</p></li></ul><h2 id=trivialinternal-changes>Trivial/Internal Changes</h2><ul><li><a class=link href=https://github.com/pytest-dev/pytest/issues/12069 target=_blank rel=noopener>#12069</a>: <code>pluggy>=1.5.0</code> is now required.</li><li><a class=link href=https://github.com/pytest-dev/pytest/issues/12167 target=_blank rel=noopener>#12167</a>: <code>cache &lt;cache></code>{.interpreted-text role=&ldquo;ref&rdquo;}: create supporting files (<code>CACHEDIR.TAG</code>, <code>.gitignore</code>, etc.) in a temporary directory to provide atomic semantics.</li></ul><p>========================================</p><h1 id=pytest-812-2024-04-26>pytest 8.1.2 (2024-04-26)</h1><h2 id=bug-fixes-7>Bug Fixes</h2><ul><li><a class=link href=https://github.com/pytest-dev/pytest/issues/12114 target=_blank rel=noopener>#12114</a>: Fixed error in <code>pytest.approx</code>{.interpreted-text role=&ldquo;func&rdquo;} when used with [numpy]{.title-ref} arrays and comparing with other types.</li></ul><p>========================================</p><blockquote><p>完整清单，请访问官方列表: <a class=link href=https://github.com/pytest-dev/pytest/releases target=_blank rel=noopener>Pytest 发布清单</a></p></blockquote></section><footer class=article-footer><section class=article-tags><a href=/en/tags/open-source/>Open Source</a></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/en/page/jmeter-10/><div class=article-details><h2 class=article-title>JMeter Releases History (latest 10)</h2></div></a></article><article><a href=/en/page/jenkins-10/><div class=article-details><h2 class=article-title>Jenkins Releases History (latest 10)</h2></div></a></article><article><a href=/en/page/junit5-10/><div class=article-details><h2 class=article-title>Junit5 Releases History (latest 10)</h2></div></a></article><article><a href=/en/page/locust-10/><div class=article-details><h2 class=article-title>Locust Releases History (latest 10)</h2></div></a></article><article><a href=/en/page/pandas-10/><div class=article-details><h2 class=article-title>Pandas Releases History (latest 10)</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2023 -
2025 |by Daniel Wei</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.30.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>
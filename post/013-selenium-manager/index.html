<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="Selenium在V4版本增加了一个Selenium manager工具，它有何作用？"><title>Selenium Manager用法详解</title><link rel=canonical href=https://chengxiaqiucao.github.io/post/013-selenium-manager/><link rel=stylesheet href=/scss/style.min.d6334826c849a420a2748e4872b915ae516105f86c3993d9bad2032725f784b8.css><meta property='og:title' content="Selenium Manager用法详解"><meta property='og:description' content="Selenium在V4版本增加了一个Selenium manager工具，它有何作用？"><meta property='og:url' content='https://chengxiaqiucao.github.io/post/013-selenium-manager/'><meta property='og:site_name' content='秋 草 观 “测” 台'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='自动化测试'><meta property='article:tag' content='Selenium'><meta property='article:published_time' content='2024-09-07T18:03:04+08:00'><meta property='article:modified_time' content='2024-09-07T18:03:04+08:00'><meta property='og:image' content='https://chengxiaqiucao.github.io/post/013-selenium-manager/Se-m.png'><meta name=twitter:title content="Selenium Manager用法详解"><meta name=twitter:description content="Selenium在V4版本增加了一个Selenium manager工具，它有何作用？"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://chengxiaqiucao.github.io/post/013-selenium-manager/Se-m.png'></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/automnGrass_hu_5e44a092fd905642.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>秋 草 观 “测” 台</a></h1><h2 class=site-description>Testing is not just checking...</h2></div></header><ol class=menu-social><li><a href=https://github.com/chengxiaqiucao target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://space.bilibili.com/472272606 target=_blank title=Bilibili rel=me><!doctype html><svg t="1750732982440" class="icon" viewBox="0 0 1024 1024" p-id="4593" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M306.005333 117.632 444.330667 256h135.296l138.368-138.325333A42.666667 42.666667.0 01778.368 178.048L700.330667 256H789.333333A149.333333 149.333333.0 01938.666667 405.333333v341.333334A149.333333 149.333333.0 01789.333333 896H234.666667A149.333333 149.333333.0 0185.333333 746.666667V405.333333A149.333333 149.333333.0 01234.666667 256h88.96L245.632 177.962667a42.666667 42.666667.0 0160.373333-60.373334zm483.328 223.701333H234.666667a64 64 0 00-63.701334 57.856L170.666667 405.333333v341.333334a64 64 0 0057.856 63.701333L234.666667 810.666667h554.666666a64 64 0 0063.701334-57.856L853.333333 746.666667V405.333333a64 64 0 00-64-64zm-448 128A42.666667 42.666667.0 01384 512v85.333333a42.666667 42.666667.0 01-85.333333.0V512a42.666667 42.666667.0 0142.666666-42.666667zm341.333334.0A42.666667 42.666667.0 01725.333333 512v85.333333a42.666667 42.666667.0 01-85.333333.0V512a42.666667 42.666667.0 0142.666667-42.666667z" p-id="4594" fill="#8a8a8a"/></svg></a></li><li><a href=https://www.zhihu.com/people/qiucao target=_blank title=zhihu rel=me><!doctype html><svg t="1750733049138" class="icon" viewBox="0 0 1024 1024" p-id="5820" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M570.581333 806.272h61.952L652.928 876.117333 764.074667 806.272h130.986666V230.186667h-324.48V806.272zM636.501333 292.693333h192.64V743.68h-73.898666l-73.813334 46.378667L668.032 743.808l-31.530667-.128V292.736zM515.754667 493.738667H377.429333a2999.466667 2999.466667.0 005.802667-194.56h135.338667S523.776 239.445334 495.872 240.128H261.76c9.216-34.730667 20.821333-70.613333 34.688-107.690667.0.0-63.701333.0-85.333333 57.130667C202.112 213.12 176.128 303.786667 129.877333 396.416c15.573333-1.706667 67.114667-3.114667 97.450667-58.794667 5.589333-15.616 6.656-17.621333 13.568-38.485333h76.373333c0 27.776-3.157333 177.109333-4.437333 194.474667h-138.24c-31.104.0-41.173333 62.549333-41.173333 62.549333h173.482666C295.253333 688.256 232.789333 799.573333 119.466667 887.466667c54.186667 15.488 108.202667-2.432 134.912-26.197334.0.0 60.8-55.338667 94.122666-183.381333L491.264 849.834667s20.906667-71.168-3.285333-105.856c-20.053333-23.637333-74.24-87.552-97.322667-110.72l-38.698667 30.72c11.52-36.992 18.474667-72.96 20.821334-107.690667h163.072s-.213333-62.549333-20.053334-62.549333z" p-id="5821" fill="#8a8a8a"/></svg></a></li><li><a href=mailto:%20danmyw@qq.com target=_blank title=e-mail rel=me><!doctype html><svg t="1750733089669" class="icon" viewBox="0 0 1451 1024" p-id="6983" xmlns:xlink="http://www.w3.org/1999/xlink" width="283.3984375" height="200"><path d="M664.781909 681.472759.0 97.881301C0 3.997201 71.046997.0 71.046997.0H474.477909 961.649408h399.992405s71.046998 3.997201 71.046998 97.881301L771.345323 681.472759S764.482731 685.154773 753.594283 688.65053V688.664858C741.602731 693.493018 729.424896 695.068979 718.077952 694.839748 706.731093 695.068979 694.553173 693.493018 682.561621 688.664858V688.65053C671.644501 685.140446 664.781909 681.472759 664.781909 681.472759zm53.281707 130.131124C693.779541 811.016482 658.879232 802.205449 619.10784 767.734955 542.989056 701.759633.0 212.052267.0 212.052267V942.809523S0 1024 83.726336 1024H682.532949 753.579947h595.368192C1432.688811 1024 1432.688811 942.809523 1432.688811 942.809523V212.052267S893.138176 701.759633 817.019477 767.734955c-39.771477 34.470494-74.671786 43.295855-98.955861 43.868928z" fill="#8a8a8a" p-id="6984"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>主页</span></a></li><li><a href=/page/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>检索</span></a></li><li><a href=/page/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>链接</span></a></li><li><a href=/page/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>关于</span></a></li><li><a href=/page/releases/><svg class="icon icon-tabler icon-tabler-infinity" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M9.828 9.172a4 4 0 100 5.656A10 10 0 0012 12a10 10 0 012.172-2.828 4 4 0 110 5.656A10 10 0 0112 12 10 10 0 009.828 9.172"/></svg>
<span>热门开源</span></a></li><li class=menu-bottom-section><ol class=menu><li id=i18n-switch><svg class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg>
<select name=language title=language onchange="window.location.href=this.selectedOptions[0].value"><option value=https://chengxiaqiucao.github.io/en/>English</option><option value=https://chengxiaqiucao.github.io/ selected>中文</option></select></li><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>暗色模式</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#selenium-4带来的变化>Selenium 4带来的变化</a></li><li><a href=#原先的浏览器驱动方式带来的问题>原先的浏览器驱动方式带来的问题</a><ol><li><a href=#selenium工作原理>Selenium工作原理</a></li><li><a href=#导致的问题>导致的问题</a></li><li><a href=#chrome对驱动问题的应对>Chrome对驱动问题的应对</a></li><li><a href=#selenium应对驱动匹配问题的解决方案>Selenium应对驱动匹配问题的解决方案</a></li></ol></li><li><a href=#selenium-4-启动自动化执行源码分析>Selenium 4 启动自动化执行源码分析</a></li><li><a href=#selenium-manager-命令行程序>Selenium Manager 命令行程序</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/post/013-selenium-manager/><img src=/post/013-selenium-manager/Se-m_hu_259d874fa7651460.png srcset="/post/013-selenium-manager/Se-m_hu_259d874fa7651460.png 800w, /post/013-selenium-manager/Se-m_hu_5bcc7b31e3cb65d9.png 1600w" width=800 height=423 loading=lazy alt="Featured image of post Selenium Manager用法详解"></a></div><div class=article-details><header class=article-category><a href=/categories/%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7/ style=background-color:#c6fad2;color:#000>测试工具</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/post/013-selenium-manager/>Selenium Manager用法详解</a></h2><h3 class=article-subtitle>Selenium在V4版本增加了一个Selenium manager工具，它有何作用？</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Sep 07, 2024</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>阅读时长: 8 分钟</time></div></footer></div></header><section class=article-content><p>Selenium诞生于2004年，以其开源、功能全面长期以来长期排名Web 自动化测试工具领域的Top1，是目前最主流的Web自动化测试工具，而Selenium的核心Webdriver 更是作为W3C的通行标准，被各类工具广泛参照。可以说是目前web自动化测试的事实标准。</p><h2 id=selenium-4带来的变化>Selenium 4带来的变化</h2><p>Selenium本身经过多年的演进，目前已经发布到V4.24版本。 虽然目前网上还广泛流传V3版本相关的用法和资料，但Selenium 4 其实是一个非常大的更新版本。它的几个核心组件都进行的极大程度的重构。</p><ul><li>WebDriver 从原先的Json Wire Protocol 切换为了W3C的标准定义</li><li>Selenium IDE 完成重构和功能优化</li><li>Selenium Grid 完成重构，支持更灵活的云服务架构</li></ul><p>此外Selenium 4中还引入了一个很重要的工具，也就是本篇我们要重点来介绍的Selenium Manager（实际是V4.6才引入，到V4.12 功能才基本完备</p><h2 id=原先的浏览器驱动方式带来的问题>原先的浏览器驱动方式带来的问题</h2><p>要了解Selenium Manager，我们还是要先了解下Selenium的工作原理。</p><h3 id=selenium工作原理>Selenium工作原理</h3><p>下图是官网给的Selenium本地运行的基本架构。
<img src=/post/013-selenium-manager/Pasted-20240908.png width=895 height=426 srcset="/post/013-selenium-manager/Pasted-20240908_hu_67d2139d6f95dc8e.png 480w, /post/013-selenium-manager/Pasted-20240908_hu_24c48f0d0b3dfa92.png 1024w" loading=lazy alt=Selenium工作原理 class=gallery-image data-flex-grow=210 data-flex-basis=504px></p><p>可以看到，Selenium实际上完成自动化，是通过webdriver协议驱动不同类型的浏览器（Chrome、Firefox、IE、Edge、Safari等）完成指定的动作，以此达到自动化执行的目的。</p><p>而驱动浏览器的关键，是和浏览器对应的浏览器Driver驱动，比如Chrome对应的ChromeDriver， FireFox对应的GecoDriver等。</p><p>而Selenium本身，则是基于WebDriver协议和浏览器Driver完成交互。</p><h3 id=导致的问题>导致的问题</h3><p>这个架构和工作原理虽然清晰，但是有一个问题，就是浏览器的版本是不断更新的。而<strong>浏览器驱动版本需要和浏览器版本匹配</strong>，不匹配的驱动和浏览器版本，共同工作可能存在各种预期外的异常，所以Selenium要正常工作，再用Selenium库完成编码前，首先就是要保证浏览器驱动和浏览器版本的部署和匹配。</p><p>但浏览器版本和对应的驱动，通常都是由浏览器厂商维护的。</p><p>所以这里的自动化测试环境准备就会变得比较复杂，要安装对应被测版本的浏览器，同时还要找到对应这个版本的驱动，再把相关路径配置给Selenium，然后Selenium才能完成正常的驱动。</p><p>此外，浏览器的版本，一般还有<strong>自动更新功能</strong>，可能在用户没感知的情况，其实版本已经变化了，但此时驱动版本并不会同步更新，所以也<strong>导致驱动和浏览器版本不匹配</strong>的潜在问题。</p><p>这个问题，其实长期没有得到很好地解决，Selenium 3和Selenium 4的早期版本，我们部署Selenium 自动化环境，浏览器版本和驱动版本的获取和匹配一直是一个比较麻烦的工作，也因此劝退了不少自动化测试小白。</p><h3 id=chrome对驱动问题的应对>Chrome对驱动问题的应对</h3><p>既然这个问题由来已久，浏览器厂商其实也意识到驱动和浏览器版本不匹配，给自动化测试带来的困扰。</p><p>以Chrome为例，我们去到 <a class=link href=https://developer.chrome.com/docs/chromedriver/downloads target=_blank rel=noopener>ChromeDriver官方下载</a> 网址的话，会看到这样的页面</p><p><img src=/post/013-selenium-manager/Pasted-20240910.png width=1414 height=850 srcset="/post/013-selenium-manager/Pasted-20240910_hu_99a015979c895c61.png 480w, /post/013-selenium-manager/Pasted-20240910_hu_1752da553fa19ff2.png 1024w" loading=lazy class=gallery-image data-flex-grow=166 data-flex-basis=399px></p><p>可以看到，这里对Chrome Driver的下载只提供到了114版本，而最新的Chrome其实已经到了128版本。
对于115版本以后，Chrome浏览器其实调整了driver的发布策略，也就是Chrome driver会跟随 Chrome for Testing 版本同步发布。严格保证driver和浏览器版本的同步匹配。</p><p>那这里为什么有一个Chrome for Testing版本呢？</p><p><img src=/post/013-selenium-manager/Pasted-20240910-1.png width=1325 height=1054 srcset="/post/013-selenium-manager/Pasted-20240910-1_hu_8aca57dd3ae6ffd5.png 480w, /post/013-selenium-manager/Pasted-20240910-1_hu_7555cd5fbe7ad730.png 1024w" loading=lazy class=gallery-image data-flex-grow=125 data-flex-basis=301px>
我们之前提到，浏览器版本，会有自动更新，如果进行自动更新，driver版本不会同步更新，所以导致dirver和浏览器的不匹配。</p><p>所以Chrome for Testing与正式版本的主要区别，其实就是 <strong>for Testing版本是不会进行自动更新</strong>的。</p><p>这样，再加上版本号和浏览器版本的共用，就能很方便地保证浏览器和驱动的一致。</p><h3 id=selenium应对驱动匹配问题的解决方案>Selenium应对驱动匹配问题的解决方案</h3><p>那上面是浏览器对驱动匹配问题给出的解决方法，但其实还是没有完全解决浏览器、Driver需要分别获取和指定的问题。那么Selenium官方对这个问题的解决方案，就是Selenium Manager。它其实是一个包含在Selenium库中，无需额外安装的可执行程序。</p><p><img src=/post/013-selenium-manager/Pasted-20240910-2.png width=569 height=685 srcset="/post/013-selenium-manager/Pasted-20240910-2_hu_b973f3c21ba7130e.png 480w, /post/013-selenium-manager/Pasted-20240910-2_hu_4e91fb5ba571ea38.png 1024w" loading=lazy class=gallery-image data-flex-grow=83 data-flex-basis=199px></p><p>我们目前使用Selenium V4来执行一个简单的自动化测试脚本的话:</p><p>比如通过百度，搜索<code>城下秋草 测试</code>, 代码如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>selenium</span> <span class=kn>import</span> <span class=n>webdriver</span>  
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>selenium.webdriver.common.by</span> <span class=kn>import</span> <span class=n>By</span>  
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>time</span> <span class=kn>import</span> <span class=n>sleep</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>test_baidu_search</span><span class=p>():</span>  
</span></span><span class=line><span class=cl>    <span class=n>option</span> <span class=o>=</span> <span class=n>webdriver</span><span class=o>.</span><span class=n>ChromeOptions</span><span class=p>()</span>  
</span></span><span class=line><span class=cl>    <span class=n>option</span><span class=o>.</span><span class=n>browser_version</span> <span class=o>=</span> <span class=s1>&#39;117&#39;</span>  
</span></span><span class=line><span class=cl>    <span class=n>driver</span> <span class=o>=</span> <span class=n>webdriver</span><span class=o>.</span><span class=n>Chrome</span><span class=p>(</span><span class=n>options</span><span class=o>=</span><span class=n>option</span><span class=p>)</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>    <span class=n>driver</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;https://www.baidu.com&#34;</span><span class=p>)</span>  
</span></span><span class=line><span class=cl>    <span class=n>driver</span><span class=o>.</span><span class=n>find_element</span><span class=p>(</span><span class=n>By</span><span class=o>.</span><span class=n>ID</span><span class=p>,</span><span class=s1>&#39;kw&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>send_keys</span><span class=p>(</span><span class=s1>&#39;城下秋草 测试&#39;</span><span class=p>)</span>  
</span></span><span class=line><span class=cl>    <span class=n>sleep</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>  
</span></span><span class=line><span class=cl>    <span class=n>driver</span><span class=o>.</span><span class=n>find_element</span><span class=p>(</span><span class=n>By</span><span class=o>.</span><span class=n>ID</span><span class=p>,</span><span class=s1>&#39;su&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>click</span><span class=p>()</span>  
</span></span><span class=line><span class=cl>    <span class=n>sleep</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span>  
</span></span><span class=line><span class=cl>    <span class=n>driver</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><p>只要安装了Selenium库，执行的时候，就可以正常地驱动, 并不需要特别地去获取驱动和配置。</p><p><img src=/post/013-selenium-manager/run.gif width=1554 height=935 srcset="/post/013-selenium-manager/run_hu_af9dd9ccf17addd3.gif 480w, /post/013-selenium-manager/run_hu_18b3de2fd3398769.gif 1024w" loading=lazy class=gallery-image data-flex-grow=166 data-flex-basis=398px></p><h2 id=selenium-4-启动自动化执行源码分析>Selenium 4 启动自动化执行源码分析</h2><p>这里我们从Selenium的Python源码来分析下它的启动过程：</p><p><code>driver = webdriver.Chrome(options=option)</code></p><p>这行代码其实会调用Slenium库中Chromium基础浏览器的webdriver初始化代码，位置在<code>.venv/Lib/site-packages/selenium/webdriver/chromium/webdriver.py</code></p><p>初始化时，可以看到，会通过DriverFinder方法来获取浏览器和Driver的路径</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>finder</span> <span class=o>=</span> <span class=n>DriverFinder</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>service</span><span class=p>,</span> <span class=n>options</span><span class=p>)</span>  
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>finder</span><span class=o>.</span><span class=n>get_browser_path</span><span class=p>():</span>  
</span></span><span class=line><span class=cl>    <span class=n>options</span><span class=o>.</span><span class=n>binary_location</span> <span class=o>=</span> <span class=n>finder</span><span class=o>.</span><span class=n>get_browser_path</span><span class=p>()</span>  
</span></span><span class=line><span class=cl>    <span class=n>options</span><span class=o>.</span><span class=n>browser_version</span> <span class=o>=</span> <span class=kc>None</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=bp>self</span><span class=o>.</span><span class=n>service</span><span class=o>.</span><span class=n>path</span> <span class=o>=</span> <span class=n>finder</span><span class=o>.</span><span class=n>get_driver_path</span><span class=p>()</span>  
</span></span><span class=line><span class=cl><span class=bp>self</span><span class=o>.</span><span class=n>service</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><p>而获取路径的方法，其实就是调用了SeleniumManager模块的binary_paths方法</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_browser_path</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>  
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_binary_paths</span><span class=p>()[</span><span class=s2>&#34;browser_path&#34;</span><span class=p>]</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_driver_path</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>  
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_binary_paths</span><span class=p>()[</span><span class=s2>&#34;driver_path&#34;</span><span class=p>]</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>_binary_paths</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>:</span>  
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_paths</span><span class=p>[</span><span class=s2>&#34;driver_path&#34;</span><span class=p>]:</span>  
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_paths</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=o>.</span>
</span></span><span class=line><span class=cl><span class=o>.</span>
</span></span><span class=line><span class=cl><span class=o>.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=n>output</span> <span class=o>=</span> <span class=n>SeleniumManager</span><span class=p>()</span><span class=o>.</span><span class=n>binary_paths</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_to_args</span><span class=p>())</span>  
</span></span><span class=line><span class=cl><span class=o>.</span>
</span></span><span class=line><span class=cl><span class=o>.</span>
</span></span><span class=line><span class=cl><span class=o>.</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_paths</span>
</span></span></code></pre></td></tr></table></div></div><p>而SeleniumManager模块，则会执行SeleniumManager的二进制程序，根据相关参数，获取浏览器和驱动版本。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>_run</span><span class=p>(</span><span class=n>args</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>:</span>  
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;Executes the Selenium Manager Binary.  
</span></span></span><span class=line><span class=cl><span class=s2>  
</span></span></span><span class=line><span class=cl><span class=s2>    :Args:     - args: the components of the command being executed.    :Returns: The log string containing the driver location.    &#34;&#34;&#34;</span>    <span class=n>command</span> <span class=o>=</span> <span class=s2>&#34; &#34;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>args</span><span class=p>)</span>  
</span></span><span class=line><span class=cl>    <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&#34;Executing process: </span><span class=si>%s</span><span class=s2>&#34;</span><span class=p>,</span> <span class=n>command</span><span class=p>)</span>  
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>  
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>sys</span><span class=o>.</span><span class=n>platform</span> <span class=o>==</span> <span class=s2>&#34;win32&#34;</span><span class=p>:</span>  
</span></span><span class=line><span class=cl>            <span class=n>completed_proc</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>args</span><span class=p>,</span> <span class=n>capture_output</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>creationflags</span><span class=o>=</span><span class=n>subprocess</span><span class=o>.</span><span class=n>CREATE_NO_WINDOW</span><span class=p>)</span>  
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>  
</span></span><span class=line><span class=cl>            <span class=n>completed_proc</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>args</span><span class=p>,</span> <span class=n>capture_output</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>  
</span></span><span class=line><span class=cl>        <span class=n>stdout</span> <span class=o>=</span> <span class=n>completed_proc</span><span class=o>.</span><span class=n>stdout</span><span class=o>.</span><span class=n>decode</span><span class=p>(</span><span class=s2>&#34;utf-8&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>rstrip</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>)</span>  
</span></span><span class=line><span class=cl>        <span class=n>stderr</span> <span class=o>=</span> <span class=n>completed_proc</span><span class=o>.</span><span class=n>stderr</span><span class=o>.</span><span class=n>decode</span><span class=p>(</span><span class=s2>&#34;utf-8&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>rstrip</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>)</span>  
</span></span><span class=line><span class=cl>        <span class=n>output</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>stdout</span><span class=p>)</span> <span class=k>if</span> <span class=n>stdout</span> <span class=o>!=</span> <span class=s2>&#34;&#34;</span> <span class=k>else</span> <span class=p>{</span><span class=s2>&#34;logs&#34;</span><span class=p>:</span> <span class=p>[],</span> <span class=s2>&#34;result&#34;</span><span class=p>:</span> <span class=p>{}}</span>  
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>err</span><span class=p>:</span>  
</span></span><span class=line><span class=cl>        <span class=k>raise</span> <span class=n>WebDriverException</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Unsuccessful command executed: </span><span class=si>{</span><span class=n>command</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span> <span class=kn>from</span> <span class=nn>err</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>    <span class=n>SeleniumManager</span><span class=o>.</span><span class=n>_process_logs</span><span class=p>(</span><span class=n>output</span><span class=p>[</span><span class=s2>&#34;logs&#34;</span><span class=p>])</span>  
</span></span><span class=line><span class=cl>    <span class=n>result</span> <span class=o>=</span> <span class=n>output</span><span class=p>[</span><span class=s2>&#34;result&#34;</span><span class=p>]</span>  
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>completed_proc</span><span class=o>.</span><span class=n>returncode</span><span class=p>:</span>  
</span></span><span class=line><span class=cl>        <span class=k>raise</span> <span class=n>WebDriverException</span><span class=p>(</span>  
</span></span><span class=line><span class=cl>            <span class=sa>f</span><span class=s2>&#34;Unsuccessful command executed: </span><span class=si>{</span><span class=n>command</span><span class=si>}</span><span class=s2>; code: </span><span class=si>{</span><span class=n>completed_proc</span><span class=o>.</span><span class=n>returncode</span><span class=si>}</span><span class=se>\n</span><span class=si>{</span><span class=n>result</span><span class=si>}</span><span class=se>\n</span><span class=si>{</span><span class=n>stderr</span><span class=si>}</span><span class=s2>&#34;</span>  
</span></span><span class=line><span class=cl>        <span class=p>)</span>  
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>result</span>
</span></span></code></pre></td></tr></table></div></div><p>所以，目前的Selenium 4版本执行时，会通过SeleniumManager程序来确定需要的浏览器和对应的driver版本。</p><h2 id=selenium-manager-命令行程序>Selenium Manager 命令行程序</h2><p>而通过SeleniumManager，根据我们配置的浏览器类型和版本，它可以自动的匹配相关的driver版本，并自行联网，获取相关驱动和浏览器版本的文件，供Selenium调用。
比如上例中，我们指定了浏览器版本为 <code>117</code>, 执行以后，在用户目录的 <code>.cache\selenium</code>目录下其实就会保存下载的浏览器和对应的驱动版本。下图是当前执行更新的117 版本的驱动。</p><p><img src=/post/013-selenium-manager/Pasted-20240910-3.png width=1135 height=395 srcset="/post/013-selenium-manager/Pasted-20240910-3_hu_e3b82242381f862f.png 480w, /post/013-selenium-manager/Pasted-20240910-3_hu_d437668ab8fc231f.png 1024w" loading=lazy class=gallery-image data-flex-grow=287 data-flex-basis=689px></p><p>这里Selenium调用的是Selenium-manager这个命令行程序</p><p>我们可以直接执行这个程序，加上<code>--help</code>看一下支持的参数</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>selenium</span><span class=o>-</span><span class=n>manager</span> <span class=mf>0.4</span><span class=o>.</span><span class=mi>24</span>
</span></span><span class=line><span class=cl><span class=n>Selenium</span> <span class=n>Manager</span> <span class=n>is</span> <span class=n>a</span> <span class=n>CLI</span> <span class=k>tool</span> <span class=n>that</span> <span class=n>automatically</span> <span class=n>manages</span> <span class=n>the</span> <span class=n>browser</span><span class=o>/</span><span class=n>driver</span> <span class=n>infrastructure</span> <span class=n>required</span> <span class=n>by</span> <span class=n>Selenium</span><span class=o>.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Usage</span><span class=p>:</span> <span class=n>selenium</span><span class=o>-</span><span class=n>manager</span> <span class=p>[</span><span class=n>OPTIONS</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Options</span><span class=p>:</span>
</span></span><span class=line><span class=cl>      <span class=o>--</span><span class=n>browser</span> <span class=o>&lt;</span><span class=n>BROWSER</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=n>Browser</span> <span class=n>name</span> <span class=p>(</span><span class=n>chrome</span><span class=p>,</span> <span class=n>firefox</span><span class=p>,</span> <span class=n>edge</span><span class=p>,</span> <span class=n>iexplorer</span><span class=p>,</span> <span class=n>safari</span><span class=p>,</span> <span class=n>safaritp</span><span class=p>,</span> <span class=ow>or</span> <span class=n>webview2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=o>--</span><span class=n>driver</span> <span class=o>&lt;</span><span class=n>DRIVER</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=n>Driver</span> <span class=n>name</span> <span class=p>(</span><span class=n>chromedriver</span><span class=p>,</span> <span class=n>geckodriver</span><span class=p>,</span> <span class=n>msedgedriver</span><span class=p>,</span> <span class=n>IEDriverServer</span><span class=p>,</span> <span class=ow>or</span> <span class=n>safaridriver</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=o>--</span><span class=n>grid</span> <span class=p>[</span><span class=o>&lt;</span><span class=n>GRID_VERSION</span><span class=o>&gt;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>          <span class=n>Selenium</span> <span class=n>Grid</span><span class=o>.</span> <span class=n>If</span> <span class=n>version</span> <span class=n>is</span> <span class=ow>not</span> <span class=n>provided</span><span class=p>,</span> <span class=n>the</span> <span class=n>latest</span> <span class=n>version</span> <span class=n>is</span> <span class=n>downloaded</span>
</span></span><span class=line><span class=cl>      <span class=o>--</span><span class=n>driver</span><span class=o>-</span><span class=n>version</span> <span class=o>&lt;</span><span class=n>DRIVER_VERSION</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=n>Driver</span> <span class=n>version</span> <span class=p>(</span><span class=n>e</span><span class=o>.</span><span class=n>g</span><span class=o>.</span><span class=p>,</span> <span class=mf>106.0</span><span class=o>.</span><span class=mf>5249.61</span><span class=p>,</span> <span class=mf>0.31</span><span class=o>.</span><span class=mi>0</span><span class=p>,</span> <span class=n>etc</span><span class=o>.</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=o>--</span><span class=n>browser</span><span class=o>-</span><span class=n>version</span> <span class=o>&lt;</span><span class=n>BROWSER_VERSION</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=n>Major</span> <span class=n>browser</span> <span class=n>version</span> <span class=p>(</span><span class=n>e</span><span class=o>.</span><span class=n>g</span><span class=o>.</span><span class=p>,</span> <span class=mi>105</span><span class=p>,</span> <span class=mi>106</span><span class=p>,</span> <span class=n>etc</span><span class=o>.</span> <span class=n>Also</span><span class=p>:</span> <span class=n>beta</span><span class=p>,</span> <span class=n>dev</span><span class=p>,</span> <span class=n>canary</span> <span class=o>-</span><span class=ow>or</span> <span class=n>nightly</span><span class=o>-</span><span class=p>,</span> <span class=ow>and</span> <span class=n>esr</span> <span class=o>-</span><span class=ow>in</span> <span class=n>Firefox</span><span class=o>-</span> <span class=n>are</span> <span class=n>accepted</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=o>--</span><span class=n>browser</span><span class=o>-</span><span class=n>path</span> <span class=o>&lt;</span><span class=n>BROWSER_PATH</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=n>Browser</span> <span class=n>path</span> <span class=p>(</span><span class=n>absolute</span><span class=p>)</span> <span class=k>for</span> <span class=n>browser</span> <span class=n>version</span> <span class=n>detection</span> <span class=p>(</span><span class=n>e</span><span class=o>.</span><span class=n>g</span><span class=o>.</span><span class=p>,</span> <span class=o>/</span><span class=n>usr</span><span class=o>/</span><span class=n>bin</span><span class=o>/</span><span class=n>google</span><span class=o>-</span><span class=n>chrome</span><span class=p>,</span> <span class=s2>&#34;/Applications/Google Chrome.app/Contents/MacOS/Google Chrome&#34;</span><span class=p>,</span> <span class=s2>&#34;C:\Program Files\Google\Chrome\Application\chrome.exe&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=o>--</span><span class=n>driver</span><span class=o>-</span><span class=n>mirror</span><span class=o>-</span><span class=n>url</span> <span class=o>&lt;</span><span class=n>DRIVER_MIRROR_URL</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=n>Mirror</span> <span class=k>for</span> <span class=n>driver</span> <span class=n>repositories</span> <span class=p>(</span><span class=n>e</span><span class=o>.</span><span class=n>g</span><span class=o>.</span><span class=p>,</span> <span class=n>https</span><span class=p>:</span><span class=o>//</span><span class=n>registry</span><span class=o>.</span><span class=n>npmmirror</span><span class=o>.</span><span class=n>com</span><span class=o>/-/</span><span class=n>binary</span><span class=o>/</span><span class=n>chromedriver</span><span class=o>/</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=o>--</span><span class=n>browser</span><span class=o>-</span><span class=n>mirror</span><span class=o>-</span><span class=n>url</span> <span class=o>&lt;</span><span class=n>BROWSER_MIRROR_URL</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=n>Mirror</span> <span class=k>for</span> <span class=n>browser</span> <span class=n>repositories</span>
</span></span><span class=line><span class=cl>      <span class=o>--</span><span class=n>output</span> <span class=o>&lt;</span><span class=n>OUTPUT</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=n>Output</span> <span class=n>type</span><span class=p>:</span> <span class=n>LOGGER</span> <span class=p>(</span><span class=n>using</span> <span class=n>INFO</span><span class=p>,</span> <span class=n>WARN</span><span class=p>,</span> <span class=n>etc</span><span class=o>.</span><span class=p>),</span> <span class=n>JSON</span> <span class=p>(</span><span class=n>custom</span> <span class=n>JSON</span> <span class=n>notation</span><span class=p>),</span> <span class=n>SHELL</span> <span class=p>(</span><span class=n>Unix</span><span class=o>-</span><span class=n>like</span><span class=p>),</span> <span class=ow>or</span> <span class=n>MIXED</span> <span class=p>(</span><span class=n>INFO</span><span class=p>,</span> <span class=n>WARN</span><span class=p>,</span> <span class=n>DEBUG</span><span class=p>,</span> <span class=n>etc</span><span class=o>.</span> <span class=n>to</span> <span class=n>stderr</span> <span class=ow>and</span> <span class=n>minimal</span> <span class=n>JSON</span> <span class=n>to</span> <span class=n>stdout</span><span class=p>)</span> <span class=p>[</span><span class=n>default</span><span class=p>:</span> <span class=n>LOGGER</span><span class=p>]</span>
</span></span><span class=line><span class=cl>      <span class=o>--</span><span class=n>os</span> <span class=o>&lt;</span><span class=ne>OS</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=n>Operating</span> <span class=n>system</span> <span class=p>(</span><span class=n>i</span><span class=o>.</span><span class=n>e</span><span class=o>.</span><span class=p>,</span> <span class=n>windows</span><span class=p>,</span> <span class=n>linux</span><span class=p>,</span> <span class=ow>or</span> <span class=n>macos</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=o>--</span><span class=n>arch</span> <span class=o>&lt;</span><span class=n>ARCH</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=n>System</span> <span class=n>architecture</span> <span class=p>(</span><span class=n>i</span><span class=o>.</span><span class=n>e</span><span class=o>.</span><span class=p>,</span> <span class=n>x32</span><span class=p>,</span> <span class=n>x64</span><span class=p>,</span> <span class=ow>or</span> <span class=n>arm64</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=o>--</span><span class=n>proxy</span> <span class=o>&lt;</span><span class=n>PROXY</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=n>HTTP</span> <span class=n>proxy</span> <span class=k>for</span> <span class=n>network</span> <span class=n>connection</span> <span class=p>(</span><span class=n>e</span><span class=o>.</span><span class=n>g</span><span class=o>.</span><span class=p>,</span> <span class=n>https</span><span class=p>:</span><span class=o>//</span><span class=n>myproxy</span><span class=o>.</span><span class=n>net</span><span class=p>:</span><span class=mi>8080</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=o>--</span><span class=n>timeout</span> <span class=o>&lt;</span><span class=n>TIMEOUT</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=n>Timeout</span> <span class=k>for</span> <span class=n>network</span> <span class=n>requests</span> <span class=p>(</span><span class=ow>in</span> <span class=n>seconds</span><span class=p>)</span> <span class=p>[</span><span class=n>default</span><span class=p>:</span> <span class=mi>300</span><span class=p>]</span>
</span></span><span class=line><span class=cl>      <span class=o>--</span><span class=n>ttl</span> <span class=o>&lt;</span><span class=n>TTL</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=n>TTL</span> <span class=p>(</span><span class=n>time</span><span class=o>-</span><span class=n>to</span><span class=o>-</span><span class=n>live</span><span class=p>)</span> <span class=k>for</span> <span class=n>discovered</span> <span class=n>versions</span> <span class=p>(</span><span class=n>online</span><span class=p>)</span> <span class=n>of</span> <span class=n>drivers</span> <span class=ow>and</span> <span class=n>browsers</span> <span class=p>[</span><span class=n>default</span><span class=p>:</span> <span class=mi>3600</span><span class=p>]</span>
</span></span><span class=line><span class=cl>      <span class=o>--</span><span class=n>cache</span><span class=o>-</span><span class=n>path</span> <span class=o>&lt;</span><span class=n>CACHE_PATH</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=n>Local</span> <span class=n>folder</span> <span class=n>used</span> <span class=n>to</span> <span class=n>store</span> <span class=n>downloaded</span> <span class=n>assets</span> <span class=p>(</span><span class=n>drivers</span> <span class=ow>and</span> <span class=n>browsers</span><span class=p>),</span> <span class=n>local</span> <span class=n>metadata</span><span class=p>,</span> <span class=ow>and</span> <span class=n>configuration</span> <span class=n>file</span> <span class=p>[</span><span class=n>default</span><span class=p>:</span> <span class=o>~/.</span><span class=n>cache</span><span class=o>/</span><span class=n>selenium</span><span class=p>]</span>
</span></span><span class=line><span class=cl>      <span class=o>--</span><span class=n>clear</span><span class=o>-</span><span class=n>cache</span>
</span></span><span class=line><span class=cl>          <span class=n>Clear</span> <span class=n>cache</span> <span class=n>folder</span> <span class=p>(</span><span class=o>~/.</span><span class=n>cache</span><span class=o>/</span><span class=n>selenium</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=o>--</span><span class=n>clear</span><span class=o>-</span><span class=n>metadata</span>
</span></span><span class=line><span class=cl>          <span class=n>Clear</span> <span class=n>metadata</span> <span class=n>file</span> <span class=p>(</span><span class=o>~/.</span><span class=n>cache</span><span class=o>/</span><span class=n>selenium</span><span class=o>/</span><span class=n>selenium</span><span class=o>-</span><span class=n>manager</span><span class=o>.</span><span class=n>json</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=o>--</span><span class=n>debug</span>
</span></span><span class=line><span class=cl>          <span class=n>Display</span> <span class=n>DEBUG</span> <span class=n>messages</span>
</span></span><span class=line><span class=cl>      <span class=o>--</span><span class=n>trace</span>
</span></span><span class=line><span class=cl>          <span class=n>Display</span> <span class=n>TRACE</span> <span class=n>messages</span>
</span></span><span class=line><span class=cl>      <span class=o>--</span><span class=nb>log</span><span class=o>-</span><span class=n>level</span> <span class=o>&lt;</span><span class=n>LOG_LEVEL</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=n>Level</span> <span class=k>for</span> <span class=n>output</span> <span class=n>messages</span><span class=o>.</span> <span class=n>The</span> <span class=n>possible</span> <span class=n>values</span> <span class=n>are</span><span class=p>:</span> <span class=n>info</span><span class=p>,</span> <span class=n>debug</span><span class=p>,</span> <span class=n>trace</span><span class=p>,</span> <span class=n>warn</span><span class=p>,</span> <span class=n>error</span>
</span></span><span class=line><span class=cl>      <span class=o>--</span><span class=n>offline</span>
</span></span><span class=line><span class=cl>          <span class=n>Offline</span> <span class=n>mode</span> <span class=p>(</span><span class=n>i</span><span class=o>.</span><span class=n>e</span><span class=o>.</span><span class=p>,</span> <span class=n>disabling</span> <span class=n>network</span> <span class=n>requests</span> <span class=ow>and</span> <span class=n>downloads</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=o>--</span><span class=n>force</span><span class=o>-</span><span class=n>browser</span><span class=o>-</span><span class=n>download</span>
</span></span><span class=line><span class=cl>          <span class=n>Force</span> <span class=n>to</span> <span class=n>download</span> <span class=n>browser</span> <span class=p>(</span><span class=n>even</span> <span class=n>when</span> <span class=n>browser</span> <span class=n>is</span> <span class=n>already</span> <span class=ow>in</span> <span class=n>the</span> <span class=n>system</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=o>--</span><span class=n>avoid</span><span class=o>-</span><span class=n>browser</span><span class=o>-</span><span class=n>download</span>
</span></span><span class=line><span class=cl>          <span class=n>Avoid</span> <span class=n>to</span> <span class=n>download</span> <span class=n>browser</span> <span class=p>(</span><span class=n>even</span> <span class=n>when</span> <span class=n>browser</span><span class=o>-</span><span class=n>version</span> <span class=n>is</span> <span class=n>specified</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=o>--</span><span class=n>language</span><span class=o>-</span><span class=n>binding</span> <span class=o>&lt;</span><span class=n>LANGUAGE_BINDING</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=n>Selenium</span> <span class=n>language</span> <span class=n>bindings</span> <span class=n>that</span> <span class=n>invokes</span> <span class=n>Selenium</span> <span class=n>Manager</span> <span class=p>(</span><span class=n>e</span><span class=o>.</span><span class=n>g</span><span class=o>.</span><span class=p>,</span> <span class=n>Java</span><span class=p>,</span> <span class=n>JavaScript</span><span class=p>,</span> <span class=n>Python</span><span class=p>,</span> <span class=n>DotNet</span><span class=p>,</span> <span class=n>Ruby</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=o>--</span><span class=n>avoid</span><span class=o>-</span><span class=n>stats</span>
</span></span><span class=line><span class=cl>          <span class=n>Avoid</span> <span class=n>sends</span> <span class=n>usage</span> <span class=n>statistics</span> <span class=n>to</span> <span class=n>plausible</span><span class=o>.</span><span class=n>io</span>
</span></span><span class=line><span class=cl>  <span class=o>-</span><span class=n>h</span><span class=p>,</span> <span class=o>--</span><span class=n>help</span>
</span></span><span class=line><span class=cl>          <span class=n>Print</span> <span class=n>help</span>
</span></span><span class=line><span class=cl>  <span class=o>-</span><span class=n>V</span><span class=p>,</span> <span class=o>--</span><span class=n>version</span>
</span></span><span class=line><span class=cl>          <span class=n>Print</span> <span class=n>version</span>
</span></span></code></pre></td></tr></table></div></div><p>我们可以执行看一下这里输出信息，其实selenium在执行时就是调用的这个命令行程序</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=o>&gt;</span><span class=n>selenium</span><span class=o>-</span><span class=n>manager</span><span class=o>.</span><span class=n>exe</span> <span class=o>--</span><span class=n>browser</span> <span class=n>firefox</span> <span class=o>--</span><span class=n>debug</span>    <span class=c1>#debug参数显示详细输出</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=mi>2024</span><span class=o>-</span><span class=mi>09</span><span class=o>-</span><span class=mi>10</span><span class=n>T13</span><span class=p>:</span><span class=mi>35</span><span class=p>:</span><span class=mf>56.007</span><span class=n>Z</span> <span class=n>DEBUG</span><span class=p>]</span> <span class=n>geckodriver</span> <span class=ow>not</span> <span class=n>found</span> <span class=ow>in</span> <span class=n>PATH</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 首先在系统Path路径中根据指定的浏览器判断是否存在驱动</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=mi>2024</span><span class=o>-</span><span class=mi>09</span><span class=o>-</span><span class=mi>10</span><span class=n>T13</span><span class=p>:</span><span class=mi>35</span><span class=p>:</span><span class=mf>56.010</span><span class=n>Z</span> <span class=n>DEBUG</span><span class=p>]</span> <span class=n>firefox</span> <span class=ow>not</span> <span class=n>found</span> <span class=ow>in</span> <span class=n>PATH</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 同样根据Path路径中是否包含firefox浏览器安装路径</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=mi>2024</span><span class=o>-</span><span class=mi>09</span><span class=o>-</span><span class=mi>10</span><span class=n>T13</span><span class=p>:</span><span class=mi>35</span><span class=p>:</span><span class=mf>56.010</span><span class=n>Z</span> <span class=n>DEBUG</span><span class=p>]</span> <span class=n>Running</span> <span class=n>command</span><span class=p>:</span> <span class=n>REG</span> <span class=n>QUERY</span> <span class=n>HKCU</span>\<span class=n>Software</span>\<span class=n>Mozilla</span>\<span class=n>Mozilla</span> <span class=n>Firefox</span> <span class=o>/</span><span class=n>v</span> <span class=n>CurrentVersion</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=mi>2024</span><span class=o>-</span><span class=mi>09</span><span class=o>-</span><span class=mi>10</span><span class=n>T13</span><span class=p>:</span><span class=mi>35</span><span class=p>:</span><span class=mf>56.034</span><span class=n>Z</span> <span class=n>DEBUG</span><span class=p>]</span> <span class=n>Output</span><span class=p>:</span> <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=mi>2024</span><span class=o>-</span><span class=mi>09</span><span class=o>-</span><span class=mi>10</span><span class=n>T13</span><span class=p>:</span><span class=mi>35</span><span class=p>:</span><span class=mf>56.036</span><span class=n>Z</span> <span class=n>DEBUG</span><span class=p>]</span> <span class=n>firefox</span> <span class=ow>not</span> <span class=n>found</span> <span class=ow>in</span> <span class=n>the</span> <span class=n>system</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 通过注册表查找firefox浏览器安装路径</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=mi>2024</span><span class=o>-</span><span class=mi>09</span><span class=o>-</span><span class=mi>10</span><span class=n>T13</span><span class=p>:</span><span class=mi>35</span><span class=p>:</span><span class=mf>56.037</span><span class=n>Z</span> <span class=n>DEBUG</span><span class=p>]</span> <span class=n>Required</span> <span class=n>browser</span><span class=p>:</span> <span class=n>firefox</span> <span class=mf>130.0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>--</span> <span class=err>未指定浏览器版本，根据联网信息获取最新版本</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=mi>2024</span><span class=o>-</span><span class=mi>09</span><span class=o>-</span><span class=mi>10</span><span class=n>T13</span><span class=p>:</span><span class=mi>35</span><span class=p>:</span><span class=mf>56.037</span><span class=n>Z</span> <span class=n>DEBUG</span><span class=p>]</span> <span class=n>Downloading</span> <span class=n>firefox</span> <span class=mf>130.0</span> <span class=n>from</span> <span class=n>https</span><span class=p>:</span><span class=o>//</span><span class=n>ftp</span><span class=o>.</span><span class=n>mozilla</span><span class=o>.</span><span class=n>org</span><span class=o>/</span><span class=n>pub</span><span class=o>/</span><span class=n>firefox</span><span class=o>/</span><span class=n>releases</span><span class=o>/</span><span class=mf>130.0</span><span class=o>/</span><span class=n>win64</span><span class=o>/</span><span class=n>en</span><span class=o>-</span><span class=n>US</span><span class=o>/</span><span class=n>Firefox</span><span class=o>%</span><span class=mi>20</span><span class=n>Setup</span><span class=o>%</span><span class=mf>20130.0</span><span class=o>.</span><span class=n>exe</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 从官网下载</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=mi>2024</span><span class=o>-</span><span class=mi>09</span><span class=o>-</span><span class=mi>10</span><span class=n>T13</span><span class=p>:</span><span class=mi>36</span><span class=p>:</span><span class=mf>13.320</span><span class=n>Z</span> <span class=n>DEBUG</span><span class=p>]</span> <span class=n>firefox</span> <span class=mf>130.0</span> <span class=n>is</span> <span class=n>available</span> <span class=n>at</span> <span class=n>C</span><span class=p>:</span>\<span class=n>Users</span>\<span class=n>Administrator</span>\<span class=o>.</span><span class=n>cache</span>\<span class=n>selenium</span>\<span class=n>firefox</span>\<span class=n>win64</span>\<span class=mf>130.0</span>\<span class=n>firefox</span><span class=o>.</span><span class=n>exe</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 完成下载</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=mi>2024</span><span class=o>-</span><span class=mi>09</span><span class=o>-</span><span class=mi>10</span><span class=n>T13</span><span class=p>:</span><span class=mi>36</span><span class=p>:</span><span class=mf>14.367</span><span class=n>Z</span> <span class=n>DEBUG</span><span class=p>]</span> <span class=n>Valid</span> <span class=n>geckodriver</span> <span class=n>versions</span> <span class=k>for</span> <span class=n>firefox</span> <span class=mi>130</span><span class=p>:</span> <span class=p>[</span><span class=s2>&#34;0.35.0&#34;</span><span class=p>,</span> <span class=s2>&#34;0.34.0&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 获取可用driver 版本</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=mi>2024</span><span class=o>-</span><span class=mi>09</span><span class=o>-</span><span class=mi>10</span><span class=n>T13</span><span class=p>:</span><span class=mi>36</span><span class=p>:</span><span class=mf>14.369</span><span class=n>Z</span> <span class=n>DEBUG</span><span class=p>]</span> <span class=n>Required</span> <span class=n>driver</span><span class=p>:</span> <span class=n>geckodriver</span> <span class=mf>0.35</span><span class=o>.</span><span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=mi>2024</span><span class=o>-</span><span class=mi>09</span><span class=o>-</span><span class=mi>10</span><span class=n>T13</span><span class=p>:</span><span class=mi>36</span><span class=p>:</span><span class=mf>14.372</span><span class=n>Z</span> <span class=n>DEBUG</span><span class=p>]</span> <span class=n>Downloading</span> <span class=n>geckodriver</span> <span class=mf>0.35</span><span class=o>.</span><span class=mi>0</span> <span class=n>from</span> <span class=n>https</span><span class=p>:</span><span class=o>//</span><span class=n>github</span><span class=o>.</span><span class=n>com</span><span class=o>/</span><span class=n>mozilla</span><span class=o>/</span><span class=n>geckodriver</span><span class=o>/</span><span class=n>releases</span><span class=o>/</span><span class=n>download</span><span class=o>/</span><span class=n>v0</span><span class=o>.</span><span class=mf>35.0</span><span class=o>/</span><span class=n>geckodriver</span><span class=o>-</span><span class=n>v0</span><span class=o>.</span><span class=mf>35.0</span><span class=o>-</span><span class=n>win64</span><span class=o>.</span><span class=n>zip</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 下载对应driver</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=mi>2024</span><span class=o>-</span><span class=mi>09</span><span class=o>-</span><span class=mi>10</span><span class=n>T13</span><span class=p>:</span><span class=mi>36</span><span class=p>:</span><span class=mf>18.238</span><span class=n>Z</span> <span class=n>INFO</span> <span class=p>]</span> <span class=n>Driver</span> <span class=n>path</span><span class=p>:</span> <span class=n>C</span><span class=p>:</span>\<span class=n>Users</span>\<span class=n>Administrator</span>\<span class=o>.</span><span class=n>cache</span>\<span class=n>selenium</span>\<span class=n>geckodriver</span>\<span class=n>win64</span>\<span class=mf>0.35</span><span class=o>.</span><span class=mi>0</span>\<span class=n>geckodriver</span><span class=o>.</span><span class=n>exe</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=mi>2024</span><span class=o>-</span><span class=mi>09</span><span class=o>-</span><span class=mi>10</span><span class=n>T13</span><span class=p>:</span><span class=mi>36</span><span class=p>:</span><span class=mf>18.239</span><span class=n>Z</span> <span class=n>INFO</span> <span class=p>]</span> <span class=n>Browser</span> <span class=n>path</span><span class=p>:</span> <span class=n>C</span><span class=p>:</span>\<span class=n>Users</span>\<span class=n>Administrator</span>\<span class=o>.</span><span class=n>cache</span>\<span class=n>selenium</span>\<span class=n>firefox</span>\<span class=n>win64</span>\<span class=mf>130.0</span>\<span class=n>firefox</span><span class=o>.</span><span class=n>exe</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 输出browser和driver路径，其实selenium调用时的返回值就是这个信息</span>
</span></span></code></pre></td></tr></table></div></div><p>而除了Browser和Driver外，Selenium-manager其实还支持grid版本的下载。通过<code>--grid</code> 参数就可以直接下载grid的最新版本。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=o>&gt;</span> <span class=n>selenium</span><span class=o>-</span><span class=n>manager</span><span class=o>.</span><span class=n>exe</span> <span class=o>--</span><span class=n>grid</span> <span class=o>--</span><span class=n>debug</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=mi>2024</span><span class=o>-</span><span class=mi>09</span><span class=o>-</span><span class=mi>10</span><span class=n>T13</span><span class=p>:</span><span class=mi>47</span><span class=p>:</span><span class=mf>41.793</span><span class=n>Z</span> <span class=n>DEBUG</span><span class=p>]</span> <span class=n>Sending</span> <span class=n>stats</span> <span class=n>to</span> <span class=n>Plausible</span><span class=p>:</span> <span class=n>Props</span> <span class=p>{</span> <span class=n>browser</span><span class=p>:</span> <span class=s2>&#34;grid&#34;</span><span class=p>,</span> <span class=n>browser_version</span><span class=p>:</span> <span class=s2>&#34;&#34;</span><span class=p>,</span> <span class=n>os</span><span class=p>:</span> <span class=s2>&#34;windows&#34;</span><span class=p>,</span> <span class=n>arch</span><span class=p>:</span> <span class=s2>&#34;amd64&#34;</span><span class=p>,</span> <span class=n>lang</span><span class=p>:</span> <span class=s2>&#34;&#34;</span><span class=p>,</span> <span class=n>selenium_version</span><span class=p>:</span> <span class=s2>&#34;4.24&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=mi>2024</span><span class=o>-</span><span class=mi>09</span><span class=o>-</span><span class=mi>10</span><span class=n>T13</span><span class=p>:</span><span class=mi>47</span><span class=p>:</span><span class=mf>41.795</span><span class=n>Z</span> <span class=n>DEBUG</span><span class=p>]</span> <span class=n>grid</span> <span class=ow>not</span> <span class=n>found</span> <span class=ow>in</span> <span class=n>the</span> <span class=n>system</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=mi>2024</span><span class=o>-</span><span class=mi>09</span><span class=o>-</span><span class=mi>10</span><span class=n>T13</span><span class=p>:</span><span class=mi>47</span><span class=p>:</span><span class=mf>43.667</span><span class=n>Z</span> <span class=n>DEBUG</span><span class=p>]</span> <span class=n>Required</span> <span class=n>driver</span><span class=p>:</span> <span class=n>selenium</span><span class=o>-</span><span class=n>server</span> <span class=mf>4.24</span><span class=o>.</span><span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=mi>2024</span><span class=o>-</span><span class=mi>09</span><span class=o>-</span><span class=mi>10</span><span class=n>T13</span><span class=p>:</span><span class=mi>47</span><span class=p>:</span><span class=mf>43.669</span><span class=n>Z</span> <span class=n>DEBUG</span><span class=p>]</span> <span class=n>Downloading</span> <span class=n>selenium</span><span class=o>-</span><span class=n>server</span> <span class=mf>4.24</span><span class=o>.</span><span class=mi>0</span> <span class=n>from</span> <span class=n>https</span><span class=p>:</span><span class=o>//</span><span class=n>github</span><span class=o>.</span><span class=n>com</span><span class=o>/</span><span class=n>SeleniumHQ</span><span class=o>/</span><span class=n>selenium</span><span class=o>/</span><span class=n>releases</span><span class=o>/</span><span class=n>download</span><span class=o>/</span><span class=n>selenium</span><span class=o>-</span><span class=mf>4.24</span><span class=o>.</span><span class=mi>0</span><span class=o>/</span><span class=n>selenium</span><span class=o>-</span><span class=n>server</span><span class=o>-</span><span class=mf>4.24</span><span class=o>.</span><span class=mf>0.j</span><span class=n>ar</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=mi>2024</span><span class=o>-</span><span class=mi>09</span><span class=o>-</span><span class=mi>10</span><span class=n>T13</span><span class=p>:</span><span class=mi>47</span><span class=p>:</span><span class=mf>51.547</span><span class=n>Z</span> <span class=n>INFO</span> <span class=p>]</span> <span class=n>Driver</span> <span class=n>path</span><span class=p>:</span> <span class=n>C</span><span class=p>:</span>\<span class=n>Users</span>\<span class=n>Administrator</span>\<span class=o>.</span><span class=n>cache</span>\<span class=n>selenium</span>\<span class=n>grid</span>\<span class=mf>4.24</span><span class=o>.</span><span class=mi>0</span>\<span class=n>selenium</span><span class=o>-</span><span class=n>server</span><span class=o>-</span><span class=mf>4.24</span><span class=o>.</span><span class=mf>0.j</span><span class=n>ar</span>
</span></span></code></pre></td></tr></table></div></div><p>通过以上介绍，可以看出，通过引入Selenium-manager，Selenium在环境准备时已经可以非常灵活地实现对浏览器、驱动包括grid server等资源的自动获取和配置，极大提升了使用Selenium的便利性。</p></section><footer class=article-footer><section class=article-tags><a href=/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/>自动化测试</a>
<a href=/tags/selenium/>Selenium</a></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>相关文章</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/post/019-%E7%94%A8seleniumbase%E5%88%B6%E4%BD%9C%E4%BA%A7%E5%93%81demo/><div class=article-image><img src=/post/019-%E7%94%A8seleniumbase%E5%88%B6%E4%BD%9C%E4%BA%A7%E5%93%81demo/seleniumBase.5994ad219265ecd6f21c4d4315141b54_hu_9b91234d42b0d678.png width=250 height=150 loading=lazy alt="Featured image of post 用SeleniumBase制作产品Demo" data-hash="md5-WZStIZJl7NbyHE1DFRQbVA=="></div><div class=article-details><h2 class=article-title>用SeleniumBase制作产品Demo</h2></div></a></article><article class=has-image><a href=/post/118-pom_replacement/><div class=article-image><img src=/post/118-pom_replacement/Pasted-20250806.f76c8d5a1901a96f974bf59653a68a57_hu_14ccbf1f5b41b9c6.png width=250 height=150 loading=lazy alt="Featured image of post UI自动化，POM之外的另一模式" data-hash="md5-92yNWhkBqW+XS/WWU6aKVw=="></div><div class=article-details><h2 class=article-title>UI自动化，POM之外的另一模式</h2></div></a></article><article class=has-image><a href=/post/081-midscene%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/><div class=article-image><img src=/post/081-midscene%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/snap_20250621-5.62e64a7cc6316cdf058647603a537783_hu_5f4e5d6c5a1c2f4d.png width=250 height=150 loading=lazy alt="Featured image of post AI自动化工具Midscene.js源码解析" data-hash="md5-YuZKfMYxbN8FhkdgOlN3gw=="></div><div class=article-details><h2 class=article-title>AI自动化工具Midscene.js源码解析</h2></div></a></article><article class=has-image><a href=/post/066-playwright%E6%96%B0%E7%89%88%E6%9C%AC%E7%AD%9B%E9%80%89%E5%8A%9F%E8%83%BD/><div class=article-image><img src=/post/066-playwright%E6%96%B0%E7%89%88%E6%9C%AC%E7%AD%9B%E9%80%89%E5%8A%9F%E8%83%BD/playwright_logo.82386a35c48e32d43f12199ac6a46a38_hu_d1321ae71a371e02.png width=250 height=150 loading=lazy alt="Featured image of post Playwright新版本筛选功能" data-hash="md5-gjhqNcSOMtQ/EhmaxqRqOA=="></div><div class=article-details><h2 class=article-title>Playwright新版本筛选功能</h2></div></a></article><article class=has-image><a href=/post/050-%E8%87%AA%E5%8A%A8%E5%8C%96%E5%A5%BD%E5%B8%AE%E6%89%8B_chrome%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E5%BD%95%E5%88%B6%E5%99%A8/><div class=article-image><img src=/post/050-%E8%87%AA%E5%8A%A8%E5%8C%96%E5%A5%BD%E5%B8%AE%E6%89%8B_chrome%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E5%BD%95%E5%88%B6%E5%99%A8/Pasted-20250218.0dd60658485e8eafdb0468e39a43eacd_hu_88f92bd342ae392e.png width=250 height=150 loading=lazy alt="Featured image of post 自动化好帮手_chrome浏览器的录制器" data-hash="md5-DdYGWEhejq/bBGjjmkPqzQ=="></div><div class=article-details><h2 class=article-title>自动化好帮手_chrome浏览器的录制器</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2023 -
2025 |by 城下秋草（公众号： 秋草说测试）</section><section class=powerby>使用 <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> 构建<br>主题 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.30.0>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 设计</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>
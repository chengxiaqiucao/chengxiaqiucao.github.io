<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="想快速开发Python命令行程序？试试Typer"><title>用Typer快速开发python命令行应用</title><link rel=canonical href=https://chengxiaqiucao.github.io/post/014-%E7%94%A8typer%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91python%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BA%94%E7%94%A8/><link rel=stylesheet href=/scss/style.min.d6334826c849a420a2748e4872b915ae516105f86c3993d9bad2032725f784b8.css><meta property='og:title' content="用Typer快速开发python命令行应用"><meta property='og:description' content="想快速开发Python命令行程序？试试Typer"><meta property='og:url' content='https://chengxiaqiucao.github.io/post/014-%E7%94%A8typer%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91python%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BA%94%E7%94%A8/'><meta property='og:site_name' content='秋 草 观 “测” 台'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='python'><meta property='article:tag' content='开源项目'><meta property='article:published_time' content='2024-09-19T00:00:00+00:00'><meta property='article:modified_time' content='2024-09-19T00:00:00+00:00'><meta property='og:image' content='https://chengxiaqiucao.github.io/post/014-%E7%94%A8typer%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91python%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BA%94%E7%94%A8/Typer.png'><meta name=twitter:title content="用Typer快速开发python命令行应用"><meta name=twitter:description content="想快速开发Python命令行程序？试试Typer"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://chengxiaqiucao.github.io/post/014-%E7%94%A8typer%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91python%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BA%94%E7%94%A8/Typer.png'></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/automnGrass_hu_5e44a092fd905642.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>秋 草 观 “测” 台</a></h1><h2 class=site-description>Testing is not just checking...</h2></div></header><ol class=menu-social><li><a href=https://github.com/chengxiaqiucao target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://space.bilibili.com/472272606 target=_blank title=Bilibili rel=me><!doctype html><svg t="1750732982440" class="icon" viewBox="0 0 1024 1024" p-id="4593" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M306.005333 117.632 444.330667 256h135.296l138.368-138.325333A42.666667 42.666667.0 01778.368 178.048L700.330667 256H789.333333A149.333333 149.333333.0 01938.666667 405.333333v341.333334A149.333333 149.333333.0 01789.333333 896H234.666667A149.333333 149.333333.0 0185.333333 746.666667V405.333333A149.333333 149.333333.0 01234.666667 256h88.96L245.632 177.962667a42.666667 42.666667.0 0160.373333-60.373334zm483.328 223.701333H234.666667a64 64 0 00-63.701334 57.856L170.666667 405.333333v341.333334a64 64 0 0057.856 63.701333L234.666667 810.666667h554.666666a64 64 0 0063.701334-57.856L853.333333 746.666667V405.333333a64 64 0 00-64-64zm-448 128A42.666667 42.666667.0 01384 512v85.333333a42.666667 42.666667.0 01-85.333333.0V512a42.666667 42.666667.0 0142.666666-42.666667zm341.333334.0A42.666667 42.666667.0 01725.333333 512v85.333333a42.666667 42.666667.0 01-85.333333.0V512a42.666667 42.666667.0 0142.666667-42.666667z" p-id="4594" fill="#8a8a8a"/></svg></a></li><li><a href=https://www.zhihu.com/people/qiucao target=_blank title=zhihu rel=me><!doctype html><svg t="1750733049138" class="icon" viewBox="0 0 1024 1024" p-id="5820" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M570.581333 806.272h61.952L652.928 876.117333 764.074667 806.272h130.986666V230.186667h-324.48V806.272zM636.501333 292.693333h192.64V743.68h-73.898666l-73.813334 46.378667L668.032 743.808l-31.530667-.128V292.736zM515.754667 493.738667H377.429333a2999.466667 2999.466667.0 005.802667-194.56h135.338667S523.776 239.445334 495.872 240.128H261.76c9.216-34.730667 20.821333-70.613333 34.688-107.690667.0.0-63.701333.0-85.333333 57.130667C202.112 213.12 176.128 303.786667 129.877333 396.416c15.573333-1.706667 67.114667-3.114667 97.450667-58.794667 5.589333-15.616 6.656-17.621333 13.568-38.485333h76.373333c0 27.776-3.157333 177.109333-4.437333 194.474667h-138.24c-31.104.0-41.173333 62.549333-41.173333 62.549333h173.482666C295.253333 688.256 232.789333 799.573333 119.466667 887.466667c54.186667 15.488 108.202667-2.432 134.912-26.197334.0.0 60.8-55.338667 94.122666-183.381333L491.264 849.834667s20.906667-71.168-3.285333-105.856c-20.053333-23.637333-74.24-87.552-97.322667-110.72l-38.698667 30.72c11.52-36.992 18.474667-72.96 20.821334-107.690667h163.072s-.213333-62.549333-20.053334-62.549333z" p-id="5821" fill="#8a8a8a"/></svg></a></li><li><a href=mailto:%20danmyw@qq.com target=_blank title=e-mail rel=me><!doctype html><svg t="1750733089669" class="icon" viewBox="0 0 1451 1024" p-id="6983" xmlns:xlink="http://www.w3.org/1999/xlink" width="283.3984375" height="200"><path d="M664.781909 681.472759.0 97.881301C0 3.997201 71.046997.0 71.046997.0H474.477909 961.649408h399.992405s71.046998 3.997201 71.046998 97.881301L771.345323 681.472759S764.482731 685.154773 753.594283 688.65053V688.664858C741.602731 693.493018 729.424896 695.068979 718.077952 694.839748 706.731093 695.068979 694.553173 693.493018 682.561621 688.664858V688.65053C671.644501 685.140446 664.781909 681.472759 664.781909 681.472759zm53.281707 130.131124C693.779541 811.016482 658.879232 802.205449 619.10784 767.734955 542.989056 701.759633.0 212.052267.0 212.052267V942.809523S0 1024 83.726336 1024H682.532949 753.579947h595.368192C1432.688811 1024 1432.688811 942.809523 1432.688811 942.809523V212.052267S893.138176 701.759633 817.019477 767.734955c-39.771477 34.470494-74.671786 43.295855-98.955861 43.868928z" fill="#8a8a8a" p-id="6984"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>主页</span></a></li><li><a href=/page/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>检索</span></a></li><li><a href=/page/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>链接</span></a></li><li><a href=/page/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>关于</span></a></li><li><a href=/page/releases/><svg class="icon icon-tabler icon-tabler-infinity" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M9.828 9.172a4 4 0 100 5.656A10 10 0 0012 12a10 10 0 012.172-2.828 4 4 0 110 5.656A10 10 0 0112 12 10 10 0 009.828 9.172"/></svg>
<span>热门开源</span></a></li><li class=menu-bottom-section><ol class=menu><li id=i18n-switch><svg class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg>
<select name=language title=language onchange="window.location.href=this.selectedOptions[0].value"><option value=https://chengxiaqiucao.github.io/en/>English</option><option value=https://chengxiaqiucao.github.io/ selected>中文</option></select></li><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>暗色模式</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#安装和基本使用>安装和基本使用</a><ol><li><a href=#安装>安装</a></li><li><a href=#基本用法>基本用法</a><ol><li><a href=#姿势一>姿势一</a></li><li><a href=#姿势二>姿势二</a></li></ol></li><li><a href=#姿势三>姿势三</a></li></ol></li><li><a href=#命令帮助和默认值>命令帮助和默认值</a></li><li><a href=#可选参数和参数名>可选参数和参数名</a></li><li><a href=#更丰富的界面增强>更丰富的界面增强</a><ol><li><a href=#颜色和结构化数据的显示支持>颜色和结构化数据的显示支持</a></li><li><a href=#提示信息>提示信息</a></li><li><a href=#密码和信息隐藏>密码和信息隐藏</a></li><li><a href=#进度条实现>进度条实现</a></li></ol></li><li><a href=#多层命令嵌套>多层命令嵌套</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/post/014-%E7%94%A8typer%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91python%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BA%94%E7%94%A8/><img src=/post/014-%E7%94%A8typer%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91python%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BA%94%E7%94%A8/Typer_hu_4821e63ba71b0069.png srcset="/post/014-%E7%94%A8typer%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91python%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BA%94%E7%94%A8/Typer_hu_4821e63ba71b0069.png 800w, /post/014-%E7%94%A8typer%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91python%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BA%94%E7%94%A8/Typer_hu_ddb91e707a3fb4f2.png 1600w" width=800 height=319 loading=lazy alt="Featured image of post 用Typer快速开发python命令行应用"></a></div><div class=article-details><header class=article-category><a href=/categories/%E5%85%B6%E4%BB%96/ style=background-color:#12f0eb;color:#666>其他</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/post/014-%E7%94%A8typer%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91python%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BA%94%E7%94%A8/>用Typer快速开发python命令行应用</a></h2><h3 class=article-subtitle>想快速开发Python命令行程序？试试Typer</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Sep 19, 2024</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>阅读时长: 6 分钟</time></div></footer></div></header><section class=article-content><p>在Python语言中，开发命令行程序，最基本的方式是通过Python标准库argparse来进行命令行参数和各种交互定义。但相对来说还比较复杂，一些常用的场景也需要我们单独封装。</p><p>本文我们介绍另一个非常强大，也非常容易上手使用的python命令行工具库<code>typer</code>，看看如何利用它来帮我们快速完成一个命令行应用的实现。</p><h2 id=安装和基本使用>安装和基本使用</h2><h3 id=安装>安装</h3><p><code>typer</code> 是一个由 热门开源web接口框架 <code>FastAPI</code>推出的命令行实现工具。和其他 python 第三方库类似，安装很方便。</p><p><code>pip instal typer</code></p><h3 id=基本用法>基本用法</h3><h4 id=姿势一>姿势一</h4><p>编写一个最基本的<code>hello world</code>程序user_typer.py</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>main</span><span class=p>():</span>  
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;hello world!&#34;</span><span class=p>)</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>  
</span></span><span class=line><span class=cl>    <span class=n>main</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><p>直接通过<code>typer</code>命令调用
运行：</p><blockquote><p>Demo>typer use_typer.py run</p><p>hello world!</p></blockquote><h4 id=姿势二>姿势二</h4><p>也可以在代码中引入typer，然后用它的<code>run</code>方法直接在程序中调用</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>typer</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>main</span><span class=p>():</span>  
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;hello world!&#34;</span><span class=p>)</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>  
</span></span><span class=line><span class=cl>    <span class=n>typer</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>运行：</p><blockquote><p>Demo>python use_typer.py</p><p>hello world!</p></blockquote><h3 id=姿势三>姿势三</h3><p>或者将程序声明为一个应用，然后用注解指定应用的每一个支持的命令</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>typer</span>  
</span></span><span class=line><span class=cl><span class=n>app</span> <span class=o>=</span> <span class=n>typer</span><span class=o>.</span><span class=n>Typer</span><span class=p>()</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=nd>@app.command</span><span class=p>()</span>  
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>main</span><span class=p>(</span><span class=n>name</span><span class=p>):</span>  
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;hello world!&#34;</span><span class=p>)</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>  
</span></span><span class=line><span class=cl>    <span class=n>app</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><p>运行：</p><blockquote><p>Demo>python use_typer.py</p><p>hello world!</p></blockquote><p>而且运行 <code>python user_typer.py --help</code>， 可以看到已经自动生成了必要的帮助说明。
<img src=/post/014-%E7%94%A8typer%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91python%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BA%94%E7%94%A8/Pasted-20240919.png width=1345 height=388 srcset="/post/014-%E7%94%A8typer%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91python%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BA%94%E7%94%A8/Pasted-20240919_hu_2fa62d7f18696dcb.png 480w, /post/014-%E7%94%A8typer%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91python%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BA%94%E7%94%A8/Pasted-20240919_hu_45c50febc1b01535.png 1024w" loading=lazy class=gallery-image data-flex-grow=346 data-flex-basis=831px></p><p>这里我们在main函数中加了一个参数，可以看到<code>typer</code> 其实还会自动将对应的函数携带的参数解析为命令参数，无需重新定义。</p><h2 id=命令帮助和默认值>命令帮助和默认值</h2><p>当然作为命令行程序，命令的帮助信息定义是一个重要部分。</p><p><code>typer</code>也提供了很方便的添加命令和参数帮助的途径。
比如我们再添加一个命令</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nd>@app.command</span><span class=p>(</span><span class=n>help</span><span class=o>=</span><span class=s2>&#34;问候指定的小伙伴&#34;</span><span class=p>)</span>  
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>hello</span><span class=p>(</span><span class=n>name</span><span class=p>:</span><span class=n>Annotated</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span><span class=n>typer</span><span class=o>.</span><span class=n>Argument</span><span class=p>(</span><span class=n>help</span><span class=o>=</span><span class=s2>&#34;被问候的伙伴姓名&#34;</span><span class=p>)]</span><span class=o>=</span><span class=s2>&#34;城下秋草&#34;</span><span class=p>):</span>  
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;  
</span></span></span><span class=line><span class=cl><span class=s2>    这里也可以直接作为命令帮助，和command的help参数作用一样，  
</span></span></span><span class=line><span class=cl><span class=s2>    但优先级没有command注解高  
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;你好，</span><span class=si>{</span><span class=n>name</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>命令本身的帮助信息可以直接在command注解中通过help参数说明，或者也可以通过函数本身的docstring，typer也会把它解析为命令帮助。但如果command注解中已经指定，则会以command注解中指定的帮助信息为准</p><p>而指定的参数<code>name</code>, 这里是通过python的类型扩展库，再通过<code>type.Argument</code>的help参数来指定，并且同时还可以指定参数的默认值。
<img src=/post/014-%E7%94%A8typer%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91python%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BA%94%E7%94%A8/Pasted-20240919-1.png width=1341 height=449 srcset="/post/014-%E7%94%A8typer%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91python%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BA%94%E7%94%A8/Pasted-20240919-1_hu_f08e2c676030f08f.png 480w, /post/014-%E7%94%A8typer%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91python%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BA%94%E7%94%A8/Pasted-20240919-1_hu_357071c5656faf8.png 1024w" loading=lazy class=gallery-image data-flex-grow=298 data-flex-basis=716px></p><h2 id=可选参数和参数名>可选参数和参数名</h2><p>这里我们通过<code>type.Argument</code>指定的参数，其实是必填参数。那如果我们希望某一个参数是可选的呢？ 这里<code>typer</code>中是根据两个不同类型来区分。定义上来说，</p><ul><li>typer.Argument 是必选</li><li>typer.Option 是可选</li></ul><p>对应到帮助信息中的 <code>Arguments</code> 和 <code>Options</code> 两个不同的pannel。 但是否必须输入，其实是根据是否指定了对应参数的默认值来确认的，如果没有指定默认值，那么就代表这个参数是必须输入的。</p><p>另外 Option 和 Argument 的不同还在于 Option 是需要指定option名称, 也就是形如 <code>--name</code>, <code>--help</code> 这用带 <code>--</code> 或者 <code>-</code> 短参数标记</p><p>默认 <code>typer.Option</code>是直接将参数名转化为长标记，也可以自行指定其他别名。 同时也可以指定指定短标记</p><p>比如我们可以再增加一个参数 <code>last_name</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nd>@app.command</span><span class=p>(</span><span class=n>help</span><span class=o>=</span><span class=s2>&#34;问候指定的小伙伴&#34;</span><span class=p>)</span>  
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>hello</span><span class=p>(</span><span class=n>last_name</span><span class=p>:</span><span class=n>Annotated</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span><span class=n>typer</span><span class=o>.</span><span class=n>Option</span><span class=p>(</span><span class=s2>&#34;--last&#34;</span><span class=p>,</span><span class=s2>&#34;-l&#34;</span><span class=p>,</span><span class=n>help</span><span class=o>=</span><span class=s2>&#34;被问候的人员姓什么&#34;</span><span class=p>)],</span>  
</span></span><span class=line><span class=cl>          <span class=n>name</span><span class=p>:</span><span class=n>Annotated</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span><span class=n>typer</span><span class=o>.</span><span class=n>Argument</span><span class=p>(</span><span class=n>help</span><span class=o>=</span><span class=s2>&#34;被问候的伙伴名称&#34;</span><span class=p>)]</span><span class=o>=</span><span class=s2>&#34;城下秋草&#34;</span><span class=p>):</span>  
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;  
</span></span></span><span class=line><span class=cl><span class=s2>    这里也可以直接作为命令帮助，和command的help参数作用一样，  
</span></span></span><span class=line><span class=cl><span class=s2>    但优先级没有command注解高  
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;你好，</span><span class=si>{</span><span class=n>name</span><span class=si>}</span><span class=s2> </span><span class=si>{</span><span class=n>last_name</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p><img src=/post/014-%E7%94%A8typer%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91python%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BA%94%E7%94%A8/Pasted-20240919-2.png width=1341 height=466 srcset="/post/014-%E7%94%A8typer%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91python%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BA%94%E7%94%A8/Pasted-20240919-2_hu_71cd3fd796b29070.png 480w, /post/014-%E7%94%A8typer%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91python%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BA%94%E7%94%A8/Pasted-20240919-2_hu_4a98f92b294e86f2.png 1024w" loading=lazy class=gallery-image data-flex-grow=287 data-flex-basis=690px></p><h2 id=更丰富的界面增强>更丰富的界面增强</h2><p><code>typer</code> 除了在参数定义上的灵活简便外，对于交互界面也提供了很多增强</p><h3 id=颜色和结构化数据的显示支持>颜色和结构化数据的显示支持</h3><p>比如针对命令行，不同颜色的信息区分，这里它利用了另一个第三方库 <code>rich</code>， 可以简单地用rich库中的print方法替代掉python官方的简单打印语句，实现更丰富的颜色控制和结构化数据展示等</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>main</span><span class=p>():</span>  
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;显示结构数据:&#34;</span><span class=p>)</span>  
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;不同颜色和emoji:&#34;</span><span class=p>)</span>  
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;[bold red]警告！[/bold red] [green]数据data[/green] 不匹配！ :boom:&#34;</span><span class=p>)</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>  
</span></span><span class=line><span class=cl>    <span class=n>typer</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>执行效果
<img src=/post/014-%E7%94%A8typer%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91python%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BA%94%E7%94%A8/Pasted-20240919-3.png width=873 height=343 srcset="/post/014-%E7%94%A8typer%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91python%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BA%94%E7%94%A8/Pasted-20240919-3_hu_54cd16203d6bee9a.png 480w, /post/014-%E7%94%A8typer%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91python%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BA%94%E7%94%A8/Pasted-20240919-3_hu_1e8a516a57de7f6b.png 1024w" loading=lazy class=gallery-image data-flex-grow=254 data-flex-basis=610px></p><h3 id=提示信息>提示信息</h3><p><code>typer.Option</code> 可以支持转为提示模式，也就是对于需要的参数，可以提示输入</p><p>比如上面的例子，加上<code>prompt=True</code>就会在没有输入参数时提示输入</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nd>@app.command</span><span class=p>(</span><span class=n>help</span><span class=o>=</span><span class=s2>&#34;问候指定的小伙伴&#34;</span><span class=p>)</span>  
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>hello</span><span class=p>(</span><span class=n>last_name</span><span class=p>:</span><span class=n>Annotated</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span><span class=n>typer</span><span class=o>.</span><span class=n>Option</span><span class=p>(</span><span class=s2>&#34;--last&#34;</span><span class=p>,</span><span class=s2>&#34;-l&#34;</span><span class=p>,</span><span class=n>help</span><span class=o>=</span><span class=s2>&#34;被问候的人员姓什么&#34;</span><span class=p>,</span> <span class=n>prompt</span><span class=o>=</span><span class=kc>True</span><span class=p>)]</span>
</span></span></code></pre></td></tr></table></div></div><p>运行：
<img src=/post/014-%E7%94%A8typer%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91python%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BA%94%E7%94%A8/prompt.gif width=1322 height=223 srcset="/post/014-%E7%94%A8typer%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91python%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BA%94%E7%94%A8/prompt_hu_177ed65dd34495e3.gif 480w, /post/014-%E7%94%A8typer%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91python%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BA%94%E7%94%A8/prompt_hu_d62cb5b52ed8fdd7.gif 1024w" loading=lazy class=gallery-image data-flex-grow=592 data-flex-basis=1422px></p><h3 id=密码和信息隐藏>密码和信息隐藏</h3><p>对于一些密码类的参数，还支持隐藏和确认的选项，比如我们增加一个passwd参数</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nd>@app.command</span><span class=p>(</span><span class=n>help</span><span class=o>=</span><span class=s2>&#34;问候指定的小伙伴&#34;</span><span class=p>)</span>  
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>hello</span><span class=p>(</span><span class=n>last_name</span><span class=p>:</span><span class=n>Annotated</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span>  
</span></span><span class=line><span class=cl><span class=n>typer</span><span class=o>.</span><span class=n>Option</span><span class=p>(</span><span class=s2>&#34;--last&#34;</span><span class=p>,</span>  
</span></span><span class=line><span class=cl>             <span class=s2>&#34;-l&#34;</span><span class=p>,</span>  
</span></span><span class=line><span class=cl>             <span class=n>help</span><span class=o>=</span><span class=s2>&#34;被问候的人员姓什么&#34;</span><span class=p>,</span>  
</span></span><span class=line><span class=cl>             <span class=n>prompt</span><span class=o>=</span><span class=kc>True</span><span class=p>)]</span><span class=o>=</span><span class=s2>&#34;黄&#34;</span><span class=p>,</span>  
</span></span><span class=line><span class=cl><span class=n>passwd</span><span class=p>:</span><span class=n>Annotated</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span><span class=n>typer</span><span class=o>.</span><span class=n>Option</span><span class=p>(</span><span class=n>prompt</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>confirmation_prompt</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>hide_input</span><span class=o>=</span><span class=kc>True</span><span class=p>)]</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>  
</span></span><span class=line><span class=cl><span class=n>name</span><span class=p>:</span><span class=n>Annotated</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span><span class=n>typer</span><span class=o>.</span><span class=n>Argument</span><span class=p>(</span><span class=n>help</span><span class=o>=</span><span class=s2>&#34;被问候的伙伴名称&#34;</span><span class=p>)]</span><span class=o>=</span><span class=s2>&#34;城下秋草&#34;</span><span class=p>):</span>  
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;  
</span></span></span><span class=line><span class=cl><span class=s2>    这里也可以直接作为命令帮助，和command的help参数作用一样，  
</span></span></span><span class=line><span class=cl><span class=s2>    但优先级没有command注解高  
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>    <span class=k>if</span> <span class=n>passwd</span> <span class=o>==</span> <span class=s2>&#34;123&#34;</span><span class=p>:</span>  
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;你好，</span><span class=si>{</span><span class=n>name</span><span class=si>}</span><span class=s2> </span><span class=si>{</span><span class=n>last_name</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>  
</span></span><span class=line><span class=cl>    <span class=k>else</span><span class=p>:</span>  
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;[bold red]密码输入错误，不能展示！[/bold red]&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p><img src=/post/014-%E7%94%A8typer%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91python%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BA%94%E7%94%A8/Pasted-20240919-4.png width=862 height=430 srcset="/post/014-%E7%94%A8typer%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91python%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BA%94%E7%94%A8/Pasted-20240919-4_hu_88cb267dd82dc4f2.png 480w, /post/014-%E7%94%A8typer%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91python%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BA%94%E7%94%A8/Pasted-20240919-4_hu_148d29d9437420f1.png 1024w" loading=lazy class=gallery-image data-flex-grow=200 data-flex-basis=481px></p><h3 id=进度条实现>进度条实现</h3><p>typer还能比较方便地支持进度条类的信息交互，同样可以利用rich中progress的增强</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>rich.progress</span> <span class=kn>import</span> <span class=n>track</span>  
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>running</span><span class=p>():</span>  
</span></span><span class=line><span class=cl>    <span class=n>total</span> <span class=o>=</span> <span class=mi>0</span>  
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>track</span><span class=p>(</span><span class=nb>range</span><span class=p>(</span><span class=mi>100</span><span class=p>),</span> <span class=n>description</span><span class=o>=</span><span class=s2>&#34;正在执行中....&#34;</span><span class=p>):</span>  
</span></span><span class=line><span class=cl>        <span class=c1># Fake processing time  </span>
</span></span><span class=line><span class=cl>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.01</span><span class=p>)</span>  
</span></span><span class=line><span class=cl>        <span class=n>total</span> <span class=o>+=</span> <span class=mi>1</span>  
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;已处理 </span><span class=si>{</span><span class=n>total</span><span class=si>}</span><span class=s2> 任务&#34;</span><span class=p>)</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>  
</span></span><span class=line><span class=cl>    <span class=n>typer</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>running</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p><img src=/post/014-%E7%94%A8typer%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91python%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BA%94%E7%94%A8/progress.gif width=1322 height=223 srcset="/post/014-%E7%94%A8typer%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91python%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BA%94%E7%94%A8/progress_hu_fa1a7907cc9d420d.gif 480w, /post/014-%E7%94%A8typer%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91python%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BA%94%E7%94%A8/progress_hu_681bc0034e86b2ba.gif 1024w" loading=lazy class=gallery-image data-flex-grow=592 data-flex-basis=1422px></p><h2 id=多层命令嵌套>多层命令嵌套</h2><p>对于多层的命令嵌套，<code>typer</code>当然也提供了良好的支持。这里是通过声明不同的应用，再利用<code>add_typer</code>方法完成层级的关联。</p><p>官方给出的示例体现的很清楚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>typer</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>app</span> <span class=o>=</span> <span class=n>typer</span><span class=o>.</span><span class=n>Typer</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>items_app</span> <span class=o>=</span> <span class=n>typer</span><span class=o>.</span><span class=n>Typer</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>app</span><span class=o>.</span><span class=n>add_typer</span><span class=p>(</span><span class=n>items_app</span><span class=p>,</span> <span class=n>name</span><span class=o>=</span><span class=s2>&#34;items&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>users_app</span> <span class=o>=</span> <span class=n>typer</span><span class=o>.</span><span class=n>Typer</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>app</span><span class=o>.</span><span class=n>add_typer</span><span class=p>(</span><span class=n>users_app</span><span class=p>,</span> <span class=n>name</span><span class=o>=</span><span class=s2>&#34;users&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@items_app.command</span><span class=p>(</span><span class=s2>&#34;create&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>items_create</span><span class=p>(</span><span class=n>item</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Creating item: </span><span class=si>{</span><span class=n>item</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@items_app.command</span><span class=p>(</span><span class=s2>&#34;delete&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>items_delete</span><span class=p>(</span><span class=n>item</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Deleting item: </span><span class=si>{</span><span class=n>item</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@items_app.command</span><span class=p>(</span><span class=s2>&#34;sell&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>items_sell</span><span class=p>(</span><span class=n>item</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Selling item: </span><span class=si>{</span><span class=n>item</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@users_app.command</span><span class=p>(</span><span class=s2>&#34;create&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>users_create</span><span class=p>(</span><span class=n>user_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Creating user: </span><span class=si>{</span><span class=n>user_name</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@users_app.command</span><span class=p>(</span><span class=s2>&#34;delete&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>users_delete</span><span class=p>(</span><span class=n>user_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Deleting user: </span><span class=si>{</span><span class=n>user_name</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>app</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><p>用<code>--help</code>看一下这样处理的效果
<img src=/post/014-%E7%94%A8typer%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91python%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BA%94%E7%94%A8/Pasted-20240919-5.png width=1261 height=827 srcset="/post/014-%E7%94%A8typer%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91python%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BA%94%E7%94%A8/Pasted-20240919-5_hu_fc72b3a1775b3f9.png 480w, /post/014-%E7%94%A8typer%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91python%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BA%94%E7%94%A8/Pasted-20240919-5_hu_12c6c8203e565afb.png 1024w" loading=lazy class=gallery-image data-flex-grow=152 data-flex-basis=365px></p><hr><p>以上就是关于命令行工具 <code>typer</code>的用法梳理。</p></section><footer class=article-footer><section class=article-tags><a href=/tags/python/>Python</a>
<a href=/tags/%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE/>开源项目</a></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>相关文章</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/post/100-temp/><div class=article-image><img src=/post/100-temp/snap_20250604.b240d5be28dd0145f9f9637ca446c9d2_hu_a6f6e8e1b1a719e1.png width=250 height=150 loading=lazy alt="Featured image of post Github月度新锐热门工具 - 202506" data-hash="md5-skDVvijdAUX5+WN8pEbJ0g=="></div><div class=article-details><h2 class=article-title>Github月度新锐热门工具 - 202506</h2></div></a></article><article class=has-image><a href=/post/113-%E8%A2%AB%E8%BE%B9%E7%BC%98%E5%8C%96/><div class=article-image><img src=/post/113-%E8%A2%AB%E8%BE%B9%E7%BC%98%E5%8C%96/Pasted-20250720-1.c38d71d5b2fdd525f5104b5914e1216d_hu_c36f234fc928692d.png width=250 height=150 loading=lazy alt="Featured image of post 职场中被领导边缘化？要怎么调整" data-hash="md5-w41x1bL91SX1EEtZFOEhbQ=="></div><div class=article-details><h2 class=article-title>职场中被领导边缘化？要怎么调整</h2></div></a></article><article class=has-image><a href=/post/104-%E9%AB%98%E6%A0%A1it%E5%B0%B1%E4%B8%9A/><div class=article-image><img src=/post/104-%E9%AB%98%E6%A0%A1it%E5%B0%B1%E4%B8%9A/title.7615a0ef85489f0e04406782016e4bac_hu_685efe5a5b647831.png width=250 height=150 loading=lazy alt="Featured image of post 2025应届IT就业行情怎么样？" data-hash="md5-dhWg74VInw4EQGeCAW5LrA=="></div><div class=article-details><h2 class=article-title>2025应届IT就业行情怎么样？</h2></div></a></article><article class=has-image><a href=/post/095-deepseek%E7%94%9F%E5%9B%BE/><div class=article-image><img src=/post/095-deepseek%E7%94%9F%E5%9B%BE/snap_20250613.e1187653bcbf21d0a3d1a08dfdde682e_hu_b41eb2798233b63c.png width=250 height=150 loading=lazy alt="Featured image of post AI技巧，用本地Deepseek也可以生图啦" data-hash="md5-4Rh2U7y/IdCj0aCN/d5oLg=="></div><div class=article-details><h2 class=article-title>AI技巧，用本地Deepseek也可以生图啦</h2></div></a></article><article><a href=/post/092-codebuddy/><div class=article-details><h2 class=article-title>Cursor收费？没事，咱们还有codebuddy！</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2023 -
2025 |by 城下秋草（公众号： 秋草说测试）</section><section class=powerby>使用 <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> 构建<br>主题 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.30.0>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 设计</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>
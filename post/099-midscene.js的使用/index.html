<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="前言 AI已经越来越深入地走入我们的实际工作，在软件测试领域，和AI相关的新测试工具、方法也层出不穷。在之前我们介绍过结合 mcp server 实现 AI 驱动测试的案例，本文我们将介绍一个近期崭露头角的国产AI测试工具 Midscene.js\n"><title>AI自动化工具Mid scene.js评测</title><link rel=canonical href=https://chengxiaqiucao.github.io/post/099-midscene.js%E7%9A%84%E4%BD%BF%E7%94%A8/><link rel=stylesheet href=/scss/style.min.946cca6c6259ef94ac55abfae7c7bf3291ea3ed5eea17ef77500b257217c6710.css><meta property='og:title' content="AI自动化工具Mid scene.js评测"><meta property='og:description' content="前言 AI已经越来越深入地走入我们的实际工作，在软件测试领域，和AI相关的新测试工具、方法也层出不穷。在之前我们介绍过结合 mcp server 实现 AI 驱动测试的案例，本文我们将介绍一个近期崭露头角的国产AI测试工具 Midscene.js\n"><meta property='og:url' content='https://chengxiaqiucao.github.io/post/099-midscene.js%E7%9A%84%E4%BD%BF%E7%94%A8/'><meta property='og:site_name' content='秋 草 观 “测” 台'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='AI'><meta property='article:tag' content='AI测试'><meta property='article:published_time' content='2025-06-01T00:00:00+00:00'><meta property='article:modified_time' content='2025-06-01T00:00:00+00:00'><meta property='og:image' content='https://chengxiaqiucao.github.io/post/099-midscene.js%E7%9A%84%E4%BD%BF%E7%94%A8/snap_20250521.png'><meta name=twitter:title content="AI自动化工具Mid scene.js评测"><meta name=twitter:description content="前言 AI已经越来越深入地走入我们的实际工作，在软件测试领域，和AI相关的新测试工具、方法也层出不穷。在之前我们介绍过结合 mcp server 实现 AI 驱动测试的案例，本文我们将介绍一个近期崭露头角的国产AI测试工具 Midscene.js\n"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://chengxiaqiucao.github.io/post/099-midscene.js%E7%9A%84%E4%BD%BF%E7%94%A8/snap_20250521.png'></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/automnGrass_hu_5e44a092fd905642.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>秋 草 观 “测” 台</a></h1><h2 class=site-description>Testing is not just checking...</h2></div></header><ol class=menu-social><li><a href=https://github.com/chengxiaqiucao target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://space.bilibili.com/472272606 target=_blank title=Bilibili rel=me><!doctype html><svg t="1750732982440" class="icon" viewBox="0 0 1024 1024" p-id="4593" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M306.005333 117.632 444.330667 256h135.296l138.368-138.325333A42.666667 42.666667.0 01778.368 178.048L700.330667 256H789.333333A149.333333 149.333333.0 01938.666667 405.333333v341.333334A149.333333 149.333333.0 01789.333333 896H234.666667A149.333333 149.333333.0 0185.333333 746.666667V405.333333A149.333333 149.333333.0 01234.666667 256h88.96L245.632 177.962667a42.666667 42.666667.0 0160.373333-60.373334zm483.328 223.701333H234.666667a64 64 0 00-63.701334 57.856L170.666667 405.333333v341.333334a64 64 0 0057.856 63.701333L234.666667 810.666667h554.666666a64 64 0 0063.701334-57.856L853.333333 746.666667V405.333333a64 64 0 00-64-64zm-448 128A42.666667 42.666667.0 01384 512v85.333333a42.666667 42.666667.0 01-85.333333.0V512a42.666667 42.666667.0 0142.666666-42.666667zm341.333334.0A42.666667 42.666667.0 01725.333333 512v85.333333a42.666667 42.666667.0 01-85.333333.0V512a42.666667 42.666667.0 0142.666667-42.666667z" p-id="4594" fill="#8a8a8a"/></svg></a></li><li><a href=https://www.zhihu.com/people/qiucao target=_blank title=zhihu rel=me><!doctype html><svg t="1750733049138" class="icon" viewBox="0 0 1024 1024" p-id="5820" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M570.581333 806.272h61.952L652.928 876.117333 764.074667 806.272h130.986666V230.186667h-324.48V806.272zM636.501333 292.693333h192.64V743.68h-73.898666l-73.813334 46.378667L668.032 743.808l-31.530667-.128V292.736zM515.754667 493.738667H377.429333a2999.466667 2999.466667.0 005.802667-194.56h135.338667S523.776 239.445334 495.872 240.128H261.76c9.216-34.730667 20.821333-70.613333 34.688-107.690667.0.0-63.701333.0-85.333333 57.130667C202.112 213.12 176.128 303.786667 129.877333 396.416c15.573333-1.706667 67.114667-3.114667 97.450667-58.794667 5.589333-15.616 6.656-17.621333 13.568-38.485333h76.373333c0 27.776-3.157333 177.109333-4.437333 194.474667h-138.24c-31.104.0-41.173333 62.549333-41.173333 62.549333h173.482666C295.253333 688.256 232.789333 799.573333 119.466667 887.466667c54.186667 15.488 108.202667-2.432 134.912-26.197334.0.0 60.8-55.338667 94.122666-183.381333L491.264 849.834667s20.906667-71.168-3.285333-105.856c-20.053333-23.637333-74.24-87.552-97.322667-110.72l-38.698667 30.72c11.52-36.992 18.474667-72.96 20.821334-107.690667h163.072s-.213333-62.549333-20.053334-62.549333z" p-id="5821" fill="#8a8a8a"/></svg></a></li><li><a href=mailto:%20danmyw@qq.com target=_blank title=e-mail rel=me><!doctype html><svg t="1750733089669" class="icon" viewBox="0 0 1451 1024" p-id="6983" xmlns:xlink="http://www.w3.org/1999/xlink" width="283.3984375" height="200"><path d="M664.781909 681.472759.0 97.881301C0 3.997201 71.046997.0 71.046997.0H474.477909 961.649408h399.992405s71.046998 3.997201 71.046998 97.881301L771.345323 681.472759S764.482731 685.154773 753.594283 688.65053V688.664858C741.602731 693.493018 729.424896 695.068979 718.077952 694.839748 706.731093 695.068979 694.553173 693.493018 682.561621 688.664858V688.65053C671.644501 685.140446 664.781909 681.472759 664.781909 681.472759zm53.281707 130.131124C693.779541 811.016482 658.879232 802.205449 619.10784 767.734955 542.989056 701.759633.0 212.052267.0 212.052267V942.809523S0 1024 83.726336 1024H682.532949 753.579947h595.368192C1432.688811 1024 1432.688811 942.809523 1432.688811 942.809523V212.052267S893.138176 701.759633 817.019477 767.734955c-39.771477 34.470494-74.671786 43.295855-98.955861 43.868928z" fill="#8a8a8a" p-id="6984"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>主页</span></a></li><li><a href=/page/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>归档</span></a></li><li><a href=/page/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>检索</span></a></li><li><a href=/page/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>链接</span></a></li><li><a href=/page/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>关于</span></a></li><li><a href=/page/releases/><svg class="icon icon-tabler icon-tabler-infinity" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M9.828 9.172a4 4 0 100 5.656A10 10 0 0012 12a10 10 0 012.172-2.828 4 4 0 110 5.656A10 10 0 0112 12 10 10 0 009.828 9.172"/></svg>
<span>热门开源</span></a></li><li class=menu-bottom-section><ol class=menu><li id=i18n-switch><svg class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg>
<select name=language title=language onchange="window.location.href=this.selectedOptions[0].value"><option value=https://chengxiaqiucao.github.io/en/>English</option><option value=https://chengxiaqiucao.github.io/ selected>中文</option></select></li><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>暗色模式</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#前言>前言</a></li><li><a href=#midscenejs简介>Midscene.js简介</a></li><li><a href=#midscene工作原理>Midscene工作原理</a></li><li><a href=#大模型的选择>大模型的选择</a></li><li><a href=#chrome插件方式使用>Chrome插件方式使用</a><ol><li><a href=#配置大模型>配置大模型</a></li><li><a href=#操作浏览器>操作浏览器</a></li></ol></li><li><a href=#脚本集成>脚本集成</a><ol><li><a href=#安装>安装</a></li><li><a href=#playwright框架配置>playwright框架配置</a></li><li><a href=#测试脚本>测试脚本</a></li><li><a href=#可视化结果报告>可视化结果报告</a></li></ol></li><li><a href=#yaml文件驱动>YAML文件驱动</a></li><li><a href=#mcp方式>MCP方式</a></li><li><a href=#当前版本的局限>当前版本的局限</a><ol><li><a href=#参考阅读>参考阅读：</a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/post/099-midscene.js%E7%9A%84%E4%BD%BF%E7%94%A8/><img src=/post/099-midscene.js%E7%9A%84%E4%BD%BF%E7%94%A8/snap_20250521_hu_42156d7972210809.png srcset="/post/099-midscene.js%E7%9A%84%E4%BD%BF%E7%94%A8/snap_20250521_hu_42156d7972210809.png 800w, /post/099-midscene.js%E7%9A%84%E4%BD%BF%E7%94%A8/snap_20250521_hu_9dfa6ea10e7bb754.png 1600w" width=800 height=759 loading=lazy alt="Featured image of post AI自动化工具Mid scene.js评测"></a></div><div class=article-details><header class=article-category><a href=/categories/ai/ style=background-color:#245678;color:#888>AI</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/post/099-midscene.js%E7%9A%84%E4%BD%BF%E7%94%A8/>AI自动化工具Mid scene.js评测</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Jun 01, 2025</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>阅读时长: 7 分钟</time></div></footer></div></header><section class=article-content><h2 id=前言>前言</h2><p>AI已经越来越深入地走入我们的实际工作，在软件测试领域，和AI相关的新测试工具、方法也层出不穷。在之前我们介绍过结合 mcp server 实现 AI 驱动测试的案例，本文我们将介绍一个近期崭露头角的国产AI测试工具 <code>Midscene.js</code></p><p><img src=/post/099-midscene.js%E7%9A%84%E4%BD%BF%E7%94%A8/snap_20250521.png width=508 height=482 srcset="/post/099-midscene.js%E7%9A%84%E4%BD%BF%E7%94%A8/snap_20250521_hu_8c2283c0ca764a99.png 480w, /post/099-midscene.js%E7%9A%84%E4%BD%BF%E7%94%A8/snap_20250521_hu_c98e8bf2be242eda.png 1024w" loading=lazy class=gallery-image data-flex-grow=105 data-flex-basis=252px></p><h2 id=midscenejs简介>Midscene.js简介</h2><p><code>MidScene.js</code> 是由字节跳动 web-infra 团队推出的一个开源 ai 自动化测试工具，基于多模态大模型，通过针对页面的智能视觉解析来理解我们的自然语言指令，并进一步完成自动化操作。可以显著降低编写自动化测试脚本的复杂性，并更好适应页面结构和元素的变化，使自动化测试脚本的稳定性也有较大提升。</p><p>官网地址： <a class=link href=https://midscenejs.com/ target=_blank rel=noopener>https://midscenejs.com/</a></p><h2 id=midscene工作原理>Midscene工作原理</h2><p>和之前我们介绍 mcp server 时，利用通用大模型来理解页面并调用本地工具能力进行扩展不同，Midscene使用多模态大模型如 <code>ChatGPT-4o</code>，<code>qwen-vl</code>, 字节的 <code>UI-TARS</code>等，也就是能支持视觉输入的大模型来理解页面，更接近我们进行实际功能测试的场景。</p><p>MidScene会首先获取页面当前截图和具体的页面结构信息，再和用户指令一起提交给大模型，由大模型判断出需要操作的页面控件位置，并进行下一步动作。</p><p>以在待办页面任务框中输入 “今天学习Playwright”为例：</p><p><img src=/post/099-midscene.js%E7%9A%84%E4%BD%BF%E7%94%A8/snap_20250521-3.png width=1920 height=673 srcset="/post/099-midscene.js%E7%9A%84%E4%BD%BF%E7%94%A8/snap_20250521-3_hu_19ae45ca69a8c700.png 480w, /post/099-midscene.js%E7%9A%84%E4%BD%BF%E7%94%A8/snap_20250521-3_hu_e22ffafc27de64a6.png 1024w" loading=lazy class=gallery-image data-flex-grow=285 data-flex-basis=684px></p><p>MidScene的内部操作大致如下：</p><ol><li>获取用户指令 “在任务框输入 学习Playwright，按回车键”</li><li>MidScene截图，获取页面整体元素结构</li><li>提交大模型完成页面特征提取</li><li>获取大模型分析结果，确定下一步操作类型(Tap)和控件的具体位置(坐标)</li><li>规划下一步操作</li><li>完成执行</li></ol><h2 id=大模型的选择>大模型的选择</h2><p>从以上Midscene的原理分析，MidScene 主要依赖多模态大模型的如下能力</p><ol><li>理解截图和 <em>规划</em> 操作步骤的能力。</li><li>给出指定元素的坐标信息（Visual Grounding）的能力。</li></ol><p>支持以上能力的大模型，目前官网提供的支持包括如下几种：</p><ul><li><strong>OPENAI GPT-4o</strong></li><li><strong>阿里 Qwen-2.5-VL</strong></li><li><strong>字节 UI-TARS</strong></li><li><strong>字节火山引擎 Doubao-1.5-thinking-vision-pro</strong></li><li><strong>Google Gemini-2.5-Pro</strong></li></ul><p>从工作原理上，需要提供给大模型包括截图和页面结构等信息，对大模型的Token消耗还是比较可观。从官方的评估，每个操作通常都要至少数千Token的消耗。而其中性价比较好的大模型，官方推荐的QWen-VL。</p><h2 id=chrome插件方式使用>Chrome插件方式使用</h2><p>零代码的Chrome插件方式，可以帮助我们快速理解MidScene的应用。</p><p>通过Chrome的插件商店可以直接安装 <a class=link href=https://chromewebstore.google.com/detail/midscenejs/gbldofcpkknbggpkmbdaefngejllnief target=_blank rel=noopener>Midscene插件</a></p><p><img src=/post/099-midscene.js%E7%9A%84%E4%BD%BF%E7%94%A8/snap_20250521-2.png width=1755 height=547 srcset="/post/099-midscene.js%E7%9A%84%E4%BD%BF%E7%94%A8/snap_20250521-2_hu_42f4fce6b95b35ab.png 480w, /post/099-midscene.js%E7%9A%84%E4%BD%BF%E7%94%A8/snap_20250521-2_hu_b3474ce1983fd3ed.png 1024w" loading=lazy class=gallery-image data-flex-grow=320 data-flex-basis=770px></p><h3 id=配置大模型>配置大模型</h3><p>启用插件后，需要配置使用的大模型。这里我们使用对token消耗比较少的阿里千问多模态模型<code>qwen-vl-max-latest</code>, 通过阿里云百炼平台申请对应的API Key即可，现在申请还赠送100W Token额度。</p><p><img src=/post/099-midscene.js%E7%9A%84%E4%BD%BF%E7%94%A8/snap_20250520-2.png width=1199 height=217 srcset="/post/099-midscene.js%E7%9A%84%E4%BD%BF%E7%94%A8/snap_20250520-2_hu_89f4c27c45807341.png 480w, /post/099-midscene.js%E7%9A%84%E4%BD%BF%E7%94%A8/snap_20250520-2_hu_d9e504c150c9fb67.png 1024w" loading=lazy class=gallery-image data-flex-grow=552 data-flex-basis=1326px></p><p>完成申请后，在插件的模型配置界面中配置对应的大模型参数，qwen模型需要配置以下四个参数</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>OPENAI_BASE_URL=&#34;https://dashscope.aliyuncs.com/compatible-mode/v1&#34; 
</span></span><span class=line><span class=cl>OPENAI_API_KEY=&#34;sk- your API KEY&#34;
</span></span><span class=line><span class=cl>MIDSCENE_MODEL_NAME=&#34;qwen-vl-max-latest&#34;
</span></span><span class=line><span class=cl>MIDSCENE_USE_QWEN_VL=1 
</span></span></code></pre></td></tr></table></div></div><h3 id=操作浏览器>操作浏览器</h3><p>接下来就可以在插件界面中体验Midscene对浏览器的操控了，这里主要支持四种行为：</p><ul><li><strong>Action</strong>：对应AI自动规划操作，Midscene会自动规划操作步骤并执行。更智能，但速度较慢，效果依赖大模型的质量。</li><li><strong>Query</strong>：直接从 UI 提取数据，并借助多模态 AI 的推理能力，实现智能提取</li><li><strong>Assert</strong>：通过自然语言描述一个断言条件，让 AI 判断该条件是否为真</li><li><strong>Tap</strong>：对应页面点击的即时操作，Midscene会直接执行，大模型只负责底层如元素定位等任务。效率更高，适合已确定要执行的操作时使用</li></ul><p>我们可以用接近自然语言的AI提示词输入提示词指令，针对不同的行为模式，插件会驱动浏览器完成不同的操作，并反馈操作结果。</p><p><img src=/post/099-midscene.js%E7%9A%84%E4%BD%BF%E7%94%A8/snap_20250520.png width=1910 height=899 srcset="/post/099-midscene.js%E7%9A%84%E4%BD%BF%E7%94%A8/snap_20250520_hu_82f5a3b5c2a2fe48.png 480w, /post/099-midscene.js%E7%9A%84%E4%BD%BF%E7%94%A8/snap_20250520_hu_b94695f1053d5140.png 1024w" loading=lazy class=gallery-image data-flex-grow=212 data-flex-basis=509px></p><p>具体执行过程也可参见下方视频演示。</p><h2 id=脚本集成>脚本集成</h2><p>除了通过浏览器插件调用Midscene，更推荐的方法是通过测试框架的脚本集成Midscene能力。</p><p>通过脚本集成，同样需要配置相关模型调用参数，和插件中配置的相关变量值一样，只是需要将相关变量配置为<strong>系统环境变量</strong></p><p>因为 Midscene 是基于JS的工具，这里的和测试框架集成，也是需要支持JS。这里以 Playwright 为例</p><h3 id=安装>安装</h3><p>首先自然需要具备 Playwright 框架，进入项目目录，初始化并安装Playwright，然后安装Midscene</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>npm</span> <span class=n>init</span> <span class=n>playwright</span><span class=nv>@latest</span>
</span></span><span class=line><span class=cl><span class=n>npm</span> <span class=n>install</span> <span class=nv>@midscene</span><span class=p>/</span><span class=n>web</span> <span class=p>-</span><span class=n>-save-dev</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=playwright框架配置>playwright框架配置</h3><p>在 <code>playwright.config.ts</code> 文件中配置框架本身的测试发现目录和测试脚本，加载环境变量以及浏览器类型，执行策略等基础配置</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>defineConfig</span><span class=p>,</span> <span class=nx>devices</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;@playwright/test&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>dotenv</span> <span class=kr>from</span> <span class=s2>&#34;dotenv&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/* 通过dotenv从.env文件中加载环境变量 */</span>
</span></span><span class=line><span class=cl><span class=nx>dotenv</span><span class=p>.</span><span class=nx>config</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineConfig</span><span class=p>({</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>testDir</span><span class=o>:</span> <span class=s2>&#34;./e2e&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>testMatch</span><span class=o>:</span> <span class=s2>&#34;**/*.spec.ts&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>timeout</span>: <span class=kt>10</span> <span class=o>*</span> <span class=mi>60</span> <span class=o>*</span> <span class=mi>1000</span><span class=p>,</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=cm>/* Run tests in files in parallel */</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>fullyParallel</span>: <span class=kt>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=cm>/* Fail the build on CI if you accidentally left test.only in the source code. */</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>forbidOnly</span>: <span class=kt>Boolean</span><span class=p>(</span><span class=nx>process</span><span class=p>.</span><span class=nx>env</span><span class=p>.</span><span class=nx>CI</span><span class=p>),</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=cm>/* Retry on CI only */</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>retries</span>: <span class=kt>process.env.CI</span> <span class=o>?</span> <span class=nx>2</span> : <span class=kt>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=cm>/* Opt out of parallel tests on CI. */</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>workers</span>: <span class=kt>process.env.CI</span> <span class=o>?</span> <span class=nx>1</span> : <span class=kt>undefined</span><span class=p>,</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=cm>/* Reporter to use. See https://playwright.dev/docs/test-reporters */</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>reporter</span><span class=o>:</span> <span class=p>[[</span><span class=s2>&#34;line&#34;</span><span class=p>],</span> <span class=p>[</span><span class=s2>&#34;@midscene/web/playwright-report&#34;</span><span class=p>]],</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=cm>/* Shared settings for all the projects below. See https://playwright.dev/docs/api/class-testoptions. */</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>use</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/* Base URL to use in actions like `await page.goto(&#39;/&#39;)`. */</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// baseURL: &#39;http://127.0.0.1:3000&#39;,
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/* Collect trace when retrying the failed test. See https://playwright.dev/docs/trace-viewer */</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>trace</span><span class=o>:</span> <span class=s2>&#34;on-first-retry&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=cm>/* Configure projects for major browsers */</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>projects</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;chromium&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=nx>use</span><span class=o>:</span> <span class=p>{</span> <span class=p>...</span><span class=nx>devices</span><span class=p>[</span><span class=s2>&#34;Desktop Chrome&#34;</span><span class=p>]</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=p>],</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=测试脚本>测试脚本</h3><p>通过单独的fixture脚本引入Midscene库</p><p>fixture.ts</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>test</span> <span class=kr>as</span> <span class=nx>base</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;@playwright/test&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=kr>type</span> <span class=p>{</span> <span class=nx>PlayWrightAiFixtureType</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;@midscene/web/playwright&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>PlaywrightAiFixture</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;@midscene/web/playwright&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>test</span> <span class=o>=</span> <span class=nx>base</span><span class=p>.</span><span class=nx>extend</span><span class=p>&lt;</span><span class=nt>PlayWrightAiFixtureType</span><span class=p>&gt;(</span><span class=nx>PlaywrightAiFixture</span><span class=p>({</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>waitForNetworkIdleTimeout</span>: <span class=kt>10000</span><span class=p>,</span> <span class=c1>// 可选, 交互过程中等待网络空闲的超时时间, 默认值为 2000ms, 设置为 0 则禁用超时
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=p>}));</span>
</span></span></code></pre></td></tr></table></div></div><p>编写脚本测试 <code>https://todomvc.com/</code> 待办清单示例项目，通过 <code>.ai</code>、<code>.aiTap</code>、 <code>.aiQuery</code>、<code>.aiAssert</code>等API方法，对应前面说到的四种典型操作。</p><p>todo_spec.ts</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>expect</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;@playwright/test&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>test</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;./fixture&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>test</span><span class=p>.</span><span class=nx>beforeEach</span><span class=p>(</span><span class=kr>async</span> <span class=p>({</span> <span class=nx>page</span> <span class=p>})</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>await</span> <span class=nx>page</span><span class=p>.</span><span class=kr>goto</span><span class=p>(</span><span class=s2>&#34;https://todomvc.com/examples/react/dist/&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>test</span><span class=p>(</span><span class=s2>&#34;ai todo - Chinese Prompt&#34;</span><span class=p>,</span> <span class=kr>async</span> <span class=p>({</span> <span class=nx>ai</span><span class=p>,</span> <span class=nx>aiQuery</span><span class=p>,</span> <span class=nx>aiAssert</span><span class=p>,</span> <span class=nx>aiTap</span> <span class=p>})</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// .ai - 通用 AI 操作方法
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>  <span class=k>await</span> <span class=nx>ai</span><span class=p>(</span><span class=s2>&#34;在任务框 input 输入 今天学习 Playwright，按回车键&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>await</span> <span class=nx>ai</span><span class=p>(</span><span class=s2>&#34;在任务框 input 输入 明天学习 js脚本，按回车键&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>await</span> <span class=nx>ai</span><span class=p>(</span><span class=s2>&#34;在任务框 input 输入 后天学习 AI测试，按回车键&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>await</span> <span class=nx>ai</span><span class=p>(</span><span class=s2>&#34;将鼠标移动到任务列表中的第二项&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>await</span> <span class=nx>aiTap</span><span class=p>(</span><span class=s2>&#34;第二项任务右边的删除按钮&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// .aiTap - 指定操作类型
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>  <span class=k>await</span> <span class=nx>aiTap</span><span class=p>(</span><span class=s2>&#34;第二条任务左边的勾选按钮&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>await</span> <span class=nx>aiTap</span><span class=p>(</span><span class=s2>&#34;任务列表下面的 completed 状态按钮&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl> <span class=c1>// .aiQuery - 页面信息提取操作
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>list</span> <span class=o>=</span> <span class=k>await</span> <span class=nx>aiQuery</span><span class=p>(</span><span class=s2>&#34;string[], 完整的任务列表&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>expect</span><span class=p>(</span><span class=nx>list</span><span class=p>.</span><span class=nx>length</span><span class=p>).</span><span class=nx>toEqual</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// .aiAssert - 断言操作
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>  <span class=k>await</span> <span class=nx>aiAssert</span><span class=p>(</span><span class=s1>&#39;列表下方有一个区域显示有 &#34;1 item left&#34;&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><p>执行脚本：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=n>npx</span> <span class=n>playwright</span> <span class=n>test</span> <span class=p>-</span><span class=n>-headed</span>
</span></span></code></pre></td></tr></table></div></div><p>执行过程可以参见我录制的视频</p><p>【】</p><h3 id=可视化结果报告>可视化结果报告</h3><p>报告是Midscene的一大亮点，通过这个报告可以回看整个执行过程，并详细显示AI的空间判断过程和具体操作细节，便于调试和优化脚本。</p><p><img src=/post/099-midscene.js%E7%9A%84%E4%BD%BF%E7%94%A8/snap_20250520-1.png width=1920 height=899 srcset="/post/099-midscene.js%E7%9A%84%E4%BD%BF%E7%94%A8/snap_20250520-1_hu_8c25d4e74876b37c.png 480w, /post/099-midscene.js%E7%9A%84%E4%BD%BF%E7%94%A8/snap_20250520-1_hu_f9ca92c1327f521.png 1024w" loading=lazy class=gallery-image data-flex-grow=213 data-flex-basis=512px></p><h2 id=yaml文件驱动>YAML文件驱动</h2><p>除了通过测试框架脚本的集成方法，Midscene也支持直接通过YAML文件编写测试脚本，实现无代码的脚本驱动，类似于传统自动化的关键字驱动方式。</p><p>这种方式，本质上其实还是将对应关键转化为 Midscene 支持的相关API来进行驱动。</p><p>类似如下的格式， 操作天气网站：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-YAML data-lang=YAML><span class=line><span class=cl><span class=nt>web</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>https://www.bing.com</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>tasks</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>搜索天气</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>flow</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>ai</span><span class=p>:</span><span class=w> </span><span class=l>搜索 &#34;今日天气&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>sleep</span><span class=p>:</span><span class=w> </span><span class=m>3000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>检查结果</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>flow</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>aiAssert</span><span class=p>:</span><span class=w> </span><span class=l>结果中展示了天气信息</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>运行yaml格式脚本，需要安装Midscene的命令行支持</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=n>npm</span> <span class=n>install</span> <span class=nv>@midscene</span><span class=p>/</span><span class=nb>cli </span><span class=p>-</span><span class=n>-save-dev</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># 执行</span>
</span></span><span class=line><span class=cl><span class=n>npx</span> <span class=n>midscene</span> <span class=p>./</span><span class=n>weather</span><span class=p>.</span><span class=py>yaml</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=mcp方式>MCP方式</h2><p>除了上述方式之外，Midscene也提供了作为本地MCP server方式。这种方式，其实是将MidScene的Chrome插件作为本地能力封装到MCP中，再通过大模型结合mcp server的方式完成浏览器驱动。</p><p>关于 mcp server的介绍和使用，可以参考我之前的相关文章 【】</p><p>mcp server 配置：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;mcpServers&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;mcp-midscene&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;command&#34;</span><span class=p>:</span> <span class=s2>&#34;npx&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;args&#34;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&#34;-y&#34;</span><span class=p>,</span> <span class=s2>&#34;@midscene/mcp&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;env&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;MIDSCENE_MODEL_NAME&#34;</span><span class=p>:</span> <span class=s2>&#34;REPLACE_WITH_YOUR_MODEL_NAME&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;OPENAI_API_KEY&#34;</span><span class=p>:</span> <span class=s2>&#34;REPLACE_WITH_YOUR_OPENAI_API_KEY&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;MCP_SERVER_REQUEST_TIMEOUT&#34;</span><span class=p>:</span> <span class=s2>&#34;800000&#34;</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=当前版本的局限>当前版本的局限</h2><p>虽然Midsence工具已经展现出不俗的潜力，目前也还在持续更新和迭代中，但在实用上还是具有不少缺陷，主要表现在：</p><ul><li><strong>交互类型有限</strong>：目前仅支持点击、拖拽(只在 UI-TARS 模型中支持)、输入、键盘和滚动操作。</li><li><strong>稳定性风险</strong>：AI 模型的返回值不能保证 100% 准确。对提示词的编写要求较高</li><li><strong>元素识别能力</strong>：部分大模型在元素识别上的能力不太好，比如iframe、canvas等元素的交互。而且对于Chrome的原生控件如弹出提示、右键菜单等还不能支持。</li><li><strong>成本较高</strong>：基于视觉识别方式，对Token的消耗比较可观，如果使用付费大模型，成本比较高昂。</li></ul><p>但瑕不掩瑜，Midscene在UI自动化测试借助AI能力的提升上，已经迈出了坚实的一步！后续我们还会持续关注其进一步发展！</p><hr><h3 id=参考阅读>参考阅读：</h3><p>【】
【】</p><p>进群，大纲</p></section><footer class=article-footer><section class=article-tags><a href=/tags/ai/>AI</a>
<a href=/tags/ai%E6%B5%8B%E8%AF%95/>AI测试</a></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>相关文章</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/post/097-magenticui%E8%AF%84%E6%B5%8B/><div class=article-image><img src=/post/097-magenticui%E8%AF%84%E6%B5%8B/magentic_logo.89c9ac9baf27133ab4e9b1f5cd22cc14_hu_b5d0e7b3475881b.png width=250 height=150 loading=lazy alt="Featured image of post 微软重磅发布Magentic UI，交互式AI Agent助手实测！" data-hash="md5-icmsm68nEzq06bH1zSLMFA=="></div><div class=article-details><h2 class=article-title>微软重磅发布Magentic UI，交互式AI Agent助手实测！</h2></div></a></article><article><a href=/post/098-mem0/><div class=article-details><h2 class=article-title>mem0，让AI拥有记忆，打造个性化助手的基石</h2></div></a></article><article class=has-image><a href=/post/094-deepseek%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2/><div class=article-image><img src=/post/094-deepseek%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2/snap_20250419-3.3e0dee2109304898693578bffad71b4a_hu_3baa44b2948b6c17.png width=250 height=150 loading=lazy alt="Featured image of post 打造个人知识库，wsl+ollama部署deepseek与vscode集成" data-hash="md5-Pg3uIQkwSJhpNXi/+tcbSg=="></div><div class=article-details><h2 class=article-title>打造个人知识库，wsl+ollama部署deepseek与vscode集成</h2></div></a></article><article class=has-image><a href=/post/093-cursor%E7%9A%8412rules/><div class=article-image><img src=/post/093-cursor%E7%9A%8412rules/cursor.c2d80e1e9fe3ba4853f358a91a07b7dc_hu_9745a1f984ae1e58.png width=250 height=150 loading=lazy alt="Featured image of post 测试开发如何善用Cursor？" data-hash="md5-wtgOHp/jukhT81ipGge33A=="></div><div class=article-details><h2 class=article-title>测试开发如何善用Cursor？</h2></div></a></article><article><a href=/post/092-codebuddy/><div class=article-details><h2 class=article-title>Cursor收费？没事，咱们还有codebuddy！</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2023 -
2025 |by 城下秋草（公众号： 秋草说测试）</section><section class=powerby>使用 <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> 构建<br>主题 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.30.0>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 设计</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>
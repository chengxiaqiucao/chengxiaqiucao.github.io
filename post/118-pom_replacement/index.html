<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="POM是UI自动化的最佳实践吗？"><title>UI自动化，POM之外的另一模式</title><link rel=canonical href=https://chengxiaqiucao.github.io/post/118-pom_replacement/><link rel=stylesheet href=/scss/style.min.d6334826c849a420a2748e4872b915ae516105f86c3993d9bad2032725f784b8.css><meta property='og:title' content="UI自动化，POM之外的另一模式"><meta property='og:description' content="POM是UI自动化的最佳实践吗？"><meta property='og:url' content='https://chengxiaqiucao.github.io/post/118-pom_replacement/'><meta property='og:site_name' content='秋 草 观 “测” 台'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='自动化测试'><meta property='article:tag' content='测试工具'><meta property='article:published_time' content='2025-08-06T21:58:13+08:00'><meta property='article:modified_time' content='2025-08-06T21:58:13+08:00'><meta property='og:image' content='https://chengxiaqiucao.github.io/post/118-pom_replacement/Pasted-20250806.png'><meta name=twitter:title content="UI自动化，POM之外的另一模式"><meta name=twitter:description content="POM是UI自动化的最佳实践吗？"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://chengxiaqiucao.github.io/post/118-pom_replacement/Pasted-20250806.png'></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/automnGrass_hu_5e44a092fd905642.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>秋 草 观 “测” 台</a></h1><h2 class=site-description>Testing is not just checking...</h2></div></header><ol class=menu-social><li><a href=https://github.com/chengxiaqiucao target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://space.bilibili.com/472272606 target=_blank title=Bilibili rel=me><!doctype html><svg t="1750732982440" class="icon" viewBox="0 0 1024 1024" p-id="4593" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M306.005333 117.632 444.330667 256h135.296l138.368-138.325333A42.666667 42.666667.0 01778.368 178.048L700.330667 256H789.333333A149.333333 149.333333.0 01938.666667 405.333333v341.333334A149.333333 149.333333.0 01789.333333 896H234.666667A149.333333 149.333333.0 0185.333333 746.666667V405.333333A149.333333 149.333333.0 01234.666667 256h88.96L245.632 177.962667a42.666667 42.666667.0 0160.373333-60.373334zm483.328 223.701333H234.666667a64 64 0 00-63.701334 57.856L170.666667 405.333333v341.333334a64 64 0 0057.856 63.701333L234.666667 810.666667h554.666666a64 64 0 0063.701334-57.856L853.333333 746.666667V405.333333a64 64 0 00-64-64zm-448 128A42.666667 42.666667.0 01384 512v85.333333a42.666667 42.666667.0 01-85.333333.0V512a42.666667 42.666667.0 0142.666666-42.666667zm341.333334.0A42.666667 42.666667.0 01725.333333 512v85.333333a42.666667 42.666667.0 01-85.333333.0V512a42.666667 42.666667.0 0142.666667-42.666667z" p-id="4594" fill="#8a8a8a"/></svg></a></li><li><a href=https://www.zhihu.com/people/qiucao target=_blank title=zhihu rel=me><!doctype html><svg t="1750733049138" class="icon" viewBox="0 0 1024 1024" p-id="5820" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M570.581333 806.272h61.952L652.928 876.117333 764.074667 806.272h130.986666V230.186667h-324.48V806.272zM636.501333 292.693333h192.64V743.68h-73.898666l-73.813334 46.378667L668.032 743.808l-31.530667-.128V292.736zM515.754667 493.738667H377.429333a2999.466667 2999.466667.0 005.802667-194.56h135.338667S523.776 239.445334 495.872 240.128H261.76c9.216-34.730667 20.821333-70.613333 34.688-107.690667.0.0-63.701333.0-85.333333 57.130667C202.112 213.12 176.128 303.786667 129.877333 396.416c15.573333-1.706667 67.114667-3.114667 97.450667-58.794667 5.589333-15.616 6.656-17.621333 13.568-38.485333h76.373333c0 27.776-3.157333 177.109333-4.437333 194.474667h-138.24c-31.104.0-41.173333 62.549333-41.173333 62.549333h173.482666C295.253333 688.256 232.789333 799.573333 119.466667 887.466667c54.186667 15.488 108.202667-2.432 134.912-26.197334.0.0 60.8-55.338667 94.122666-183.381333L491.264 849.834667s20.906667-71.168-3.285333-105.856c-20.053333-23.637333-74.24-87.552-97.322667-110.72l-38.698667 30.72c11.52-36.992 18.474667-72.96 20.821334-107.690667h163.072s-.213333-62.549333-20.053334-62.549333z" p-id="5821" fill="#8a8a8a"/></svg></a></li><li><a href=mailto:%20danmyw@qq.com target=_blank title=e-mail rel=me><!doctype html><svg t="1750733089669" class="icon" viewBox="0 0 1451 1024" p-id="6983" xmlns:xlink="http://www.w3.org/1999/xlink" width="283.3984375" height="200"><path d="M664.781909 681.472759.0 97.881301C0 3.997201 71.046997.0 71.046997.0H474.477909 961.649408h399.992405s71.046998 3.997201 71.046998 97.881301L771.345323 681.472759S764.482731 685.154773 753.594283 688.65053V688.664858C741.602731 693.493018 729.424896 695.068979 718.077952 694.839748 706.731093 695.068979 694.553173 693.493018 682.561621 688.664858V688.65053C671.644501 685.140446 664.781909 681.472759 664.781909 681.472759zm53.281707 130.131124C693.779541 811.016482 658.879232 802.205449 619.10784 767.734955 542.989056 701.759633.0 212.052267.0 212.052267V942.809523S0 1024 83.726336 1024H682.532949 753.579947h595.368192C1432.688811 1024 1432.688811 942.809523 1432.688811 942.809523V212.052267S893.138176 701.759633 817.019477 767.734955c-39.771477 34.470494-74.671786 43.295855-98.955861 43.868928z" fill="#8a8a8a" p-id="6984"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>主页</span></a></li><li><a href=/page/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>检索</span></a></li><li><a href=/page/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>链接</span></a></li><li><a href=/page/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>关于</span></a></li><li><a href=/page/releases/><svg class="icon icon-tabler icon-tabler-infinity" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M9.828 9.172a4 4 0 100 5.656A10 10 0 0012 12a10 10 0 012.172-2.828 4 4 0 110 5.656A10 10 0 0112 12 10 10 0 009.828 9.172"/></svg>
<span>热门开源</span></a></li><li class=menu-bottom-section><ol class=menu><li id=i18n-switch><svg class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg>
<select name=language title=language onchange="window.location.href=this.selectedOptions[0].value"><option value=https://chengxiaqiucao.github.io/en/>English</option><option value=https://chengxiaqiucao.github.io/ selected>中文</option></select></li><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>暗色模式</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#引言>引言</a></li><li><a href=#关于pom>关于POM</a></li><li><a href=#pom问题>POM问题</a><ol><li><a href=#隐藏状态和紧密耦合>隐藏状态和紧密耦合</a></li><li><a href=#分散的用户逻辑>分散的用户逻辑</a></li><li><a href=#僵化和膨胀>僵化和膨胀</a></li></ol></li><li><a href=#替代方案函数式模型可组合的工作流>替代方案：函数式模型，可组合的工作流</a><ol><li><a href=#第一步分离数据定位器>第一步：分离数据（定位器）</a></li><li><a href=#第二步编写无状态交互函数>第二步：编写无状态交互函数</a></li><li><a href=#第三步以声明方式组合用户工作流>第三步：以声明方式组合用户工作流</a></li></ol></li><li><a href=#为什么推荐这种方法>为什么推荐这种方法</a><ol><li><a href=#真正的可组合性>真正的可组合性</a></li><li><a href=#改进的清晰度>改进的清晰度</a></li><li><a href=#集中化维护>集中化维护</a></li><li><a href=#测试的范式转变>测试的范式转变</a></li><li><a href=#核心要点>核心要点</a></li><li><a href=#结论迈向更自然的测试方式>结论：迈向更自然的测试方式</a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/post/118-pom_replacement/><img src=/post/118-pom_replacement/Pasted-20250806_hu_d57412e470c850b1.png srcset="/post/118-pom_replacement/Pasted-20250806_hu_d57412e470c850b1.png 800w, /post/118-pom_replacement/Pasted-20250806_hu_10495f3a2d5872da.png 1600w" width=800 height=425 loading=lazy alt="Featured image of post UI自动化，POM之外的另一模式"></a></div><div class=article-details><header class=article-category><a href=/categories/%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7/ style=background-color:#c6fad2;color:#000>测试工具</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/post/118-pom_replacement/>UI自动化，POM之外的另一模式</a></h2><h3 class=article-subtitle>POM是UI自动化的最佳实践吗？</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Aug 06, 2025</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>阅读时长: 5 分钟</time></div></footer></div></header><section class=article-content><p><img src=/post/118-pom_replacement/Pasted-20250806.png width=1056 height=561 srcset="/post/118-pom_replacement/Pasted-20250806_hu_af4f10514fb46fdd.png 480w, /post/118-pom_replacement/Pasted-20250806_hu_911267767b3930ef.png 1024w" loading=lazy class=gallery-image data-flex-grow=188 data-flex-basis=451px></p><h2 id=引言>引言</h2><p>在UI测试自动化领域，页面对象模型（Page Object Model，POM）几乎已经是行业标准。它被广泛认为是UI自动化测试领域的最佳实践，对于提高可维护性和可扩展性，几乎是不二之选。</p><p>笔者在实际工作中，组织搭建过的UI自动化框架虽然大部分也是遵循了个这个模型，但隐隐也确实觉得这个更多是个开发实践而不是应用实践。是OOP(面向对象)思想在自动化测试实施种的体现。</p><p>现偶然看到一篇国外博主的 <code>Shubham Sharma</code> 的文章 《Beyond the Page Object Model-A Functional Approach to Test Automation》，对POM模型进行了思考，并提出了一个函数化方法模型。（文末阅读原文可跳转原文）</p><p>虽然不知具体实践成效如何，但兼听则明，开拓下思路总是没错的。</p><p>以下基于原博文内容翻译整理而来（help by Gemini）</p><h2 id=关于pom>关于POM</h2><p>POM的核心思想是<strong>将页面元素和浏览器交互封装到整洁、可重用的对象中。</strong></p><p>它的方法很简单：为每个页面或组件创建一个类，包含定位器（locators）和操作这些元素的方法。</p><p>虽然POM相比那些充满硬编码元素的脆弱脚本是一个进步，但它本质上也是一个<strong>有缺陷的抽象</strong>。它将面向对象原则应用到一个本质上过程化和行为驱动的问题领域，导致测试套件难以理解、与状态紧密耦合且扩展困难。</p><h2 id=pom问题>POM问题</h2><p>以一个典型的登录流程POM实现为例：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>class</span> <span class=nx>LoginPage</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>constructor</span><span class=p>(</span><span class=nx>driver</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>driver</span> <span class=o>=</span> <span class=nx>driver</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>usernameField</span> <span class=o>=</span> <span class=s1>&#39;#username&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>passwordField</span> <span class=o>=</span> <span class=s1>&#39;#password&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>loginButton</span> <span class=o>=</span> <span class=s1>&#39;#login-btn&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>async</span> <span class=nx>enterUsername</span><span class=p>(</span><span class=nx>username</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>driver</span><span class=p>.</span><span class=nx>locator</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>usernameField</span><span class=p>).</span><span class=nx>fill</span><span class=p>(</span><span class=nx>username</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>async</span> <span class=nx>enterPassword</span><span class=p>(</span><span class=nx>password</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>driver</span><span class=p>.</span><span class=nx>locator</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>passwordField</span><span class=p>).</span><span class=nx>fill</span><span class=p>(</span><span class=nx>password</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>async</span> <span class=nx>clickLogin</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>driver</span><span class=p>.</span><span class=nx>locator</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>loginButton</span><span class=p>).</span><span class=nx>click</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>async</span> <span class=nx>loginAs</span><span class=p>(</span><span class=nx>username</span><span class=p>,</span> <span class=nx>password</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>enterUsername</span><span class=p>(</span><span class=nx>username</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>enterPassword</span><span class=p>(</span><span class=nx>password</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>clickLogin</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>在测试中的使用：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>test</span><span class=p>(</span><span class=s1>&#39;user can log in&#39;</span><span class=p>,</span> <span class=kr>async</span> <span class=p>({</span> <span class=nx>page</span> <span class=p>})</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>loginPage</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>LoginPage</span><span class=p>(</span><span class=nx>page</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=kr>await</span> <span class=nx>loginPage</span><span class=p>.</span><span class=nx>loginAs</span><span class=p>(</span><span class=s1>&#39;testuser&#39;</span><span class=p>,</span> <span class=s1>&#39;password123&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><p>乍一看，这看起来很整洁。但在表面之下，它引入了几个严重问题：</p><h3 id=隐藏状态和紧密耦合>隐藏状态和紧密耦合</h3><p>对象存储了对驱动程序（<code>page</code>）的引用，创建了隐式依赖。这使得页面类无法独立测试，并将其行为和浏览器的运行时状态进行了锁定。</p><h3 id=分散的用户逻辑>分散的用户逻辑</h3><p>像"<strong>登录、进入设置、更改密码</strong>" 这样的用户旅程变成了跨多个页面对象的方法调用链。工作流被分割——而不是一个连贯的、可测试的单元。</p><h3 id=僵化和膨胀>僵化和膨胀</h3><p>一些新的流程（如SSO登录），则被迫添加更多方法（违反单一职责原则）或创建新类（导致重复）。随着时间的推移，你的页面对象要么膨胀，要么分裂。</p><p>POM将<strong>页面</strong>作为抽象单位。但页面只是背景。</p><p><strong>真正重要的是用户操作。</strong></p><h2 id=替代方案函数式模型可组合的工作流>替代方案：函数式模型，可组合的工作流</h2><p>函数式模型颠覆了这一脚本。它将<strong>用户行为</strong>，而非UI结构作为主要抽象。</p><h3 id=第一步分离数据定位器>第一步：分离数据（定位器）</h3><p>将选择器保持为普通的、不可变的数据——没有方法，没有状态：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>LoginPageLocators</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>usernameField</span><span class=o>:</span> <span class=s1>&#39;#username&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>passwordField</span><span class=o>:</span> <span class=s1>&#39;#password&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>loginButton</span><span class=o>:</span> <span class=s1>&#39;#login-btn&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=第二步编写无状态交互函数>第二步：编写无状态交互函数</h3><p>不要将方法绑定到类，而是编写可重用的无状态函数：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>export</span> <span class=kr>async</span> <span class=kd>function</span> <span class=nx>fillField</span><span class=p>(</span><span class=nx>page</span><span class=p>,</span> <span class=nx>locator</span><span class=p>,</span> <span class=nx>text</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>await</span> <span class=nx>page</span><span class=p>.</span><span class=nx>locator</span><span class=p>(</span><span class=nx>locator</span><span class=p>).</span><span class=nx>fill</span><span class=p>(</span><span class=nx>text</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>async</span> <span class=kd>function</span> <span class=nx>clickElement</span><span class=p>(</span><span class=nx>page</span><span class=p>,</span> <span class=nx>locator</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>await</span> <span class=nx>page</span><span class=p>.</span><span class=nx>locator</span><span class=p>(</span><span class=nx>locator</span><span class=p>).</span><span class=nx>click</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>这些可以在整个应用中重用，易于独立测试，并且可以集中改进（例如添加重试、等待、日志记录）。</p><h3 id=第三步以声明方式组合用户工作流>第三步：以声明方式组合用户工作流</h3><p>将真正的用户旅程构建为一等函数：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>export</span> <span class=kd>function</span> <span class=nx>login</span><span class=p>(</span><span class=nx>page</span><span class=p>,</span> <span class=nx>credentials</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=kr>async</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>await</span> <span class=nx>fillField</span><span class=p>(</span><span class=nx>page</span><span class=p>,</span> <span class=nx>LoginPageLocators</span><span class=p>.</span><span class=nx>usernameField</span><span class=p>,</span> <span class=nx>credentials</span><span class=p>.</span><span class=nx>username</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kr>await</span> <span class=nx>fillField</span><span class=p>(</span><span class=nx>page</span><span class=p>,</span> <span class=nx>LoginPageLocators</span><span class=p>.</span><span class=nx>passwordField</span><span class=p>,</span> <span class=nx>credentials</span><span class=p>.</span><span class=nx>password</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kr>await</span> <span class=nx>clickElement</span><span class=p>(</span><span class=nx>page</span><span class=p>,</span> <span class=nx>LoginPageLocators</span><span class=p>.</span><span class=nx>loginButton</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>现在你的测试读起来就像一个故事：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>test</span><span class=p>(</span><span class=s1>&#39;user can log in&#39;</span><span class=p>,</span> <span class=kr>async</span> <span class=p>({</span> <span class=nx>page</span> <span class=p>})</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>credentials</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>username</span><span class=o>:</span> <span class=s1>&#39;admin&#39;</span><span class=p>,</span> <span class=nx>password</span><span class=o>:</span> <span class=s1>&#39;securePassword&#39;</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>  <span class=kr>await</span> <span class=nx>login</span><span class=p>(</span><span class=nx>page</span><span class=p>,</span> <span class=nx>credentials</span><span class=p>)();</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=为什么推荐这种方法>为什么推荐这种方法</h2><h3 id=真正的可组合性>真正的可组合性</h3><p>你不仅仅是在调用方法，而是在构建工作流。<code>login()</code>函数可以组合到<code>changePassword()</code>工作流中，或者与导航步骤结合。函数成为有意义的可测试单元。</p><h3 id=改进的清晰度>改进的清晰度</h3><p>测试不再是逐步执行UI操作的命令式脚本。相反，它们成为用户意图的声明式管道，更易于阅读、编写和理解。</p><h3 id=集中化维护>集中化维护</h3><p>修复不稳定的选择器或改进点击行为发生在<strong>一个地方</strong>，并传播到所有地方。不再需要在分散在文件中的类方法中寻找。</p><h3 id=测试的范式转变>测试的范式转变</h3><p>页面对象模型反映了一个遗留范式：面向对象编程，其中所有事物都被建模为具有状态和行为的"事物"。但UI测试不是关于<strong>事物</strong>，而是关于<strong>流程</strong>。</p><p>通过拥抱函数式思维，我们将测试建模为<strong>用户行为的可组合管道</strong>，而不是僵化的对象。这些工作流具有以下特点：</p><ul><li><strong>无状态</strong></li><li><strong>隔离</strong></li><li><strong>声明式</strong></li><li><strong>易于测试</strong></li><li><strong>易于更改</strong></li><li><strong>易于组合</strong></li></ul><h3 id=核心要点>核心要点</h3><p>停止问：<strong>&ldquo;我这里需要什么页面对象？&rdquo;</strong></p><p>开始问：<strong>&ldquo;我想要描述的用户工作流是什么？&rdquo;</strong></p><p>答案将引导你构建一个<strong>更简单</strong>、<strong>更清洁</strong>、<strong>更接近真实用户体验</strong>的测试套件，它不是建立在继承和隐藏状态之上，而是建立在纯函数和可组合流程之上。这不仅仅是一种编码风格，它是测试的更好心智模型。</p><h3 id=结论迈向更自然的测试方式>结论：迈向更自然的测试方式</h3><p>页面对象模型曾经是UI测试自动化的重要进步，但随着测试复杂度的增加和软件开发理念的发展，它的局限性日益明显。函数式方法为我们提供了一个更自然、更灵活的替代方案。</p><p>通过将关注点从页面结构转向用户行为，从对象状态转向工作流程，我们能够创建更贴近真实用户体验的测试。这种方法不仅提高了代码的可维护性和可读性，更重要的是，它改变了我们对测试本质的理解。</p><p>在快速变化的软件开发现代中，我们需要能够适应变化的测试策略。函数式测试方法正是这样一种策略——它灵活、可组合、易于维护，能够随着应用的发展而演进。</p></section><footer class=article-footer><section class=article-tags><a href=/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/>自动化测试</a>
<a href=/tags/%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7/>测试工具</a></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>相关文章</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/post/066-playwright%E6%96%B0%E7%89%88%E6%9C%AC%E7%AD%9B%E9%80%89%E5%8A%9F%E8%83%BD/><div class=article-image><img src=/post/066-playwright%E6%96%B0%E7%89%88%E6%9C%AC%E7%AD%9B%E9%80%89%E5%8A%9F%E8%83%BD/playwright_logo.82386a35c48e32d43f12199ac6a46a38_hu_d1321ae71a371e02.png width=250 height=150 loading=lazy alt="Featured image of post Playwright新版本筛选功能" data-hash="md5-gjhqNcSOMtQ/EhmaxqRqOA=="></div><div class=article-details><h2 class=article-title>Playwright新版本筛选功能</h2></div></a></article><article class=has-image><a href=/post/050-%E8%87%AA%E5%8A%A8%E5%8C%96%E5%A5%BD%E5%B8%AE%E6%89%8B_chrome%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E5%BD%95%E5%88%B6%E5%99%A8/><div class=article-image><img src=/post/050-%E8%87%AA%E5%8A%A8%E5%8C%96%E5%A5%BD%E5%B8%AE%E6%89%8B_chrome%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E5%BD%95%E5%88%B6%E5%99%A8/Pasted-20250218.0dd60658485e8eafdb0468e39a43eacd_hu_88f92bd342ae392e.png width=250 height=150 loading=lazy alt="Featured image of post 自动化好帮手_chrome浏览器的录制器" data-hash="md5-DdYGWEhejq/bBGjjmkPqzQ=="></div><div class=article-details><h2 class=article-title>自动化好帮手_chrome浏览器的录制器</h2></div></a></article><article class=has-image><a href=/post/120-autotestdata/><div class=article-image><img src=/post/120-autotestdata/title.665ed01cdeaf3ce986fb754c231a1e3e_hu_7de74c14e491bf75.png width=250 height=150 loading=lazy alt="Featured image of post 推荐一个用于页面探索测试的数据辅助工具" data-hash="md5-Zl7QHN6vPOmG+3VMIxoePg=="></div><div class=article-details><h2 class=article-title>推荐一个用于页面探索测试的数据辅助工具</h2></div></a></article><article class=has-image><a href=/post/117-loguru/><div class=article-image><img src=/post/117-loguru/Pasted-20250801-2.8ee8f59ebe8d6f3ddb34358b188b5887_hu_bf4eba15896e332.png width=250 height=150 loading=lazy alt="Featured image of post python日志的新姿势，Loguru库的应用" data-hash="md5-juj1nr6Nbz3bNDWLGItYhw=="></div><div class=article-details><h2 class=article-title>python日志的新姿势，Loguru库的应用</h2></div></a></article><article class=has-image><a href=/post/022-pytest%E7%9A%84hook%E6%9C%BA%E5%88%B6%E5%8F%8A%E7%94%A8%E9%80%94/><div class=article-image><img src=/post/022-pytest%E7%9A%84hook%E6%9C%BA%E5%88%B6%E5%8F%8A%E7%94%A8%E9%80%94/Pasted-20250721-2.0d9ba897ea0011af29e3e9f32a6d5e83_hu_9e7f8a132ec29530.png width=250 height=150 loading=lazy alt="Featured image of post 本地定制Pytest插件及发布指南" data-hash="md5-DZuol+oAEa8p4+nzKm1egw=="></div><div class=article-details><h2 class=article-title>本地定制Pytest插件及发布指南</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2023 -
2025 |by 城下秋草（公众号： 秋草说测试）</section><section class=powerby>使用 <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> 构建<br>主题 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.30.0>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 设计</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>